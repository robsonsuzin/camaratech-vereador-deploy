import{c as Fe,e as wt,O as sa,i as St,P as na,h as v,aF as ia,B as Je,y as K,a1 as D,aG as oa,aH as Rt,F as it,_ as Re,R as h,S as G,U as F,Y as a,ab as U,V as I,Z as T,X as Pe,a3 as P,a5 as N,a4 as fe,aI as xe,aJ as Ie,W as Ne,Q as tt,A as at,T as zt,aK as la,az as Ct,a as Tt,g as Pt,r as ee,aL as Lt,m as Et,w as ve,aM as Mt,ac as It,$ as je,aN as Be,z as yt,d as rt,u as $e,ae as Le,ad as Se,a8 as ae,aj as ut,ag as A,a0 as ye,f as ra,l as ua,aO as Ft,a7 as dt,a2 as da,a6 as ca,G as ge,aP as Dt,aQ as _t,H as Ke,aR as jt,N as va,aS as ga,aT as fa,j as gt,k as kt,ah as Ve,aB as ma,aC as ha,ao as pa,J as ba,ar as Nt,ak as wa,aU as Ot,aV as Qe,aW as Ue}from"./index.29d33a22.js";import{Q as Sa}from"./QPage.26f81087.js";import{u as Ge}from"./socket.c774215e.js";import{f as ya,h as Ye,g as We,Q as ot,e as _a}from"./QList.c54fe071.js";import{Q as Ae}from"./QBanner.c0fd243c.js";import{Q as Bt}from"./QResizeObserver.23e3fe84.js";const xa={xs:8,sm:10,md:14,lg:20,xl:24};var xt=Fe({name:"QChip",props:{...wt,...sa,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Je(),t=St(e,n),d=na(e,xa),l=v(()=>e.selected===!0||e.icon!==void 0),r=v(()=>e.selected===!0?e.iconSelected||n.iconSet.chip.selected:e.icon),c=v(()=>e.iconRemove||n.iconSet.chip.remove),C=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),k=v(()=>{const S=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(S?` text-${S} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(C.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),R=v(()=>{const S=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},E={...S,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove};return{chip:S,remove:E}});function w(S){S.keyCode===13&&g(S)}function g(S){e.disable||(s("update:selected",!e.selected),s("click",S))}function o(S){(S.keyCode===void 0||S.keyCode===13)&&(it(S),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function u(){const S=[];C.value===!0&&S.push(K("div",{class:"q-focus-helper"})),l.value===!0&&S.push(K(D,{class:"q-chip__icon q-chip__icon--left",name:r.value}));const E=e.label!==void 0?[K("div",{class:"ellipsis"},[e.label])]:void 0;return S.push(K("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},oa(i.default,E))),e.iconRight&&S.push(K(D,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&S.push(K(D,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:c.value,...R.value.remove,onClick:o,onKeyup:o})),S}return()=>{if(e.modelValue===!1)return;const S={class:k.value,style:d.value};return C.value===!0&&Object.assign(S,R.value.chip,{onClick:g,onKeyup:w}),ia("div",S,u(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Rt,e.ripple]])}}});const qa={class:"tw-flex tw-items-center tw-gap-3"},$a={class:"card-icon-wrapper"},Aa={class:"card-title"},Ia={class:"session-info-compact tw-mb-3"},ka={class:"session-info-row"},Va={class:"session-info-col"},Ra={class:"session-info-value-compact"},za={class:"session-info-row"},Ca={class:"session-info-col"},Ta={class:"session-info-value-compact"},Pa={key:0,class:"session-info-col"},La={class:"session-info-value-compact"},Ea={key:1,class:"session-info-col"},Ma={class:"session-info-value-compact"},Fa={class:"tw-flex tw-items-start tw-gap-3"},Da={class:"tw-flex-1"},ja={class:"status-message-text"},Na={key:0},Oa={key:0},Ba={key:1},Qa={key:2},Ua={key:1},Ja={key:2},Ha={key:0,class:"tw-mt-3"},Wa={class:"propositions-title"},Ga={class:"proposition-count"},Ka={class:"propositions-list tw-mt-2"},Ya={class:"proposition-header"},Xa={class:"proposition-number"},Za={key:0,class:"proposition-title"},es={key:1,class:"proposition-proponents"},ts={key:0,class:"proponent-more"},as={key:1,class:"empty-propositions tw-mt-4"},ss={__name:"ScheduledSessionCard",props:{scheduledSession:{type:Object,default:null},propositions:{type:Array,default:()=>[]},isFuture:{type:Boolean,default:!1}},setup(e){const i=e;function s(){var d;return((d=i.scheduledSession)==null?void 0:d.session_status)==="closed"?"header-closed":i.isFuture?"header-future":"header-today"}function n(){var d;return((d=i.scheduledSession)==null?void 0:d.session_status)==="closed"?"banner-closed":i.isFuture?"banner-future":"banner-today"}function t(){var d;return((d=i.scheduledSession)==null?void 0:d.session_status)==="closed"?"status-avatar-closed":i.isFuture?"status-avatar-future":"status-avatar-today"}return(d,l)=>(h(),G(Ne,{class:"modern-card session-card slide-up"},{default:F(()=>[a("div",{class:U(["card-header session-header",s()])},[a("div",qa,[a("div",$a,[I(D,{name:e.scheduledSession.session_status==="closed"?"event_busy":e.isFuture?"event_available":"event",size:"24px",class:"tw-text-white"},null,8,["name"])]),a("div",Aa,T(e.scheduledSession.session_status==="closed"?"Sess\xE3o Encerrada":e.isFuture?"Pr\xF3xima Sess\xE3o Futura":"Sess\xE3o Agendada para Hoje"),1)])],2),I(Pe,{class:"tw-p-4 md:tw-p-6 session-card-section"},{default:F(()=>[a("div",Ia,[a("div",ka,[a("div",Va,[I(D,{name:"title",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Ra,T(e.scheduledSession.name||"N\xE3o informado"),1)])]),a("div",za,[a("div",Ca,[I(D,{name:"calendar_today",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Ta,T(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"N\xE3o informado"),1)]),e.scheduledSession.session_time?(h(),P("div",Pa,[I(D,{name:"schedule",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",La,T(e.scheduledSession.session_time),1)])):N("",!0),e.scheduledSession.session_type?(h(),P("div",Ea,[I(D,{name:"category",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Ma,T(e.scheduledSession.session_type),1)])):N("",!0)])]),a("div",{class:U(["session-status-banner tw-mb-4",n()])},[a("div",Fa,[a("div",{class:U(["status-avatar",t()])},[I(D,{name:e.scheduledSession.session_status==="closed"?"check_circle":e.isFuture?"calendar_today":"schedule",size:"20px"},null,8,["name"])],2),a("div",Da,[a("div",ja,[e.scheduledSession.session_status==="closed"?(h(),P("span",Na,[l[0]||(l[0]=fe(" Esta sess\xE3o j\xE1 foi encerrada ",-1)),e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date?(h(),P("span",Oa," em "+T(e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date),1)):N("",!0),e.scheduledSession.closing_time?(h(),P("span",Ba," \xE0s "+T(e.scheduledSession.closing_time),1)):N("",!0),!e.scheduledSession.closing_date_formatted&&!e.scheduledSession.closing_time?(h(),P("span",Qa," anteriormente ")):N("",!0),l[1]||(l[1]=fe(" . ",-1))])):e.isFuture?(h(),P("span",Ua," Esta sess\xE3o est\xE1 agendada para "+T(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"data futura")+". Ainda n\xE3o \xE9 poss\xEDvel realizar a\xE7\xF5es. ",1)):(h(),P("span",Ja," A sess\xE3o ainda n\xE3o foi iniciada. Aguarde o in\xEDcio da sess\xE3o para realizar a\xE7\xF5es. "))])])])],2),e.propositions.length>0?(h(),P("div",Ha,[a("div",Wa,[I(D,{name:"description",size:"18px",class:"tw-mr-2"}),fe(" "+T(e.scheduledSession.session_status==="closed"?"Proposi\xE7\xF5es que foram votadas":"Proposi\xE7\xF5es que ser\xE3o votadas")+" ",1),a("span",Ga,"("+T(e.propositions.length)+")",1)]),a("div",Ka,[(h(!0),P(xe,null,Ie(e.propositions,(r,c)=>(h(),P("div",{key:r.id||c,class:"proposition-item"},[a("div",Ya,[a("span",Xa,T(r.species||"Proposi\xE7\xE3o")+" n\xBA "+T(r.number||"S/N")+"/"+T(r.year||new Date().getFullYear()),1)]),r.title?(h(),P("div",Za,T(r.title),1)):N("",!0),r.proponents&&r.proponents.length>0?(h(),P("div",es,[(h(!0),P(xe,null,Ie(r.proponents.slice(0,3),C=>(h(),G(xt,{key:C.id,size:"sm",class:"proponent-chip"},{default:F(()=>[fe(T(C.name),1)]),_:2},1024))),128)),r.proponents.length>3?(h(),P("span",ts," +"+T(r.proponents.length-3)+" mais ",1)):N("",!0)])):N("",!0)]))),128))])])):(h(),P("div",as,[I(D,{name:"inbox",size:"32px",class:"tw-mb-2",color:"grey-5"}),l[2]||(l[2]=a("div",{class:"empty-text"}," Nenhuma proposi\xE7\xE3o cadastrada nesta sess\xE3o ainda. ",-1))]))]),_:1})]),_:1}))}};var ns=Re(ss,[["__scopeId","data-v-fcb6ccaa"]]);const is=["top","middle","bottom"];var Qt=Fe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>is.includes(e)}},setup(e,{slots:i}){const s=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=v(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>K("div",{class:n.value,style:s.value,role:"status","aria-label":e.label},tt(i.default,e.label!==void 0?[e.label]:[]))}}),os=Fe({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:i,emit:s}){let n=!1,t,d,l=null,r=null,c,C;function k(){t==null||t(),t=null,n=!1,l!==null&&(clearTimeout(l),l=null),r!==null&&(clearTimeout(r),r=null),d==null||d.removeEventListener("transitionend",c),c=null}function R(u,S,E){S!==void 0&&(u.style.height=`${S}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,t=E}function w(u,S){u.style.overflowY=null,u.style.height=null,u.style.transition=null,k(),S!==C&&s(S)}function g(u,S){let E=0;d=u,n===!0?(k(),E=u.offsetHeight===u.scrollHeight?0:void 0):(C="hide",u.style.overflowY="hidden"),R(u,E,S),l=setTimeout(()=>{l=null,u.style.height=`${u.scrollHeight}px`,c=z=>{r=null,(Object(z)!==z||z.target===u)&&w(u,"show")},u.addEventListener("transitionend",c),r=setTimeout(c,e.duration*1.1)},100)}function o(u,S){let E;d=u,n===!0?k():(C="show",u.style.overflowY="hidden",E=u.scrollHeight),R(u,E,S),l=setTimeout(()=>{l=null,u.style.height=0,c=z=>{r=null,(Object(z)!==z||z.target===u)&&w(u,"hide")},u.addEventListener("transitionend",c),r=setTimeout(c,e.duration*1.1)},100)}return at(()=>{n===!0&&k()}),()=>K(zt,{css:!1,appear:e.appear,onEnter:g,onLeave:o},i.default)}});const He=la({}),ls=Object.keys(Ct);var Ut=Fe({name:"QExpansionItem",props:{...Ct,...Tt,...wt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Pt,"click","afterShow","afterHide"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Je(),t=St(e,n),d=ee(e.modelValue!==null?e.modelValue:e.defaultOpened),l=ee(null),r=Lt(),{show:c,hide:C,toggle:k}=Et({showing:d});let R,w;const g=v(()=>`q-expansion-item q-item-type q-expansion-item--${d.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),o=v(()=>{if(e.contentInsetLevel===void 0)return null;const B=n.lang.rtl===!0?"Right":"Left";return{["padding"+B]:e.contentInsetLevel*56+"px"}}),u=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),S=v(()=>{const B={};return ls.forEach(te=>{B[te]=e[te]}),B}),E=v(()=>u.value===!0||e.expandIconToggle!==!0),z=v(()=>e.expandedIcon!==void 0&&d.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),b=v(()=>e.disable!==!0&&(u.value===!0||e.expandIconToggle===!0)),q=v(()=>({expanded:d.value===!0,detailsId:r.value,toggle:k,show:c,hide:C})),m=v(()=>{const B=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[d.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":d.value===!0?"true":"false","aria-controls":r.value,"aria-label":B}});ve(()=>e.group,B=>{w==null||w(),B!==void 0&&Q()});function y(B){u.value!==!0&&k(B),s("click",B)}function L(B){B.keyCode===13&&_(B,!0)}function _(B,te){var Y;te!==!0&&B.qAvoidFocus!==!0&&((Y=l.value)==null||Y.focus()),k(B),it(B)}function V(){s("afterShow")}function O(){s("afterHide")}function Q(){R===void 0&&(R=Mt()),d.value===!0&&(He[e.group]=R);const B=ve(d,Y=>{Y===!0?He[e.group]=R:He[e.group]===R&&delete He[e.group]}),te=ve(()=>He[e.group],(Y,me)=>{me===R&&Y!==void 0&&Y!==R&&C()});w=()=>{B(),te(),He[e.group]===R&&delete He[e.group],w=void 0}}function M(){const B={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},te=[K(D,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&d.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:z.value})];return b.value===!0&&(Object.assign(B,{tabindex:0,...m.value,onClick:_,onKeyup:L}),te.unshift(K("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),K(We,B,()=>te)}function $(){let B;return i.header!==void 0?B=[].concat(i.header(q.value)):(B=[K(We,()=>[K(Ye,{lines:e.labelLines},()=>e.label||""),e.caption?K(Ye,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&B[e.switchToggleSide===!0?"push":"unshift"](K(We,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>K(D,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&B[e.switchToggleSide===!0?"unshift":"push"](M()),B}function J(){const B={ref:"item",style:e.headerStyle,class:e.headerClass,dark:t.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return E.value===!0&&(B.clickable=!0,B.onClick=y,Object.assign(B,u.value===!0?S.value:m.value)),K(ya,B,$)}function Z(){return je(K("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:o.value,id:r.value},yt(i.default)),[[Be,d.value]])}function ne(){const B=[J(),K(os,{duration:e.duration,onShow:V,onHide:O},Z)];return e.expandSeparator===!0&&B.push(K(It,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:t.value}),K(It,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:t.value})),B}return e.group!==void 0&&Q(),at(()=>{w==null||w()}),()=>K("div",{class:g.value},[K("div",{class:"q-expansion-item__container relative-position"},ne())])}});const Jt=rt("quorum",{state:()=>({isPresent:!1,isAbsentJustified:!1,absenceReason:null,quorumFinalized:!1,quorumStarted:!1,quorumFinalizedAt:null,loadingQuorum:!1,loadingAttendance:!1,loadingJustify:!1,quorumStatusCache:null,quorumStatusLastUpdate:null,QUORUM_STATUS_TTL:2e3,attendanceStatusCache:null,attendanceStatusLastUpdate:null,ATTENDANCE_STATUS_TTL:2e3,_quorumStatusLoadingPromise:null,_attendanceStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=$e().user)==null?void 0:i.proponent_id)||null},unitId(){const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadQuorumStatus(e,i=!1){if(!e){this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null;return}if(!i&&this.quorumStatusCache&&this.quorumStatusLastUpdate){const n=Date.now()-this.quorumStatusLastUpdate;if(n<this.QUORUM_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de quorum status (${n}ms atr\xE1s)`),this.quorumStatusCache}if(this._quorumStatusLoadingPromise)return this._quorumStatusLoadingPromise;if(this.loadingQuorum){console.log("[QuorumStore] loadQuorumStatus j\xE1 em andamento, ignorando.");return}return this.loadingQuorum=!0,this._quorumStatusLoadingPromise=(async()=>{var s,n;try{const t=await Se.get(`/pauta/${e}/quorum/status`),d=((s=t==null?void 0:t.data)==null?void 0:s.success)&&((n=t==null?void 0:t.data)==null?void 0:n.data)?t.data.data:null;return d?(this.quorumStarted=d.is_started||!1,this.quorumFinalized=d.is_finalized||!1,this.quorumFinalizedAt=d.finalized_at||null):(this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null),this.quorumStatusCache=d,this.quorumStatusLastUpdate=Date.now(),d}catch(t){throw console.error("Erro ao carregar status do qu\xF3rum:",t),this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null,this.quorumStatusCache=null,t}finally{this.loadingQuorum=!1,this._quorumStatusLoadingPromise=null}})(),this._quorumStatusLoadingPromise},async loadCurrentAttendanceStatus(e,i=!1){if(!e||!this.proponentId){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null;return}if(!i&&this.attendanceStatusCache&&this.attendanceStatusLastUpdate){const n=Date.now()-this.attendanceStatusLastUpdate;if(n<this.ATTENDANCE_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de attendance status (${n}ms atr\xE1s)`),this.attendanceStatusCache}return this._attendanceStatusLoadingPromise?this._attendanceStatusLoadingPromise:(this._attendanceStatusLoadingPromise=(async()=>{var s,n;try{const t=await Se.get(`/pauta/${e}/session-members`),l=(((n=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:n.members)||[]).find(r=>r.proponent_id===this.proponentId);return this.isPresent=(l==null?void 0:l.is_present)||!1,this.isAbsentJustified=(l==null?void 0:l.is_absent_justified)||!1,this.absenceReason=(l==null?void 0:l.absence_reason)||null,this.attendanceStatusCache=l,this.attendanceStatusLastUpdate=Date.now(),l}catch(t){throw console.error("Erro ao carregar estado da presen\xE7a:",t),this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.attendanceStatusCache=null,t}finally{this._attendanceStatusLoadingPromise=null}})(),this._attendanceStatusLoadingPromise)},invalidateQuorumStatusCache(){this.quorumStatusCache=null,this.quorumStatusLastUpdate=null},invalidateAttendanceStatusCache(){this.attendanceStatusCache=null,this.attendanceStatusLastUpdate=null},resetState(){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.quorumFinalized=!1,this.quorumStarted=!1,this.quorumFinalizedAt=null,this.invalidateQuorumStatusCache(),this.invalidateAttendanceStatusCache()}}});function Ht(e){const i=Ge(),s=$e(),n=Jt(),t=v(()=>n.isPresent),d=v(()=>n.isAbsentJustified),l=v(()=>n.absenceReason),r=v(()=>n.quorumFinalized),c=v(()=>n.quorumStarted),C=v(()=>n.quorumFinalizedAt),k=v(()=>n.loadingQuorum),R=v(()=>n.loadingAttendance),w=v(()=>n.loadingJustify||!1),g=v(()=>n.canSend);async function o(){return await n.loadQuorumStatus(e.value)}async function u(){return await n.loadCurrentAttendanceStatus(e.value)}async function S(){var z,b,q,m,y;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){ae.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isAbsentJustified){ae.warning("N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 uma justificativa de aus\xEAncia registrada.");return}if(n.isPresent){ae.warning("N\xE3o \xE9 poss\xEDvel desmarcar a presen\xE7a ap\xF3s ela ser registrada.");return}if(!n.loadingAttendance){n.loadingAttendance=!0;try{(z=(await Se.post(`/pauta/${e.value}/session-attendance/register`,{proponent_id:parseInt(n.proponentId),present:!0})).data)!=null&&z.success&&(n.isPresent=!0,n.invalidateAttendanceStatusCache(),await n.loadCurrentAttendanceStatus(e.value,!0),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!0,userId:(b=s.user)==null?void 0:b.id,userName:(q=s.user)==null?void 0:q.first_name,source:"vereador"}),ae.success("Presen\xE7a registrada com sucesso!"))}catch(L){console.error("[Vereador] Erro ao registrar presen\xE7a:",L),ae.negative("Erro ao registrar presen\xE7a: "+(((y=(m=L.response)==null?void 0:m.data)==null?void 0:y.message)||L.message))}finally{n.loadingAttendance=!1}}}}async function E(z){var b,q,m,y,L;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){ae.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. N\xE3o \xE9 mais poss\xEDvel justificar aus\xEAncia.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isPresent){ae.warning("N\xE3o \xE9 poss\xEDvel justificar aus\xEAncia quando voc\xEA est\xE1 presente.");return}if(!n.loadingJustify){n.loadingJustify=!0;try{(b=(await Se.post(`/pauta/${e.value}/session-absences/justify`,{proponent_id:parseInt(n.proponentId),absence_reason:z})).data)!=null&&b.success&&(n.isAbsentJustified=!0,n.absenceReason=z,n.invalidateAttendanceStatusCache(),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!1,justified:!0,reason:z,userId:(q=s.user)==null?void 0:q.id,userName:(m=s.user)==null?void 0:m.first_name,source:"vereador"}),ae.success("Aus\xEAncia justificada com sucesso!"))}catch(_){console.error("[Vereador] Erro ao justificar aus\xEAncia:",_),ae.negative("Erro ao justificar aus\xEAncia: "+(((L=(y=_.response)==null?void 0:y.data)==null?void 0:L.message)||_.message))}finally{n.loadingJustify=!1}}}}return{isPresent:t,isAbsentJustified:d,absenceReason:l,quorumFinalized:r,quorumStarted:c,quorumFinalizedAt:C,loadingQuorum:k,loadingAttendance:R,loadingJustify:w,canSend:g,loadQuorumStatus:o,loadCurrentAttendanceStatus:u,toggleAttendance:S,justifyAbsence:E}}const Wt=rt("expedient",{state:()=>({smallExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},largeExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},miscellaneousSubject:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},statusCache:{small:null,large:null,miscellaneous:null},statusLastUpdate:{small:null,large:null,miscellaneous:null},STATUS_TTL:2e3,_statusLoadingPromises:{small:null,large:null,miscellaneous:null}}),getters:{proponentId(){var i;return((i=$e().user)==null?void 0:i.proponent_id)||null},unitId(){const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadStatus(e,i,s=!1){if(!e||!this.proponentId){this.resetState(i);return}const n=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",t=n==="small"?this.smallExpedient:n==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient,d=n==="small"?"small-expedient":n==="miscellaneous"?"miscellaneous-subject":"large-expedient";if(!s&&t.loadingData){console.log(`[ExpedientStore ${n}] loadStatus j\xE1 em andamento, ignorando.`);return}if(!s&&this.statusCache[n]&&this.statusLastUpdate[n]){const r=Date.now()-this.statusLastUpdate[n];if(r<this.STATUS_TTL){console.log(`[ExpedientStore ${n}] Usando cache de status (${r}ms atr\xE1s)`);const c=this.statusCache[n];return t.started=c.started||!1,t.finalized=c.finalized||!1,t.finalizedAt=c.finalizedAt||null,t.isRegistered=c.isRegistered||!1,t.registrationOrder=c.registrationOrder||null,t.registeredAt=c.registeredAt||null,this.statusCache[n]}}return this._statusLoadingPromises[n]?this._statusLoadingPromises[n]:(t.loadingData=!0,this._statusLoadingPromises[n]=(async()=>{var l,r,c,C;try{console.log(`[ExpedientStore ${n}] Carregando status do ${d} para agenda ${e} (force: ${s})`);const k=await Se.get(`/pauta/${e}/${d}/status`),R=((l=k==null?void 0:k.data)==null?void 0:l.success)&&((r=k==null?void 0:k.data)==null?void 0:r.data)?k.data.data:null;console.log(`[ExpedientStore ${n}] Resposta do status:`,R),R&&(t.started=R.is_started||!1,t.finalized=R.is_finalized||!1,t.finalizedAt=R.finalized_at||null,console.log(`[ExpedientStore ${n}] Status atualizado:`,{started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt}));const w=await Se.get(`/pauta/${e}/${d}/members`),o=(((C=(c=w==null?void 0:w.data)==null?void 0:c.data)==null?void 0:C.members)||[]).find(u=>u.proponent_id===this.proponentId);return t.isRegistered=(o==null?void 0:o.is_registered)||!1,t.registrationOrder=(o==null?void 0:o.registration_order)||null,t.registeredAt=(o==null?void 0:o.registered_at)||null,this.statusCache[n]={started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt,isRegistered:t.isRegistered,registrationOrder:t.registrationOrder,registeredAt:t.registeredAt},this.statusLastUpdate[n]=Date.now(),this.statusCache[n]}catch(k){throw console.error(`Erro ao carregar status do ${d}:`,k),this.resetState(i),k}finally{t.loadingData=!1,this._statusLoadingPromises[n]=null}})(),this._statusLoadingPromises[n])},invalidateStatusCache(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large";this.statusCache[i]=null,this.statusLastUpdate[i]=null},resetState(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large",s=i==="small"?this.smallExpedient:i==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient;s.isRegistered=!1,s.started=!1,s.finalized=!1,s.finalizedAt=null,s.registrationOrder=null,s.registeredAt=null,this.invalidateStatusCache(e)}}});var lt=Object.freeze(Object.defineProperty({__proto__:null,useExpedientStore:Wt},Symbol.toStringTag,{value:"Module"}));function et(e,i="small"){const s=Ge(),n=$e(),t=Wt(),d=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",l=d==="small"?t.smallExpedient:d==="miscellaneous"?t.miscellaneousSubject:t.largeExpedient,r=i==="small"?"small-expedient":i==="miscellaneous"?"miscellaneous-subject":"large-expedient",c=i==="small"?"pequeno expediente":i==="miscellaneous"?"assuntos diversos":"grande expediente",C=v(()=>l.isRegistered),k=v(()=>l.started),R=v(()=>l.finalized),w=v(()=>l.finalizedAt),g=v(()=>l.registrationOrder),o=v(()=>l.registeredAt),u=v(()=>l.loadingData),S=v(()=>l.loadingAction),E=v(()=>t.canSend);async function z(q=!1){return await t.loadStatus(e.value,i,q)}async function b(){var m,y,L,_,V,O;if(!t.canSend||!e.value)return;if(!l.started||l.finalized){ae.warning(l.finalized?`As inscri\xE7\xF5es de ${c} foram finalizadas.`:`As inscri\xE7\xF5es de ${c} ainda n\xE3o foram iniciadas.`);return}if(l.loadingAction)return;l.loadingAction=!0;const q=!l.isRegistered;try{const Q=await Se.post(`/pauta/${e.value}/${r}/register`,{proponent_id:parseInt(t.proponentId),registered:q});(m=Q.data)!=null&&m.success?(t.invalidateStatusCache(i),await z(),s.emit(`${r}-registration`,{unitId:parseInt(t.unitId),agendaId:parseInt(e.value),proponentId:parseInt(t.proponentId),registered:q,userId:(y=n.user)==null?void 0:y.id,userName:(L=n.user)==null?void 0:L.first_name,source:"vereador"}),q&&l.registrationOrder?ae.success(`Inscri\xE7\xE3o realizada com sucesso! Sua posi\xE7\xE3o na fila: ${l.registrationOrder}\xBA`):ae.success(q?"Inscri\xE7\xE3o realizada com sucesso!":"Inscri\xE7\xE3o cancelada com sucesso!")):ae.error(((_=Q.data)==null?void 0:_.message)||"Erro ao registrar inscri\xE7\xE3o.")}catch(Q){console.error(`[Vereador] Erro ao registrar ${c} via API:`,Q),ae.error("Erro ao registrar inscri\xE7\xE3o: "+(((O=(V=Q.response)==null?void 0:V.data)==null?void 0:O.message)||Q.message))}finally{l.loadingAction=!1}}return{isRegistered:C,started:k,finalized:R,finalizedAt:w,registrationOrder:g,registeredAt:o,loadingData:u,loadingAction:S,canSend:E,loadStatus:z,toggleRegistration:b}}const rs=rt("voting",{state:()=>({votingStatus:null,activeReading:null,activeVoting:null,finishedReadings:[],quorumMembers:[],showReadingModal:!1,showVotingModal:!1,loadingVoting:!1,votingStatusCache:null,votingStatusLastUpdate:null,VOTING_STATUS_TTL:2e3,_votingStatusLoadingPromise:null}),getters:{activeReadingIcon:e=>e.activeReading?e.activeReading.type==="reading"?"menu_book":e.activeReading.type==="secret_voting"?"lock":"how_to_vote":"menu_book",activeReadingLabel:e=>e.activeReading?e.activeReading.type==="reading"?"Leitura em Andamento":e.activeReading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":""},actions:{async loadVotingStatus(e,i=!1){if(!e){const s=!!this.activeReading,n=!!this.activeVoting;this.votingStatus=null,this.activeReading=null,this.activeVoting=null,s&&(this.showReadingModal=!1),n&&(this.showVotingModal=!1);return}if(!i&&this.votingStatusCache&&this.votingStatusLastUpdate){const n=Date.now()-this.votingStatusLastUpdate;if(n<this.VOTING_STATUS_TTL)return console.log(`[VotingStore] Usando cache de voting status (${n}ms atr\xE1s)`),this.votingStatusCache}if(this._votingStatusLoadingPromise)return this._votingStatusLoadingPromise;if(!this.loadingVoting)return this.loadingVoting=!0,this._votingStatusLoadingPromise=(async()=>{var s,n,t,d;try{const l=await Se.get(`/pauta/${e}/voting/status`);if((s=l.data)!=null&&s.success){this.votingStatus=l.data.data,this.finishedReadings=((n=l.data.data)==null?void 0:n.finished_readings)||[];const r=l.data.data,c=r==null?void 0:r.active_voting_ata,C=r==null?void 0:r.active_voting_propositions,k=r==null?void 0:r.active_voting;this.quorumMembers=(c==null?void 0:c.quorum_members)||(C==null?void 0:C.quorum_members)||(k==null?void 0:k.quorum_members)||[];const R=(t=this.activeReading)==null?void 0:t.id,w=(d=this.activeVoting)==null?void 0:d.id,g=!!this.activeReading,o=!!this.activeVoting,u=[...(c==null?void 0:c.readings)||[],...(C==null?void 0:C.readings)||[],...(k==null?void 0:k.readings)||[]].filter(q=>!q.finished_at);if(u.length){const q=u.find(L=>L.type==="secret_voting"),m=u.find(L=>L.type==="voting"),y=u.find(L=>L.type==="reading");q?(this.activeVoting=q,this.activeReading=null):m?(this.activeVoting=m,this.activeReading=null):y?(this.activeReading=y,this.activeVoting=null):(this.activeReading=null,this.activeVoting=null)}else this.activeReading=null,this.activeVoting=null;const S=!R&&!w,E=g&&!this.activeReading&&!!this.activeVoting,z=this.activeVoting&&(S||this.activeVoting.id!==w||E),b=this.activeReading&&(S||this.activeReading.id!==R);z?(this.showVotingModal=!0,this.showReadingModal=!1):b&&!this.activeVoting&&(this.showReadingModal=!0,this.showVotingModal=!1),!this.activeVoting&&w&&(this.showVotingModal=!1),!this.activeReading&&R&&(this.showReadingModal=!1),this.votingStatusCache=l.data.data,this.votingStatusLastUpdate=Date.now()}}catch(l){throw console.error("[Vereador] Erro ao carregar status da vota\xE7\xE3o:",l),this.votingStatus=null,this.activeReading=null,this.activeVoting=null,this.showReadingModal=!1,this.showVotingModal=!1,this.votingStatusCache=null,l}finally{this.loadingVoting=!1,this._votingStatusLoadingPromise=null}})(),this._votingStatusLoadingPromise},invalidateVotingStatusCache(){this.votingStatusCache=null,this.votingStatusLastUpdate=null}}});function Gt(e){const i=rs(),s=v(()=>i.votingStatus),n=v(()=>i.activeReading),t=v(()=>i.activeVoting),d=v(()=>i.finishedReadings),l=v(()=>i.quorumMembers),r=v({get:()=>i.showReadingModal,set:o=>{i.showReadingModal=o}}),c=v({get:()=>i.showVotingModal,set:o=>{i.showVotingModal=o}}),C=v(()=>i.loadingVoting),k=v(()=>i.activeReadingIcon),R=v(()=>i.activeReadingLabel);async function w(o=!1){return await i.loadVotingStatus(e.value,o)}async function g(){return i.invalidateVotingStatusCache(),await w()}return{votingStatus:s,activeReading:n,activeVoting:t,finishedReadings:d,quorumMembers:l,showReadingModal:r,showVotingModal:c,loadingVoting:C,activeReadingIcon:k,activeReadingLabel:R,loadVotingStatus:w,handleVoteRegistered:g}}const us=rt("voiceRequest",{state:()=>({hasRequest:!1,requestOrder:null,requestedAt:null,currentSpeech:null,allSpeeches:[],remainingTime:0,loadingData:!1,speechInterval:null,voiceRequestStatusCache:null,voiceRequestStatusLastUpdate:null,VOICE_REQUEST_STATUS_TTL:2e3,_voiceRequestStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=$e().user)==null?void 0:i.proponent_id)||null},unitId(){const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=$e(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n},allFinishedSpeeches(){return this.allSpeeches.filter(e=>e.status==="finished").sort((e,i)=>new Date(i.finished_at||0)-new Date(e.finished_at||0))}},actions:{updateRemainingTime(){if(!this.currentSpeech){this.remainingTime=0;return}const e=this.currentSpeech;let i=e.used_seconds||0;e.status==="speaking"&&e.started_at&&(i+=Math.floor((new Date-new Date(e.started_at))/1e3));const s=(e.allocated_minutes+e.additional_minutes)*60;this.remainingTime=Math.max(0,s-i)},ensureSpeechInterval(){var e;!this.speechInterval&&((e=this.currentSpeech)==null?void 0:e.status)==="speaking"&&(this.speechInterval=setInterval(()=>{this.updateRemainingTime()},1e3))},clearSpeechInterval(){this.speechInterval&&(clearInterval(this.speechInterval),this.speechInterval=null)},async loadStatus(e,i=!1){if(!(!i&&this.loadingData)){if(!e||!this.proponentId){this.resetState();return}if(!i&&this.voiceRequestStatusCache&&this.voiceRequestStatusLastUpdate){const n=Date.now()-this.voiceRequestStatusLastUpdate;if(n<this.VOICE_REQUEST_STATUS_TTL)return console.log(`[VoiceRequestStore] Usando cache de voice request status (${n}ms atr\xE1s)`),this.voiceRequestStatusCache}return this._voiceRequestStatusLoadingPromise?this._voiceRequestStatusLoadingPromise:(this.loadingData=!0,this._voiceRequestStatusLoadingPromise=(async()=>{var s,n;try{const t=await Se.get(`/api/pauta/${e}/voice-request/members`);let d=!1;if((s=t==null?void 0:t.data)!=null&&s.success){const c=(t.data.data.members||[]).find(C=>C.proponent_id===this.proponentId);d=(c==null?void 0:c.has_voice_request)&&!["finished","cancelled"].includes(c.request_status),this.hasRequest=d,this.requestOrder=(c==null?void 0:c.request_order)||null,this.requestedAt=(c==null?void 0:c.requested_at)||null}const l=await Se.get(`/api/pauta/${e}/voice-request/speeches/status`);if((n=l==null?void 0:l.data)!=null&&n.success){const c=(l.data.data.speeches||[]).filter(C=>C.proponent_id===this.proponentId);if(this.allSpeeches=c,c.length>0)if(c.sort((C,k)=>{var o,u;const R={speaking:0,paused:1,finished:2},w=(o=R[C.status])!=null?o:99,g=(u=R[k.status])!=null?u:99;return w!==g?w-g:new Date(k.started_at||0)-new Date(C.started_at||0)}),d){const C=c.find(k=>k.status==="speaking"||k.status==="paused");this.currentSpeech=C||null}else this.currentSpeech=c[0];else this.currentSpeech=null;this.currentSpeech?(this.updateRemainingTime(),this.currentSpeech.status==="speaking"?this.ensureSpeechInterval():this.clearSpeechInterval()):this.clearSpeechInterval()}this.voiceRequestStatusCache={hasRequest:this.hasRequest,requestOrder:this.requestOrder,requestedAt:this.requestedAt,currentSpeech:this.currentSpeech,allSpeeches:this.allSpeeches},this.voiceRequestStatusLastUpdate=Date.now()}catch(t){throw console.error("Erro ao carregar status de pedido de voz:",t),this.resetState(),t}finally{this.loadingData=!1,this._voiceRequestStatusLoadingPromise=null}})(),this._voiceRequestStatusLoadingPromise)}},invalidateVoiceRequestStatusCache(){this.voiceRequestStatusCache=null,this.voiceRequestStatusLastUpdate=null},resetState(){this.hasRequest=!1,this.requestOrder=null,this.requestedAt=null,this.currentSpeech=null,this.allSpeeches=[],this.remainingTime=0,this.clearSpeechInterval(),this.invalidateVoiceRequestStatusCache()}}});function Kt(e){const i=us(),s=v(()=>i.hasRequest),n=v(()=>i.requestOrder),t=v(()=>i.requestedAt),d=v(()=>i.currentSpeech),l=v(()=>i.allFinishedSpeeches),r=v(()=>i.remainingTime),c=v(()=>i.loadingData),C=v(()=>i.canSend);async function k(g=!1){return await i.loadStatus(e.value,g)}function R(){i.resetState()}function w(){i.updateRemainingTime()}return ve(()=>i.currentSpeech,g=>{g?(i.updateRemainingTime(),g.status==="speaking"?i.ensureSpeechInterval():i.clearSpeechInterval()):(i.remainingTime=0,i.clearSpeechInterval())},{deep:!0,immediate:!0}),ve(()=>{var g;return(g=i.currentSpeech)==null?void 0:g.additional_minutes},()=>{i.currentSpeech&&i.updateRemainingTime()}),{hasRequest:s,requestOrder:n,requestedAt:t,currentSpeech:d,allFinishedSpeeches:l,remainingTime:r,loadingData:c,canSend:C,loadStatus:k,resetState:R,updateRemainingTime:w}}const ke=ee(null),ft=ee(!1);function qt(){const e=v(()=>{var g;return((g=ke.value)==null?void 0:g.small_expedient_name)||"Pequeno Expediente"}),i=v(()=>{var g;return((g=ke.value)==null?void 0:g.large_expedient_name)||"Grande Expediente"}),s=v(()=>{var g,o;return(o=(g=ke.value)==null?void 0:g.enable_small_expedient_speech)!=null?o:!0}),n=v(()=>{var g,o;return(o=(g=ke.value)==null?void 0:g.enable_small_expedient_ata_voting)!=null?o:!1}),t=v(()=>{var g,o;return(o=(g=ke.value)==null?void 0:g.enable_small_expedient)!=null?o:!0}),d=v(()=>{var g,o;return(o=(g=ke.value)==null?void 0:g.enable_large_expedient)!=null?o:!0}),l=v(()=>{var g;return((g=ke.value)==null?void 0:g.voting_button_label)||"Ativar Vota\xE7\xE3o"}),r=v(()=>{var g,o;return(o=(g=ke.value)==null?void 0:g.enable_miscellaneous_subjects)!=null?o:!1}),c=v(()=>{var o;const g=(o=ke.value)==null?void 0:o.deduct_aside_time;return g===!0||g===1||g==="1"}),C=v(()=>{var g;return((g=ke.value)==null?void 0:g.miscellaneous_subjects_name)||"Assuntos Diversos"});async function k(){var g;if(!ft.value){if(ke.value)return ke.value;ft.value=!0;try{const{data:o}=await Se.get("/api/config/sessao/settings");if((o==null?void 0:o.success)&&(o==null?void 0:o.data)){ke.value=o.data;const u=(g=o.data)==null?void 0:g.deduct_aside_time;console.log("[aporte] useSessionSettings:loadSettings",{deduct_aside_time:u,type:typeof u,parsed:u===!0||u===1||u==="1"})}}catch(o){console.error("[useSessionSettings] Erro ao carregar configura\xE7\xF5es:",o)}finally{ft.value=!1}}}function R(g){return g==="small"?e.value:g==="large"?i.value:g==="miscellaneous"?C.value:""}function w(){ke.value=null}return{smallExpedientName:e,largeExpedientName:i,enableSmallExpedientSpeech:s,enableSmallExpedientAtaVoting:n,enableSmallExpedient:t,enableLargeExpedient:d,votingButtonLabel:l,enableMiscellaneousSubjects:r,deductAsideTime:c,miscellaneousSubjectsName:C,loadSettings:k,getExpedientName:R,clearCache:w}}var nt=Object.freeze(Object.defineProperty({__proto__:null,useSessionSettings:qt},Symbol.toStringTag,{value:"Module"}));const ds={class:"session-overview"},cs={class:"overview-card modern-card"},vs={class:"card-content"},gs={class:"summary-title"},fs={class:"summary-grid"},ms={class:"summary-item-col summary-item-col-left"},hs={class:"tw-relative"},ps={class:"summary-status tw-pt-2"},bs={key:0,class:"summary-item-col summary-item-col-right session-info-compact"},ws={class:"session-info-line"},Ss={key:0,class:"session-info-line"},ys={key:1,class:"session-info-line"},_s={key:0,class:"info-banner"},xs={key:0,class:"propositions-section"},qs={class:"propositions-title"},$s={class:"proposition-detail-section"},As={class:"detail-value"},Is={key:0,class:"proposition-detail-section"},ks={class:"detail-value"},Vs={key:1,class:"proposition-detail-section"},Rs={class:"detail-value"},zs={key:2,class:"proposition-detail-section"},Cs={class:"proponents-chips"},Ts={key:3,class:"proposition-detail-section"},Ps={class:"documents-buttons"},Ls={__name:"SessionOverview",props:{sessionData:{type:Object,default:null},selectedAgendaId:{type:[Number,String],default:null},loading:{type:Boolean,default:!1}},setup(e){const i=e,s=Ge();qt();const n=Ht(v(()=>i.selectedAgendaId));et(v(()=>i.selectedAgendaId),"small"),et(v(()=>i.selectedAgendaId),"large"),Gt(v(()=>i.selectedAgendaId)),Kt(v(()=>i.selectedAgendaId));const t=ee([]),d=ee(!1);async function l(){var w;if(!i.selectedAgendaId){t.value=[];return}d.value=!0;try{const g=await Se.get(`/api/pauta/${i.selectedAgendaId}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),o=((w=g==null?void 0:g.data)==null?void 0:w.data)||[];t.value=o.filter(u=>u.proposition).map(u=>{var S,E;return{id:u.proposition.id,number:u.proposition.number,year:u.proposition.year,title:u.proposition.title,ementa:u.proposition.ementa,description:u.proposition.description,species:((S=u.proposition.species)==null?void 0:S.name)||((E=u.proposition.species)==null?void 0:E.title)||null,proponents:u.proposition.proponents||[],documents:u.proposition.documents||[],file_url:u.proposition.file_url||null,protocol_document:u.proposition.protocol_document||null}})}catch(g){console.error("[SessionOverview] Erro ao carregar proposi\xE7\xF5es:",g),t.value=[]}finally{d.value=!1}}ve(()=>i.selectedAgendaId,w=>{w?l():t.value=[]},{immediate:!0});function r(w){if(!(w!=null&&w.protocol_document))return null;const g=w.protocol_document;return g.signed_file_url||g.file_url||null}function c(w){return w!=null&&w.protocol_document?w.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}ut(()=>{i.selectedAgendaId&&l()});function C(){if(i.loading)return"Carregando...";if(i.sessionData){const w=i.sessionData.name||"Em Andamento";return w.length>20?w.substring(0,20)+"...":w}return"Aguardando"}function k(){var w,g,o,u,S,E,z,b;return n?(w=n.quorumFinalized)!=null&&w.value?(g=n.isPresent)!=null&&g.value?"Presente":(o=n.isAbsentJustified)!=null&&o.value?"Ausente Justificado":"Ausente":(u=n.quorumStarted)!=null&&u.value?(S=n.isPresent)!=null&&S.value?"Presente":"Aguardando":(E=n.quorumFinalizedAt)!=null&&E.value?(z=n.isPresent)!=null&&z.value?"Presente":(b=n.isAbsentJustified)!=null&&b.value?"Ausente Justificado":"Ausente":"Aguardando":"Aguardando"}function R(){var w,g,o,u;return n?(w=n.quorumFinalized)!=null&&w.value?(g=n.isPresent)!=null&&g.value?"status-success":"status-error":(o=n.quorumStarted)!=null&&o.value?(u=n.isPresent)!=null&&u.value?"status-success":"status-warning":"status-info":"status-info"}return(w,g)=>{var o,u,S,E,z,b,q,m,y,L,_,V,O,Q;return h(),P("div",ds,[a("div",cs,[a("div",vs,[a("div",gs,[I(D,{name:"dashboard",size:"20px",class:"tw-mr-2"}),g[0]||(g[0]=fe(" Resumo R\xE1pido ",-1))]),a("div",fs,[a("div",{class:U(["summary-item summary-item-cols",{active:i.sessionData}])},[a("div",ms,[a("div",hs,[I(D,{name:"event",color:i.sessionData?"primary":"grey",size:"30px"},null,8,["color"]),A(s).isConnected?(h(),G(Qt,{key:0,color:"positive",size:"xs",class:"session-badge"})):N("",!0)]),a("div",ps,T(C()),1)]),i.sessionData?(h(),P("div",bs,[a("div",ws,T(i.sessionData.session_date_formatted||i.sessionData.session_date||"N/A"),1),i.sessionData.session_time?(h(),P("div",Ss,T(i.sessionData.session_time),1)):N("",!0),i.sessionData.session_type?(h(),P("div",ys,T(i.sessionData.session_type),1)):N("",!0)])):N("",!0)],2),a("div",{class:U(["summary-item",{active:((u=(o=A(n))==null?void 0:o.quorumStarted)==null?void 0:u.value)||((E=(S=A(n))==null?void 0:S.quorumFinalized)==null?void 0:E.value)||((b=(z=A(n))==null?void 0:z.quorumFinalizedAt)==null?void 0:b.value)}])},[I(D,{name:(m=(q=A(n))==null?void 0:q.isPresent)!=null&&m.value?"check_circle":"groups",color:(L=(y=A(n))==null?void 0:y.isPresent)!=null&&L.value?"positive":((V=(_=A(n))==null?void 0:_.quorumFinalized)==null?void 0:V.value)||((Q=(O=A(n))==null?void 0:O.quorumFinalizedAt)==null?void 0:Q.value)?"primary":"grey",size:"24px"},null,8,["name","color"]),g[1]||(g[1]=a("div",{class:"summary-label"},"Qu\xF3rum",-1)),a("div",{class:U(["summary-status",R()])},T(k()),3)],2)]),i.selectedAgendaId?N("",!0):(h(),P("div",_s,[I(D,{name:"info",color:"primary",size:"18px",class:"tw-mr-2"}),g[2]||(g[2]=a("span",{class:"banner-text"},"Aguardando sess\xE3o ser iniciada...",-1))]))])]),i.selectedAgendaId&&t.value.length>0?(h(),P("div",xs,[a("div",qs,[I(D,{name:"description",size:"20px",class:"tw-mr-2"}),g[3]||(g[3]=fe(" Proposi\xE7\xF5es do Dia ",-1))]),I(_a,{separator:"",class:"propositions-list"},{default:F(()=>[(h(!0),P(xe,null,Ie(t.value,M=>(h(),G(Ut,{key:M.id,icon:"description",class:"proposition-item","header-class":"proposition-header"},{header:F(()=>[I(We,{avatar:""},{default:F(()=>[I(D,{name:"description",color:"primary"})]),_:1}),I(We,null,{default:F(()=>[I(Ye,{class:"proposition-number"},{default:F(()=>[fe(T(M.number)+"/"+T(M.year),1)]),_:2},1024),I(Ye,{caption:"",class:"proposition-title"},{default:F(()=>[fe(T(M.title||M.ementa||"Sem t\xEDtulo"),1)]),_:2},1024)]),_:2},1024)]),default:F(()=>[I(Ne,{flat:"",class:"proposition-details"},{default:F(()=>[I(Pe,null,{default:F(()=>[a("div",$s,[g[4]||(g[4]=a("div",{class:"detail-label"},"Ementa",-1)),a("div",As,T(M.title||M.ementa||M.description||"N/A"),1)]),M.description&&M.description!==M.title?(h(),P("div",Is,[g[5]||(g[5]=a("div",{class:"detail-label"},"Descri\xE7\xE3o",-1)),a("div",ks,T(M.description),1)])):N("",!0),M.species?(h(),P("div",Vs,[g[6]||(g[6]=a("div",{class:"detail-label"},"Esp\xE9cie",-1)),a("div",Rs,T(M.species),1)])):N("",!0),M.proponents&&M.proponents.length>0?(h(),P("div",zs,[g[7]||(g[7]=a("div",{class:"detail-label"},"Proponentes",-1)),a("div",Cs,[(h(!0),P(xe,null,Ie(M.proponents,$=>(h(),G(xt,{key:$.id,color:"primary","text-color":"white",icon:"person",size:"sm"},{default:F(()=>[fe(T($.name)+" ",1),$.party?(h(),G(ot,{key:0},{default:F(()=>[fe(T($.party),1)]),_:2},1024)):N("",!0)]),_:2},1024))),128))])])):N("",!0),M.documents&&M.documents.length>0||M.file_url||M.protocol_document?(h(),P("div",Ts,[g[8]||(g[8]=a("div",{class:"detail-label"},"Documentos",-1)),a("div",Ps,[(h(!0),P(xe,null,Ie(M.documents,$=>(h(),G(ye,{key:$.id,href:$.file_url||$.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:$.title||$.original_filename||"Abrir PDF",size:"sm",class:"document-button"},null,8,["href","label"]))),128)),M.file_url&&(!M.documents||M.documents.length===0)?(h(),G(ye,{key:0,href:M.file_url,target:"_blank",color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",class:"document-button"},null,8,["href"])):N("",!0),r(M)&&(!M.documents||M.documents.length===0)?(h(),G(ye,{key:1,href:r(M),target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:c(M),size:"sm",class:"document-button"},null,8,["href","label"])):N("",!0)])])):N("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):N("",!0)])}}};var Es=Re(Ls,[["__scopeId","data-v-23cf50f4"]]),Yt=Fe({name:"QInnerLoading",props:{...wt,...ra,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:i}){const s=Je(),n=St(e,s.proxy.$q),{transitionProps:t,transitionStyle:d}=ua(e),l=v(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),r=v(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function c(){const k=[K(Ft,{size:e.size,color:e.color})];return e.label!==void 0&&k.push(K("div",{class:r.value,style:e.labelStyle},[e.label])),k}function C(){return e.showing===!0?K("div",{class:l.value,style:d.value},i.default!==void 0?i.default():c()):null}return()=>K(zt,t.value,C)}});function Me(e){if(!e)return"";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function Vt(e){if(e==null||e<=0)return"0:00";const i=Math.floor(Number(e)),s=Math.floor(i/60),n=i%60;return`${s}:${n.toString().padStart(2,"0")}`}const Ms={class:"card-header quorum-header"},Fs={class:"tw-flex tw-items-center tw-gap-3"},Ds={class:"card-icon-wrapper"},js={class:"tw-flex tw-flex-col tw-gap-2"},Ns={key:0,class:"status-message text-grey-8"},Os={key:1,class:"status-hint text-grey-6"},Bs={class:"status-avatar status-present"},Qs={class:"status-avatar status-waiting"},Us={class:"tw-flex tw-flex-col tw-gap-2"},Js={key:0,class:"status-message text-grey-8"},Hs={key:1,class:"status-hint text-grey-6"},Ws={class:"status-avatar status-absent"},Gs={class:"status-avatar status-waiting"},Ks={key:5,class:"tw-w-full"};const Ys={__name:"QuorumCard",props:{isPresent:{type:Boolean,default:!1},isAbsentJustified:{type:Boolean,default:!1},absenceReason:{type:String,default:null},quorumFinalized:{type:Boolean,default:!1},quorumStarted:{type:Boolean,default:!1},quorumFinalizedAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingQuorum:{type:Boolean,default:!1},loadingAttendance:{type:Boolean,default:!1},loadingJustify:{type:Boolean,default:!1}},emits:["toggle-attendance","justify-absence"],setup(e,{emit:i}){const s=e,n=i,t=ee(!1),d=ee(""),l=v(()=>!s.canSend||!s.selectedAgendaId||!s.quorumStarted||s.quorumFinalized||s.isAbsentJustified||s.loadingAttendance||s.loadingQuorum),r=v(()=>s.canSend?s.selectedAgendaId?s.quorumStarted?s.quorumFinalized?"Qu\xF3rum foi finalizado":s.isAbsentJustified?"N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 justificativa de aus\xEAncia":s.loadingAttendance?"Processando presen\xE7a...":s.loadingQuorum?"Carregando qu\xF3rum...":"":"Qu\xF3rum ainda n\xE3o foi iniciado":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function c(){if(console.log("[QuorumCard] handleToggleAttendance chamado",{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,quorumStarted:s.quorumStarted,quorumFinalized:s.quorumFinalized,loadingAttendance:s.loadingAttendance,loadingQuorum:s.loadingQuorum,isButtonDisabled:l.value}),l.value){console.warn("[QuorumCard] Bot\xE3o est\xE1 desabilitado:",r.value);return}console.log("[QuorumCard] Emitindo toggle-attendance"),n("toggle-attendance")}function C(){t.value=!1,d.value=""}function k(){!d.value||!d.value.trim()||(n("justify-absence",d.value.trim()),t.value=!1,d.value="")}return(R,w)=>(h(),G(Ne,{flat:"",class:"modern-card quorum-card tw-h-full tw-relative tw-overflow-hidden"},{default:F(()=>[a("div",Ms,[a("div",Fs,[a("div",Ds,[I(D,{name:"groups",size:"24px",class:"tw-text-white"})]),w[3]||(w[3]=a("div",{class:"card-title"},"Qu\xF3rum",-1))])]),I(Pe,{class:"tw-relative tw-p-4",style:{"min-height":"120px"}},{default:F(()=>[I(Yt,{showing:e.loadingQuorum,color:"primary",size:"50px"},null,8,["showing"]),e.loadingQuorum?N("",!0):(h(),P(xe,{key:0},[e.quorumFinalized?(h(),G(Ae,{key:0,class:"modern-banner banner-finalized q-mb-3",dense:""},{avatar:F(()=>[a("div",{class:U(["status-avatar",e.isPresent?"status-present":e.isAbsentJustified?"status-waiting":"status-absent"])},[I(D,{name:e.isPresent?"check_circle":e.isAbsentJustified?"event_busy":"cancel",size:"24px"},null,8,["name"])],2)]),default:F(()=>[a("div",js,[w[5]||(w[5]=a("div",{class:"status-title"},"Qu\xF3rum Finalizado",-1)),a("div",{class:U(["status-message",e.isPresent?"text-positive":e.isAbsentJustified?"text-info":"text-negative"])},T(e.isPresent?"Voc\xEA estava presente no qu\xF3rum":e.isAbsentJustified?"Falta Justificada":"Voc\xEA n\xE3o estava presente no qu\xF3rum"),3),e.isAbsentJustified&&e.absenceReason?(h(),P("div",Ns,[w[4]||(w[4]=a("strong",null,"Justificativa:",-1)),fe(" "+T(e.absenceReason),1)])):N("",!0),e.quorumFinalizedAt?(h(),P("div",Os," Finalizado em: "+T(A(Me)(e.quorumFinalizedAt)),1)):N("",!0),w[6]||(w[6]=a("div",{class:"status-hint text-grey-6"}," Aguarde um novo qu\xF3rum ser iniciado. ",-1))])]),_:1})):e.quorumStarted&&e.isPresent?(h(),G(Ae,{key:1,class:"modern-banner banner-success q-mb-3",dense:""},{avatar:F(()=>[a("div",Bs,[I(D,{name:"check_circle",size:"24px"})])]),default:F(()=>[w[7]||(w[7]=a("div",{class:"status-title"},"Voc\xEA est\xE1 presente no qu\xF3rum",-1))]),_:1})):e.quorumStarted&&!e.isPresent&&e.isAbsentJustified?(h(),G(Ae,{key:2,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:F(()=>[a("div",Qs,[I(D,{name:"event_busy",size:"24px"})])]),default:F(()=>[a("div",Us,[w[9]||(w[9]=a("div",{class:"status-title"},"Falta Justificada",-1)),e.absenceReason?(h(),P("div",Js,[w[8]||(w[8]=a("strong",null,"Justificativa:",-1)),fe(" "+T(e.absenceReason),1)])):(h(),P("div",Hs," Sua aus\xEAncia foi justificada. "))])]),_:1})):e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(h(),G(Ae,{key:3,class:"modern-banner banner-warning q-mb-3",dense:""},{avatar:F(()=>[a("div",Ws,[I(D,{name:"person_off",size:"24px"})])]),default:F(()=>[w[10]||(w[10]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"status-title"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum"),a("div",{class:"status-hint text-grey-6"}," Marque sua presen\xE7a para participar. ")],-1))]),_:1})):e.quorumStarted?N("",!0):(h(),G(Ae,{key:4,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:F(()=>[a("div",Gs,[I(D,{name:"schedule",size:"24px"})])]),default:F(()=>[w[11]||(w[11]=a("div",{class:"status-title"},"Aguardando o in\xEDcio do qu\xF3rum.",-1))]),_:1})),!e.quorumFinalized&&e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(h(),P("div",Ks,[I(ye,{class:"tw-w-full modern-action-btn btn-add",icon:"how_to_reg",label:"Marcar Presen\xE7a",disable:l.value,loading:e.loadingAttendance||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:c},{default:F(()=>[l.value?(h(),G(ot,{key:0,class:"bg-red"},{default:F(()=>[fe(T(r.value),1)]),_:1})):N("",!0)]),_:1},8,["disable","loading"]),I(ye,{class:"tw-w-full modern-action-btn btn-justify",icon:"event_busy",label:"Justificar",disable:l.value,loading:e.loadingJustify||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:w[0]||(w[0]=g=>t.value=!0)},{default:F(()=>[l.value?(h(),G(ot,{key:0,class:"bg-red"},{default:F(()=>[fe(T(r.value),1)]),_:1})):N("",!0)]),_:1},8,["disable","loading"])])):N("",!0),N("",!0)],64))]),_:1}),I(dt,{modelValue:t.value,"onUpdate:modelValue":w[2]||(w[2]=g=>t.value=g),persistent:""},{default:F(()=>[I(Ne,{style:{"min-width":"350px","max-width":"500px"}},{default:F(()=>[I(Pe,null,{default:F(()=>[...w[12]||(w[12]=[a("div",{class:"text-h6"},"Justificar Aus\xEAncia",-1)])]),_:1}),I(Pe,{class:"q-pt-none"},{default:F(()=>[I(da,{modelValue:d.value,"onUpdate:modelValue":w[1]||(w[1]=g=>d.value=g),type:"textarea",label:"Motivo da aus\xEAncia",placeholder:"Digite o motivo da sua aus\xEAncia...",autofocus:"",rules:[g=>g&&g.trim()||"Por favor, informe o motivo da aus\xEAncia"],rows:"4",outlined:"",counter:"",maxlength:"500"},null,8,["modelValue","rules"])]),_:1}),I(ca,{align:"right",class:"text-primary"},{default:F(()=>[I(ye,{flat:"",label:"Cancelar",onClick:C}),I(ye,{flat:"",label:"Justificar",color:"primary",loading:e.loadingJustify,disable:!d.value||!d.value.trim(),onClick:k},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Xs=Re(Ys,[["__scopeId","data-v-601c49e9"]]);const Zs={class:"quorum-tab"},en={class:"overview-card modern-card"},tn={class:"card-content"},an={class:"summary-title"},sn={__name:"QuorumTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=ge("quorum"),n=ge("sessionAgenda"),t=v(()=>{var r;return i.sessionId||((r=n==null?void 0:n.selectedAgendaId)==null?void 0:r.value)||null});function d(){s!=null&&s.toggleAttendance?s.toggleAttendance():console.error("[QuorumTab] quorum.toggleAttendance n\xE3o est\xE1 dispon\xEDvel")}function l(r){s!=null&&s.justifyAbsence?s.justifyAbsence(r):console.error("[QuorumTab] quorum.justifyAbsence n\xE3o est\xE1 dispon\xEDvel")}return(r,c)=>{var C,k,R,w,g,o,u,S,E,z,b,q,m,y,L,_,V,O,Q,M;return h(),P("div",Zs,[a("div",en,[a("div",tn,[a("div",an,[I(D,{name:"groups",size:"20px",class:"tw-mr-2"}),c[0]||(c[0]=fe(" Qu\xF3rum ",-1))]),I(Xs,{"is-present":((k=(C=A(s))==null?void 0:C.isPresent)==null?void 0:k.value)||!1,"is-absent-justified":((w=(R=A(s))==null?void 0:R.isAbsentJustified)==null?void 0:w.value)||!1,"absence-reason":((o=(g=A(s))==null?void 0:g.absenceReason)==null?void 0:o.value)||null,"quorum-finalized":((S=(u=A(s))==null?void 0:u.quorumFinalized)==null?void 0:S.value)||!1,"quorum-started":((z=(E=A(s))==null?void 0:E.quorumStarted)==null?void 0:z.value)||!1,"quorum-finalized-at":((q=(b=A(s))==null?void 0:b.quorumFinalizedAt)==null?void 0:q.value)||null,"selected-agenda-id":t.value,"can-send":((y=(m=A(s))==null?void 0:m.canSend)==null?void 0:y.value)||!1,"loading-quorum":((_=(L=A(s))==null?void 0:L.loadingQuorum)==null?void 0:_.value)||!1,"loading-attendance":((O=(V=A(s))==null?void 0:V.loadingAttendance)==null?void 0:O.value)||!1,"loading-justify":((M=(Q=A(s))==null?void 0:Q.loadingJustify)==null?void 0:M.value)||!1,onToggleAttendance:d,onJustifyAbsence:l},null,8,["is-present","is-absent-justified","absence-reason","quorum-finalized","quorum-started","quorum-finalized-at","selected-agenda-id","can-send","loading-quorum","loading-attendance","loading-justify"])])])])}}};var nn=Re(sn,[["__scopeId","data-v-013d4040"]]);const on={class:"tw-flex tw-items-center tw-gap-2"},ln={class:"tw-flex tw-flex-col tw-gap-1"},rn={class:U("text-caption tw-font-bold tw-text-red-700")},un={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},dn={class:"tw-space-y-2"},cn={key:0,class:"tw-text-gray-500 tw-ml-2"},vn={class:"tw-flex tw-flex-col tw-gap-1"},gn={class:U("text-body2 tw-font-bold tw-text-green-700")},fn={key:0,class:"text-caption"},mn={key:1,class:"text-caption"},hn={class:"tw-flex tw-flex-col tw-gap-1"},pn={class:"text-caption"},bn={__name:"ExpedientCard",props:{title:{type:String,required:!0},expedientLabel:{type:String,required:!0},icon:{type:String,required:!0},headerClass:{type:String,required:!0},headerColor:{type:String,required:!0},buttonColor:{type:String,required:!0},buttonIcon:{type:String,required:!0},isRegistered:{type:Boolean,default:!1},isPresent:{type:Boolean,default:!1},started:{type:Boolean,default:!1},finalized:{type:Boolean,default:!1},finalizedAt:{type:String,default:null},registrationOrder:{type:Number,default:null},registeredAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},loadingAction:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},finishedSpeech:{type:Object,default:null},finishedSpeechTotalMinutes:{type:Number,default:0},finishedSpeechUsedMinutes:{type:Number,default:0},finishedSpeechUsedSeconds:{type:Number,default:0},finishedSpeechFinishedAt:{type:String,default:null},sessionInteractions:{type:Array,default:()=>[]}},emits:["toggle-registration"],setup(e,{emit:i}){const s=e,n=i,t=v(()=>!s.canSend||!s.selectedAgendaId||!s.started||s.finalized||!s.isPresent||s.loadingAction),d=v(()=>s.canSend?s.selectedAgendaId?s.started?s.finalized?"Inscri\xE7\xF5es foram finalizadas":s.isPresent?s.loadingAction?"Processando inscri\xE7\xE3o...":"":"Voc\xEA precisa estar presente no qu\xF3rum para se inscrever":"Inscri\xE7\xF5es ainda n\xE3o foram iniciadas":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function l(){if(console.log(`[ExpedientCard ${s.title}] handleToggleRegistration chamado`,{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,started:s.started,finalized:s.finalized,loadingAction:s.loadingAction,isButtonDisabled:t.value}),t.value){console.warn(`[ExpedientCard ${s.title}] Bot\xE3o est\xE1 desabilitado:`,d.value);return}console.log(`[ExpedientCard ${s.title}] Emitindo toggle-registration`),n("toggle-registration")}return(r,c)=>(h(),G(Ne,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:F(()=>[I(Pe,{class:U(`tw-flex tw-items-center tw-justify-between ${e.headerClass} tw-text-white ${r.$q.screen.lt.md?"tw-py-1":"tw-py-2"}`)},{default:F(()=>[a("div",on,[I(D,{name:e.icon,size:r.$q.screen.lt.md?"18px":"20px"},null,8,["name","size"]),a("div",{class:U(`${r.$q.screen.lt.md?"text-body2":"text-subtitle1"} tw-font-semibold`)},T(e.title),3)])]),_:1},8,["class"]),I(Pe,{class:U(`tw-relative tw-w-full ${r.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`),style:Dt(r.$q.screen.lt.md?"min-height: 60px":"min-height: 80px")},{default:F(()=>[I(Yt,{showing:e.loadingData,color:e.headerColor,size:"50px"},null,8,["showing","color"]),e.loadingData?N("",!0):(h(),P(xe,{key:0},[e.finalized&&e.isRegistered&&!e.finishedSpeech?(h(),G(Ae,{key:0,class:U(`text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:F(()=>[I(D,{name:"check_circle",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",{class:U(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-bold tw-text-green-700`)}," Inscri\xE7\xF5es Finalizadas - Voc\xEA est\xE1 inscrito ",2),e.registrationOrder?(h(),P("div",{key:0,class:U(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Sua posi\xE7\xE3o na fila: "+T(e.registrationOrder)+"\xBA ",3)):N("",!0)],2)]),_:1},8,["class"])):e.finalized&&!e.isRegistered&&!e.isPresent&&!e.finishedSpeech?(h(),G(Ae,{key:1,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[c[0]||(c[0]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas "),a("div",{class:"text-caption"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum. ")],-1))]),_:1})):e.finalized&&!e.isRegistered&&e.isPresent&&!e.finishedSpeech?(h(),G(Ae,{key:2,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"cancel",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",ln,[c[1]||(c[1]=a("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas ",-1)),a("div",rn," Voc\xEA n\xE3o est\xE1 inscrito no "+T(e.expedientLabel)+". ",1)])]),_:1})):N("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(h(),G(Ae,{key:3,class:U(`bg-green-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:F(()=>[I(D,{name:"mic",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",{class:U(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},"Voc\xEA est\xE1 falando",2),a("div",{class:U(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-green-700`)}," Tempo restante: "+T(A(Vt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):N("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(h(),G(Ae,{key:4,class:U(`bg-yellow-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:F(()=>[I(D,{name:"pause",color:"orange",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",{class:U(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala est\xE1 pausada ",2),a("div",{class:U(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-yellow-700`)}," Tempo restante: "+T(A(Vt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):N("",!0),e.finishedSpeech?(h(),G(Ae,{key:5,class:U(`text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:F(()=>[I(D,{name:"check_circle",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",{class:U(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala foi finalizada ",2),a("div",{class:U(`tw-grid tw-grid-cols-2 ${r.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-2"}`)},[a("div",null,[a("div",{class:U(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total Alocado ",2),a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},T(e.finishedSpeechTotalMinutes)+" min ",3)]),a("div",null,[a("div",{class:U(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Utilizado ",2),a("div",{class:U(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},T(e.finishedSpeechUsedMinutes)+" min "+T(e.finishedSpeechUsedSeconds)+" s ",3)])],2),e.finishedSpeechFinishedAt?(h(),P("div",{key:0,class:U(`${r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-600 ${r.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Finalizada em: "+T(A(Me)(e.finishedSpeechFinishedAt)),3)):N("",!0)],2)]),_:1},8,["class"])):N("",!0),e.sessionInteractions.length>0?(h(),G(Ne,{key:6,flat:"",bordered:"",class:"q-mb-2 tw-bg-blue-50"},{default:F(()=>[I(Pe,{class:"tw-py-3"},{default:F(()=>[a("div",un,[I(D,{name:"history",color:"primary",size:"20px"}),c[2]||(c[2]=a("div",{class:"text-body2 tw-font-semibold"}," Suas Intera\xE7\xF5es na Sess\xE3o ",-1))]),a("div",dn,[(h(!0),P(xe,null,Ie(e.sessionInteractions,(C,k)=>(h(),P("div",{key:k,class:"tw-text-sm tw-text-gray-700"},[I(D,{name:C.icon,color:C.color,size:"16px",class:"tw-mr-2"},null,8,["name","color"]),a("span",null,T(C.label),1),C.time?(h(),P("span",cn," ("+T(C.time)+") ",1)):N("",!0)]))),128))])]),_:1})]),_:1})):e.started&&e.isRegistered?(h(),G(Ae,{key:7,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"check_circle",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",vn,[a("div",gn," Voc\xEA est\xE1 inscrito no "+T(e.title),1),e.registrationOrder?(h(),P("div",fn," Sua posi\xE7\xE3o na fila: "+T(e.registrationOrder)+"\xBA ",1)):N("",!0),e.registeredAt?(h(),P("div",mn," Inscrito em: "+T(A(Me)(e.registeredAt)),1)):N("",!0)])]),_:1})):e.started&&!e.isPresent?(h(),G(Ae,{key:8,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[a("div",hn,[c[3]||(c[3]=a("div",{class:"text-body2 tw-font-semibold"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum ",-1)),a("div",pn," Marque sua presen\xE7a no qu\xF3rum para poder se inscrever no "+T(e.expedientLabel)+". ",1)])]),_:1})):e.started&&!e.isRegistered&&e.isPresent?(h(),G(Ae,{key:9,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"assignment",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[c[4]||(c[4]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es abertas"),a("div",{class:"text-caption"},"Clique no bot\xE3o para se inscrever.")],-1))]),_:1})):!e.started&&!e.finalized?(h(),G(Ae,{key:10,class:"text-black q-mb-2",dense:""},{avatar:F(()=>[I(D,{name:"schedule",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:F(()=>[c[5]||(c[5]=a("div",{class:"text-body2"},"Aguardando o in\xEDcio das inscri\xE7\xF5es.",-1))]),_:1})):N("",!0),e.started&&!e.finalized&&e.isPresent?(h(),G(ye,{key:11,class:"full-width q-mt-sm",color:e.isRegistered?"negative":e.buttonColor,icon:e.isRegistered?"cancel":e.buttonIcon,label:e.isRegistered?"Remover Inscri\xE7\xE3o":"Inscrever",disable:t.value,loading:e.loadingAction,size:"md",dense:"",onClick:l},{default:F(()=>[t.value?(h(),G(ot,{key:0,class:"bg-red"},{default:F(()=>[fe(T(d.value),1)]),_:1})):N("",!0)]),_:1},8,["color","icon","label","disable","loading"])):N("",!0)],64))]),_:1},8,["class","style"])]),_:1}))}};var $t=Re(bn,[["__scopeId","data-v-fdc1449a"]]);const wn={class:"expedient-tab"},Sn={class:"overview-card modern-card"},yn={class:"card-content"},_n={class:"summary-title"},xn={key:1,class:"tw-text-center tw-text-gray-500 tw-py-8"},qn={__name:"SmallExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=ge("sessionSettings"),n=ge("quorum"),t=ge("smallExpedient"),d=ge("smallSpeech"),l=ge("sessionInteractions"),r=ge("sessionAgenda"),c=v(()=>{var C;return i.sessionId||((C=r==null?void 0:r.selectedAgendaId)==null?void 0:C.value)||null});return(C,k)=>{var R,w,g,o,u,S,E,z,b,q,m,y,L,_,V,O,Q,M,$,J,Z,ne,B,te,Y,me,ce,re,p,x,f,H,W,oe,ue,he,we,qe,ze,ie,Ce,Te,Ee,Xe,Ze;return h(),P("div",wn,[a("div",Sn,[a("div",yn,[a("div",_n,[I(D,{name:"timer",size:"20px",class:"tw-mr-2"}),fe(" "+T(((w=(R=A(s))==null?void 0:R.smallExpedientName)==null?void 0:w.value)||"Pequeno Expediente"),1)]),(o=(g=A(s))==null?void 0:g.enableSmallExpedientSpeech)!=null&&o.value?(h(),G($t,{key:0,title:((S=(u=A(s))==null?void 0:u.smallExpedientName)==null?void 0:S.value)||"Pequeno Expediente","expedient-label":(((z=(E=A(s))==null?void 0:E.smallExpedientName)==null?void 0:z.value)||"Pequeno Expediente").toLowerCase(),icon:"timer","header-class":"bg-secondary","header-color":"secondary","button-color":"secondary","button-icon":"assignment","is-registered":((q=(b=A(t))==null?void 0:b.isRegistered)==null?void 0:q.value)||!1,"is-present":((y=(m=A(n))==null?void 0:m.isPresent)==null?void 0:y.value)||!1,started:((_=(L=A(t))==null?void 0:L.started)==null?void 0:_.value)||!1,finalized:((O=(V=A(t))==null?void 0:V.finalized)==null?void 0:O.value)||!1,"finalized-at":((M=(Q=A(t))==null?void 0:Q.finalizedAt)==null?void 0:M.value)||null,"registration-order":((J=($=A(t))==null?void 0:$.registrationOrder)==null?void 0:J.value)||null,"registered-at":((ne=(Z=A(t))==null?void 0:Z.registeredAt)==null?void 0:ne.value)||null,"selected-agenda-id":c.value,"can-send":((te=(B=A(t))==null?void 0:B.canSend)==null?void 0:te.value)||!1,"loading-data":((me=(Y=A(t))==null?void 0:Y.loadingData)==null?void 0:me.value)||!1,"loading-action":((re=(ce=A(t))==null?void 0:ce.loadingAction)==null?void 0:re.value)||!1,"current-speech":((x=(p=A(d))==null?void 0:p.currentSpeech)==null?void 0:x.value)||null,"remaining-time":((H=(f=A(d))==null?void 0:f.remainingTime)==null?void 0:H.value)||null,"finished-speech":((oe=(W=A(d))==null?void 0:W.finishedSpeech)==null?void 0:oe.value)||null,"finished-speech-total-minutes":((he=(ue=A(d))==null?void 0:ue.finishedSpeechTotalMinutes)==null?void 0:he.value)||0,"finished-speech-used-minutes":((qe=(we=A(d))==null?void 0:we.finishedSpeechUsedMinutes)==null?void 0:qe.value)||0,"finished-speech-used-seconds":((ie=(ze=A(d))==null?void 0:ze.finishedSpeechUsedSeconds)==null?void 0:ie.value)||0,"finished-speech-finished-at":((Te=(Ce=A(d))==null?void 0:Ce.finishedSpeechFinishedAt)==null?void 0:Te.value)||null,"session-interactions":((Xe=(Ee=A(l))==null?void 0:Ee.sessionInteractions)==null?void 0:Xe.value)||[],onToggleRegistration:(Ze=A(t))==null?void 0:Ze.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])):(h(),P("div",xn," As falas n\xE3o est\xE3o habilitadas para o pequeno expediente. "))])])])}}};var $n=Re(qn,[["__scopeId","data-v-42c13971"]]);const An={class:"expedient-tab"},In={class:"overview-card modern-card"},kn={class:"card-content"},Vn={class:"summary-title"},Rn={__name:"LargeExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=ge("sessionSettings"),n=ge("quorum"),t=ge("largeExpedient"),d=ge("largeSpeech"),l=ge("sessionInteractions"),r=ge("sessionAgenda"),c=v(()=>{var C;return i.sessionId||((C=r==null?void 0:r.selectedAgendaId)==null?void 0:C.value)||null});return(C,k)=>{var R,w,g,o,u,S,E,z,b,q,m,y,L,_,V,O,Q,M,$,J,Z,ne,B,te,Y,me,ce,re,p,x,f,H,W,oe,ue,he,we,qe,ze,ie,Ce,Te,Ee;return h(),P("div",An,[a("div",In,[a("div",kn,[a("div",Vn,[I(D,{name:"assignment_turned_in",size:"20px",class:"tw-mr-2"}),fe(" "+T(((w=(R=A(s))==null?void 0:R.largeExpedientName)==null?void 0:w.value)||"Grande Expediente"),1)]),I($t,{title:((o=(g=A(s))==null?void 0:g.largeExpedientName)==null?void 0:o.value)||"Grande Expediente","expedient-label":(((S=(u=A(s))==null?void 0:u.largeExpedientName)==null?void 0:S.value)||"Grande Expediente").toLowerCase(),icon:"assignment_turned_in","header-class":"bg-orange","header-color":"orange","button-color":"orange","button-icon":"assignment_turned_in","is-registered":((z=(E=A(t))==null?void 0:E.isRegistered)==null?void 0:z.value)||!1,"is-present":((q=(b=A(n))==null?void 0:b.isPresent)==null?void 0:q.value)||!1,started:((y=(m=A(t))==null?void 0:m.started)==null?void 0:y.value)||!1,finalized:((_=(L=A(t))==null?void 0:L.finalized)==null?void 0:_.value)||!1,"finalized-at":((O=(V=A(t))==null?void 0:V.finalizedAt)==null?void 0:O.value)||null,"registration-order":((M=(Q=A(t))==null?void 0:Q.registrationOrder)==null?void 0:M.value)||null,"registered-at":((J=($=A(t))==null?void 0:$.registeredAt)==null?void 0:J.value)||null,"selected-agenda-id":c.value,"can-send":((ne=(Z=A(t))==null?void 0:Z.canSend)==null?void 0:ne.value)||!1,"loading-data":((te=(B=A(t))==null?void 0:B.loadingData)==null?void 0:te.value)||!1,"loading-action":((me=(Y=A(t))==null?void 0:Y.loadingAction)==null?void 0:me.value)||!1,"current-speech":((re=(ce=A(d))==null?void 0:ce.currentSpeech)==null?void 0:re.value)||null,"remaining-time":((x=(p=A(d))==null?void 0:p.remainingTime)==null?void 0:x.value)||null,"finished-speech":((H=(f=A(d))==null?void 0:f.finishedSpeech)==null?void 0:H.value)||null,"finished-speech-total-minutes":((oe=(W=A(d))==null?void 0:W.finishedSpeechTotalMinutes)==null?void 0:oe.value)||0,"finished-speech-used-minutes":((he=(ue=A(d))==null?void 0:ue.finishedSpeechUsedMinutes)==null?void 0:he.value)||0,"finished-speech-used-seconds":((qe=(we=A(d))==null?void 0:we.finishedSpeechUsedSeconds)==null?void 0:qe.value)||0,"finished-speech-finished-at":((ie=(ze=A(d))==null?void 0:ze.finishedSpeechFinishedAt)==null?void 0:ie.value)||null,"session-interactions":((Te=(Ce=A(l))==null?void 0:Ce.sessionInteractions)==null?void 0:Te.value)||[],onToggleRegistration:(Ee=A(t))==null?void 0:Ee.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var zn=Re(Rn,[["__scopeId","data-v-d0cf9872"]]);const Cn={class:"expedient-tab"},Tn={class:"overview-card modern-card"},Pn={class:"card-content"},Ln={class:"summary-title"},En={__name:"MiscellaneousSubjectsTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=ge("sessionSettings"),n=ge("quorum"),t=ge("miscellaneousSubject"),d=ge("miscellaneousSubjectSpeech"),l=ge("sessionInteractions"),r=ge("sessionAgenda"),c=v(()=>{var C;return i.sessionId||((C=r==null?void 0:r.selectedAgendaId)==null?void 0:C.value)||null});return(C,k)=>{var R,w,g,o,u,S,E,z,b,q,m,y,L,_,V,O,Q,M,$,J,Z,ne,B,te,Y,me,ce,re,p,x,f,H,W,oe,ue,he,we,qe,ze,ie,Ce,Te,Ee;return h(),P("div",Cn,[a("div",Tn,[a("div",Pn,[a("div",Ln,[I(D,{name:"topic",size:"20px",class:"tw-mr-2"}),fe(" "+T(((w=(R=A(s))==null?void 0:R.miscellaneousSubjectsName)==null?void 0:w.value)||"Assuntos Diversos"),1)]),I($t,{title:((o=(g=A(s))==null?void 0:g.miscellaneousSubjectsName)==null?void 0:o.value)||"Assuntos Diversos","expedient-label":(((S=(u=A(s))==null?void 0:u.miscellaneousSubjectsName)==null?void 0:S.value)||"Assuntos Diversos").toLowerCase(),icon:"topic","header-class":"bg-teal","header-color":"teal","button-color":"teal","button-icon":"topic","is-registered":((z=(E=A(t))==null?void 0:E.isRegistered)==null?void 0:z.value)||!1,"is-present":((q=(b=A(n))==null?void 0:b.isPresent)==null?void 0:q.value)||!1,started:((y=(m=A(t))==null?void 0:m.started)==null?void 0:y.value)||!1,finalized:((_=(L=A(t))==null?void 0:L.finalized)==null?void 0:_.value)||!1,"finalized-at":((O=(V=A(t))==null?void 0:V.finalizedAt)==null?void 0:O.value)||null,"registration-order":((M=(Q=A(t))==null?void 0:Q.registrationOrder)==null?void 0:M.value)||null,"registered-at":((J=($=A(t))==null?void 0:$.registeredAt)==null?void 0:J.value)||null,"selected-agenda-id":c.value,"can-send":((ne=(Z=A(t))==null?void 0:Z.canSend)==null?void 0:ne.value)||!1,"loading-data":((te=(B=A(t))==null?void 0:B.loadingData)==null?void 0:te.value)||!1,"loading-action":((me=(Y=A(t))==null?void 0:Y.loadingAction)==null?void 0:me.value)||!1,"current-speech":((re=(ce=A(d))==null?void 0:ce.currentSpeech)==null?void 0:re.value)||null,"remaining-time":((x=(p=A(d))==null?void 0:p.remainingTime)==null?void 0:x.value)||null,"finished-speech":((H=(f=A(d))==null?void 0:f.finishedSpeech)==null?void 0:H.value)||null,"finished-speech-total-minutes":((oe=(W=A(d))==null?void 0:W.finishedSpeechTotalMinutes)==null?void 0:oe.value)||0,"finished-speech-used-minutes":((he=(ue=A(d))==null?void 0:ue.finishedSpeechUsedMinutes)==null?void 0:he.value)||0,"finished-speech-used-seconds":((qe=(we=A(d))==null?void 0:we.finishedSpeechUsedSeconds)==null?void 0:qe.value)||0,"finished-speech-finished-at":((ie=(ze=A(d))==null?void 0:ze.finishedSpeechFinishedAt)==null?void 0:ie.value)||null,"session-interactions":((Te=(Ce=A(l))==null?void 0:Ce.sessionInteractions)==null?void 0:Te.value)||[],onToggleRegistration:(Ee=A(t))==null?void 0:Ee.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var Mn=Re(En,[["__scopeId","data-v-1f49aca2"]]);const Fn={class:"voting-tab"},Dn={class:"overview-card modern-card"},jn={class:"card-content"},Nn={class:"summary-title"},On={key:0,class:"section-container"},Bn={class:"section-title"},Qn={class:"propositions-list"},Un={class:"proposition-header"},Jn={class:"proposition-badges"},Hn={class:"proposition-number"},Wn={class:"proposition-title"},Gn={key:0,class:"proposition-species"},Kn={key:1,class:"section-container"},Yn={class:"section-title"},Xn={class:"propositions-list"},Zn={class:"voting-results"},ei={class:"results-grid"},ti={class:"result-item result-favor"},ai={class:"result-content"},si={class:"result-value"},ni={class:"result-item result-against"},ii={class:"result-content"},oi={class:"result-value"},li={class:"result-item result-abstain"},ri={class:"result-content"},ui={class:"result-value"},di={class:"result-item result-total"},ci={class:"result-content"},vi={class:"result-value"},gi={key:0,class:"members-section"},fi={class:"members-grid"},mi={class:"member-card-content"},hi=["src","alt"],pi={key:1},bi={class:"member-info"},wi={class:"member-name"},Si={key:0,class:"member-party"},yi={key:1,class:"secret-voting-message"},_i={class:"secret-message-count"},xi={key:2,class:"no-votes-message"},qi={key:2,class:"empty-voting-state"},$i={__name:"VotingTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=ge("voting",null);ut(()=>{s!=null&&s.loadVotingStatus&&s.loadVotingStatus()}),ve(()=>i.sessionId,o=>{o&&(s==null?void 0:s.loadVotingStatus)&&s.loadVotingStatus()},{immediate:!0});const n=v(()=>{var o,u;return(u=(o=s==null?void 0:s.activeVoting)==null?void 0:o.value)!=null&&u.readings?s.activeVoting.value.readings.filter(S=>S.type==="voting"||S.type==="secret_voting"):[]}),t=v(()=>{var o;return(o=s==null?void 0:s.finishedReadings)!=null&&o.value?s.finishedReadings.value.filter(u=>u.type==="voting"||u.type==="secret_voting"):[]});function d(o){if(!o.proposition)return"Proposi\xE7\xE3o sem dados";const u=o.proposition.number,S=o.proposition.year,E=o.proposition.description||o.proposition.title||"";return`${u}/${S}${E?" - "+E:""}`}function l(o){var z;if(o.type==="secret_voting")return`Vota\xE7\xE3o Secreta - ${((z=o.votes)==null?void 0:z.length)||0} voto(s)`;if(!o.votes||o.votes.length===0)return"Nenhum voto registrado";const u=r(o.votes,"favor"),S=r(o.votes,"against"),E=r(o.votes,"abstain");return`${u} a favor, ${S} contra, ${E} absten\xE7\xF5es`}function r(o,u){return!o||!Array.isArray(o)?0:o.filter(S=>S.vote===u).length}function c(o){switch(o){case"favor":return"thumb_up";case"against":return"thumb_down";case"abstain":return"remove_circle";default:return"help"}}function C(o){switch(o){case"favor":return"green";case"against":return"red";case"abstain":return"orange";default:return"grey"}}function k(o){switch(o){case"favor":return"tw-bg-green-50 tw-border-green-200";case"against":return"tw-bg-red-50 tw-border-red-200";case"abstain":return"tw-bg-orange-50 tw-border-orange-200";default:return""}}function R(o){if(!o)return"";const u=o.split(" ");return u.length>=2?(u[0][0]+u[u.length-1][0]).toUpperCase():o.substring(0,2).toUpperCase()}function w(o){if(!o)return null;if(o.startsWith("http://")||o.startsWith("https://"))return o;const u={}.VITE_API_BASE_URL||"http://127.0.0.1:8000";return o.startsWith("/")?`${u}${o}`:`${u}/${o}`}function g(o){return!o||o.type==="secret_voting"||!o.votes||!Array.isArray(o.votes)?!1:o.votes.length>0}return(o,u)=>(h(),P("div",Fn,[a("div",Dn,[a("div",jn,[a("div",Nn,[I(D,{name:"how_to_vote",size:"20px",class:"tw-mr-2"}),u[0]||(u[0]=fe(" Vota\xE7\xF5es ",-1))]),n.value.length>0?(h(),P("div",On,[a("div",Bn,[I(D,{name:"schedule",size:"20px",class:"section-icon",color:"primary"}),u[1]||(u[1]=a("span",{class:"section-title-text"},"Vota\xE7\xF5es em Andamento",-1))]),a("div",Qn,[(h(!0),P(xe,null,Ie(n.value,S=>(h(),G(Ne,{key:S.id,flat:"",bordered:"",class:"proposition-card mobile-card"},{default:F(()=>[I(Pe,{class:"proposition-card-section"},{default:F(()=>{var E,z,b,q,m;return[a("div",Un,[a("div",Jn,[I(Qt,{color:S.type==="secret_voting"?"blue":"primary",label:S.type==="secret_voting"?"Secreta":"Vota\xE7\xE3o",class:"type-badge"},null,8,["color","label"]),a("span",Hn,T((E=S.proposition)==null?void 0:E.number)+"/"+T((z=S.proposition)==null?void 0:z.year),1)])]),a("div",Wn,T(((b=S.proposition)==null?void 0:b.description)||((q=S.proposition)==null?void 0:q.title)||"Sem descri\xE7\xE3o"),1),(m=S.proposition)!=null&&m.species?(h(),P("div",Gn,T(S.proposition.species.name),1)):N("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):N("",!0),t.value.length>0?(h(),P("div",Kn,[a("div",Yn,[I(D,{name:"check_circle",size:"20px",class:"section-icon",color:"positive"}),u[2]||(u[2]=a("span",{class:"section-title-text"},"Vota\xE7\xF5es Finalizadas",-1))]),a("div",Xn,[(h(!0),P(xe,null,Ie(t.value,S=>(h(),G(Ut,{key:S.id,"header-class":"proposition-expansion-header mobile-expansion-header","expand-icon-class":"expansion-icon",class:"proposition-expansion mobile-expansion"},{header:F(()=>[I(We,{avatar:"",class:"expansion-avatar"},{default:F(()=>[I(D,{name:S.type==="secret_voting"?"lock":"how_to_vote",color:S.type==="secret_voting"?"blue":"primary",size:"22px"},null,8,["name","color"])]),_:2},1024),I(We,{class:"expansion-content"},{default:F(()=>[I(Ye,{class:"expansion-title"},{default:F(()=>[fe(T(d(S)),1)]),_:2},1024),I(Ye,{caption:"",class:"expansion-caption"},{default:F(()=>[fe(T(l(S)),1)]),_:2},1024)]),_:2},1024)]),default:F(()=>[I(Ne,{flat:"",class:"expansion-content-card"},{default:F(()=>[I(Pe,{class:"expansion-card-section"},{default:F(()=>{var E,z;return[a("div",Zn,[u[7]||(u[7]=a("div",{class:"results-title"}," Resultado da Vota\xE7\xE3o ",-1)),a("div",ei,[a("div",ti,[I(D,{name:"thumb_up",color:"green",size:"18px"}),a("div",ai,[a("span",si,T(r(S.votes,"favor")),1),u[3]||(u[3]=a("span",{class:"result-label"},"A Favor",-1))])]),a("div",ni,[I(D,{name:"thumb_down",color:"red",size:"18px"}),a("div",ii,[a("span",oi,T(r(S.votes,"against")),1),u[4]||(u[4]=a("span",{class:"result-label"},"Contra",-1))])]),a("div",li,[I(D,{name:"remove_circle",color:"orange",size:"18px"}),a("div",ri,[a("span",ui,T(r(S.votes,"abstain")),1),u[5]||(u[5]=a("span",{class:"result-label"},"Absten\xE7\xF5es",-1))])]),a("div",di,[I(D,{name:"people",color:"grey",size:"18px"}),a("div",ci,[a("span",vi,T(((E=S.votes)==null?void 0:E.length)||0),1),u[6]||(u[6]=a("span",{class:"result-label"},"Total",-1))])])])]),S.type!=="secret_voting"&&g(S)?(h(),P("div",gi,[u[8]||(u[8]=a("div",{class:"members-title"}," Votos dos Vereadores ",-1)),a("div",fi,[(h(!0),P(xe,null,Ie(S.votes,b=>(h(),G(Ne,{key:b.id||`vote-${b.proponent_id}-${b.vote}`,flat:"",bordered:"",class:U(["member-vote-card","mobile-member-card",k(b.vote)])},{default:F(()=>[I(Pe,{class:"member-card-section"},{default:F(()=>[a("div",mi,[I(_t,{size:"28px",color:"primary","text-color":"white",class:"member-avatar"},{default:F(()=>[b.proponent_photo?(h(),P("img",{key:0,src:w(b.proponent_photo),alt:b.proponent_name},null,8,hi)):(h(),P("span",pi,T(R(b.proponent_name)),1))]),_:2},1024),a("div",bi,[a("div",wi,T(b.proponent_name),1),b.proponent_party?(h(),P("div",Si,T(b.proponent_party.abbreviation||b.proponent_party.name),1)):N("",!0)]),I(D,{name:c(b.vote),color:C(b.vote),size:"18px",class:"member-vote-icon"},null,8,["name","color"])])]),_:2},1024)]),_:2},1032,["class"]))),128))])])):S.type==="secret_voting"?(h(),P("div",yi,[I(D,{name:"lock",size:"28px",color:"blue"}),u[9]||(u[9]=a("div",{class:"secret-message-text"}," Vota\xE7\xE3o secreta - Os votos n\xE3o s\xE3o exibidos publicamente ",-1)),a("div",_i," Total de votos: "+T(((z=S.votes)==null?void 0:z.length)||0),1)])):S.type!=="secret_voting"?(h(),P("div",xi,[I(D,{name:"info",size:"28px",color:"grey"}),u[10]||(u[10]=a("div",{class:"no-votes-text"}," Nenhum voto registrado ",-1))])):N("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])):N("",!0),n.value.length===0&&t.value.length===0?(h(),P("div",qi,[I(D,{name:"how_to_vote",size:"64px",color:"grey-5",class:"tw-mb-4"}),u[11]||(u[11]=a("div",{class:"empty-title"},"Aguardando Vota\xE7\xF5es",-1)),u[12]||(u[12]=a("div",{class:"empty-subtitle"}," Nenhuma vota\xE7\xE3o est\xE1 em andamento ou foi finalizada ainda. ",-1))])):N("",!0)])])]))}};var Ai=Re($i,[["__scopeId","data-v-57743baf"]]);let Ii=0;const ki=["click","keydown"],Vi={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Ii++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ri(e,i,s,n){const t=ge(jt,Ke);if(t===Ke)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ke;const{proxy:d}=Je(),l=ee(null),r=ee(null),c=ee(null),C=v(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),k=v(()=>t.currentModel.value===e.name),R=v(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(k.value===!0?" q-tab--active"+(t.tabProps.value.activeClass?" "+t.tabProps.value.activeClass:"")+(t.tabProps.value.activeColor?` text-${t.tabProps.value.activeColor}`:"")+(t.tabProps.value.activeBgColor?` bg-${t.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&t.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||t.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),w=v(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(t.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),g=v(()=>e.disable===!0||t.hasFocus.value===!0||k.value===!1&&t.hasActiveTab.value===!0?-1:e.tabindex||0);function o(b,q){var m;if(q!==!0&&(b==null?void 0:b.qAvoidFocus)!==!0&&((m=l.value)==null||m.focus()),e.disable===!0){(n==null?void 0:n.hasRouterLink.value)===!0&&it(b);return}if(n===void 0){t.updateModel({name:e.name}),s("click",b);return}if(n.hasRouterLink.value===!0){const y=(L={})=>{let _;const V=L.to===void 0||fa(L.to,e.to)===!0?t.avoidRouteWatcher=Mt():null;return n.navigateToRouterLink(b,{...L,returnRouterError:!0}).catch(O=>{_=O}).then(O=>{var Q;if(V===t.avoidRouteWatcher&&(t.avoidRouteWatcher=!1,_===void 0&&(O===void 0||((Q=O.message)==null?void 0:Q.startsWith("Avoided redundant navigation"))===!0)&&t.updateModel({name:e.name})),L.returnRouterError===!0)return _!==void 0?Promise.reject(_):O})};s("click",b,y),b.defaultPrevented!==!0&&y();return}s("click",b)}function u(b){va(b,[13,32])?o(b,!0):ga(b)!==!0&&b.keyCode>=35&&b.keyCode<=40&&b.altKey!==!0&&b.metaKey!==!0&&t.onKbdNavigate(b.keyCode,d.$el)===!0&&it(b),s("keydown",b)}function S(){const b=t.tabProps.value.narrowIndicator,q=[],m=K("div",{ref:c,class:["q-tab__indicator",t.tabProps.value.indicatorClass]});e.icon!==void 0&&q.push(K(D,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&q.push(K("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&q.push(e.alertIcon!==void 0?K(D,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):K("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),b===!0&&q.push(m);const y=[K("div",{class:"q-focus-helper",tabindex:-1,ref:l}),K("div",{class:w.value},tt(i.default,q))];return b===!1&&y.push(m),y}const E={name:v(()=>e.name),rootRef:r,tabIndicatorRef:c,routeData:n};at(()=>{t.unregisterTab(E)}),ut(()=>{t.registerTab(E)});function z(b,q){const m={ref:r,class:R.value,tabindex:g.value,role:"tab","aria-selected":k.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:o,onKeydown:u,...q};return je(K(b,m,S()),[[Rt,C.value]])}return{renderTab:z,$tabs:t}}var zi=Fe({name:"QTab",props:Vi,emits:ki,setup(e,{slots:i,emit:s}){const{renderTab:n}=Ri(e,i,s);return()=>n("div")}});let Xt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const i=document.createElement("div");Object.assign(i.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(i),e.scrollLeft=-1e3,Xt=e.scrollLeft>=0,e.remove()}function Ci(e,i,s){const n=s===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const Ti=["left","center","right","justify"];var Pi=Fe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Ti.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:i,emit:s}){const{proxy:n}=Je(),{$q:t}=n,{registerTick:d}=gt(),{registerTick:l}=gt(),{registerTick:r}=gt(),{registerTimeout:c,removeTimeout:C}=kt(),{registerTimeout:k,removeTimeout:R}=kt(),w=ee(null),g=ee(null),o=ee(e.modelValue),u=ee(!1),S=ee(!0),E=ee(!1),z=ee(!1),b=[],q=ee(0),m=ee(!1);let y=null,L=null,_;const V=v(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ci(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),O=v(()=>{const j=q.value,X=o.value;for(let se=0;se<j;se++)if(b[se].name.value===X)return!0;return!1}),Q=v(()=>`q-tabs__content--align-${u.value===!0?"left":z.value===!0?"justify":e.align}`),M=v(()=>`q-tabs row no-wrap items-center q-tabs--${u.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),$=v(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Q.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),J=v(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Z=v(()=>e.vertical!==!0&&t.lang.rtl===!0),ne=v(()=>Xt===!1&&Z.value===!0);ve(Z,re),ve(()=>e.modelValue,j=>{B({name:j,setCurrent:!0,skipEmit:!0})}),ve(()=>e.outsideArrows,te);function B({name:j,setCurrent:X,skipEmit:se}){o.value!==j&&(se!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",j),(X===!0||e["onUpdate:modelValue"]===void 0)&&(me(o.value,j),o.value=j))}function te(){d(()=>{w.value&&Y({width:w.value.offsetWidth,height:w.value.offsetHeight})})}function Y(j){if(J.value===void 0||g.value===null)return;const X=j[J.value.container],se=Math.min(g.value[J.value.scroll],Array.prototype.reduce.call(g.value.children,(be,de)=>be+(de[J.value.content]||0),0)),pe=X>0&&se>X;u.value=pe,pe===!0&&l(re),z.value=X<parseInt(e.breakpoint,10)}function me(j,X){const se=j!=null&&j!==""?b.find(be=>be.name.value===j):null,pe=X!=null&&X!==""?b.find(be=>be.name.value===X):null;if(st===!0)st=!1;else if(se&&pe){const be=se.tabIndicatorRef.value,de=pe.tabIndicatorRef.value;y!==null&&(clearTimeout(y),y=null),be.style.transition="none",be.style.transform="none",de.style.transition="none",de.style.transform="none";const le=be.getBoundingClientRect(),_e=de.getBoundingClientRect();de.style.transform=e.vertical===!0?`translate3d(0,${le.top-_e.top}px,0) scale3d(1,${_e.height?le.height/_e.height:1},1)`:`translate3d(${le.left-_e.left}px,0,0) scale3d(${_e.width?le.width/_e.width:1},1,1)`,r(()=>{y=setTimeout(()=>{y=null,de.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",de.style.transform="none"},70)})}pe&&u.value===!0&&ce(pe.rootRef.value)}function ce(j){const{left:X,width:se,top:pe,height:be}=g.value.getBoundingClientRect(),de=j.getBoundingClientRect();let le=e.vertical===!0?de.top-pe:de.left-X;if(le<0){g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(le),re();return}le+=e.vertical===!0?de.height-be:de.width-se,le>0&&(g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(le),re())}function re(){const j=g.value;if(j===null)return;const X=j.getBoundingClientRect(),se=e.vertical===!0?j.scrollTop:Math.abs(j.scrollLeft);Z.value===!0?(S.value=Math.ceil(se+X.width)<j.scrollWidth-1,E.value=se>0):(S.value=se>0,E.value=e.vertical===!0?Math.ceil(se+X.height)<j.scrollHeight:Math.ceil(se+X.width)<j.scrollWidth)}function p(j){L!==null&&clearInterval(L),L=setInterval(()=>{ue(j)===!0&&H()},5)}function x(){p(ne.value===!0?Number.MAX_SAFE_INTEGER:0)}function f(){p(ne.value===!0?0:Number.MAX_SAFE_INTEGER)}function H(){L!==null&&(clearInterval(L),L=null)}function W(j,X){const se=Array.prototype.filter.call(g.value.children,_e=>_e===X||_e.matches&&_e.matches(".q-tab.q-focusable")===!0),pe=se.length;if(pe===0)return;if(j===36)return ce(se[0]),se[0].focus(),!0;if(j===35)return ce(se[pe-1]),se[pe-1].focus(),!0;const be=j===(e.vertical===!0?38:37),de=j===(e.vertical===!0?40:39),le=be===!0?-1:de===!0?1:void 0;if(le!==void 0){const _e=Z.value===!0?-1:1,De=se.indexOf(X)+le*_e;return De>=0&&De<pe&&(ce(se[De]),se[De].focus({preventScroll:!0})),!0}}const oe=v(()=>ne.value===!0?{get:j=>Math.abs(j.scrollLeft),set:(j,X)=>{j.scrollLeft=-X}}:e.vertical===!0?{get:j=>j.scrollTop,set:(j,X)=>{j.scrollTop=X}}:{get:j=>j.scrollLeft,set:(j,X)=>{j.scrollLeft=X}});function ue(j){const X=g.value,{get:se,set:pe}=oe.value;let be=!1,de=se(X);const le=j<de?-1:1;return de+=le*5,de<0?(be=!0,de=0):(le===-1&&de<=j||le===1&&de>=j)&&(be=!0,de=j),pe(X,de),re(),be}function he(j,X){for(const se in j)if(j[se]!==X[se])return!1;return!0}function we(){let j=null,X={matchedLen:0,queryDiff:9999,hrefLen:0};const se=b.filter(le=>{var _e;return((_e=le.routeData)==null?void 0:_e.hasRouterLink.value)===!0}),{hash:pe,query:be}=n.$route,de=Object.keys(be).length;for(const le of se){const _e=le.routeData.exact.value===!0;if(le.routeData[_e===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:De,query:ct,matched:ta,href:aa}=le.routeData.resolvedLink.value,vt=Object.keys(ct).length;if(_e===!0){if(De!==pe||vt!==de||he(be,ct)===!1)continue;j=le.name.value;break}if(De!==""&&De!==pe||vt!==0&&he(ct,be)===!1)continue;const Oe={matchedLen:ta.length,queryDiff:de-vt,hrefLen:aa.length-De.length};if(Oe.matchedLen>X.matchedLen){j=le.name.value,X=Oe;continue}else if(Oe.matchedLen!==X.matchedLen)continue;if(Oe.queryDiff<X.queryDiff)j=le.name.value,X=Oe;else if(Oe.queryDiff!==X.queryDiff)continue;Oe.hrefLen>X.hrefLen&&(j=le.name.value,X=Oe)}if(j===null&&b.some(le=>le.routeData===void 0&&le.name.value===o.value)===!0){st=!1;return}B({name:j,setCurrent:!0})}function qe(j){if(C(),m.value!==!0&&w.value!==null&&j.target&&typeof j.target.closest=="function"){const X=j.target.closest(".q-tab");X&&w.value.contains(X)===!0&&(m.value=!0,u.value===!0&&ce(X))}}function ze(){c(()=>{m.value=!1},30)}function ie(){Xe.avoidRouteWatcher===!1?k(we):R()}function Ce(){if(_===void 0){const j=ve(()=>n.$route.fullPath,ie);_=()=>{j(),_=void 0}}}function Te(j){b.push(j),q.value++,te(),j.routeData===void 0||n.$route===void 0?k(()=>{if(u.value===!0){const X=o.value,se=X!=null&&X!==""?b.find(pe=>pe.name.value===X):null;se&&ce(se.rootRef.value)}}):(Ce(),j.routeData.hasRouterLink.value===!0&&ie())}function Ee(j){b.splice(b.indexOf(j),1),q.value--,te(),_!==void 0&&j.routeData!==void 0&&(b.every(X=>X.routeData===void 0)===!0&&_(),ie())}const Xe={currentModel:o,tabProps:V,hasFocus:m,hasActiveTab:O,registerTab:Te,unregisterTab:Ee,verifyRouteModel:ie,updateModel:B,onKbdNavigate:W,avoidRouteWatcher:!1};Ve(jt,Xe);function Ze(){y!==null&&clearTimeout(y),H(),_==null||_()}let At,st;return at(Ze),ma(()=>{At=_!==void 0,Ze()}),ha(()=>{At===!0&&(Ce(),st=!0,ie()),te()}),()=>K("div",{ref:w,class:M.value,role:"tablist",onFocusin:qe,onFocusout:ze},[K(Bt,{onResize:Y}),K("div",{ref:g,class:$.value,onScroll:re},yt(i.default)),K(D,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(S.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||t.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:x,onTouchstartPassive:x,onMouseupPassive:H,onMouseleavePassive:H,onTouchendPassive:H}),K(D,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(E.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||t.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:f,onTouchstartPassive:f,onMouseupPassive:H,onMouseleavePassive:H,onTouchendPassive:H})])}}),Li=Fe({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Je(),t=ge(ba,Ke);if(t===Ke)return console.error("QFooter needs to be child of QLayout"),Ke;const d=ee(parseInt(e.heightHint,10)),l=ee(!0),r=ee(pa.value===!0||t.isContainer.value===!0?0:window.innerHeight),c=v(()=>e.reveal===!0||t.view.value.indexOf("F")!==-1||n.platform.is.ios&&t.isContainer.value===!0),C=v(()=>t.isContainer.value===!0?t.containerHeight.value:r.value),k=v(()=>{if(e.modelValue!==!0)return 0;if(c.value===!0)return l.value===!0?d.value:0;const m=t.scroll.value.position+C.value+d.value-t.height.value;return m>0?m:0}),R=v(()=>e.modelValue!==!0||c.value===!0&&l.value!==!0),w=v(()=>e.modelValue===!0&&R.value===!0&&e.reveal===!0),g=v(()=>"q-footer q-layout__section--marginal "+(c.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(R.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(c.value!==!0?" hidden":""):"")),o=v(()=>{const m=t.rows.value.bottom,y={};return m[0]==="l"&&t.left.space===!0&&(y[n.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),m[2]==="r"&&t.right.space===!0&&(y[n.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),y});function u(m,y){t.update("footer",m,y)}function S(m,y){m.value!==y&&(m.value=y)}function E({height:m}){S(d,m),u("size",m)}function z(){if(e.reveal!==!0)return;const{direction:m,position:y,inflectionPoint:L}=t.scroll.value;S(l,m==="up"||y-L<100||t.height.value-C.value-y-d.value<300)}function b(m){w.value===!0&&S(l,!0),s("focusin",m)}ve(()=>e.modelValue,m=>{u("space",m),S(l,!0),t.animate()}),ve(k,m=>{u("offset",m)}),ve(()=>e.reveal,m=>{m===!1&&S(l,e.modelValue)}),ve(l,m=>{t.animate(),s("reveal",m)}),ve([d,t.scroll,t.height],z),ve(()=>n.screen.height,m=>{t.isContainer.value!==!0&&S(r,m)});const q={};return t.instances.footer=q,e.modelValue===!0&&u("size",d.value),u("space",e.modelValue),u("offset",k.value),at(()=>{t.instances.footer===q&&(t.instances.footer=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const m=tt(i.default,[K(Bt,{debounce:0,onResize:E})]);return e.elevated===!0&&m.push(K("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),K("footer",{class:g.value,style:o.value,onFocusin:b},m)}}});const Ei={__name:"MobileBottomNavigation",props:{modelValue:{type:String,default:"home"},tabs:{type:Array,required:!0}},emits:["update:model-value","tab-change"],setup(e,{emit:i}){const s=e,n=i,t=v({get:()=>s.modelValue,set:l=>n("update:model-value",l)});function d(l){t.value=l,n("tab-change",l)}return(l,r)=>(h(),G(Li,{class:"mobile-bottom-nav",elevated:""},{default:F(()=>[I(Pi,{modelValue:t.value,"onUpdate:modelValue":[r[0]||(r[0]=c=>t.value=c),d],class:"bottom-nav-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:F(()=>[(h(!0),P(xe,null,Ie(e.tabs,c=>(h(),G(zi,{key:c.name,name:c.name,icon:c.icon,label:c.label,class:U(["bottom-nav-tab",{"tab-active":t.value===c.name}])},null,8,["name","icon","label","class"]))),128))]),_:1},8,["modelValue"])]),_:1}))}};var Mi=Re(Ei,[["__scopeId","data-v-a84bfa88"]]);const Fi={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},Di={class:"tw-mb-3 md:tw-mb-8"},ji={class:"tw-mb-2 md:tw-mb-4"},Ni={class:"tw-mb-3 md:tw-mb-6"},Oi={key:0,class:"tw-mb-4 md:tw-mb-8"},Bi={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},Qi={class:"tw-mb-4 md:tw-mb-8"},Ui={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},Ji={key:0},Hi={key:1},Wi={key:2},Gi={key:1,class:"tw-mt-3 md:tw-mt-6"},Ki={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Yi={__name:"SpeechFullscreenModal",props:{modelValue:{type:Boolean,default:!1},speech:{type:Object,default:null},remainingTime:{type:Number,default:0},usedSeconds:{type:Number,default:null},expedientType:{type:String,default:"Expediente"}},emits:["update:modelValue"],setup(e,{emit:i}){const s=e,n=i,t=v({get:()=>s.modelValue,set:$=>n("update:modelValue",$)}),d=v(()=>{var $;return(($=s.speech)==null?void 0:$.status)==="speaking"}),l=v(()=>{var $;return(($=s.speech)==null?void 0:$.status)==="paused"}),r=v(()=>{var $;return(($=s.speech)==null?void 0:$.status)==="finished"}),c=v(()=>d.value?"mic":l.value?"pause_circle":r.value?"check_circle":"mic_off"),C=v(()=>(d.value||l.value,"white")),k=v(()=>d.value?"Voc\xEA est\xE1 falando":l.value?"Fala pausada":"Fala finalizada"),R=v(()=>d.value?"Sua fala est\xE1 em andamento":l.value?"Aguarde a retomada pelo controle":"Sua fala foi finalizada"),w=v(()=>d.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":l.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":r.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),g=v(()=>d.value?"tw-bg-green-300":l.value?"tw-bg-yellow-300":"tw-bg-gray-300"),o=v(()=>{var $,J;return s.speech?(($=s.speech.allocated_minutes)!=null?$:0)+((J=s.speech.additional_minutes)!=null?J:0):0}),u=v(()=>{var B;if(!s.speech)return 0;const $=o.value*60;if($<=0)return 0;if(r.value){const te=(B=s.speech.used_seconds)!=null?B:0;return Math.max(0,Math.min($,Math.floor(Number(te))))}const J=s.usedSeconds!=null?Number(s.usedSeconds):NaN;if(!Number.isNaN(J)&&J>=0)return Math.max(0,Math.min($,Math.floor(J)));const Z=Number(s.remainingTime);if(Number.isNaN(Z)||Z<0)return 0;const ne=$-Z;return Math.max(0,Math.min($,Math.floor(ne)))}),S=v(()=>Math.floor(u.value/60)),E=v(()=>{var $,J;return(J=($=s.speech)==null?void 0:$.additional_minutes)!=null?J:0}),z=v(()=>{if(!s.speech||o.value===0)return 0;const $=o.value*60,J=u.value,Z=$>0?J/$*100:0;return Math.max(0,Math.min(100,Math.round(Z*10)/10))}),b=v(()=>{if(!s.speech)return 0;const $=s.speech.used_seconds||0;return Math.floor($/60)}),q=v(()=>s.speech?(s.speech.used_seconds||0)%60:0),m=v(()=>s.remainingTime>0&&s.remainingTime<=15),y=v(()=>s.remainingTime<=0),L=v(()=>y.value?"tw-bg-red-600 tw-bg-opacity-90":m.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),_=v(()=>(y.value||m.value,"tw-text-white")),V=v(()=>y.value||m.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),O=v(()=>y.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":m.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");function Q($){if($==null||$<=0)return"0:00";const J=Math.floor(Number($)),Z=Math.floor(J/60),ne=J%60;return`${Z}:${ne.toString().padStart(2,"0")}`}let M=null;return ve(()=>[r.value,t.value],([$,J])=>{M&&(clearTimeout(M),M=null),$&&J&&(M=setTimeout(()=>{t.value&&r.value&&(t.value=!1),M=null},3e3))},{immediate:!0}),ve(()=>t.value,$=>{!$&&M&&(clearTimeout(M),M=null)}),Nt(()=>{M&&clearTimeout(M)}),($,J)=>(h(),G(dt,{modelValue:t.value,"onUpdate:modelValue":J[0]||(J[0]=Z=>t.value=Z),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:F(()=>[a("div",{class:U(["fullscreen tw-flex tw-items-center tw-justify-center",w.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[a("div",Fi,[a("div",Di,[I(D,{name:c.value,color:C.value,size:$.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),a("div",ji,[I(xt,{label:s.expedientType,color:"white","text-color":"primary",size:$.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["label","size"])]),a("div",Ni,[a("h1",{class:U([$.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},T(k.value),3),a("p",{class:U([$.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},T(R.value),3)]),r.value?N("",!0):(h(),P("div",Oi,[a("div",{class:U([$.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",L.value])},[a("div",{class:U([$.$q.screen.lt.md?"text-body2":"text-h5",V.value,"tw-mb-2"])},T(O.value),3),a("div",{class:U([$.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",_.value,y.value?"tw-animate-pulse":""])},T(Q(s.remainingTime)),3)],2)])),a("div",Bi,[a("div",{class:U([$.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),a("div",{class:U([$.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(o.value)+" min ",3)],2),a("div",{class:U([$.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),a("div",{class:U([$.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(S.value)+" min ",3)],2),a("div",{class:U([$.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),a("div",{class:U([$.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+T(E.value)+" min ",3)],2)]),a("div",Qi,[a("div",Ui,[a("div",{class:U(["tw-h-full tw-transition-all tw-duration-1000",g.value]),style:Dt({width:z.value+"%"})},null,6)]),a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},T(z.value.toFixed(0))+"% do tempo utilizado ",3)]),a("div",{class:U([$.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[I(D,{name:"info",size:"20px",class:"tw-mr-2"}),d.value?(h(),P("span",Ji," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):l.value?(h(),P("span",Hi," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):r.value?(h(),P("span",Wi," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):N("",!0)],2),r.value?(h(),P("div",Gi,[a("div",{class:U([$.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[a("div",{class:U([$.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),a("div",Ki,[a("div",null,[a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),a("div",{class:U([$.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(o.value)+" min ",3)]),a("div",null,[a("div",{class:U([$.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),a("div",{class:U([$.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(b.value)+" min "+T(q.value)+" s ",3)])])],2)])):N("",!0)])],2)]),_:1},8,["modelValue"]))}};var mt=Re(Yi,[["__scopeId","data-v-7fbba8a4"]]);const Xi=["top","right","bottom","left"],bt={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Xi.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Zt(e,i){return{formClass:v(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:v(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:v(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?i.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ea={start:"self-end",center:"self-center",end:"self-start"},Zi=Object.keys(ea);var ht=Fe({name:"QFabAction",props:{...bt,icon:{type:String,default:""},anchor:{type:String,validator:e=>Zi.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:i,emit:s}){const n=ge(Ot,()=>({showing:{value:!0},onChildClick:wa})),{formClass:t,labelProps:d}=Zt(e,n.showing),l=v(()=>{const R=ea[e.anchor];return t.value+(R!==void 0?` ${R}`:"")}),r=v(()=>e.disable===!0||n.showing.value!==!0);function c(R){n.onChildClick(R),s("click",R)}function C(){const R=[];return i.icon!==void 0?R.push(i.icon()):e.icon!==""&&R.push(K(D,{name:e.icon})),(e.label!==""||i.label!==void 0)&&R[d.value.action](K("div",d.value.data,i.label!==void 0?i.label():[e.label])),tt(i.default,R)}const k=Je();return Object.assign(k.proxy,{click:c}),()=>K(ye,{class:l.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:r.value,onClick:c},C)}});const eo=["up","right","down","left"],to=["left","center","right"];var ao=Fe({name:"QFab",props:{...bt,...Tt,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...bt.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>eo.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>to.includes(e)}},emits:Pt,setup(e,{slots:i}){const s=ee(null),n=ee(e.modelValue===!0),t=Lt(),{proxy:{$q:d}}=Je(),{formClass:l,labelProps:r}=Zt(e,n),c=v(()=>e.persistent!==!0),{hide:C,toggle:k}=Et({showing:n,hideOnRouteChange:c}),R=v(()=>({opened:n.value})),w=v(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${l.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),g=v(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),o=v(()=>{const z={id:t.value,role:"menu"};return n.value!==!0&&(z["aria-hidden"]="true"),z}),u=v(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function S(z,b){const q=i[z],m=`q-fab__${z} absolute-full`;return q===void 0?K(D,{class:m,name:e[b]||d.iconSet.fab[b]}):K("div",{class:m},q(R.value))}function E(){const z=[];return e.hideIcon!==!0&&z.push(K("div",{class:u.value},[S("icon","icon"),S("active-icon","activeIcon")])),(e.label!==""||i.label!==void 0)&&z[r.value.action](K("div",r.value.data,i.label!==void 0?i.label(R.value):[e.label])),tt(i.tooltip,z)}return Ve(Ot,{showing:n,onChildClick(z){var b;C(z),(z==null?void 0:z.qAvoidFocus)!==!0&&((b=s.value)==null||b.$el.focus())}}),()=>K("div",{class:w.value},[K(ye,{ref:s,class:l.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t.value,onClick:k},E),K("div",{class:g.value,...o.value},yt(i.default))])}});const so={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},no={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},io={class:"tw-text-center"},oo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},lo={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},ro={class:"text-body2 tw-text-white tw-mb-0"},uo={class:"tw-flex-1 tw-overflow-y-auto tw-p-4 tw-relative"},co={class:"tw-max-w-4xl tw-mx-auto"},vo={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},go={class:"tw-text-center"},fo={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},mo={class:"text-body2 tw-text-gray-700"},ho={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},po={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},bo={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},wo={class:"tw-flex tw-flex-wrap tw-gap-2"},So={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},yo={class:"tw-flex tw-flex-wrap tw-gap-2"},_o={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},xo={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},qo={class:"tw-flex tw-items-center tw-gap-3"},$o=["src","alt"],Ao={key:1},Io={class:"tw-flex-1 tw-min-w-0"},ko={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},Vo={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},Ro={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},zo={__name:"ReadingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},reading:{type:Object,default:null},agendaId:{type:Number,default:null},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null}},emits:["update:modelValue","request-registered"],setup(e,{emit:i}){const s=e,n=i,t=$e(),d=Ge(),l=ee(!1),r=ee(!1),c=ge("voiceRequest",null),C=v({get:()=>s.modelValue,set:b=>n("update:modelValue",b)}),k=v(()=>s.reading?s.reading.type==="reading"?"menu_book":s.reading.type==="secret_voting"?"lock":"how_to_vote":"menu_book"),R=v(()=>s.reading?s.reading.type==="reading"?"Leitura em Andamento":s.reading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":"Leitura em Andamento"),w=v(()=>s.reading?s.reading.type==="reading"?"A proposi\xE7\xE3o est\xE1 sendo lida":s.reading.type==="secret_voting"?"A vota\xE7\xE3o secreta est\xE1 em andamento":"A vota\xE7\xE3o est\xE1 em andamento":"Aguarde as informa\xE7\xF5es da proposi\xE7\xE3o");function g(b){if(!b)return"";const q=b.split(" ");return q.length>=2?(q[0][0]+q[q.length-1][0]).toUpperCase():b.substring(0,2).toUpperCase()}function o(b){b&&window.open(b,"_blank")}function u(){var q,m;if(!((m=(q=s.reading)==null?void 0:q.proposition)!=null&&m.protocol_document))return null;const b=s.reading.proposition.protocol_document;return b.signed_file_url||b.file_url||null}function S(){var q,m;return(m=(q=s.reading)==null?void 0:q.proposition)!=null&&m.protocol_document?s.reading.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function E(){var q,m,y,L,_,V;if(!s.agendaId)return;const b=(q=t.user)==null?void 0:q.proponent_id;if(!b){Qe.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}r.value=!0;try{if((m=(await Se.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:b,requested:!0})).data)!=null&&m.success){Qe.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const Q=Le.getItem("unit_id_num");Q&&d.isConnected&&d.emit("voice-request-registered",{unitId:parseInt(Q),agendaId:parseInt(s.agendaId),proponentId:parseInt(b),proponentName:((y=t.user)==null?void 0:y.name)||((L=t.user)==null?void 0:L.first_name)||"Vereador",source:"vereador"}),n("request-registered"),c!=null&&c.loadStatus&&await c.loadStatus(!0),await new Promise(M=>setTimeout(M,500))}}catch(O){Qe.create({type:"negative",color:"blue-6",message:((V=(_=O.response)==null?void 0:_.data)==null?void 0:V.message)||"Erro ao solicitar voz"})}finally{r.value=!1,l.value=!1}}function z(){(c==null?void 0:c.showSpeechModal)!==void 0&&(c.showSpeechModal.value=!0)}return(b,q)=>(h(),G(dt,{modelValue:C.value,"onUpdate:modelValue":q[3]||(q[3]=m=>C.value=m),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:F(()=>{var m,y,L,_,V,O,Q,M,$,J,Z,ne,B,te;return[a("div",so,[a("div",no,[a("div",io,[a("div",oo,[I(D,{name:k.value,color:"gray-700",size:"32px"},null,8,["name"]),a("h1",lo,T(R.value),1)]),a("p",ro,T(w.value),1)])]),a("div",uo,[a("div",co,[(m=e.reading)!=null&&m.proposition?(h(),P("div",vo,[a("div",go,[a("div",fo,T((y=e.reading.proposition.species)==null?void 0:y.name)+" "+T(e.reading.proposition.number)+"/"+T(e.reading.proposition.year),1),a("div",mo,T(e.reading.proposition.title||e.reading.proposition.ementa||"N/A"),1)])])):N("",!0),(_=(L=e.reading)==null?void 0:L.proposition)!=null&&_.description?(h(),P("div",ho,[q[4]||(q[4]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",po,T(e.reading.proposition.description),1)])):N("",!0),((O=(V=e.reading)==null?void 0:V.proposition)==null?void 0:O.documents)&&e.reading.proposition.documents.length>0?(h(),P("div",bo,[q[5]||(q[5]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",wo,[(h(!0),P(xe,null,Ie(e.reading.proposition.documents,Y=>(h(),G(ye,{key:Y.id,href:Y.file_url||Y.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:Y.title||Y.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((M=(Q=e.reading)==null?void 0:Q.proposition)==null?void 0:M.file_url)||((J=($=e.reading)==null?void 0:$.proposition)==null?void 0:J.protocol_document)?(h(),P("div",So,[q[6]||(q[6]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",yo,[e.reading.proposition.file_url?(h(),G(ye,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:q[0]||(q[0]=Y=>o(e.reading.proposition.file_url))})):N("",!0),u()?(h(),G(ye,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:S(),size:"sm",onClick:q[1]||(q[1]=Y=>o(u()))},null,8,["label"])):N("",!0)])])):N("",!0),((ne=(Z=e.reading)==null?void 0:Z.proposition)==null?void 0:ne.proponents)&&e.reading.proposition.proponents.length>0?(h(),P("div",_o,[q[7]||(q[7]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",xo,[(h(!0),P(xe,null,Ie(e.reading.proposition.proponents,Y=>(h(),P("div",{key:Y.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",qo,[I(_t,{size:"40px",color:"primary","text-color":"white"},{default:F(()=>[Y.avatar?(h(),P("img",{key:0,src:Y.avatar,alt:Y.name},null,8,$o)):(h(),P("span",Ao,T(g(Y.name)),1))]),_:2},1024),a("div",Io,[a("div",ko,T(Y.name),1),Y.party?(h(),P("div",Vo,T(Y.party),1)):N("",!0)])])]))),128))])])):(B=e.reading)!=null&&B.proposition?N("",!0):(h(),P("div",Ro,[I(D,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),q[8]||(q[8]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da leitura ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&((te=e.reading)==null?void 0:te.type)==="reading"?(h(),G(ao,{key:0,modelValue:l.value,"onUpdate:modelValue":q[2]||(q[2]=Y=>l.value=Y),"vertical-actions-align":"right",color:e.hasRequest?"info":"positive",icon:e.hasRequest?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:F(()=>{var Y;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(h(),G(ht,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((Y=e.currentSpeech)==null?void 0:Y.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:r.value,onClick:E},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(h(),G(ht,{key:1,color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(h(),G(ht,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:z})):N("",!0)]}),_:1},8,["modelValue","color","icon"])):N("",!0)])]}),_:1},8,["modelValue"]))}};var Co=Re(zo,[["__scopeId","data-v-75716dae"]]);const To={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Po={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},Lo={class:"tw-text-center"},Eo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},Mo={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},Fo={class:"text-body2 tw-text-white tw-mb-0"},Do={class:"tw-flex-1 tw-overflow-y-auto tw-p-4"},jo={class:"tw-max-w-4xl tw-mx-auto"},No={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Oo={class:"tw-text-center tw-mb-3"},Bo={class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"},Qo={key:0,class:"tw-flex tw-justify-center"},Uo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200 tw-min-w-[120px]"},Jo={class:"tw-text-center tw-pr-2"},Ho={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Wo={key:1,class:"tw-grid tw-grid-cols-4 tw-gap-2"},Go={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-green-50 tw-rounded-lg tw-border tw-border-green-200"},Ko={class:"tw-text-center"},Yo={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Xo={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-red-50 tw-rounded-lg tw-border tw-border-red-200"},Zo={class:"tw-text-center"},el={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},tl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-orange-50 tw-rounded-lg tw-border tw-border-orange-200"},al={class:"tw-text-center"},sl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},nl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200"},il={class:"tw-text-center"},ol={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},ll={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},rl={class:"tw-text-center"},ul={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},dl={class:"text-body2 tw-text-gray-700"},cl={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},vl={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},gl={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},fl={class:"tw-flex tw-flex-wrap tw-gap-2"},ml={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},hl={class:"tw-flex tw-flex-wrap tw-gap-2"},pl={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},bl={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},wl={class:"tw-flex tw-items-center tw-gap-3"},Sl=["src","alt"],yl={key:1},_l={class:"tw-flex-1 tw-min-w-0"},xl={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},ql={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},$l={key:6,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},Al={key:0,class:"tw-flex-shrink-0 tw-bg-white tw-p-4 tw-border-t tw-border-gray-200 tw-shadow-md"},Il={class:"tw-max-w-2xl tw-mx-auto"},kl={class:"text-h6 tw-font-bold tw-text-gray-800 tw-mb-2 tw-text-center"},Vl={key:0},Rl={key:1},zl={key:2},Cl={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-3"},Tl={__name:"VotingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},voting:{type:Object,default:null},agendaId:{type:Number,required:!0},onVoteRegistered:{type:Function,default:null}},emits:["update:modelValue","vote-registered"],setup(e,{emit:i}){const s=e,n=i,t=$e(),d=Ge(),l=ee(!1),r=ee(!1),c=ee(null),C=v({get:()=>s.modelValue,set:_=>n("update:modelValue",_)});ve(()=>s.modelValue,_=>{_||(r.value=!1,c.value=null,l.value=!1)}),ve(()=>{var _;return(_=s.voting)==null?void 0:_.id},(_,V)=>{_!==V&&V!==void 0&&(r.value=!1,c.value=null,l.value=!1)}),ve(()=>s.voting,_=>{var V;console.log("[VotingFullscreenModal] Voting atualizado:",{voting:_,hasId:!!(_!=null&&_.id),hasVotes:!!(_!=null&&_.votes),votesCount:(V=_==null?void 0:_.votes)==null?void 0:V.length})},{immediate:!0,deep:!0});const k=v(()=>{var O,Q,M,$,J;const _=(O=t.user)==null?void 0:O.proponent_id;if(!((Q=s.voting)!=null&&Q.votes)||!_)return console.log("[VotingFullscreenModal] myVote computed:",{hasVoting:!!s.voting,hasVotes:!!((M=s.voting)!=null&&M.votes),votesLength:(J=($=s.voting)==null?void 0:$.votes)==null?void 0:J.length,proponentId:_}),null;const V=s.voting.votes.find(Z=>Z.proponent_id===parseInt(_));return(V==null?void 0:V.vote)||null}),R=v(()=>k.value!==null),w=v(()=>{const _=k.value||(r.value?c.value:null);return _?_==="favor"?"A Favor":_==="against"?"Contra":"Absten\xE7\xE3o":""});v(()=>{const _=k.value||(r.value?c.value:null);return _?_==="favor"?"thumb_up":_==="against"?"thumb_down":"remove_circle":"how_to_vote"}),v(()=>{const _=k.value||(r.value?c.value:null);return _?_==="favor"?"green":_==="against"?"red":"orange":"primary"});const g=v(()=>{const _=k.value||(r.value?c.value:null);return _?_==="favor"?"tw-text-green-600":_==="against"?"tw-text-red-600":"tw-text-orange-600":""}),o=v(()=>{var _;return((_=s.voting)==null?void 0:_.type)==="secret_voting"}),u=v(()=>o.value?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento"),S=v(()=>o.value?"Vota\xE7\xE3o secreta - Seu voto ser\xE1 mantido em sigilo":"Registre seu voto"),E=v(()=>o.value?"lock":"how_to_vote");v(()=>o.value?"purple":"deep-purple");const z=v(()=>{var V;if(!((V=s.voting)!=null&&V.votes))return{favor:0,against:0,abstain:0,total:0};const _=s.voting.votes;return{favor:_.filter(O=>O.vote==="favor").length,against:_.filter(O=>O.vote==="against").length,abstain:_.filter(O=>O.vote==="abstain").length,total:_.length}});function b(_){if(!_)return"";const V=_.split(" ");return V.length>=2?(V[0][0]+V[V.length-1][0]).toUpperCase():_.substring(0,2).toUpperCase()}function q(_){_&&window.open(_,"_blank")}function m(){var V,O;if(!((O=(V=s.voting)==null?void 0:V.proposition)!=null&&O.protocol_document))return null;const _=s.voting.proposition.protocol_document;return _.signed_file_url||_.file_url||null}function y(){var V,O;return(O=(V=s.voting)==null?void 0:V.proposition)!=null&&O.protocol_document?s.voting.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function L(_){var Q,M,$,J,Z,ne,B,te,Y,me,ce,re,p,x,f,H,W;const V=(Q=t.user)==null?void 0:Q.proponent_id,O=((ne=(Z=(J=($=(M=s.voting)==null?void 0:M.proposition)==null?void 0:$.species)==null?void 0:J.name)==null?void 0:Z.toLowerCase())==null?void 0:ne.trim())==="ata"||((ce=(me=(Y=(te=(B=s.voting)==null?void 0:B.proposition)==null?void 0:te.species)==null?void 0:Y.title)==null?void 0:me.toLowerCase())==null?void 0:ce.trim())==="ata";if(!((re=s.voting)!=null&&re.id)){Qe.create({type:"negative",color:"blue-6",message:"Erro: Vota\xE7\xE3o n\xE3o identificada"});return}if(!O&&!V){Qe.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}if(s.voting.type==="reading"){Qe.create({type:"negative",color:"blue-6",message:"N\xE3o \xE9 poss\xEDvel votar em uma leitura. Apenas vota\xE7\xF5es permitem votos."});return}if(s.voting.type!=="voting"&&s.voting.type!=="secret_voting"){Qe.create({type:"negative",color:"blue-6",message:"Tipo de vota\xE7\xE3o inv\xE1lido."});return}l.value=!0,c.value=_;try{const oe={vote:_};!O&&V&&(oe.proponent_id=parseInt(V));const ue=await Se.post(`/pauta/${s.agendaId}/voting/reading/${s.voting.id}/vote`,oe);if((p=ue==null?void 0:ue.data)!=null&&p.success){r.value=!0;const he=Le.getItem("unit_id_num");if(he&&d.isConnected&&d.emit("voting-vote-registered",{unitId:parseInt(he),agendaId:s.agendaId,readingId:s.voting.id,proponentId:O?null:parseInt(V),vote:_,timestamp:new Date().toISOString()}),n("vote-registered"),s.onVoteRegistered&&typeof s.onVoteRegistered=="function")try{await s.onVoteRegistered()}catch(we){console.error("[VotingFullscreenModal] Erro ao atualizar status ap\xF3s voto:",we)}else await new Promise(we=>{setTimeout(we,800)});l.value=!1}else r.value=!1,c.value=null,l.value=!1}catch(oe){console.error("[VotingFullscreenModal] Erro ao votar:",oe);const ue=((f=(x=oe.response)==null?void 0:x.data)==null?void 0:f.message)||((W=(H=oe.response)==null?void 0:H.data)==null?void 0:W.error)||"Erro ao registrar voto. Tente novamente.";Qe.create({type:"negative",color:"blue-6",message:ue,position:"top",timeout:5e3}),r.value=!1,c.value=null,l.value=!1}}return(_,V)=>(h(),G(dt,{modelValue:C.value,"onUpdate:modelValue":V[5]||(V[5]=O=>C.value=O),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:F(()=>{var O,Q,M,$,J,Z,ne,B,te,Y,me,ce,re;return[a("div",To,[a("div",Po,[a("div",Lo,[a("div",Eo,[I(D,{name:E.value,color:"white",size:"32px"},null,8,["name"]),a("h1",Mo,T(u.value),1)]),a("p",Fo,T(S.value),1)])]),a("div",Do,[a("div",jo,[e.voting&&e.voting.votes&&e.voting.votes.length>0?(h(),P("div",No,[a("div",Oo,[a("div",Bo,[I(D,{name:"people",color:"primary",size:"20px",class:"tw-pr-2"}),fe(" "+T((o.value,"Votos Registrados")),1)]),o.value?(h(),P("div",Qo,[a("div",Uo,[a("div",Jo,[a("div",Ho,T(z.value.total),1)]),V[6]||(V[6]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Votaram ",-1))])])):(h(),P("div",Wo,[a("div",Go,[I(D,{name:"thumb_up",color:"green",size:"20px"}),a("div",Ko,[a("div",Yo,T(z.value.favor),1),V[7]||(V[7]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," A Favor ",-1))])]),a("div",Xo,[I(D,{name:"thumb_down",color:"red",size:"20px"}),a("div",Zo,[a("div",el,T(z.value.against),1),V[8]||(V[8]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Contra ",-1))])]),a("div",tl,[I(D,{name:"remove_circle",color:"orange",size:"20px"}),a("div",al,[a("div",sl,T(z.value.abstain),1),V[9]||(V[9]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Absten\xE7\xF5es ",-1))])]),a("div",nl,[I(D,{name:"people",color:"primary",size:"20px"}),a("div",il,[a("div",ol,T(z.value.total),1),V[10]||(V[10]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Total ",-1))])])]))])])):N("",!0),(O=e.voting)!=null&&O.proposition?(h(),P("div",ll,[a("div",rl,[a("div",ul,T((Q=e.voting.proposition.species)==null?void 0:Q.name)+" "+T(e.voting.proposition.number)+"/"+T(e.voting.proposition.year),1),a("div",dl,T(e.voting.proposition.title||e.voting.proposition.ementa||"N/A"),1)])])):N("",!0),($=(M=e.voting)==null?void 0:M.proposition)!=null&&$.description?(h(),P("div",cl,[V[11]||(V[11]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",vl,T(e.voting.proposition.description),1)])):N("",!0),((Z=(J=e.voting)==null?void 0:J.proposition)==null?void 0:Z.documents)&&e.voting.proposition.documents.length>0?(h(),P("div",gl,[V[12]||(V[12]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",fl,[(h(!0),P(xe,null,Ie(e.voting.proposition.documents,p=>(h(),G(ye,{key:p.id,href:p.file_url||p.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:p.title||p.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((B=(ne=e.voting)==null?void 0:ne.proposition)==null?void 0:B.file_url)||((Y=(te=e.voting)==null?void 0:te.proposition)==null?void 0:Y.protocol_document)?(h(),P("div",ml,[V[13]||(V[13]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",hl,[e.voting.proposition.file_url?(h(),G(ye,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:V[0]||(V[0]=p=>q(e.voting.proposition.file_url))})):N("",!0),m()?(h(),G(ye,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:y(),size:"sm",onClick:V[1]||(V[1]=p=>q(m()))},null,8,["label"])):N("",!0)])])):N("",!0),((ce=(me=e.voting)==null?void 0:me.proposition)==null?void 0:ce.proponents)&&e.voting.proposition.proponents.length>0?(h(),P("div",pl,[V[14]||(V[14]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",bl,[(h(!0),P(xe,null,Ie(e.voting.proposition.proponents,p=>(h(),P("div",{key:p.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",wl,[I(_t,{size:"40px",color:"primary","text-color":"white"},{default:F(()=>[p.avatar?(h(),P("img",{key:0,src:p.avatar,alt:p.name},null,8,Sl)):(h(),P("span",yl,T(b(p.name)),1))]),_:2},1024),a("div",_l,[a("div",xl,T(p.name),1),p.party?(h(),P("div",ql,T(p.party),1)):N("",!0)])])]))),128))])])):(re=e.voting)!=null&&re.proposition?N("",!0):(h(),P("div",$l,[I(D,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),V[15]||(V[15]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da vota\xE7\xE3o ser\xE3o exibidas aqui ",-1))]))])]),e.voting&&e.voting.id&&e.voting.type!=="reading"?(h(),P("div",Al,[a("div",Il,[a("div",kl,[R.value&&!o.value?(h(),P("span",Vl,[V[16]||(V[16]=fe("Seu voto atual: ",-1)),a("strong",{class:U(g.value)},T(w.value),3)])):R.value&&o.value?(h(),P("span",Rl,"Voc\xEA j\xE1 votou nesta vota\xE7\xE3o secreta")):(h(),P("span",zl,"Como deseja votar?"))]),l.value?(h(),P("div",Cl,[I(Ft,{color:"primary",size:"24px"}),V[17]||(V[17]=a("span",{class:"text-body2 tw-text-gray-600"},"Aguarde, processando voto...",-1))])):N("",!0),a("div",{class:U(["tw-grid tw-grid-cols-3 tw-gap-2",{"tw-opacity-50":l.value}])},[I(ye,{color:"green",outline:o.value?!0:k.value!=="favor",size:"md",icon:"thumb_up",label:"A Favor",class:U(["tw-rounded-md",!o.value&&k.value==="favor"?"vote-selected":""]),disable:l.value||o.value&&R.value&&k.value==="favor",loading:l.value&&c.value==="favor",onClick:V[2]||(V[2]=p=>L("favor"))},null,8,["outline","class","disable","loading"]),I(ye,{color:"red",outline:o.value?!0:k.value!=="against",size:"md",icon:"thumb_down",label:"Contra",class:U(["tw-rounded-md",!o.value&&k.value==="against"?"vote-selected":""]),disable:l.value||o.value&&R.value&&k.value==="against",loading:l.value&&c.value==="against",onClick:V[3]||(V[3]=p=>L("against"))},null,8,["outline","class","disable","loading"]),I(ye,{color:"orange",outline:o.value?!0:k.value!=="abstain",size:"md",icon:"remove_circle",label:"Absten\xE7\xE3o",class:U(["tw-py-2 tw-rounded-md",!o.value&&k.value==="abstain"?"vote-selected":""]),disable:l.value||o.value&&R.value&&k.value==="abstain",loading:l.value&&c.value==="abstain",onClick:V[4]||(V[4]=p=>L("abstain"))},null,8,["outline","class","disable","loading"])],2)])])):N("",!0)])]}),_:1},8,["modelValue"]))}};var Pl=Re(Tl,[["__scopeId","data-v-5e3e3adb"]]);function Ll(e){const i=ee(!1),s=ee((e==null?void 0:e.value)||null),n=ee(0),t=ee(null),d=v(()=>{const c=Le.getItem("unit_id_num");return c?parseInt(c):null});async function l(){var c;i.value=!0;try{const C=await Se.get("/pauta",{params:{session_status:"started",per_page:1}}),k=((c=C==null?void 0:C.data)==null?void 0:c.data)||[];k.length>0?s.value=k[0].id:s.value=null}catch(C){console.error(C),s.value=null}finally{i.value=!1}}function r(c,C){if(!d.value)return;const k=Date.now(),R=s.value;if(t.value===R&&k-n.value<500){console.log("[useSessionAgenda] ensureSubscribed ignorado - subscri\xE7\xE3o muito recente");return}const w=`unit.${d.value}.sessions`;if(c.subscribeToChannel(w),R){const g=`unit.${d.value}.agenda.${R}`;c.subscribeToChannel(g),t.value!==R||k-n.value>=1e3?(t.value=R,n.value=k,C&&(console.log("[useSessionAgenda] Executando fun\xE7\xF5es de carregamento para agenda:",R),Object.values(C).forEach(o=>{typeof o=="function"&&o()}))):console.log("[useSessionAgenda] Fun\xE7\xF5es de carregamento ignoradas - subscri\xE7\xE3o muito recente")}}return{loadingAgendas:i,selectedAgendaId:s,unitId:d,loadStartedAgenda:l,ensureSubscribed:r}}function pt(e,i,s="small"){const n=ee(null),t=ee(0),d=ee(0),l=ee(null),r=ee(!1),c=ee(!1),C=ee(0),k=ee(null),R=ee(null),w=s==="small"?"small-expedient":s==="miscellaneous"?"miscellaneous-subject":"large-expedient",g=v(()=>{var y;return((y=n.value)==null?void 0:y.status)==="finished"?n.value:null}),o=v(()=>g.value?(g.value.allocated_minutes||0)+(g.value.additional_minutes||0):0),u=v(()=>{if(!g.value)return 0;const y=g.value.used_seconds||0;return Math.floor(y/60)}),S=v(()=>g.value?(g.value.used_seconds||0)%60:0),E=v(()=>{var y;return((y=g.value)==null?void 0:y.finished_at)||null});function z(){k.value=null,R.value=null}function b(){var Q,M,$,J;if(!n.value){t.value=0,d.value=0,z();return}const y=n.value,L=(((Q=y.allocated_minutes)!=null?Q:0)+((M=y.additional_minutes)!=null?M:0))*60;if(L<=0){t.value=0,d.value=0;return}if(y.status==="paused"&&typeof y.calculated_remaining_seconds=="number"){const Z=Math.max(0,Math.min(L,Math.floor(y.calculated_remaining_seconds))),ne=Math.max(0,L-Z);t.value=Z,d.value=Math.floor(ne);return}let _;if(y.status==="speaking"&&R.value!=null&&k.value!=null){const Z=Math.max(0,(Date.now()-R.value)/1e3);_=k.value+Z}else{const Z=(J=($=y.calculated_used_seconds)!=null?$:y.used_seconds)!=null?J:0;if(_=Z,y.status==="speaking"&&y.started_at){const ne=(new Date-new Date(y.started_at))/1e3;_=Z+Math.max(0,ne)}}_=Math.max(0,_);const V=Math.min(L,Math.floor(_)),O=Math.max(0,L-V);d.value=V,t.value=O}async function q(){var L,_,V,O;if(c.value){console.log(`[useSpeech ${s}] loadSpeechStatus j\xE1 em andamento, ignorando.`);return}const y=Date.now();if(y-C.value<100){console.log(`[useSpeech ${s}] loadSpeechStatus chamado muito recentemente, ignorando.`);return}if(!e.value||!i.value){n.value=null,t.value=0,d.value=0,z(),l.value&&(clearInterval(l.value),l.value=null);return}c.value=!0,C.value=y;try{const Q=await Se.get(`/pauta/${e.value}/${w}/speeches/status`);if(((L=Q==null?void 0:Q.data)==null?void 0:L.success)&&((_=Q==null?void 0:Q.data)==null?void 0:_.data)){const M=Q.data.data.speeches||[];let $=M.find(J=>J.proponent_id===parseInt(i.value)&&(J.status==="speaking"||J.status==="paused"));if($||($=M.find(J=>J.proponent_id===parseInt(i.value))),$){if(n.value=$,$.status==="speaking"||$.status==="paused"){const J=(O=(V=$.calculated_used_seconds)!=null?V:$.used_seconds)!=null?O:0;k.value=Math.max(0,Number(J)),R.value=Date.now()}else z();b(),$.status==="speaking"||$.status==="paused"?(r.value||(r.value=!0),l.value||(l.value=setInterval(()=>{b()},1e3))):$.status==="finished"?(z(),l.value&&(clearInterval(l.value),l.value=null)):(z(),r.value=!1,l.value&&(clearInterval(l.value),l.value=null))}else n.value=null,t.value=0,d.value=0,z(),r.value=!1,l.value&&(clearInterval(l.value),l.value=null)}}catch(Q){console.error(`Erro ao carregar status da fala (${s}):`,Q),n.value=null,t.value=0,d.value=0,z()}finally{c.value=!1}}function m(){z(),l.value&&(clearInterval(l.value),l.value=null)}return{currentSpeech:n,remainingTime:t,usedSeconds:d,showSpeechModal:r,loadingSpeech:c,finishedSpeech:g,finishedSpeechTotalMinutes:o,finishedSpeechUsedMinutes:u,finishedSpeechUsedSeconds:S,finishedSpeechFinishedAt:E,loadSpeechStatus:q,cleanup:m}}function El(e,i){const s=ee([]),n=ee(!1);async function t(){var d,l,r,c,C,k;if(!e.value||!i.value){s.value=[];return}try{const R=await Se.get(`/pauta/${e.value}/session-logs`);if(((d=R==null?void 0:R.data)==null?void 0:d.success)&&((l=R==null?void 0:R.data)==null?void 0:l.data)){const w=R.data.data.logs||[],g=$e(),o=w.filter(m=>{var y,L;return((y=m.event_data)==null?void 0:y.proponent_id)===parseInt(i.value)||m.user_id===((L=g.user)==null?void 0:L.id)}),u=[],S=o.find(m=>m.event_type==="session_attendance"&&m.event_subtype==="attendance_registered");S&&u.push({icon:"how_to_reg",color:"green",label:"Presen\xE7a registrada no qu\xF3rum",time:Me(S.occurred_at)});const E=o.find(m=>m.event_type==="small_expedient"&&(m.event_subtype==="register_speaker"||m.event_subtype==="small_expedient_registered"));if(E){const{useSessionSettings:m}=await Ue(()=>Promise.resolve().then(function(){return nt}),void 0),y=m();await y.loadSettings(),u.push({icon:"assignment",color:"secondary",label:`Inscrito no ${y.smallExpedientName.value||"Pequeno Expediente"}`,time:Me(E.occurred_at)})}const z=o.find(m=>m.event_type==="large_expedient"&&(m.event_subtype==="register_speaker"||m.event_subtype==="large_expedient_registered"));if(z){const{useSessionSettings:m}=await Ue(()=>Promise.resolve().then(function(){return nt}),void 0),y=m();await y.loadSettings(),u.push({icon:"assignment_turned_in",color:"orange",label:`Inscrito no ${y.largeExpedientName.value||"Grande Expediente"}`,time:Me(z.occurred_at)})}const b=o.filter(m=>m.event_type==="small_expedient_speech");if(b.length>0){const m=b.find(L=>L.event_subtype==="speech_started"),y=b.find(L=>L.event_subtype==="speech_finished");if(m&&u.push({icon:"mic",color:"primary",label:"Fala iniciada",time:Me(m.occurred_at)}),y){const L=((r=y.event_data)==null?void 0:r.total_minutes_allocated)||0,_=((c=y.event_data)==null?void 0:c.total_seconds_used)||0,V=Math.floor(_/60);u.push({icon:"mic_off",color:"grey",label:`Fala finalizada (${V}min de ${L}min dispon\xEDveis)`,time:Me(y.occurred_at)})}}const q=o.filter(m=>m.event_type==="large_expedient_speech");if(q.length>0){const m=q.find(L=>L.event_subtype==="speech_started"),y=q.find(L=>L.event_subtype==="speech_finished");if(m){const{useSessionSettings:L}=await Ue(()=>Promise.resolve().then(function(){return nt}),void 0),_=L();await _.loadSettings(),u.push({icon:"mic",color:"orange",label:`Fala iniciada (${_.largeExpedientName.value||"Grande Expediente"})`,time:Me(m.occurred_at)})}if(y){const{useSessionSettings:L}=await Ue(()=>Promise.resolve().then(function(){return nt}),void 0),_=L();await _.loadSettings();const V=((C=y.event_data)==null?void 0:C.total_minutes_allocated)||0,O=((k=y.event_data)==null?void 0:k.total_seconds_used)||0,Q=Math.floor(O/60);u.push({icon:"mic_off",color:"grey",label:`Fala finalizada - ${_.largeExpedientName.value||"Grande Expediente"} (${Q}min de ${V}min dispon\xEDveis)`,time:Me(y.occurred_at)})}}s.value=u}}catch(R){console.error("Erro ao carregar intera\xE7\xF5es da sess\xE3o:",R),s.value=[]}}return{sessionInteractions:s,loadingSessionInteractions:n,loadSessionInteractions:t}}function Ml(e,i,s,n={}){const t=Ge();$e();const{onQuorumStarted:d,onQuorumFinalized:l,onSmallExpedientStarted:r,onSmallExpedientFinalized:c,onSmallExpedientRegistration:C,onSmallExpedientOrderUpdated:k,onLargeExpedientStarted:R,onLargeExpedientFinalized:w,onLargeExpedientRegistration:g,onLargeExpedientOrderUpdated:o,onMiscellaneousSubjectStarted:u,onMiscellaneousSubjectFinalized:S,onMiscellaneousSubjectRegistration:E,onMiscellaneousSubjectOrderUpdated:z,onVotingStarted:b,onVotingReadingStarted:q,onVotingReadingFinished:m,onVotingVoteRegistered:y,onSpeechStarted:L,onSpeechPaused:_,onSpeechResumed:V,onSpeechTimeAdded:O,onSpeechFinished:Q,onSessionAttendance:M,onSessionAbsences:$,onVoiceRequestRegistered:J,onVoiceRequestRemoved:Z,onVoiceRequestSpeechStarted:ne,onVoiceRequestSpeechPaused:B,onVoiceRequestSpeechResumed:te,onVoiceRequestSpeechTimeAdded:Y,onVoiceRequestSpeechFinished:me,onSpeechAsideStarted:ce,onSpeechAsideFinished:re}=n;function p(){d&&t.on("quorum-started",f=>{x(f,"agendaId")&&(d(f),ae.success("Qu\xF3rum iniciado! Voc\xEA j\xE1 pode marcar sua presen\xE7a."))}),l&&t.on("quorum-finalized",f=>{x(f,"agendaId")&&(l(f),ae.warning("O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado."))}),r&&t.on("small-expedient-started",async f=>{if(x(f,"agendaId")){const{useExpedientStore:H}=await Ue(()=>Promise.resolve().then(function(){return lt}),void 0);H().invalidateStatusCache("small"),await r(f)}}),c&&t.on("small-expedient-finalized",async f=>{x(f,"agendaId")&&await c(f)}),C&&t.on("small-expedient-registration",async f=>{x(f,"agendaId","proponentId")&&await C(f)}),k&&t.on("small-expedient-order-updated",async f=>{x(f,"agendaId")&&await k(f)}),R&&t.on("large-expedient-started",f=>{x(f,"agendaId")&&R(f)}),w&&t.on("large-expedient-finalized",async f=>{x(f,"agendaId")&&await w(f)}),g&&t.on("large-expedient-registration",async f=>{x(f,"agendaId","proponentId")&&await g(f)}),o&&t.on("large-expedient-order-updated",async f=>{x(f,"agendaId")&&await o(f)}),u&&t.on("miscellaneous-subject-started",async f=>{if(x(f,"agendaId")){const{useExpedientStore:H}=await Ue(()=>Promise.resolve().then(function(){return lt}),void 0);H().invalidateStatusCache("miscellaneous"),await u(f)}}),S&&t.on("miscellaneous-subject-finalized",async f=>{x(f,"agendaId")&&await S(f)}),E&&t.on("miscellaneous-subject-registration",async f=>{x(f,"agendaId","proponentId")&&await E(f)}),z&&t.on("miscellaneous-subject-order-updated",async f=>{x(f,"agendaId")&&await z(f)}),b&&t.on("voting-started",async f=>{x(f,"agendaId")&&(await b(f),ae.info("Vota\xE7\xE3o iniciada na sess\xE3o."))}),q&&t.on("voting-reading-started",async f=>{if(x(f,"agendaId")){await q(f);const H=f.type==="reading",W=f.type==="reading"?"Leitura":f.type==="secret_voting"?"Vota\xE7\xE3o Secreta":"Vota\xE7\xE3o";H||ae.info(`${W} iniciada.`)}}),m&&t.on("voting-reading-finished",async f=>{if(x(f,"agendaId")){await m(f);const H=(f==null?void 0:f.type)||"reading",W=H==="secret_voting"?"Vota\xE7\xE3o secreta encerrada.":H==="voting"?"Vota\xE7\xE3o encerrada.":H==="reading"?"Leitura encerrada.":"Vota\xE7\xE3o encerrada.";ae.info(W)}}),y&&t.on("voting-vote-registered",async f=>{x(f,"agendaId")&&await y(f)}),L&&t.on("speech-started",async f=>{x(f,"agendaId","proponentId")&&(await L(f),ae.success("Sua fala foi iniciada!"))}),_&&t.on("speech-paused",async f=>{x(f,"agendaId","proponentId")&&(await _(f),ae.info("Sua fala foi pausada."))}),V&&t.on("speech-resumed",async f=>{x(f,"agendaId","proponentId")&&(await V(f),ae.success("Sua fala foi retomada!"))}),O&&t.on("speech-time-added",async f=>{x(f,"agendaId","proponentId")&&(await O(f),ae.success(`Tempo adicional de ${f.minutes} minuto(s) adicionado!`))}),Q&&t.on("speech-finished",async f=>{x(f,"agendaId","proponentId")&&(await Q(f),ae.warning("Sua fala foi finalizada."))}),M&&t.on("session-attendance",f=>{x(f,"agendaId","proponentId")&&M(f)}),$&&t.on("session-absences",f=>{x(f,"agendaId","proponentId")&&$(f)}),J&&t.on("voice-request-registered",async f=>{x(f,"agendaId")&&await J(f)}),Z&&t.on("voice-request-removed",async f=>{x(f,"agendaId")&&await Z(f)}),ne&&t.on("voice-request-speech-started",async f=>{x(f,"agendaId","proponentId")&&await ne(f)}),B&&t.on("voice-request-speech-paused",async f=>{x(f,"agendaId","proponentId")&&await B(f)}),te&&t.on("voice-request-speech-resumed",async f=>{x(f,"agendaId","proponentId")&&await te(f)}),Y&&t.on("voice-request-speech-time-added",async f=>{x(f,"agendaId","proponentId")&&await Y(f)}),me&&t.on("voice-request-speech-finished",async f=>{x(f,"agendaId","proponentId")&&await me(f)}),ce&&t.on("speech-aside-started",async f=>{x(f,"agendaId")&&await ce(f)}),re&&t.on("speech-aside-finished",async f=>{x(f,"agendaId")&&await re(f)})}function x(f,...H){if(!f)return!1;if(H.includes("agendaId")){const W=parseInt(f.agendaId),oe=e.value?parseInt(e.value):null;if(W!==oe&&!(!oe&&(s==null?void 0:s.value)===W))return!1}if(H.includes("proponentId")){const W=parseInt(f.proponentId),oe=i.value?parseInt(i.value):null;if(W!==oe)return!1}return!0}return{setupSocketListeners:p}}const Fl={key:0,class:"dashboard-tabs-container"},Dl={class:"tab-panels-container"},jl={class:"tab-panel"},Nl={class:"tab-panel"},Ol={class:"tab-panel"},Bl={class:"tab-panel"},Ql={class:"tab-panel"},Ul={class:"tab-panel"},Jl={class:"tab-panel"},Hl={class:"empty-state-card"},Wl={class:"empty-state-content"},Gl={key:1,class:"modals-container"},Kl={key:2,class:"dashboard-content"},Yl={class:"dashboard-greeting"},Xl={class:"greeting-content"},Zl={class:"greeting-text"},er={class:"greeting-title"},tr={class:"greeting-subtitle"},ar={key:0,class:"future-sessions-list"},sr={key:1,class:"dashboard-content"},nr={class:"empty-state-card"},ir={class:"empty-state-content"},or={__name:"Dashboard",setup(e){const i=$e(),s=Ge(),n=qt(),t=ee(null),d=ee(null),l=ee([]),r=ee(!1),c=ee("home"),C=v(()=>{const p=[{name:"home",label:"In\xEDcio",icon:"home"},{name:"quorum",label:"Qu\xF3rum",icon:"groups"},...n.enableSmallExpedient.value?[{name:"small-expedient",label:n.smallExpedientName.value||"Pequeno Expediente",icon:"timer"}]:[],...n.enableLargeExpedient.value?[{name:"large-expedient",label:n.largeExpedientName.value||"Grande Expediente",icon:"assignment_turned_in"}]:[],...n.enableMiscellaneousSubjects.value?[{name:"miscellaneous-subject",label:n.miscellaneousSubjectsName.value||"Assuntos Diversos",icon:"topic"}]:[],{name:"voting",label:"Vota\xE7\xE3o",icon:"how_to_vote"}];return t.value&&d.value&&!o.isPresent.value?p.filter(x=>x.name!=="voting"):p});function k(p){c.value=p,console.log("[Dashboard] Tab mudou para:",p)}const R=v(()=>{var p;return((p=t.value)==null?void 0:p.id)||null}),w=Ll(R),g=v(()=>{var p;return((p=i.user)==null?void 0:p.proponent_id)||null}),o=Ht(w.selectedAgendaId),u=Jt(),S=et(w.selectedAgendaId,"small"),E=et(w.selectedAgendaId,"large"),z=et(w.selectedAgendaId,"miscellaneous"),b=Gt(w.selectedAgendaId),q=pt(w.selectedAgendaId,g,"small"),m=pt(w.selectedAgendaId,g,"large"),y=pt(w.selectedAgendaId,g,"miscellaneous"),L=Kt(w.selectedAgendaId),_=El(w.selectedAgendaId,g),V=v({get:()=>q.showSpeechModal.value,set:p=>{q.showSpeechModal.value=p}}),O=v({get:()=>m.showSpeechModal.value,set:p=>{m.showSpeechModal.value=p}}),Q=v({get:()=>y.showSpeechModal.value,set:p=>{y.showSpeechModal.value=p}}),M=v({get:()=>b.showReadingModal.value,set:p=>{b.showReadingModal.value=p}}),$=v({get:()=>b.showVotingModal.value&&t.value&&d.value&&!o.isPresent.value?!1:b.showVotingModal.value,set:p=>{if(p&&t.value&&d.value&&!o.isPresent.value){ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.");return}b.showVotingModal.value=p}});ve(()=>b.showVotingModal.value,p=>{p&&t.value&&d.value&&(o.isPresent.value||(console.log("[Dashboard] Tentativa de abrir modal de vota\xE7\xE3o sem presen\xE7a no quorum - bloqueando"),b.showVotingModal.value=!1,ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")))},{immediate:!1});function J(){const p=new Date().getHours();return p<12?"Bom dia!":p<18?"Boa tarde!":"Boa noite!"}function Z(){const p=new Date;return`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`}function ne(p){if(!(p!=null&&p.session_date))return!1;const x=Z();return p.session_date>x}async function B(){var p;r.value=!0;try{const x=await Se.get("/pauta",{params:{session_status:"started",per_page:1}}),f=((p=x==null?void 0:x.data)==null?void 0:p.data)||[];if(f.length>0){const H=f[0];t.value=H,d.value=H,l.value=[],H.id&&(w.selectedAgendaId.value=H.id);return}t.value=null,d.value=null,await te()}catch(x){console.error("Erro ao carregar sess\xE3o:",x),t.value=null,d.value=null,l.value=[]}finally{r.value=!1}}async function te(){var p;try{const x=Z(),f=await Se.get("/pauta",{params:{date_from:x,per_page:50}}),W=[...((p=f==null?void 0:f.data)==null?void 0:p.data)||[]].sort((ue,he)=>{const we=ue.session_date||"",qe=he.session_date||"";return we!==qe?we.localeCompare(qe):(ue.session_time||"").localeCompare(he.session_time||"")}),oe=await Promise.all(W.map(async ue=>{const he=await Y(ue.id);return{session:ue,propositions:he}}));l.value=oe}catch(x){console.error("Erro ao carregar sess\xF5es futuras:",x),l.value=[]}}async function Y(p){var x;try{const f=await Se.get(`/pauta/${p}/agenda-itens`,{params:{type:"proposition",item_status:"active"}});return(((x=f==null?void 0:f.data)==null?void 0:x.data)||[]).filter(W=>W.proposition).map(W=>{var oe,ue;return{id:W.proposition.id,number:W.proposition.number,year:W.proposition.year,title:W.proposition.title,species:((oe=W.proposition.species)==null?void 0:oe.name)||((ue=W.proposition.species)==null?void 0:ue.title),proponents:W.proposition.proponents||[]}})}catch(f){return console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o:",f),[]}}const{setupSocketListeners:me}=Ml(w.selectedAgendaId,g,v(()=>{var p;return((p=t.value)==null?void 0:p.id)||null}),{onQuorumStarted:async()=>{await o.loadQuorumStatus(),await o.loadCurrentAttendanceStatus()},onQuorumFinalized:async()=>{await o.loadQuorumStatus(),await o.loadCurrentAttendanceStatus()},onSmallExpedientStarted:async()=>{const{useExpedientStore:p}=await Ue(()=>Promise.resolve().then(function(){return lt}),void 0);p().invalidateStatusCache("small"),await S.loadStatus(!0)},onSmallExpedientFinalized:async p=>{await S.loadStatus(),S.isRegistered.value?ae.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${S.registrationOrder.value||"N/A"}\xBA.`):ae.warning(`As inscri\xE7\xF5es de ${n.smallExpedientName.value.toLowerCase()} foram finalizadas.`)},onSmallExpedientRegistration:async p=>{p.source==="controle"&&(S.isRegistered.value=p.registered||!1,await S.loadStatus())},onSmallExpedientOrderUpdated:async()=>{await S.loadStatus(!0)},onLargeExpedientStarted:E.loadStatus,onLargeExpedientFinalized:async p=>{await E.loadStatus(),E.isRegistered.value?ae.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${E.registrationOrder.value||"N/A"}\xBA.`):ae.warning(`As inscri\xE7\xF5es de ${n.largeExpedientName.value.toLowerCase()} foram finalizadas.`)},onLargeExpedientRegistration:async p=>{p.source==="controle"&&(E.isRegistered.value=p.registered||!1,await E.loadStatus())},onLargeExpedientOrderUpdated:async()=>{await E.loadStatus(!0)},onMiscellaneousSubjectStarted:async()=>{console.log("[Dashboard] Evento miscellaneous-subject-started recebido - invalidando cache e recarregando status");const{useExpedientStore:p}=await Ue(()=>Promise.resolve().then(function(){return lt}),void 0);p().invalidateStatusCache("miscellaneous"),await z.loadStatus(!0),console.log("[Dashboard] Status recarregado ap\xF3s miscellaneous-subject-started:",{started:z.started.value,finalized:z.finalized.value,isRegistered:z.isRegistered.value})},onMiscellaneousSubjectFinalized:async p=>{await z.loadStatus(),z.isRegistered.value?ae.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${z.registrationOrder.value||"N/A"}\xBA.`):ae.warning(`As inscri\xE7\xF5es de ${n.miscellaneousSubjectsName.value.toLowerCase()} foram finalizadas.`)},onMiscellaneousSubjectRegistration:async p=>{p.source==="controle"&&(z.isRegistered.value=p.registered||!1,await z.loadStatus())},onMiscellaneousSubjectOrderUpdated:async()=>{await z.loadStatus(!0)},onVotingStarted:async()=>{o.isPresent.value?await b.loadVotingStatus():(await b.loadVotingStatus(),b.showVotingModal.value&&(b.showVotingModal.value=!1))},onVotingReadingStarted:async p=>{if((p==null?void 0:p.type)&&p.type!=="reading"&&!o.isPresent.value){await b.loadVotingStatus(),b.showVotingModal.value&&(b.showVotingModal.value=!1),ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para participar da vota\xE7\xE3o.");return}await b.loadVotingStatus()},onVotingReadingFinished:b.loadVotingStatus,onVotingVoteRegistered:b.loadVotingStatus,onSpeechStarted:async p=>{var f,H,W;const x=p.speech_type||"small";x==="small"?(q.currentSpeech.value=null,await q.loadSpeechStatus(),((f=q.currentSpeech.value)==null?void 0:f.status)==="speaking"&&(q.showSpeechModal.value=!0)):x==="large"?(m.currentSpeech.value=null,await m.loadSpeechStatus(),((H=m.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(y.currentSpeech.value=null,await y.loadSpeechStatus(),((W=y.currentSpeech.value)==null?void 0:W.status)==="speaking"&&(y.showSpeechModal.value=!0))},onSpeechPaused:async p=>{var f,H,W;const x=p.speech_type||"small";x==="small"?(await q.loadSpeechStatus(),((f=q.currentSpeech.value)==null?void 0:f.status)==="paused"&&(q.showSpeechModal.value=!0)):x==="large"?(await m.loadSpeechStatus(),((H=m.currentSpeech.value)==null?void 0:H.status)==="paused"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(await y.loadSpeechStatus(),((W=y.currentSpeech.value)==null?void 0:W.status)==="paused"&&(y.showSpeechModal.value=!0))},onSpeechResumed:async p=>{var f,H,W;const x=p.speech_type||"small";x==="small"?(await q.loadSpeechStatus(),((f=q.currentSpeech.value)==null?void 0:f.status)==="speaking"&&(q.showSpeechModal.value=!0)):x==="large"?(await m.loadSpeechStatus(),((H=m.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(await y.loadSpeechStatus(),((W=y.currentSpeech.value)==null?void 0:W.status)==="speaking"&&(y.showSpeechModal.value=!0))},onSpeechTimeAdded:async p=>{const x=p.speech_type||"small";x==="small"?await q.loadSpeechStatus():x==="large"?await m.loadSpeechStatus():x==="miscellaneous"&&await y.loadSpeechStatus()},onSpeechFinished:async p=>{var f,H,W;const x=p.speech_type||"small";x==="small"?(await q.loadSpeechStatus(),await _.loadSessionInteractions(),((f=q.currentSpeech.value)==null?void 0:f.status)==="finished"&&(q.showSpeechModal.value=!0)):x==="large"?(await m.loadSpeechStatus(),await _.loadSessionInteractions(),((H=m.currentSpeech.value)==null?void 0:H.status)==="finished"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(await y.loadSpeechStatus(),await _.loadSessionInteractions(),((W=y.currentSpeech.value)==null?void 0:W.status)==="finished"&&(y.showSpeechModal.value=!0))},onSessionAttendance:async p=>{u.isPresent=p.present||!1,await o.loadCurrentAttendanceStatus(),!p.present&&c.value==="voting"&&(ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."),c.value="home"),!p.present&&b.showVotingModal.value&&(b.showVotingModal.value=!1,ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")),p.source==="controle"&&ae.success(p.present?"Presen\xE7a confirmada pelo controle":"Presen\xE7a removida pelo controle")},onSessionAbsences:async p=>{await o.loadCurrentAttendanceStatus(),p.absenceReason&&(o.absenceReason.value=p.absenceReason),p.justified&&p.absenceReason&&ae.info("Aus\xEAncia justificada pelo controle")},onVoiceRequestRegistered:async p=>{await L.loadStatus(!0)},onVoiceRequestRemoved:async p=>{await L.loadStatus(!0)},onVoiceRequestSpeechStarted:async p=>{await L.loadStatus(!0)},onVoiceRequestSpeechPaused:async p=>{await L.loadStatus(!0)},onVoiceRequestSpeechResumed:async p=>{await L.loadStatus(!0)},onVoiceRequestSpeechTimeAdded:async p=>{await L.loadStatus(!0)},onVoiceRequestSpeechFinished:async p=>{await L.loadStatus(!0)},onSpeechAsideStarted:async p=>{var f,H,W;const x=(p==null?void 0:p.speech_type)||"small";x==="small"?(await q.loadSpeechStatus(),((f=q.currentSpeech.value)==null?void 0:f.status)==="paused"&&(q.showSpeechModal.value=!0)):x==="large"?(await m.loadSpeechStatus(),((H=m.currentSpeech.value)==null?void 0:H.status)==="paused"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(await y.loadSpeechStatus(),((W=y.currentSpeech.value)==null?void 0:W.status)==="paused"&&(y.showSpeechModal.value=!0))},onSpeechAsideFinished:async p=>{var f,H,W;const x=(p==null?void 0:p.speech_type)||"small";x==="small"?(await q.loadSpeechStatus(),((f=q.currentSpeech.value)==null?void 0:f.status)==="speaking"&&(q.showSpeechModal.value=!0)):x==="large"?(await m.loadSpeechStatus(),((H=m.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(m.showSpeechModal.value=!0)):x==="miscellaneous"&&(await y.loadSpeechStatus(),((W=y.currentSpeech.value)==null?void 0:W.status)==="speaking"&&(y.showSpeechModal.value=!0))}});function ce(){const p=Le.getItem("unit_id_num");if(p&&s.isConnected){const x=`unit.${p}.sessions`;s.subscribeToChannel(x)}s.on("session-status-changed",x=>{if(console.log("[Vereador] Status da sess\xE3o alterado:",x),x.status==="started"&&x.agendaId){const f=Le.getItem("unit_id_num");if(f&&s.isConnected){const H=`unit.${f}.agenda.${x.agendaId}`;s.subscribeToChannel(H)}B()}else x.status==="closed"&&(t.value=null,d.value=null,l.value=[],te())})}Ve("quorum",o),Ve("smallExpedient",S),Ve("largeExpedient",E),Ve("miscellaneousSubject",z),Ve("voting",b),Ve("voiceRequest",L),Ve("smallSpeech",q),Ve("largeSpeech",m),Ve("miscellaneousSubjectSpeech",y),Ve("sessionAgenda",w),Ve("sessionSettings",n),Ve("sessionInteractions",_),ve(()=>{var p;return(p=t.value)==null?void 0:p.id},async(p,x)=>{p&&p!==x&&(w.selectedAgendaId.value=p,s.isConnected&&w.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:S.loadStatus,loadLargeExpedientStatus:E.loadStatus,loadMiscellaneousSubjectStatus:z.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:L.loadStatus}),await Promise.all([o.loadQuorumStatus(),o.loadCurrentAttendanceStatus(),S.loadStatus(),E.loadStatus(),z.loadStatus(),b.loadVotingStatus(),q.loadSpeechStatus(),m.loadSpeechStatus(),y.loadSpeechStatus(),L.loadStatus(),_.loadSessionInteractions()]),me())},{immediate:!0}),ve(()=>o.isPresent.value,p=>{t.value&&d.value&&!p&&b.showVotingModal.value&&(b.showVotingModal.value=!1,ae.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."))});let re=null;return ut(async()=>{if(await n.loadSettings(),ce(),await B(),s.isConnected)(()=>{var x;(x=t.value)!=null&&x.id&&w.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:S.loadStatus,loadLargeExpedientStatus:E.loadStatus,loadMiscellaneousSubjectStatus:z.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:L.loadStatus})})();else{const p=setInterval(()=>{var x;s.isConnected&&((x=t.value)!=null&&x.id&&w.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:S.loadStatus,loadLargeExpedientStatus:E.loadStatus,loadMiscellaneousSubjectStatus:z.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:L.loadStatus}),clearInterval(p))},500);setTimeout(()=>clearInterval(p),1e4)}re=setInterval(()=>{B()},3e4)}),Nt(()=>{re&&clearInterval(re),q.cleanup(),m.cleanup()}),(p,x)=>(h(),G(Sa,{class:"mobile-dashboard-page"},{default:F(()=>{var f,H,W,oe,ue,he,we,qe,ze;return[t.value&&d.value?(h(),P("div",Fl,[a("div",Dl,[je(a("div",jl,[I(Es,{"session-data":d.value,"selected-agenda-id":(f=t.value)==null?void 0:f.id},null,8,["session-data","selected-agenda-id"])],512),[[Be,c.value==="home"]]),je(a("div",Nl,[I(nn,{"session-id":(H=t.value)==null?void 0:H.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Be,c.value==="quorum"]]),je(a("div",Ol,[I($n,{"session-id":(W=t.value)==null?void 0:W.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Be,c.value==="small-expedient"&&A(n).enableSmallExpedient.value]]),je(a("div",Bl,[I(zn,{"session-id":(oe=t.value)==null?void 0:oe.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Be,c.value==="large-expedient"&&A(n).enableLargeExpedient.value]]),je(a("div",Ql,[I(Mn,{"session-id":(ue=t.value)==null?void 0:ue.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Be,c.value==="miscellaneous-subject"&&A(n).enableMiscellaneousSubjects.value]]),je(a("div",Ul,[I(Ai,{"session-id":(he=t.value)==null?void 0:he.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Be,c.value==="voting"&&A(o).isPresent.value]]),je(a("div",Jl,[a("div",Hl,[a("div",Wl,[I(D,{name:"how_to_vote",size:"80px",color:"grey-5",class:"empty-state-icon"}),x[7]||(x[7]=a("div",{class:"empty-state-title"},"Acesso \xE0 Vota\xE7\xE3o Restrito",-1)),x[8]||(x[8]=a("div",{class:"empty-state-subtitle"}," Voc\xEA precisa estar presente no qu\xF3rum para acessar a tela de vota\xE7\xE3o. ",-1))])])],512),[[Be,c.value==="voting"&&!A(o).isPresent.value]])]),I(Mi,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=ie=>c.value=ie),tabs:C.value,onTabChange:k},null,8,["modelValue","tabs"])])):N("",!0),t.value&&d.value?(h(),P("div",Gl,[I(mt,{modelValue:V.value,"onUpdate:modelValue":x[1]||(x[1]=ie=>V.value=ie),speech:A(q).currentSpeech.value,"remaining-time":A(q).remainingTime.value,"used-seconds":A(q).usedSeconds.value,"expedient-type":A(n).smallExpedientName.value||"Pequeno Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),I(mt,{modelValue:O.value,"onUpdate:modelValue":x[2]||(x[2]=ie=>O.value=ie),speech:A(m).currentSpeech.value,"remaining-time":A(m).remainingTime.value,"used-seconds":A(m).usedSeconds.value,"expedient-type":A(n).largeExpedientName.value||"Grande Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),A(n).enableMiscellaneousSubjects.value?(h(),G(mt,{key:0,modelValue:Q.value,"onUpdate:modelValue":x[3]||(x[3]=ie=>Q.value=ie),speech:A(y).currentSpeech.value,"remaining-time":A(y).remainingTime.value,"used-seconds":A(y).usedSeconds.value,"expedient-type":A(n).miscellaneousSubjectsName.value||"Assuntos Diversos"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"])):N("",!0),I(Co,{modelValue:M.value,"onUpdate:modelValue":x[4]||(x[4]=ie=>M.value=ie),reading:A(b).activeReading.value,"agenda-id":(we=t.value)==null?void 0:we.id,"has-request":A(L).hasRequest.value,"current-speech":A(L).currentSpeech.value,"request-order":A(L).requestOrder.value,onRequestRegistered:x[5]||(x[5]=ie=>A(L).loadStatus(!0))},null,8,["modelValue","reading","agenda-id","has-request","current-speech","request-order"]),((qe=t.value)==null?void 0:qe.id)&&A(o).isPresent.value?(h(),G(Pl,{key:1,modelValue:$.value,"onUpdate:modelValue":x[6]||(x[6]=ie=>$.value=ie),voting:A(b).activeVoting.value,"agenda-id":t.value.id,"on-vote-registered":A(b).handleVoteRegistered,onVoteRegistered:A(b).handleVoteRegistered},null,8,["modelValue","voting","agenda-id","on-vote-registered","onVoteRegistered"])):N("",!0)])):(h(),P("div",Kl,[a("div",Yl,[a("div",Xl,[I(D,{name:"waving_hand",size:"32px",class:"greeting-icon"}),a("div",Zl,[a("div",er," Ol\xE1, Ver. "+T(((ze=A(i).user)==null?void 0:ze.first_name)||"Vereador")+"! ",1),a("div",tr,T(J()),1)])])]),l.value.length>0?(h(),P("div",ar,[(h(!0),P(xe,null,Ie(l.value,(ie,Ce)=>{var Te;return h(),G(ns,{key:((Te=ie.session)==null?void 0:Te.id)||Ce,"scheduled-session":ie.session,propositions:ie.propositions,"is-future":ne(ie.session)},null,8,["scheduled-session","propositions","is-future"])}),128))])):(h(),P("div",sr,[a("div",nr,[a("div",ir,[I(D,{name:"event_busy",size:"80px",color:"grey-5",class:"empty-state-icon"}),x[9]||(x[9]=a("div",{class:"empty-state-title"},"N\xE3o h\xE1 sess\xE3o ativa",-1)),x[10]||(x[10]=a("div",{class:"empty-state-subtitle"}," N\xE3o existe sess\xE3o em andamento no momento. Quando houver sess\xE3o agendada com data futura, ela aparecer\xE1 aqui com a data e as proposi\xE7\xF5es que ser\xE3o votadas. ",-1))])])]))]))]}),_:1}))}};var gr=Re(or,[["__scopeId","data-v-0d1c1364"]]);export{gr as default};
