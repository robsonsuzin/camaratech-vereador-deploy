import{c as Oe,a as qt,O as Ma,e as $t,P as Da,f as v,aF as Ba,i as je,h as X,a1 as N,aG as Ua,aH as pa,F as ct,_ as ke,R as d,S as H,U as E,Y as t,ab as _,V as w,Z as S,X as $e,a3 as k,a5 as B,a4 as we,aI as Ie,aJ as Le,W as Be,Q as lt,d as ft,u as Ae,ae as Me,ad as me,a8 as ve,w as ge,r as G,ag as y,k as Oa,o as Na,T as wa,aK as ba,a0 as qe,a7 as tt,a2 as Qa,a6 as ja,G as xe,aL as mt,B as rt,aM as Ja,az as ya,j as Sa,l as xa,aN as _a,p as qa,aO as $a,ac as it,$ as Qe,aP as We,g as It,ak as Ha,aQ as Ia,ah as Fe,ar as ht,aR as Ue,aj as pt,aS as ot,H as Ze,aT as Aa,N as Wa,aU as Ga,aV as Ka,m as bt,n as va,aB as Ya,aC as Xa,ao as Za,J as es}from"./index.c07dbf11.js";import{Q as ts}from"./QPage.b9a6a4dd.js";import{u as Ne}from"./socket.eb8b7e4e.js";import{Q as ye}from"./QBanner.c624dc8a.js";import{e as St,f as as,h as vt,g as nt,Q as ss}from"./QSpace.078d71b3.js";import{Q as ka}from"./QResizeObserver.d21951c6.js";const ns={xs:8,sm:10,md:14,lg:20,xl:24};var At=Oe({name:"QChip",props:{...qt,...Ma,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:a}){const{proxy:{$q:n}}=je(),s=$t(e,n),i=Da(e,ns),u=v(()=>e.selected===!0||e.icon!==void 0),l=v(()=>e.selected===!0?e.iconSelected||n.iconSet.chip.selected:e.icon),c=v(()=>e.iconRemove||n.iconSet.chip.remove),V=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),$=v(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(V.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),R=v(()=>{const b=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},F={...b,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove};return{chip:b,remove:F}});function T(b){b.keyCode===13&&U(b)}function U(b){e.disable||(a("update:selected",!e.selected),a("click",b))}function f(b){(b.keyCode===void 0||b.keyCode===13)&&(ct(b),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function g(){const b=[];V.value===!0&&b.push(X("div",{class:"q-focus-helper"})),u.value===!0&&b.push(X(N,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const F=e.label!==void 0?[X("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(X("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ua(o.default,F))),e.iconRight&&b.push(X(N,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(X(N,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:c.value,...R.value.remove,onClick:f,onKeyup:f})),b}return()=>{if(e.modelValue===!1)return;const b={class:$.value,style:i.value};return V.value===!0&&Object.assign(b,R.value.chip,{onClick:U,onKeyup:T}),Ba("div",b,g(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[pa,e.ripple]])}}});const is={class:"tw-flex tw-items-center tw-gap-3"},os={class:"card-icon-wrapper"},ls={class:"card-title"},rs={class:"session-info-compact tw-mb-3"},us={class:"session-info-row"},ds={class:"session-info-col"},cs={class:"session-info-value-compact"},vs={class:"session-info-row"},gs={class:"session-info-col"},fs={class:"session-info-value-compact"},ms={key:0,class:"session-info-col"},hs={class:"session-info-value-compact"},ps={key:1,class:"session-info-col"},ws={class:"session-info-value-compact"},bs={class:"tw-flex tw-items-start tw-gap-3"},ys={class:"tw-flex-1"},Ss={class:"status-message-text"},xs={key:0},_s={key:0},qs={key:1},$s={key:2},Is={key:1},As={key:2},ks={key:0,class:"tw-mt-3"},Rs={class:"propositions-title"},zs={class:"proposition-count"},Vs={class:"propositions-list tw-mt-2"},Ts={class:"proposition-header"},Cs={class:"proposition-number"},Ls={key:0,class:"proposition-title"},Ps={key:1,class:"proposition-proponents"},Fs={key:0,class:"proponent-more"},Es={key:1,class:"empty-propositions tw-mt-4"},Ms={__name:"ScheduledSessionCard",props:{scheduledSession:{type:Object,default:null},propositions:{type:Array,default:()=>[]},isFuture:{type:Boolean,default:!1}},setup(e){const o=e;function a(){var i;return((i=o.scheduledSession)==null?void 0:i.session_status)==="closed"?"header-closed":o.isFuture?"header-future":"header-today"}function n(){var i;return((i=o.scheduledSession)==null?void 0:i.session_status)==="closed"?"banner-closed":o.isFuture?"banner-future":"banner-today"}function s(){var i;return((i=o.scheduledSession)==null?void 0:i.session_status)==="closed"?"status-avatar-closed":o.isFuture?"status-avatar-future":"status-avatar-today"}return(i,u)=>(d(),H(Be,{class:"modern-card session-card slide-up"},{default:E(()=>[t("div",{class:_(["card-header session-header",a()])},[t("div",is,[t("div",os,[w(N,{name:e.scheduledSession.session_status==="closed"?"event_busy":e.isFuture?"event_available":"event",size:"24px",class:"tw-text-white"},null,8,["name"])]),t("div",ls,S(e.scheduledSession.session_status==="closed"?"Sess\xE3o Encerrada":e.isFuture?"Pr\xF3xima Sess\xE3o Futura":"Sess\xE3o Agendada para Hoje"),1)])],2),w($e,{class:"tw-p-4 md:tw-p-6 session-card-section"},{default:E(()=>[t("div",rs,[t("div",us,[t("div",ds,[w(N,{name:"title",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",cs,S(e.scheduledSession.name||"N\xE3o informado"),1)])]),t("div",vs,[t("div",gs,[w(N,{name:"calendar_today",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",fs,S(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"N\xE3o informado"),1)]),e.scheduledSession.session_time?(d(),k("div",ms,[w(N,{name:"schedule",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",hs,S(e.scheduledSession.session_time),1)])):B("",!0),e.scheduledSession.session_type?(d(),k("div",ps,[w(N,{name:"category",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",ws,S(e.scheduledSession.session_type),1)])):B("",!0)])]),t("div",{class:_(["session-status-banner tw-mb-4",n()])},[t("div",bs,[t("div",{class:_(["status-avatar",s()])},[w(N,{name:e.scheduledSession.session_status==="closed"?"check_circle":e.isFuture?"calendar_today":"schedule",size:"20px"},null,8,["name"])],2),t("div",ys,[t("div",Ss,[e.scheduledSession.session_status==="closed"?(d(),k("span",xs,[u[0]||(u[0]=we(" Esta sess\xE3o j\xE1 foi encerrada ",-1)),e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date?(d(),k("span",_s," em "+S(e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date),1)):B("",!0),e.scheduledSession.closing_time?(d(),k("span",qs," \xE0s "+S(e.scheduledSession.closing_time),1)):B("",!0),!e.scheduledSession.closing_date_formatted&&!e.scheduledSession.closing_time?(d(),k("span",$s," anteriormente ")):B("",!0),u[1]||(u[1]=we(" . ",-1))])):e.isFuture?(d(),k("span",Is," Esta sess\xE3o est\xE1 agendada para "+S(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"data futura")+". Ainda n\xE3o \xE9 poss\xEDvel realizar a\xE7\xF5es. ",1)):(d(),k("span",As," A sess\xE3o ainda n\xE3o foi iniciada. Aguarde o in\xEDcio da sess\xE3o para realizar a\xE7\xF5es. "))])])])],2),e.propositions.length>0?(d(),k("div",ks,[t("div",Rs,[w(N,{name:"description",size:"18px",class:"tw-mr-2"}),we(" "+S(e.scheduledSession.session_status==="closed"?"Proposi\xE7\xF5es que foram votadas":"Proposi\xE7\xF5es que ser\xE3o votadas")+" ",1),t("span",zs,"("+S(e.propositions.length)+")",1)]),t("div",Vs,[(d(!0),k(Ie,null,Le(e.propositions,(l,c)=>(d(),k("div",{key:l.id||c,class:"proposition-item"},[t("div",Ts,[t("span",Cs,S(l.species||"Proposi\xE7\xE3o")+" n\xBA "+S(l.number||"S/N")+"/"+S(l.year||new Date().getFullYear()),1)]),l.title?(d(),k("div",Ls,S(l.title),1)):B("",!0),l.proponents&&l.proponents.length>0?(d(),k("div",Ps,[(d(!0),k(Ie,null,Le(l.proponents.slice(0,3),V=>(d(),H(At,{key:V.id,size:"sm",class:"proponent-chip"},{default:E(()=>[we(S(V.name),1)]),_:2},1024))),128)),l.proponents.length>3?(d(),k("span",Fs," +"+S(l.proponents.length-3)+" mais ",1)):B("",!0)])):B("",!0)]))),128))])])):(d(),k("div",Es,[w(N,{name:"inbox",size:"32px",class:"tw-mb-2",color:"grey-5"}),u[2]||(u[2]=t("div",{class:"empty-text"}," Nenhuma proposi\xE7\xE3o cadastrada nesta sess\xE3o ainda. ",-1))]))]),_:1})]),_:1}))}};var ga=ke(Ms,[["__scopeId","data-v-fcb6ccaa"]]);const Ds=["top","middle","bottom"];var Xe=Oe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Ds.includes(e)}},setup(e,{slots:o}){const a=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=v(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>X("div",{class:n.value,style:a.value,role:"status","aria-label":e.label},lt(o.default,e.label!==void 0?[e.label]:[]))}});const Bs=ft("quorum",{state:()=>({isPresent:!1,isAbsentJustified:!1,absenceReason:null,quorumFinalized:!1,quorumStarted:!1,quorumFinalizedAt:null,loadingQuorum:!1,loadingAttendance:!1,loadingJustify:!1,quorumStatusCache:null,quorumStatusLastUpdate:null,QUORUM_STATUS_TTL:2e3,attendanceStatusCache:null,attendanceStatusLastUpdate:null,ATTENDANCE_STATUS_TTL:2e3,_quorumStatusLoadingPromise:null,_attendanceStatusLoadingPromise:null}),getters:{proponentId(){var o;return((o=Ae().user)==null?void 0:o.proponent_id)||null},unitId(){const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId;return o?parseInt(o):null},canSend(){var s;const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId,a=o?parseInt(o):null,n=((s=e.user)==null?void 0:s.proponent_id)||null;return!!a&&!!n}},actions:{async loadQuorumStatus(e,o=!1){if(!e){this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null;return}if(!o&&this.quorumStatusCache&&this.quorumStatusLastUpdate){const n=Date.now()-this.quorumStatusLastUpdate;if(n<this.QUORUM_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de quorum status (${n}ms atr\xE1s)`),this.quorumStatusCache}if(this._quorumStatusLoadingPromise)return this._quorumStatusLoadingPromise;if(this.loadingQuorum){console.log("[QuorumStore] loadQuorumStatus j\xE1 em andamento, ignorando.");return}return this.loadingQuorum=!0,this._quorumStatusLoadingPromise=(async()=>{var a,n;try{const s=await me.get(`/pauta/${e}/quorum/status`),i=((a=s==null?void 0:s.data)==null?void 0:a.success)&&((n=s==null?void 0:s.data)==null?void 0:n.data)?s.data.data:null;return i?(this.quorumStarted=i.is_started||!1,this.quorumFinalized=i.is_finalized||!1,this.quorumFinalizedAt=i.finalized_at||null):(this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null),this.quorumStatusCache=i,this.quorumStatusLastUpdate=Date.now(),i}catch(s){throw console.error("Erro ao carregar status do qu\xF3rum:",s),this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null,this.quorumStatusCache=null,s}finally{this.loadingQuorum=!1,this._quorumStatusLoadingPromise=null}})(),this._quorumStatusLoadingPromise},async loadCurrentAttendanceStatus(e,o=!1){if(!e||!this.proponentId){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null;return}if(!o&&this.attendanceStatusCache&&this.attendanceStatusLastUpdate){const n=Date.now()-this.attendanceStatusLastUpdate;if(n<this.ATTENDANCE_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de attendance status (${n}ms atr\xE1s)`),this.attendanceStatusCache}return this._attendanceStatusLoadingPromise?this._attendanceStatusLoadingPromise:(this._attendanceStatusLoadingPromise=(async()=>{var a,n;try{const s=await me.get(`/pauta/${e}/session-members`),u=(((n=(a=s==null?void 0:s.data)==null?void 0:a.data)==null?void 0:n.members)||[]).find(l=>l.proponent_id===this.proponentId);return this.isPresent=(u==null?void 0:u.is_present)||!1,this.isAbsentJustified=(u==null?void 0:u.is_absent_justified)||!1,this.absenceReason=(u==null?void 0:u.absence_reason)||null,this.attendanceStatusCache=u,this.attendanceStatusLastUpdate=Date.now(),u}catch(s){throw console.error("Erro ao carregar estado da presen\xE7a:",s),this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.attendanceStatusCache=null,s}finally{this._attendanceStatusLoadingPromise=null}})(),this._attendanceStatusLoadingPromise)},invalidateQuorumStatusCache(){this.quorumStatusCache=null,this.quorumStatusLastUpdate=null},invalidateAttendanceStatusCache(){this.attendanceStatusCache=null,this.attendanceStatusLastUpdate=null},resetState(){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.quorumFinalized=!1,this.quorumStarted=!1,this.quorumFinalizedAt=null,this.invalidateQuorumStatusCache(),this.invalidateAttendanceStatusCache()}}});function Ra(e){const o=Ne(),a=Ae(),n=Bs(),s=v(()=>n.isPresent),i=v(()=>n.isAbsentJustified),u=v(()=>n.absenceReason),l=v(()=>n.quorumFinalized),c=v(()=>n.quorumStarted),V=v(()=>n.quorumFinalizedAt),$=v(()=>n.loadingQuorum),R=v(()=>n.loadingAttendance),T=v(()=>n.loadingJustify||!1),U=v(()=>n.canSend);async function f(){return await n.loadQuorumStatus(e.value)}async function g(){return await n.loadCurrentAttendanceStatus(e.value)}async function b(){var A,m,x,r,h;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){ve.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isAbsentJustified){ve.warning("N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 uma justificativa de aus\xEAncia registrada.");return}if(n.isPresent){ve.warning("N\xE3o \xE9 poss\xEDvel desmarcar a presen\xE7a ap\xF3s ela ser registrada.");return}if(!n.loadingAttendance){n.loadingAttendance=!0;try{(A=(await me.post(`/pauta/${e.value}/session-attendance/register`,{proponent_id:parseInt(n.proponentId),present:!0})).data)!=null&&A.success&&(n.isPresent=!0,n.invalidateAttendanceStatusCache(),o.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!0,userId:(m=a.user)==null?void 0:m.id,userName:(x=a.user)==null?void 0:x.first_name,source:"vereador"}),ve.success("Presen\xE7a registrada com sucesso!"))}catch(q){console.error("[Vereador] Erro ao registrar presen\xE7a:",q),ve.negative("Erro ao registrar presen\xE7a: "+(((h=(r=q.response)==null?void 0:r.data)==null?void 0:h.message)||q.message))}finally{n.loadingAttendance=!1}}}}async function F(A){var m,x,r,h,q;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){ve.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. N\xE3o \xE9 mais poss\xEDvel justificar aus\xEAncia.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isPresent){ve.warning("N\xE3o \xE9 poss\xEDvel justificar aus\xEAncia quando voc\xEA est\xE1 presente.");return}if(!n.loadingJustify){n.loadingJustify=!0;try{(m=(await me.post(`/pauta/${e.value}/session-absences/justify`,{proponent_id:parseInt(n.proponentId),absence_reason:A})).data)!=null&&m.success&&(n.isAbsentJustified=!0,n.absenceReason=A,n.invalidateAttendanceStatusCache(),o.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!1,justified:!0,reason:A,userId:(x=a.user)==null?void 0:x.id,userName:(r=a.user)==null?void 0:r.first_name,source:"vereador"}),ve.success("Aus\xEAncia justificada com sucesso!"))}catch(p){console.error("[Vereador] Erro ao justificar aus\xEAncia:",p),ve.negative("Erro ao justificar aus\xEAncia: "+(((q=(h=p.response)==null?void 0:h.data)==null?void 0:q.message)||p.message))}finally{n.loadingJustify=!1}}}}return{isPresent:s,isAbsentJustified:i,absenceReason:u,quorumFinalized:l,quorumStarted:c,quorumFinalizedAt:V,loadingQuorum:$,loadingAttendance:R,loadingJustify:T,canSend:U,loadQuorumStatus:f,loadCurrentAttendanceStatus:g,toggleAttendance:b,justifyAbsence:F}}const Us=ft("expedient",{state:()=>({smallExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},largeExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},statusCache:{small:null,large:null},statusLastUpdate:{small:null,large:null},STATUS_TTL:2e3,_statusLoadingPromises:{small:null,large:null}}),getters:{proponentId(){var o;return((o=Ae().user)==null?void 0:o.proponent_id)||null},unitId(){const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId;return o?parseInt(o):null},canSend(){var s;const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId,a=o?parseInt(o):null,n=((s=e.user)==null?void 0:s.proponent_id)||null;return!!a&&!!n}},actions:{async loadStatus(e,o,a=!1){if(!e||!this.proponentId){this.resetState(o);return}const n=o==="small"?"small":"large",s=n==="small"?this.smallExpedient:this.largeExpedient,i=n==="small"?"small-expedient":"large-expedient";if(!a&&s.loadingData){console.log(`[ExpedientStore ${n}] loadStatus j\xE1 em andamento, ignorando.`);return}if(!a&&this.statusCache[n]&&this.statusLastUpdate[n]){const l=Date.now()-this.statusLastUpdate[n];if(l<this.STATUS_TTL){console.log(`[ExpedientStore ${n}] Usando cache de status (${l}ms atr\xE1s)`);const c=this.statusCache[n];return s.started=c.started||!1,s.finalized=c.finalized||!1,s.finalizedAt=c.finalizedAt||null,s.isRegistered=c.isRegistered||!1,s.registrationOrder=c.registrationOrder||null,s.registeredAt=c.registeredAt||null,this.statusCache[n]}}return this._statusLoadingPromises[n]?this._statusLoadingPromises[n]:(s.loadingData=!0,this._statusLoadingPromises[n]=(async()=>{var u,l,c,V;try{const $=await me.get(`/pauta/${e}/${i}/status`),R=((u=$==null?void 0:$.data)==null?void 0:u.success)&&((l=$==null?void 0:$.data)==null?void 0:l.data)?$.data.data:null;R&&(s.started=R.is_started||!1,s.finalized=R.is_finalized||!1,s.finalizedAt=R.finalized_at||null);const T=await me.get(`/pauta/${e}/${i}/members`),f=(((V=(c=T==null?void 0:T.data)==null?void 0:c.data)==null?void 0:V.members)||[]).find(g=>g.proponent_id===this.proponentId);return s.isRegistered=(f==null?void 0:f.is_registered)||!1,s.registrationOrder=(f==null?void 0:f.registration_order)||null,s.registeredAt=(f==null?void 0:f.registered_at)||null,this.statusCache[n]={started:s.started,finalized:s.finalized,finalizedAt:s.finalizedAt,isRegistered:s.isRegistered,registrationOrder:s.registrationOrder,registeredAt:s.registeredAt},this.statusLastUpdate[n]=Date.now(),this.statusCache[n]}catch($){throw console.error(`Erro ao carregar status do ${i}:`,$),this.resetState(o),$}finally{s.loadingData=!1,this._statusLoadingPromises[n]=null}})(),this._statusLoadingPromises[n])},invalidateStatusCache(e){const o=e==="small"?"small":"large";this.statusCache[o]=null,this.statusLastUpdate[o]=null},resetState(e){const a=(e==="small"?"small":"large")==="small"?this.smallExpedient:this.largeExpedient;a.isRegistered=!1,a.started=!1,a.finalized=!1,a.finalizedAt=null,a.registrationOrder=null,a.registeredAt=null,this.invalidateStatusCache(e)}}});function gt(e,o="small"){const a=Ne(),n=Ae(),s=Us(),u=(o==="small"?"small":"large")==="small"?s.smallExpedient:s.largeExpedient,l=o==="small"?"small-expedient":"large-expedient",c=o==="small"?"pequeno expediente":"grande expediente",V=v(()=>u.isRegistered),$=v(()=>u.started),R=v(()=>u.finalized),T=v(()=>u.finalizedAt),U=v(()=>u.registrationOrder),f=v(()=>u.registeredAt),g=v(()=>u.loadingData),b=v(()=>u.loadingAction),F=v(()=>s.canSend);async function A(x=!1){return await s.loadStatus(e.value,o,x)}async function m(){var r,h,q,p,z,Q;if(!s.canSend||!e.value)return;if(!u.started||u.finalized){ve.warning(u.finalized?`As inscri\xE7\xF5es de ${c} foram finalizadas.`:`As inscri\xE7\xF5es de ${c} ainda n\xE3o foram iniciadas.`);return}if(u.loadingAction)return;u.loadingAction=!0;const x=!u.isRegistered;try{const C=await me.post(`/pauta/${e.value}/${l}/register`,{proponent_id:parseInt(s.proponentId),registered:x});(r=C.data)!=null&&r.success?(s.invalidateStatusCache(o),await A(),a.emit(`${l}-registration`,{unitId:parseInt(s.unitId),agendaId:parseInt(e.value),proponentId:parseInt(s.proponentId),registered:x,userId:(h=n.user)==null?void 0:h.id,userName:(q=n.user)==null?void 0:q.first_name,source:"vereador"}),x&&u.registrationOrder?ve.success(`Inscri\xE7\xE3o realizada com sucesso! Sua posi\xE7\xE3o na fila: ${u.registrationOrder}\xBA`):ve.success(x?"Inscri\xE7\xE3o realizada com sucesso!":"Inscri\xE7\xE3o cancelada com sucesso!")):ve.error(((p=C.data)==null?void 0:p.message)||"Erro ao registrar inscri\xE7\xE3o.")}catch(C){console.error(`[Vereador] Erro ao registrar ${c} via API:`,C),ve.error("Erro ao registrar inscri\xE7\xE3o: "+(((Q=(z=C.response)==null?void 0:z.data)==null?void 0:Q.message)||C.message))}finally{u.loadingAction=!1}}return{isRegistered:V,started:$,finalized:R,finalizedAt:T,registrationOrder:U,registeredAt:f,loadingData:g,loadingAction:b,canSend:F,loadStatus:A,toggleRegistration:m}}const Os=ft("voting",{state:()=>({votingStatus:null,activeReading:null,activeVoting:null,finishedReadings:[],quorumMembers:[],showReadingModal:!1,showVotingModal:!1,loadingVoting:!1,votingStatusCache:null,votingStatusLastUpdate:null,VOTING_STATUS_TTL:2e3,_votingStatusLoadingPromise:null}),getters:{activeReadingIcon:e=>e.activeReading?e.activeReading.type==="reading"?"menu_book":e.activeReading.type==="secret_voting"?"lock":"how_to_vote":"menu_book",activeReadingLabel:e=>e.activeReading?e.activeReading.type==="reading"?"Leitura em Andamento":e.activeReading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":""},actions:{async loadVotingStatus(e,o=!1){if(!e){const a=!!this.activeReading,n=!!this.activeVoting;this.votingStatus=null,this.activeReading=null,this.activeVoting=null,a&&(this.showReadingModal=!1),n&&(this.showVotingModal=!1);return}if(!o&&this.votingStatusCache&&this.votingStatusLastUpdate){const n=Date.now()-this.votingStatusLastUpdate;if(n<this.VOTING_STATUS_TTL)return console.log(`[VotingStore] Usando cache de voting status (${n}ms atr\xE1s)`),this.votingStatusCache}if(this._votingStatusLoadingPromise)return this._votingStatusLoadingPromise;if(!this.loadingVoting)return this.loadingVoting=!0,this._votingStatusLoadingPromise=(async()=>{var a,n,s,i,u,l,c,V;try{const $=await me.get(`/pauta/${e}/voting/status`);if((a=$.data)!=null&&a.success){this.votingStatus=$.data.data,this.finishedReadings=((n=$.data.data)==null?void 0:n.finished_readings)||[],this.quorumMembers=((i=(s=$.data.data)==null?void 0:s.active_voting)==null?void 0:i.quorum_members)||[];const R=(u=this.activeReading)==null?void 0:u.id,T=(l=this.activeVoting)==null?void 0:l.id,U=!!this.activeReading,f=!!this.activeVoting;if((V=(c=this.votingStatus)==null?void 0:c.active_voting)!=null&&V.readings){const m=this.votingStatus.active_voting.readings.filter(q=>!q.finished_at),x=m.find(q=>q.type==="secret_voting"),r=m.find(q=>q.type==="voting"),h=m.find(q=>q.type==="reading");x?(this.activeVoting=x,this.activeReading=null):r?(this.activeVoting=r,this.activeReading=null):h?(this.activeReading=h,this.activeVoting=null):(this.activeReading=null,this.activeVoting=null)}else this.activeReading=null,this.activeVoting=null;const g=!R&&!T,b=U&&!this.activeReading&&!!this.activeVoting,F=this.activeVoting&&(g||this.activeVoting.id!==T||b),A=this.activeReading&&(g||this.activeReading.id!==R);F?(this.showVotingModal=!0,this.showReadingModal=!1):A&&!this.activeVoting&&(this.showReadingModal=!0,this.showVotingModal=!1),!this.activeVoting&&T&&(this.showVotingModal=!1),!this.activeReading&&R&&(this.showReadingModal=!1),this.votingStatusCache=$.data.data,this.votingStatusLastUpdate=Date.now()}}catch($){throw console.error("[Vereador] Erro ao carregar status da vota\xE7\xE3o:",$),this.votingStatus=null,this.activeReading=null,this.activeVoting=null,this.showReadingModal=!1,this.showVotingModal=!1,this.votingStatusCache=null,$}finally{this.loadingVoting=!1,this._votingStatusLoadingPromise=null}})(),this._votingStatusLoadingPromise},invalidateVotingStatusCache(){this.votingStatusCache=null,this.votingStatusLastUpdate=null}}});function za(e){const o=Os(),a=v(()=>o.votingStatus),n=v(()=>o.activeReading),s=v(()=>o.activeVoting),i=v(()=>o.finishedReadings),u=v(()=>o.quorumMembers),l=v({get:()=>o.showReadingModal,set:f=>{o.showReadingModal=f}}),c=v({get:()=>o.showVotingModal,set:f=>{o.showVotingModal=f}}),V=v(()=>o.loadingVoting),$=v(()=>o.activeReadingIcon),R=v(()=>o.activeReadingLabel);async function T(f=!1){return await o.loadVotingStatus(e.value,f)}function U(){o.invalidateVotingStatusCache(),T()}return{votingStatus:a,activeReading:n,activeVoting:s,finishedReadings:i,quorumMembers:u,showReadingModal:l,showVotingModal:c,loadingVoting:V,activeReadingIcon:$,activeReadingLabel:R,loadVotingStatus:T,handleVoteRegistered:U}}const Ns=ft("voiceRequest",{state:()=>({hasRequest:!1,requestOrder:null,requestedAt:null,currentSpeech:null,allSpeeches:[],remainingTime:0,loadingData:!1,speechInterval:null,voiceRequestStatusCache:null,voiceRequestStatusLastUpdate:null,VOICE_REQUEST_STATUS_TTL:2e3,_voiceRequestStatusLoadingPromise:null}),getters:{proponentId(){var o;return((o=Ae().user)==null?void 0:o.proponent_id)||null},unitId(){const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId;return o?parseInt(o):null},canSend(){var s;const e=Ae(),o=Me.getItem("unit_id_num")||e.currentUnitId,a=o?parseInt(o):null,n=((s=e.user)==null?void 0:s.proponent_id)||null;return!!a&&!!n},allFinishedSpeeches(){return this.allSpeeches.filter(e=>e.status==="finished").sort((e,o)=>new Date(o.finished_at||0)-new Date(e.finished_at||0))}},actions:{updateRemainingTime(){if(!this.currentSpeech){this.remainingTime=0;return}const e=this.currentSpeech;let o=e.used_seconds||0;e.status==="speaking"&&e.started_at&&(o+=Math.floor((new Date-new Date(e.started_at))/1e3));const a=(e.allocated_minutes+e.additional_minutes)*60;this.remainingTime=Math.max(0,a-o)},ensureSpeechInterval(){var e;!this.speechInterval&&((e=this.currentSpeech)==null?void 0:e.status)==="speaking"&&(this.speechInterval=setInterval(()=>{this.updateRemainingTime()},1e3))},clearSpeechInterval(){this.speechInterval&&(clearInterval(this.speechInterval),this.speechInterval=null)},async loadStatus(e,o=!1){if(!(!o&&this.loadingData)){if(!e||!this.proponentId){this.resetState();return}if(!o&&this.voiceRequestStatusCache&&this.voiceRequestStatusLastUpdate){const n=Date.now()-this.voiceRequestStatusLastUpdate;if(n<this.VOICE_REQUEST_STATUS_TTL)return console.log(`[VoiceRequestStore] Usando cache de voice request status (${n}ms atr\xE1s)`),this.voiceRequestStatusCache}return this._voiceRequestStatusLoadingPromise?this._voiceRequestStatusLoadingPromise:(this.loadingData=!0,this._voiceRequestStatusLoadingPromise=(async()=>{var a,n;try{const s=await me.get(`/api/pauta/${e}/voice-request/members`);let i=!1;if((a=s==null?void 0:s.data)!=null&&a.success){const c=(s.data.data.members||[]).find(V=>V.proponent_id===this.proponentId);i=(c==null?void 0:c.has_voice_request)&&!["finished","cancelled"].includes(c.request_status),this.hasRequest=i,this.requestOrder=(c==null?void 0:c.request_order)||null,this.requestedAt=(c==null?void 0:c.requested_at)||null}const u=await me.get(`/api/pauta/${e}/voice-request/speeches/status`);if((n=u==null?void 0:u.data)!=null&&n.success){const c=(u.data.data.speeches||[]).filter(V=>V.proponent_id===this.proponentId);if(this.allSpeeches=c,c.length>0)if(c.sort((V,$)=>{var f,g;const R={speaking:0,paused:1,finished:2},T=(f=R[V.status])!=null?f:99,U=(g=R[$.status])!=null?g:99;return T!==U?T-U:new Date($.started_at||0)-new Date(V.started_at||0)}),i){const V=c.find($=>$.status==="speaking"||$.status==="paused");this.currentSpeech=V||null}else this.currentSpeech=c[0];else this.currentSpeech=null;this.currentSpeech?(this.updateRemainingTime(),this.currentSpeech.status==="speaking"?this.ensureSpeechInterval():this.clearSpeechInterval()):this.clearSpeechInterval()}this.voiceRequestStatusCache={hasRequest:this.hasRequest,requestOrder:this.requestOrder,requestedAt:this.requestedAt,currentSpeech:this.currentSpeech,allSpeeches:this.allSpeeches},this.voiceRequestStatusLastUpdate=Date.now()}catch(s){throw console.error("Erro ao carregar status de pedido de voz:",s),this.resetState(),s}finally{this.loadingData=!1,this._voiceRequestStatusLoadingPromise=null}})(),this._voiceRequestStatusLoadingPromise)}},invalidateVoiceRequestStatusCache(){this.voiceRequestStatusCache=null,this.voiceRequestStatusLastUpdate=null},resetState(){this.hasRequest=!1,this.requestOrder=null,this.requestedAt=null,this.currentSpeech=null,this.allSpeeches=[],this.remainingTime=0,this.clearSpeechInterval(),this.invalidateVoiceRequestStatusCache()}}});function Va(e){const o=Ns(),a=v(()=>o.hasRequest),n=v(()=>o.requestOrder),s=v(()=>o.requestedAt),i=v(()=>o.currentSpeech),u=v(()=>o.allFinishedSpeeches),l=v(()=>o.remainingTime),c=v(()=>o.loadingData),V=v(()=>o.canSend);async function $(U=!1){return await o.loadStatus(e.value,U)}function R(){o.resetState()}function T(){o.updateRemainingTime()}return ge(()=>o.currentSpeech,U=>{U?(o.updateRemainingTime(),U.status==="speaking"?o.ensureSpeechInterval():o.clearSpeechInterval()):(o.remainingTime=0,o.clearSpeechInterval())},{deep:!0,immediate:!0}),ge(()=>{var U;return(U=o.currentSpeech)==null?void 0:U.additional_minutes},()=>{o.currentSpeech&&o.updateRemainingTime()}),{hasRequest:a,requestOrder:n,requestedAt:s,currentSpeech:i,allFinishedSpeeches:u,remainingTime:l,loadingData:c,canSend:V,loadStatus:$,resetState:R,updateRemainingTime:T}}const Ye=G(null),yt=G(!1);function kt(){const e=v(()=>{var i;return((i=Ye.value)==null?void 0:i.small_expedient_name)||"Pequeno Expediente"}),o=v(()=>{var i;return((i=Ye.value)==null?void 0:i.large_expedient_name)||"Grande Expediente"});async function a(){if(!yt.value){if(Ye.value)return Ye.value;yt.value=!0;try{const{data:i}=await me.get("/api/config/sessao/settings");(i==null?void 0:i.success)&&(i==null?void 0:i.data)&&(Ye.value=i.data)}catch(i){console.error("[useSessionSettings] Erro ao carregar configura\xE7\xF5es:",i)}finally{yt.value=!1}}}function n(i){return i==="small"?e.value:i==="large"?o.value:""}function s(){Ye.value=null}return{smallExpedientName:e,largeExpedientName:o,loadSettings:a,getExpedientName:n,clearCache:s}}const Qs={class:"session-overview"},js={class:"overview-card modern-card"},Js={class:"card-content"},Hs={class:"summary-title"},Ws={class:"summary-grid"},Gs={class:"tw-relative"},Ks={key:0,class:"session-info-compact"},Ys={class:"session-info-line"},Xs={key:0,class:"session-info-line"},Zs={key:1,class:"session-info-line"},en={class:"summary-label"},tn={class:"summary-label"},an={class:"summary-label"},sn={key:0,class:"info-banner"},nn={__name:"SessionOverview",props:{sessionData:{type:Object,default:null},selectedAgendaId:{type:[Number,String],default:null},loading:{type:Boolean,default:!1}},setup(e){const o=e,a=Ne(),n=kt(),s=Ra(v(()=>o.selectedAgendaId)),i=gt(v(()=>o.selectedAgendaId),"small"),u=gt(v(()=>o.selectedAgendaId),"large"),l=za(v(()=>o.selectedAgendaId)),c=Va(v(()=>o.selectedAgendaId));function V(){if(o.loading)return"Carregando...";if(o.sessionData){const r=o.sessionData.name||"Em Andamento";return r.length>20?r.substring(0,20)+"...":r}return"Aguardando"}function $(){return o.loading?"status-info":o.sessionData?"status-success":"status-info"}function R(){var r,h,q,p,z,Q,C,L;return s?(r=s.quorumFinalized)!=null&&r.value?(h=s.isPresent)!=null&&h.value?"Presente":(q=s.isAbsentJustified)!=null&&q.value?"Ausente Justificado":"Ausente":(p=s.quorumStarted)!=null&&p.value?(z=s.isPresent)!=null&&z.value?"Presente":"Aguardando":(Q=s.quorumFinalizedAt)!=null&&Q.value?(C=s.isPresent)!=null&&C.value?"Presente":(L=s.isAbsentJustified)!=null&&L.value?"Ausente Justificado":"Ausente":"Aguardando":"Aguardando"}function T(){var r,h,q,p;return s?(r=s.quorumFinalized)!=null&&r.value?(h=s.isPresent)!=null&&h.value?"status-success":"status-error":(q=s.quorumStarted)!=null&&q.value?(p=s.isPresent)!=null&&p.value?"status-success":"status-warning":"status-info":"status-info"}function U(){var r,h,q,p,z,Q;return i?(r=i.finalized)!=null&&r.value?"Finalizado":(h=i.started)!=null&&h.value?(q=i.isRegistered)!=null&&q.value?`Inscrito (${(p=i.registrationOrder)==null?void 0:p.value}\xBA)`:"Aberto":(z=i.finalizedAt)!=null&&z.value?"Finalizado":(Q=i.registeredAt)!=null&&Q.value?"J\xE1 Inscrito":"Aguardando":"Aguardando"}function f(){var r,h;return!i||(r=i.finalized)!=null&&r.value?"status-info":(h=i.isRegistered)!=null&&h.value?"status-success":"status-warning"}function g(){var r,h,q,p,z,Q;return u?(r=u.finalized)!=null&&r.value?"Finalizado":(h=u.started)!=null&&h.value?(q=u.isRegistered)!=null&&q.value?`Inscrito (${(p=u.registrationOrder)==null?void 0:p.value}\xBA)`:"Aberto":(z=u.finalizedAt)!=null&&z.value?"Finalizado":(Q=u.registeredAt)!=null&&Q.value?"J\xE1 Inscrito":"Aguardando":"Aguardando"}function b(){var r,h;return!u||(r=u.finalized)!=null&&r.value?"status-info":(h=u.isRegistered)!=null&&h.value?"status-success":"status-warning"}function F(){var r,h,q;return l?(r=l.activeVoting)!=null&&r.value?"Em Andamento":(h=l.activeReading)!=null&&h.value?"Lendo":((q=l.finishedReadings)==null?void 0:q.value)&&l.finishedReadings.value.length>0?"J\xE1 Realizado":"Aguardando":"Aguardando"}function A(){var r,h,q;return l?(r=l.activeVoting)!=null&&r.value||(h=l.activeReading)!=null&&h.value?"status-active":((q=l.finishedReadings)==null?void 0:q.value)&&l.finishedReadings.value.length>0?"status-success":"status-info":"status-info"}function m(){var r,h,q,p;return c?(r=c.currentSpeech)!=null&&r.value?"Falando":(h=c.hasRequest)!=null&&h.value?(q=c.requestOrder)!=null&&q.value?`Na Fila (${c.requestOrder.value}\xBA)`:"Na Fila":((p=c.allFinishedSpeeches)==null?void 0:p.value)&&c.allFinishedSpeeches.value.length>0?"J\xE1 Falou":"Aguardando":"Aguardando"}function x(){var r,h,q;return c?(r=c.currentSpeech)!=null&&r.value?"status-active":(h=c.hasRequest)!=null&&h.value?"status-warning":((q=c.allFinishedSpeeches)==null?void 0:q.value)&&c.allFinishedSpeeches.value.length>0?"status-success":"status-info":"status-info"}return(r,h)=>{var q,p,z,Q,C,L,te,se,le,re,J,ae,Z,ee,I,M,O,W,P,D,Y,ie,ne,fe,be,Re,ze,de,Ve,Te,Ce,_e,at,st,Je,j,K,oe,he,pe,ce,ue,Se,Pe,Ge,ut,dt,Ke,De,Rt,zt,Vt,Tt,Ct,Lt,Pt,Ft,Et,Mt,Dt,Bt,Ut,Ot,Nt,Qt,jt,Jt,Ht,Wt,Gt,Kt,Yt,Xt,Zt,ea,ta,aa,sa,na,ia,oa,la,ra,ua,da,ca;return d(),k("div",Qs,[t("div",js,[t("div",Js,[t("div",Hs,[w(N,{name:"dashboard",size:"20px",class:"tw-mr-2"}),h[0]||(h[0]=we(" Resumo R\xE1pido ",-1))]),t("div",Ws,[t("div",{class:_(["summary-item",{active:o.sessionData}])},[t("div",Gs,[w(N,{name:"event",color:o.sessionData?"primary":"grey",size:"24px"},null,8,["color"]),y(a).isConnected?(d(),H(Xe,{key:0,color:"positive",size:"xs",class:"session-badge"})):B("",!0)]),h[1]||(h[1]=t("div",{class:"summary-label"},"Sess\xE3o",-1)),t("div",{class:_(["summary-status",$()])},S(V()),3),o.sessionData?(d(),k("div",Ks,[t("div",Ys,S(o.sessionData.session_date_formatted||o.sessionData.session_date||"N/A"),1),o.sessionData.session_time?(d(),k("div",Xs,S(o.sessionData.session_time),1)):B("",!0),o.sessionData.session_type?(d(),k("div",Zs,S(o.sessionData.session_type),1)):B("",!0)])):B("",!0)],2),t("div",{class:_(["summary-item",{active:((p=(q=y(s))==null?void 0:q.quorumStarted)==null?void 0:p.value)||((Q=(z=y(s))==null?void 0:z.quorumFinalized)==null?void 0:Q.value)||((L=(C=y(s))==null?void 0:C.quorumFinalizedAt)==null?void 0:L.value)}])},[w(N,{name:(se=(te=y(s))==null?void 0:te.isPresent)!=null&&se.value?"check_circle":"groups",color:(re=(le=y(s))==null?void 0:le.isPresent)!=null&&re.value?"positive":((ae=(J=y(s))==null?void 0:J.quorumFinalized)==null?void 0:ae.value)||((ee=(Z=y(s))==null?void 0:Z.quorumFinalizedAt)==null?void 0:ee.value)?"primary":"grey",size:"24px"},null,8,["name","color"]),h[2]||(h[2]=t("div",{class:"summary-label"},"Qu\xF3rum",-1)),t("div",{class:_(["summary-status",T()])},S(R()),3)],2),t("div",{class:_(["summary-item",{active:((M=(I=y(i))==null?void 0:I.started)==null?void 0:M.value)||((W=(O=y(i))==null?void 0:O.finalized)==null?void 0:W.value)||((D=(P=y(i))==null?void 0:P.finalizedAt)==null?void 0:D.value)||((ie=(Y=y(i))==null?void 0:Y.registeredAt)==null?void 0:ie.value)}])},[w(N,{name:"timer",color:(fe=(ne=y(i))==null?void 0:ne.isRegistered)!=null&&fe.value||((Re=(be=y(i))==null?void 0:be.finalized)==null?void 0:Re.value)||((de=(ze=y(i))==null?void 0:ze.finalizedAt)==null?void 0:de.value)||((Te=(Ve=y(i))==null?void 0:Ve.registeredAt)==null?void 0:Te.value)?"secondary":"grey",size:"24px"},null,8,["color"]),t("div",en,S(((Ce=y(n).smallExpedientName)==null?void 0:Ce.value)||"Pequeno Expediente"),1),t("div",{class:_(["summary-status",f()])},S(U()),3)],2),t("div",{class:_(["summary-item",{active:((at=(_e=y(u))==null?void 0:_e.started)==null?void 0:at.value)||((Je=(st=y(u))==null?void 0:st.finalized)==null?void 0:Je.value)||((K=(j=y(u))==null?void 0:j.finalizedAt)==null?void 0:K.value)||((he=(oe=y(u))==null?void 0:oe.registeredAt)==null?void 0:he.value)}])},[w(N,{name:"assignment_turned_in",color:(ce=(pe=y(u))==null?void 0:pe.isRegistered)!=null&&ce.value||((Se=(ue=y(u))==null?void 0:ue.finalized)==null?void 0:Se.value)||((Ge=(Pe=y(u))==null?void 0:Pe.finalizedAt)==null?void 0:Ge.value)||((dt=(ut=y(u))==null?void 0:ut.registeredAt)==null?void 0:dt.value)?"orange":"grey",size:"24px"},null,8,["color"]),t("div",tn,S(((Ke=y(n).largeExpedientName)==null?void 0:Ke.value)||"Grande Expediente"),1),t("div",{class:_(["summary-status",b()])},S(g()),3)],2),t("div",{class:_(["summary-item",{active:((Rt=(De=y(l))==null?void 0:De.activeVoting)==null?void 0:Rt.value)||((Vt=(zt=y(l))==null?void 0:zt.activeReading)==null?void 0:Vt.value)||((Ct=(Tt=y(l))==null?void 0:Tt.finishedReadings)==null?void 0:Ct.value)&&y(l).finishedReadings.value.length>0}])},[w(N,{name:(Pt=(Lt=y(l))==null?void 0:Lt.activeVoting)!=null&&Pt.value?"how_to_vote":(Et=(Ft=y(l))==null?void 0:Ft.activeReading)!=null&&Et.value?"menu_book":"how_to_vote",color:((Dt=(Mt=y(l))==null?void 0:Mt.activeVoting)==null?void 0:Dt.value)||((Ut=(Bt=y(l))==null?void 0:Bt.activeReading)==null?void 0:Ut.value)||((Nt=(Ot=y(l))==null?void 0:Ot.finishedReadings)==null?void 0:Nt.value)&&y(l).finishedReadings.value.length>0?"deep-purple":"grey",size:"24px"},null,8,["name","color"]),t("div",an,S((jt=(Qt=y(l))==null?void 0:Qt.activeVoting)!=null&&jt.value?"Vota\xE7\xE3o":(Ht=(Jt=y(l))==null?void 0:Jt.activeReading)!=null&&Ht.value?"Leitura":"Vota\xE7\xE3o"),1),t("div",{class:_(["summary-status",A()])},S(F()),3)],2),t("div",{class:_(["summary-item",{active:((Gt=(Wt=y(c))==null?void 0:Wt.hasRequest)==null?void 0:Gt.value)||((Yt=(Kt=y(c))==null?void 0:Kt.currentSpeech)==null?void 0:Yt.value)||((Zt=(Xt=y(c))==null?void 0:Xt.allFinishedSpeeches)==null?void 0:Zt.value)&&y(c).allFinishedSpeeches.value.length>0}])},[w(N,{name:(ta=(ea=y(c))==null?void 0:ea.currentSpeech)!=null&&ta.value?"mic":(sa=(aa=y(c))==null?void 0:aa.hasRequest)!=null&&sa.value?"mic_none":((ia=(na=y(c))==null?void 0:na.allFinishedSpeeches)==null?void 0:ia.value)&&y(c).allFinishedSpeeches.value.length>0?"mic":"mic_off",color:(la=(oa=y(c))==null?void 0:oa.currentSpeech)!=null&&la.value?"red":(ua=(ra=y(c))==null?void 0:ra.hasRequest)!=null&&ua.value||((ca=(da=y(c))==null?void 0:da.allFinishedSpeeches)==null?void 0:ca.value)&&y(c).allFinishedSpeeches.value.length>0?"orange":"grey",size:"24px"},null,8,["name","color"]),h[3]||(h[3]=t("div",{class:"summary-label"},"Pedido de Voz",-1)),t("div",{class:_(["summary-status",x()])},S(m()),3)],2)]),o.selectedAgendaId?B("",!0):(d(),k("div",sn,[w(N,{name:"info",color:"primary",size:"18px",class:"tw-mr-2"}),h[4]||(h[4]=t("span",{class:"banner-text"},"Aguardando sess\xE3o ser iniciada...",-1))]))])])])}}};var on=ke(nn,[["__scopeId","data-v-372fd7ca"]]),wt=Oe({name:"QInnerLoading",props:{...qt,...Oa,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:o}){const a=je(),n=$t(e,a.proxy.$q),{transitionProps:s,transitionStyle:i}=Na(e),u=v(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),l=v(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function c(){const $=[X(ba,{size:e.size,color:e.color})];return e.label!==void 0&&$.push(X("div",{class:l.value,style:e.labelStyle},[e.label])),$}function V(){return e.showing===!0?X("div",{class:u.value,style:i.value},o.default!==void 0?o.default():c()):null}return()=>X(wa,s.value,V)}});function Ee(e){if(!e)return"";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function xt(e){const o=Math.floor(e/60),a=e%60;return`${o}:${a.toString().padStart(2,"0")}`}const ln={class:"card-header quorum-header"},rn={class:"tw-flex tw-items-center tw-gap-3"},un={class:"card-icon-wrapper"},dn={class:"tw-flex tw-flex-col tw-gap-2"},cn={key:0,class:"status-message text-grey-8"},vn={key:1,class:"status-hint text-grey-6"},gn={class:"status-avatar status-present"},fn={class:"status-avatar status-waiting"},mn={class:"tw-flex tw-flex-col tw-gap-2"},hn={key:0,class:"status-message text-grey-8"},pn={key:1,class:"status-hint text-grey-6"},wn={class:"status-avatar status-absent"},bn={class:"status-avatar status-waiting"},yn={key:5,class:"tw-w-full"};const Sn={__name:"QuorumCard",props:{isPresent:{type:Boolean,default:!1},isAbsentJustified:{type:Boolean,default:!1},absenceReason:{type:String,default:null},quorumFinalized:{type:Boolean,default:!1},quorumStarted:{type:Boolean,default:!1},quorumFinalizedAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingQuorum:{type:Boolean,default:!1},loadingAttendance:{type:Boolean,default:!1},loadingJustify:{type:Boolean,default:!1}},emits:["toggle-attendance","justify-absence"],setup(e,{emit:o}){const a=e,n=o,s=G(!1),i=G(""),u=v(()=>!a.canSend||!a.selectedAgendaId||!a.quorumStarted||a.quorumFinalized||a.isAbsentJustified||a.loadingAttendance||a.loadingQuorum),l=v(()=>a.canSend?a.selectedAgendaId?a.quorumStarted?a.quorumFinalized?"Qu\xF3rum foi finalizado":a.isAbsentJustified?"N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 justificativa de aus\xEAncia":a.loadingAttendance?"Processando presen\xE7a...":a.loadingQuorum?"Carregando qu\xF3rum...":"":"Qu\xF3rum ainda n\xE3o foi iniciado":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function c(){if(console.log("[QuorumCard] handleToggleAttendance chamado",{canSend:a.canSend,selectedAgendaId:a.selectedAgendaId,quorumStarted:a.quorumStarted,quorumFinalized:a.quorumFinalized,loadingAttendance:a.loadingAttendance,loadingQuorum:a.loadingQuorum,isButtonDisabled:u.value}),u.value){console.warn("[QuorumCard] Bot\xE3o est\xE1 desabilitado:",l.value);return}console.log("[QuorumCard] Emitindo toggle-attendance"),n("toggle-attendance")}function V(){s.value=!1,i.value=""}function $(){!i.value||!i.value.trim()||(n("justify-absence",i.value.trim()),s.value=!1,i.value="")}return(R,T)=>(d(),H(Be,{flat:"",class:"modern-card quorum-card tw-h-full tw-relative tw-overflow-hidden"},{default:E(()=>[t("div",ln,[t("div",rn,[t("div",un,[w(N,{name:"groups",size:"24px",class:"tw-text-white"})]),T[3]||(T[3]=t("div",{class:"card-title"},"Qu\xF3rum",-1))])]),w($e,{class:"tw-relative tw-p-4",style:{"min-height":"120px"}},{default:E(()=>[w(wt,{showing:e.loadingQuorum,color:"primary",size:"50px"},null,8,["showing"]),e.loadingQuorum?B("",!0):(d(),k(Ie,{key:0},[e.quorumFinalized?(d(),H(ye,{key:0,class:"modern-banner banner-finalized q-mb-3",dense:""},{avatar:E(()=>[t("div",{class:_(["status-avatar",e.isPresent?"status-present":e.isAbsentJustified?"status-waiting":"status-absent"])},[w(N,{name:e.isPresent?"check_circle":e.isAbsentJustified?"event_busy":"cancel",size:"24px"},null,8,["name"])],2)]),default:E(()=>[t("div",dn,[T[5]||(T[5]=t("div",{class:"status-title"},"Qu\xF3rum Finalizado",-1)),t("div",{class:_(["status-message",e.isPresent?"text-positive":e.isAbsentJustified?"text-info":"text-negative"])},S(e.isPresent?"Voc\xEA estava presente no qu\xF3rum":e.isAbsentJustified?"Falta Justificada":"Voc\xEA n\xE3o estava presente no qu\xF3rum"),3),e.isAbsentJustified&&e.absenceReason?(d(),k("div",cn,[T[4]||(T[4]=t("strong",null,"Justificativa:",-1)),we(" "+S(e.absenceReason),1)])):B("",!0),e.quorumFinalizedAt?(d(),k("div",vn," Finalizado em: "+S(y(Ee)(e.quorumFinalizedAt)),1)):B("",!0),T[6]||(T[6]=t("div",{class:"status-hint text-grey-6"}," Aguarde um novo qu\xF3rum ser iniciado. ",-1))])]),_:1})):e.quorumStarted&&e.isPresent?(d(),H(ye,{key:1,class:"modern-banner banner-success q-mb-3",dense:""},{avatar:E(()=>[t("div",gn,[w(N,{name:"check_circle",size:"24px"})])]),default:E(()=>[T[7]||(T[7]=t("div",{class:"status-title"},"Voc\xEA est\xE1 presente no qu\xF3rum",-1))]),_:1})):e.quorumStarted&&!e.isPresent&&e.isAbsentJustified?(d(),H(ye,{key:2,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:E(()=>[t("div",fn,[w(N,{name:"event_busy",size:"24px"})])]),default:E(()=>[t("div",mn,[T[9]||(T[9]=t("div",{class:"status-title"},"Falta Justificada",-1)),e.absenceReason?(d(),k("div",hn,[T[8]||(T[8]=t("strong",null,"Justificativa:",-1)),we(" "+S(e.absenceReason),1)])):(d(),k("div",pn," Sua aus\xEAncia foi justificada. "))])]),_:1})):e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(d(),H(ye,{key:3,class:"modern-banner banner-warning q-mb-3",dense:""},{avatar:E(()=>[t("div",wn,[w(N,{name:"person_off",size:"24px"})])]),default:E(()=>[T[10]||(T[10]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"status-title"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum"),t("div",{class:"status-hint text-grey-6"}," Marque sua presen\xE7a para participar. ")],-1))]),_:1})):e.quorumStarted?B("",!0):(d(),H(ye,{key:4,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:E(()=>[t("div",bn,[w(N,{name:"schedule",size:"24px"})])]),default:E(()=>[T[11]||(T[11]=t("div",{class:"status-title"},"Aguardando o in\xEDcio do qu\xF3rum.",-1))]),_:1})),!e.quorumFinalized&&e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(d(),k("div",yn,[w(qe,{class:"tw-w-full modern-action-btn btn-add",icon:"how_to_reg",label:"Marcar Presen\xE7a",disable:u.value,loading:e.loadingAttendance||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:c},{default:E(()=>[u.value?(d(),H(St,{key:0,class:"bg-red"},{default:E(()=>[we(S(l.value),1)]),_:1})):B("",!0)]),_:1},8,["disable","loading"]),w(qe,{class:"tw-w-full modern-action-btn btn-justify",icon:"event_busy",label:"Justificar",disable:u.value,loading:e.loadingJustify||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:T[0]||(T[0]=U=>s.value=!0)},{default:E(()=>[u.value?(d(),H(St,{key:0,class:"bg-red"},{default:E(()=>[we(S(l.value),1)]),_:1})):B("",!0)]),_:1},8,["disable","loading"])])):B("",!0),B("",!0)],64))]),_:1}),w(tt,{modelValue:s.value,"onUpdate:modelValue":T[2]||(T[2]=U=>s.value=U),persistent:""},{default:E(()=>[w(Be,{style:{"min-width":"350px","max-width":"500px"}},{default:E(()=>[w($e,null,{default:E(()=>[...T[12]||(T[12]=[t("div",{class:"text-h6"},"Justificar Aus\xEAncia",-1)])]),_:1}),w($e,{class:"q-pt-none"},{default:E(()=>[w(Qa,{modelValue:i.value,"onUpdate:modelValue":T[1]||(T[1]=U=>i.value=U),type:"textarea",label:"Motivo da aus\xEAncia",placeholder:"Digite o motivo da sua aus\xEAncia...",autofocus:"",rules:[U=>U&&U.trim()||"Por favor, informe o motivo da aus\xEAncia"],rows:"4",outlined:"",counter:"",maxlength:"500"},null,8,["modelValue","rules"])]),_:1}),w(ja,{align:"right",class:"text-primary"},{default:E(()=>[w(qe,{flat:"",label:"Cancelar",onClick:V}),w(qe,{flat:"",label:"Justificar",color:"primary",loading:e.loadingJustify,disable:!i.value||!i.value.trim(),onClick:$},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var xn=ke(Sn,[["__scopeId","data-v-601c49e9"]]);const _n={class:"quorum-tab"},qn={class:"overview-card modern-card"},$n={class:"card-content"},In={class:"summary-title"},An={__name:"QuorumTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const o=e,a=xe("quorum"),n=xe("sessionAgenda"),s=v(()=>{var i;return o.sessionId||((i=n==null?void 0:n.selectedAgendaId)==null?void 0:i.value)||null});return(i,u)=>{var l,c,V,$,R,T,U,f,g,b,F,A,m,x,r,h,q,p,z,Q,C,L;return d(),k("div",_n,[t("div",qn,[t("div",$n,[t("div",In,[w(N,{name:"groups",size:"20px",class:"tw-mr-2"}),u[0]||(u[0]=we(" Qu\xF3rum ",-1))]),w(xn,{"is-present":((c=(l=y(a))==null?void 0:l.isPresent)==null?void 0:c.value)||!1,"is-absent-justified":(($=(V=y(a))==null?void 0:V.isAbsentJustified)==null?void 0:$.value)||!1,"absence-reason":((T=(R=y(a))==null?void 0:R.absenceReason)==null?void 0:T.value)||null,"quorum-finalized":((f=(U=y(a))==null?void 0:U.quorumFinalized)==null?void 0:f.value)||!1,"quorum-started":((b=(g=y(a))==null?void 0:g.quorumStarted)==null?void 0:b.value)||!1,"quorum-finalized-at":((A=(F=y(a))==null?void 0:F.quorumFinalizedAt)==null?void 0:A.value)||null,"selected-agenda-id":s.value,"can-send":((x=(m=y(a))==null?void 0:m.canSend)==null?void 0:x.value)||!1,"loading-quorum":((h=(r=y(a))==null?void 0:r.loadingQuorum)==null?void 0:h.value)||!1,"loading-attendance":((p=(q=y(a))==null?void 0:q.loadingAttendance)==null?void 0:p.value)||!1,"loading-justify":((Q=(z=y(a))==null?void 0:z.loadingJustify)==null?void 0:Q.value)||!1,onToggleAttendance:(C=y(a))==null?void 0:C.toggleAttendance,onJustifyAbsence:(L=y(a))==null?void 0:L.justifyAbsence},null,8,["is-present","is-absent-justified","absence-reason","quorum-finalized","quorum-started","quorum-finalized-at","selected-agenda-id","can-send","loading-quorum","loading-attendance","loading-justify","onToggleAttendance","onJustifyAbsence"])])])])}}};var kn=ke(An,[["__scopeId","data-v-0c46643a"]]);const Rn={class:"tw-flex tw-items-center tw-gap-2"},zn={class:"tw-flex tw-flex-col tw-gap-1"},Vn={class:_("text-caption tw-font-bold tw-text-red-700")},Tn={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},Cn={class:"tw-space-y-2"},Ln={key:0,class:"tw-text-gray-500 tw-ml-2"},Pn={class:"tw-flex tw-flex-col tw-gap-1"},Fn={class:_("text-body2 tw-font-bold tw-text-green-700")},En={key:0,class:"text-caption"},Mn={key:1,class:"text-caption"},Dn={class:"tw-flex tw-flex-col tw-gap-1"},Bn={class:"text-caption"},Un={__name:"ExpedientCard",props:{title:{type:String,required:!0},expedientLabel:{type:String,required:!0},icon:{type:String,required:!0},headerClass:{type:String,required:!0},headerColor:{type:String,required:!0},buttonColor:{type:String,required:!0},buttonIcon:{type:String,required:!0},isRegistered:{type:Boolean,default:!1},isPresent:{type:Boolean,default:!1},started:{type:Boolean,default:!1},finalized:{type:Boolean,default:!1},finalizedAt:{type:String,default:null},registrationOrder:{type:Number,default:null},registeredAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},loadingAction:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},finishedSpeech:{type:Object,default:null},finishedSpeechTotalMinutes:{type:Number,default:0},finishedSpeechUsedMinutes:{type:Number,default:0},finishedSpeechUsedSeconds:{type:Number,default:0},finishedSpeechFinishedAt:{type:String,default:null},sessionInteractions:{type:Array,default:()=>[]}},emits:["toggle-registration"],setup(e,{emit:o}){const a=e,n=o,s=v(()=>!a.canSend||!a.selectedAgendaId||!a.started||a.finalized||!a.isPresent||a.loadingAction),i=v(()=>a.canSend?a.selectedAgendaId?a.started?a.finalized?"Inscri\xE7\xF5es foram finalizadas":a.isPresent?a.loadingAction?"Processando inscri\xE7\xE3o...":"":"Voc\xEA precisa estar presente no qu\xF3rum para se inscrever":"Inscri\xE7\xF5es ainda n\xE3o foram iniciadas":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function u(){if(console.log(`[ExpedientCard ${a.title}] handleToggleRegistration chamado`,{canSend:a.canSend,selectedAgendaId:a.selectedAgendaId,started:a.started,finalized:a.finalized,loadingAction:a.loadingAction,isButtonDisabled:s.value}),s.value){console.warn(`[ExpedientCard ${a.title}] Bot\xE3o est\xE1 desabilitado:`,i.value);return}console.log(`[ExpedientCard ${a.title}] Emitindo toggle-registration`),n("toggle-registration")}return(l,c)=>(d(),H(Be,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:E(()=>[w($e,{class:_(`tw-flex tw-items-center tw-justify-between ${e.headerClass} tw-text-white ${l.$q.screen.lt.md?"tw-py-1":"tw-py-2"}`)},{default:E(()=>[t("div",Rn,[w(N,{name:e.icon,size:l.$q.screen.lt.md?"18px":"20px"},null,8,["name","size"]),t("div",{class:_(`${l.$q.screen.lt.md?"text-body2":"text-subtitle1"} tw-font-semibold`)},S(e.title),3)])]),_:1},8,["class"]),w($e,{class:_(`tw-relative tw-w-full ${l.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`),style:mt(l.$q.screen.lt.md?"min-height: 60px":"min-height: 80px")},{default:E(()=>[w(wt,{showing:e.loadingData,color:e.headerColor,size:"50px"},null,8,["showing","color"]),e.loadingData?B("",!0):(d(),k(Ie,{key:0},[e.finalized&&e.isRegistered&&!e.finishedSpeech?(d(),H(ye,{key:0,class:_(`text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"check_circle",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-bold tw-text-green-700`)}," Inscri\xE7\xF5es Finalizadas - Voc\xEA est\xE1 inscrito ",2),e.registrationOrder?(d(),k("div",{key:0,class:_(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Sua posi\xE7\xE3o na fila: "+S(e.registrationOrder)+"\xBA ",3)):B("",!0)],2)]),_:1},8,["class"])):e.finalized&&!e.isRegistered&&!e.isPresent&&!e.finishedSpeech?(d(),H(ye,{key:1,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"person_off",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[c[0]||(c[0]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas "),t("div",{class:"text-caption"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum. ")],-1))]),_:1})):e.finalized&&!e.isRegistered&&e.isPresent&&!e.finishedSpeech?(d(),H(ye,{key:2,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"cancel",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",zn,[c[1]||(c[1]=t("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas ",-1)),t("div",Vn," Voc\xEA n\xE3o est\xE1 inscrito no "+S(e.expedientLabel)+". ",1)])]),_:1})):B("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(d(),H(ye,{key:3,class:_(`bg-green-3 text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"mic",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},"Voc\xEA est\xE1 falando",2),t("div",{class:_(`${l.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-green-700`)}," Tempo restante: "+S(y(xt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):B("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(d(),H(ye,{key:4,class:_(`bg-yellow-3 text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"pause",color:"orange",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala est\xE1 pausada ",2),t("div",{class:_(`${l.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-yellow-700`)}," Tempo restante: "+S(y(xt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):B("",!0),e.finishedSpeech?(d(),H(ye,{key:5,class:_(`text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"check_circle",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala foi finalizada ",2),t("div",{class:_(`tw-grid tw-grid-cols-2 ${l.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-2"}`)},[t("div",null,[t("div",{class:_(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total Alocado ",2),t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},S(e.finishedSpeechTotalMinutes)+" min ",3)]),t("div",null,[t("div",{class:_(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Utilizado ",2),t("div",{class:_(`${l.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},S(e.finishedSpeechUsedMinutes)+" min "+S(e.finishedSpeechUsedSeconds)+" s ",3)])],2),e.finishedSpeechFinishedAt?(d(),k("div",{key:0,class:_(`${l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-600 ${l.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Finalizada em: "+S(y(Ee)(e.finishedSpeechFinishedAt)),3)):B("",!0)],2)]),_:1},8,["class"])):B("",!0),e.sessionInteractions.length>0?(d(),H(Be,{key:6,flat:"",bordered:"",class:"q-mb-2 tw-bg-blue-50"},{default:E(()=>[w($e,{class:"tw-py-3"},{default:E(()=>[t("div",Tn,[w(N,{name:"history",color:"primary",size:"20px"}),c[2]||(c[2]=t("div",{class:"text-body2 tw-font-semibold"}," Suas Intera\xE7\xF5es na Sess\xE3o ",-1))]),t("div",Cn,[(d(!0),k(Ie,null,Le(e.sessionInteractions,(V,$)=>(d(),k("div",{key:$,class:"tw-text-sm tw-text-gray-700"},[w(N,{name:V.icon,color:V.color,size:"16px",class:"tw-mr-2"},null,8,["name","color"]),t("span",null,S(V.label),1),V.time?(d(),k("span",Ln," ("+S(V.time)+") ",1)):B("",!0)]))),128))])]),_:1})]),_:1})):e.started&&e.isRegistered?(d(),H(ye,{key:7,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"check_circle",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",Pn,[t("div",Fn," Voc\xEA est\xE1 inscrito no "+S(e.title),1),e.registrationOrder?(d(),k("div",En," Sua posi\xE7\xE3o na fila: "+S(e.registrationOrder)+"\xBA ",1)):B("",!0),e.registeredAt?(d(),k("div",Mn," Inscrito em: "+S(y(Ee)(e.registeredAt)),1)):B("",!0)])]),_:1})):e.started&&!e.isPresent?(d(),H(ye,{key:8,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"person_off",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",Dn,[c[3]||(c[3]=t("div",{class:"text-body2 tw-font-semibold"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum ",-1)),t("div",Bn," Marque sua presen\xE7a no qu\xF3rum para poder se inscrever no "+S(e.expedientLabel)+". ",1)])]),_:1})):e.started&&!e.isRegistered&&e.isPresent?(d(),H(ye,{key:9,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"assignment",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[c[4]||(c[4]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es abertas"),t("div",{class:"text-caption"},"Clique no bot\xE3o para se inscrever.")],-1))]),_:1})):!e.started&&!e.finalized?(d(),H(ye,{key:10,class:"text-black q-mb-2",dense:""},{avatar:E(()=>[w(N,{name:"schedule",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[c[5]||(c[5]=t("div",{class:"text-body2"},"Aguardando o in\xEDcio das inscri\xE7\xF5es.",-1))]),_:1})):B("",!0),!e.finalized&&e.isPresent?(d(),H(qe,{key:11,class:"full-width q-mt-sm",color:e.isRegistered?"negative":e.buttonColor,icon:e.isRegistered?"cancel":e.buttonIcon,label:e.isRegistered?"Remover Inscri\xE7\xE3o":"Inscrever",disable:s.value,loading:e.loadingAction,size:"md",dense:"",onClick:u},{default:E(()=>[s.value?(d(),H(St,{key:0,class:"bg-red"},{default:E(()=>[we(S(i.value),1)]),_:1})):B("",!0)]),_:1},8,["color","icon","label","disable","loading"])):B("",!0)],64))]),_:1},8,["class","style"])]),_:1}))}};var Ta=ke(Un,[["__scopeId","data-v-bdd612bc"]]);const On={class:"expedient-tab"},Nn={class:"overview-card modern-card"},Qn={class:"card-content"},jn={class:"summary-title"},Jn={__name:"SmallExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const o=e,a=xe("sessionSettings"),n=xe("quorum"),s=xe("smallExpedient"),i=xe("smallSpeech"),u=xe("sessionInteractions"),l=xe("sessionAgenda"),c=v(()=>{var V;return o.sessionId||((V=l==null?void 0:l.selectedAgendaId)==null?void 0:V.value)||null});return(V,$)=>{var R,T,U,f,g,b,F,A,m,x,r,h,q,p,z,Q,C,L,te,se,le,re,J,ae,Z,ee,I,M,O,W,P,D,Y,ie,ne,fe,be,Re,ze,de,Ve,Te,Ce;return d(),k("div",On,[t("div",Nn,[t("div",Qn,[t("div",jn,[w(N,{name:"timer",size:"20px",class:"tw-mr-2"}),we(" "+S(((T=(R=y(a))==null?void 0:R.smallExpedientName)==null?void 0:T.value)||"Pequeno Expediente"),1)]),w(Ta,{title:((f=(U=y(a))==null?void 0:U.smallExpedientName)==null?void 0:f.value)||"Pequeno Expediente","expedient-label":(((b=(g=y(a))==null?void 0:g.smallExpedientName)==null?void 0:b.value)||"Pequeno Expediente").toLowerCase(),icon:"timer","header-class":"bg-secondary","header-color":"secondary","button-color":"secondary","button-icon":"assignment","is-registered":((A=(F=y(s))==null?void 0:F.isRegistered)==null?void 0:A.value)||!1,"is-present":((x=(m=y(n))==null?void 0:m.isPresent)==null?void 0:x.value)||!1,started:((h=(r=y(s))==null?void 0:r.started)==null?void 0:h.value)||!1,finalized:((p=(q=y(s))==null?void 0:q.finalized)==null?void 0:p.value)||!1,"finalized-at":((Q=(z=y(s))==null?void 0:z.finalizedAt)==null?void 0:Q.value)||null,"registration-order":((L=(C=y(s))==null?void 0:C.registrationOrder)==null?void 0:L.value)||null,"registered-at":((se=(te=y(s))==null?void 0:te.registeredAt)==null?void 0:se.value)||null,"selected-agenda-id":c.value,"can-send":((re=(le=y(s))==null?void 0:le.canSend)==null?void 0:re.value)||!1,"loading-data":((ae=(J=y(s))==null?void 0:J.loadingData)==null?void 0:ae.value)||!1,"loading-action":((ee=(Z=y(s))==null?void 0:Z.loadingAction)==null?void 0:ee.value)||!1,"current-speech":((M=(I=y(i))==null?void 0:I.currentSpeech)==null?void 0:M.value)||null,"remaining-time":((W=(O=y(i))==null?void 0:O.remainingTime)==null?void 0:W.value)||null,"finished-speech":((D=(P=y(i))==null?void 0:P.finishedSpeech)==null?void 0:D.value)||null,"finished-speech-total-minutes":((ie=(Y=y(i))==null?void 0:Y.finishedSpeechTotalMinutes)==null?void 0:ie.value)||0,"finished-speech-used-minutes":((fe=(ne=y(i))==null?void 0:ne.finishedSpeechUsedMinutes)==null?void 0:fe.value)||0,"finished-speech-used-seconds":((Re=(be=y(i))==null?void 0:be.finishedSpeechUsedSeconds)==null?void 0:Re.value)||0,"finished-speech-finished-at":((de=(ze=y(i))==null?void 0:ze.finishedSpeechFinishedAt)==null?void 0:de.value)||null,"session-interactions":((Te=(Ve=y(u))==null?void 0:Ve.sessionInteractions)==null?void 0:Te.value)||[],onToggleRegistration:(Ce=y(s))==null?void 0:Ce.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var Hn=ke(Jn,[["__scopeId","data-v-e6914fd8"]]);const Wn={class:"expedient-tab"},Gn={class:"overview-card modern-card"},Kn={class:"card-content"},Yn={class:"summary-title"},Xn={__name:"LargeExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const o=e,a=xe("sessionSettings"),n=xe("quorum"),s=xe("largeExpedient"),i=xe("largeSpeech"),u=xe("sessionInteractions"),l=xe("sessionAgenda"),c=v(()=>{var V;return o.sessionId||((V=l==null?void 0:l.selectedAgendaId)==null?void 0:V.value)||null});return(V,$)=>{var R,T,U,f,g,b,F,A,m,x,r,h,q,p,z,Q,C,L,te,se,le,re,J,ae,Z,ee,I,M,O,W,P,D,Y,ie,ne,fe,be,Re,ze,de,Ve,Te,Ce;return d(),k("div",Wn,[t("div",Gn,[t("div",Kn,[t("div",Yn,[w(N,{name:"assignment_turned_in",size:"20px",class:"tw-mr-2"}),we(" "+S(((T=(R=y(a))==null?void 0:R.largeExpedientName)==null?void 0:T.value)||"Grande Expediente"),1)]),w(Ta,{title:((f=(U=y(a))==null?void 0:U.largeExpedientName)==null?void 0:f.value)||"Grande Expediente","expedient-label":(((b=(g=y(a))==null?void 0:g.largeExpedientName)==null?void 0:b.value)||"Grande Expediente").toLowerCase(),icon:"assignment_turned_in","header-class":"bg-orange","header-color":"orange","button-color":"orange","button-icon":"assignment_turned_in","is-registered":((A=(F=y(s))==null?void 0:F.isRegistered)==null?void 0:A.value)||!1,"is-present":((x=(m=y(n))==null?void 0:m.isPresent)==null?void 0:x.value)||!1,started:((h=(r=y(s))==null?void 0:r.started)==null?void 0:h.value)||!1,finalized:((p=(q=y(s))==null?void 0:q.finalized)==null?void 0:p.value)||!1,"finalized-at":((Q=(z=y(s))==null?void 0:z.finalizedAt)==null?void 0:Q.value)||null,"registration-order":((L=(C=y(s))==null?void 0:C.registrationOrder)==null?void 0:L.value)||null,"registered-at":((se=(te=y(s))==null?void 0:te.registeredAt)==null?void 0:se.value)||null,"selected-agenda-id":c.value,"can-send":((re=(le=y(s))==null?void 0:le.canSend)==null?void 0:re.value)||!1,"loading-data":((ae=(J=y(s))==null?void 0:J.loadingData)==null?void 0:ae.value)||!1,"loading-action":((ee=(Z=y(s))==null?void 0:Z.loadingAction)==null?void 0:ee.value)||!1,"current-speech":((M=(I=y(i))==null?void 0:I.currentSpeech)==null?void 0:M.value)||null,"remaining-time":((W=(O=y(i))==null?void 0:O.remainingTime)==null?void 0:W.value)||null,"finished-speech":((D=(P=y(i))==null?void 0:P.finishedSpeech)==null?void 0:D.value)||null,"finished-speech-total-minutes":((ie=(Y=y(i))==null?void 0:Y.finishedSpeechTotalMinutes)==null?void 0:ie.value)||0,"finished-speech-used-minutes":((fe=(ne=y(i))==null?void 0:ne.finishedSpeechUsedMinutes)==null?void 0:fe.value)||0,"finished-speech-used-seconds":((Re=(be=y(i))==null?void 0:be.finishedSpeechUsedSeconds)==null?void 0:Re.value)||0,"finished-speech-finished-at":((de=(ze=y(i))==null?void 0:ze.finishedSpeechFinishedAt)==null?void 0:de.value)||null,"session-interactions":((Te=(Ve=y(u))==null?void 0:Ve.sessionInteractions)==null?void 0:Te.value)||[],onToggleRegistration:(Ce=y(s))==null?void 0:Ce.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var Zn=ke(Xn,[["__scopeId","data-v-d0cf9872"]]),ei=Oe({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:a}){let n=!1,s,i,u=null,l=null,c,V;function $(){s==null||s(),s=null,n=!1,u!==null&&(clearTimeout(u),u=null),l!==null&&(clearTimeout(l),l=null),i==null||i.removeEventListener("transitionend",c),c=null}function R(g,b,F){b!==void 0&&(g.style.height=`${b}px`),g.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,s=F}function T(g,b){g.style.overflowY=null,g.style.height=null,g.style.transition=null,$(),b!==V&&a(b)}function U(g,b){let F=0;i=g,n===!0?($(),F=g.offsetHeight===g.scrollHeight?0:void 0):(V="hide",g.style.overflowY="hidden"),R(g,F,b),u=setTimeout(()=>{u=null,g.style.height=`${g.scrollHeight}px`,c=A=>{l=null,(Object(A)!==A||A.target===g)&&T(g,"show")},g.addEventListener("transitionend",c),l=setTimeout(c,e.duration*1.1)},100)}function f(g,b){let F;i=g,n===!0?$():(V="show",g.style.overflowY="hidden",F=g.scrollHeight),R(g,F,b),u=setTimeout(()=>{u=null,g.style.height=0,c=A=>{l=null,(Object(A)!==A||A.target===g)&&T(g,"hide")},g.addEventListener("transitionend",c),l=setTimeout(c,e.duration*1.1)},100)}return rt(()=>{n===!0&&$()}),()=>X(wa,{css:!1,appear:e.appear,onEnter:U,onLeave:f},o.default)}});const He=Ja({}),ti=Object.keys(ya);var Ca=Oe({name:"QExpansionItem",props:{...ya,...Sa,...qt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...xa,"click","afterShow","afterHide"],setup(e,{slots:o,emit:a}){const{proxy:{$q:n}}=je(),s=$t(e,n),i=G(e.modelValue!==null?e.modelValue:e.defaultOpened),u=G(null),l=_a(),{show:c,hide:V,toggle:$}=qa({showing:i});let R,T;const U=v(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),f=v(()=>{if(e.contentInsetLevel===void 0)return null;const J=n.lang.rtl===!0?"Right":"Left";return{["padding"+J]:e.contentInsetLevel*56+"px"}}),g=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),b=v(()=>{const J={};return ti.forEach(ae=>{J[ae]=e[ae]}),J}),F=v(()=>g.value===!0||e.expandIconToggle!==!0),A=v(()=>e.expandedIcon!==void 0&&i.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),m=v(()=>e.disable!==!0&&(g.value===!0||e.expandIconToggle===!0)),x=v(()=>({expanded:i.value===!0,detailsId:l.value,toggle:$,show:c,hide:V})),r=v(()=>{const J=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[i.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":l.value,"aria-label":J}});ge(()=>e.group,J=>{T==null||T(),J!==void 0&&C()});function h(J){g.value!==!0&&$(J),a("click",J)}function q(J){J.keyCode===13&&p(J,!0)}function p(J,ae){var Z;ae!==!0&&J.qAvoidFocus!==!0&&((Z=u.value)==null||Z.focus()),$(J),ct(J)}function z(){a("afterShow")}function Q(){a("afterHide")}function C(){R===void 0&&(R=$a()),i.value===!0&&(He[e.group]=R);const J=ge(i,Z=>{Z===!0?He[e.group]=R:He[e.group]===R&&delete He[e.group]}),ae=ge(()=>He[e.group],(Z,ee)=>{ee===R&&Z!==void 0&&Z!==R&&V()});T=()=>{J(),ae(),He[e.group]===R&&delete He[e.group],T=void 0}}function L(){const J={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},ae=[X(N,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:A.value})];return m.value===!0&&(Object.assign(J,{tabindex:0,...r.value,onClick:p,onKeyup:q}),ae.unshift(X("div",{ref:u,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),X(nt,J,()=>ae)}function te(){let J;return o.header!==void 0?J=[].concat(o.header(x.value)):(J=[X(nt,()=>[X(vt,{lines:e.labelLines},()=>e.label||""),e.caption?X(vt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&J[e.switchToggleSide===!0?"push":"unshift"](X(nt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>X(N,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&J[e.switchToggleSide===!0?"unshift":"push"](L()),J}function se(){const J={ref:"item",style:e.headerStyle,class:e.headerClass,dark:s.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return F.value===!0&&(J.clickable=!0,J.onClick=h,Object.assign(J,g.value===!0?b.value:r.value)),X(as,J,te)}function le(){return Qe(X("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:f.value,id:l.value},It(o.default)),[[We,i.value]])}function re(){const J=[se(),X(ei,{duration:e.duration,onShow:z,onHide:Q},le)];return e.expandSeparator===!0&&J.push(X(it,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),X(it,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),J}return e.group!==void 0&&C(),rt(()=>{T==null||T()}),()=>X("div",{class:U.value},[X("div",{class:"q-expansion-item__container relative-position"},re())])}});const ai={class:"tw-flex tw-items-center tw-gap-2"},si={class:"tw-flex-1"},ni={__name:"VoiceRequestCard",props:{hasRequest:{type:Boolean,default:!1},requestOrder:{type:Number,default:null},requestedAt:{type:String,default:null},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},loadingData:{type:Boolean,default:!1},allFinishedSpeeches:{type:Array,default:()=>[]}},setup(e){const o=G(!1);function a(n){if(n<=0)return"0:00";const s=Math.floor(n/60),i=n%60;return`${s}:${i.toString().padStart(2,"0")}`}return(n,s)=>(d(),H(Be,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:E(()=>[w($e,{class:_(`tw-flex tw-items-center tw-justify-between tw-bg-purple-500 tw-text-white ${n.$q.screen.lt.md?"tw-py-1":"tw-py-2"}`)},{default:E(()=>[t("div",ai,[w(N,{name:"record_voice_over",size:n.$q.screen.lt.md?"18px":"20px"},null,8,["size"]),t("div",{class:_(`${n.$q.screen.lt.md?"text-body2":"text-subtitle1"} tw-font-semibold`)},"Pedido de Voz",2)])]),_:1},8,["class"]),w($e,{class:_(`tw-relative tw-w-full ${n.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`),style:mt(n.$q.screen.lt.md?"min-height: 60px":"min-height: 80px")},{default:E(()=>[w(wt,{showing:e.loadingData,color:"purple",size:"50px"},null,8,["showing"]),e.loadingData?B("",!0):(d(),k(Ie,{key:0},[e.hasRequest&&(!e.currentSpeech||e.currentSpeech.status==="finished")?(d(),H(ye,{key:0,class:_(`text-black ${n.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"schedule",color:"purple",size:n.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${n.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Pedido de Voz Registrado ",2),e.requestOrder?(d(),k("div",{key:0,class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Sua posi\xE7\xE3o na fila: "+S(e.requestOrder)+"\xBA ",3)):B("",!0),e.requestedAt?(d(),k("div",{key:1,class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Solicitado em: "+S(y(Ee)(e.requestedAt)),3)):B("",!0),t("div",{class:_(`${n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-purple-700 tw-font-medium ${n.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Aguarde o controle liberar sua fala ",2)],2)]),_:1},8,["class"])):B("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(d(),H(ye,{key:1,class:_(`bg-green-1 text-black ${n.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"mic",color:"green",size:n.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${n.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Voc\xEA est\xE1 falando ",2),e.remainingTime>0?(d(),k("div",{key:0,class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Tempo restante: "+S(a(e.remainingTime)),3)):B("",!0)],2)]),_:1},8,["class"])):B("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(d(),H(ye,{key:2,class:_(`bg-yellow-1 text-black ${n.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"pause_circle",color:"orange",size:n.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${n.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Fala pausada ",2),t("div",{class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Aguarde a retomada pelo controle ",2)],2)]),_:1},8,["class"])):B("",!0),e.currentSpeech&&e.currentSpeech.status==="finished"&&!e.hasRequest?(d(),H(ye,{key:3,class:_(`text-black ${n.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:E(()=>[w(N,{name:"check_circle",color:"blue",size:n.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:E(()=>[t("div",{class:_(`tw-flex tw-flex-col ${n.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Fala finalizada ",2),e.currentSpeech?(d(),k("div",{key:0,class:_(`tw-grid tw-grid-cols-2 ${n.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-1"}`)},[t("div",null,[t("div",{class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total ",2),t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},S((e.currentSpeech.allocated_minutes||0)+(e.currentSpeech.additional_minutes||0))+" min ",3)]),t("div",null,[t("div",{class:_(n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Usado ",2),t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},S(Math.floor((e.currentSpeech.used_seconds||0)/60))+" min "+S((e.currentSpeech.used_seconds||0)%60)+" s ",3)])],2)):B("",!0)],2)]),_:1},8,["class"])):B("",!0),!e.hasRequest&&!e.currentSpeech?(d(),k("div",{key:4,class:_(`tw-text-center ${n.$q.screen.lt.md?"tw-py-2":"tw-py-4"}`)},[w(N,{name:"record_voice_over",size:n.$q.screen.lt.md?"24px":"32px",color:"grey"},null,8,["size"]),t("div",{class:_(`${n.$q.screen.lt.md?"text-caption":"text-body2"} tw-text-gray-600 tw-mt-2`)}," Nenhum pedido de voz registrado ",2),t("div",{class:_(`${n.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-500 tw-mt-1`)}," Use o bot\xE3o abaixo para solicitar voz ",2)],2)):B("",!0),e.allFinishedSpeeches&&e.allFinishedSpeeches.length>0?(d(),k("div",{key:5,class:_(n.$q.screen.lt.md?"tw-mt-1":"tw-mt-4")},[w(it,{class:_(n.$q.screen.lt.md?"tw-mb-1":"tw-mb-2")},null,8,["class"]),w(Ca,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value=i),"expand-separator":"",dense:"",icon:"history",label:`Hist\xF3rico de Falas (${e.allFinishedSpeeches.length})`,"header-class":n.$q.screen.lt.md?"tw-text-caption tw-text-xs tw-font-semibold":"tw-text-caption tw-font-semibold"},{default:E(()=>[t("div",{class:_(`tw-space-y-1 ${n.$q.screen.lt.md?"tw-mt-1 tw-pb-1":"tw-mt-2 tw-pb-2"}`)},[(d(!0),k(Ie,null,Le(e.allFinishedSpeeches,i=>(d(),k("div",{key:i.id,class:_(`tw-flex tw-items-center tw-justify-between ${n.$q.screen.lt.md?"tw-p-1":"tw-p-2"} tw-bg-gray-50 tw-rounded`)},[t("div",si,[t("div",{class:_(`${n.$q.screen.lt.md,"tw-text-xs"} tw-font-semibold`)},S(y(Ee)(i.finished_at||i.started_at)),3),t("div",{class:_(`${n.$q.screen.lt.md,"tw-text-xs"} tw-text-gray-600`)},S(Math.floor((i.used_seconds||0)/60))+" min "+S((i.used_seconds||0)%60)+" s de "+S((i.allocated_minutes||0)+(i.additional_minutes||0))+" min ",3)]),w(N,{name:"check_circle",color:"blue",size:n.$q.screen.lt.md?"12px":"16px"},null,8,["size"])],2))),128))],2)]),_:1},8,["modelValue","label","header-class"])],2)):B("",!0)],64))]),_:1},8,["class","style"])]),_:1}))}};var ii=ke(ni,[["__scopeId","data-v-46791654"]]);const oi=["top","right","bottom","left"],_t={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>oi.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function La(e,o){return{formClass:v(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:v(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:v(()=>{if(e.externalLabel===!0){const a=e.hideLabel===null?o.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(a===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Pa={start:"self-end",center:"self-center",end:"self-start"},li=Object.keys(Pa);var et=Oe({name:"QFabAction",props:{..._t,icon:{type:String,default:""},anchor:{type:String,validator:e=>li.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:o,emit:a}){const n=xe(Ia,()=>({showing:{value:!0},onChildClick:Ha})),{formClass:s,labelProps:i}=La(e,n.showing),u=v(()=>{const R=Pa[e.anchor];return s.value+(R!==void 0?` ${R}`:"")}),l=v(()=>e.disable===!0||n.showing.value!==!0);function c(R){n.onChildClick(R),a("click",R)}function V(){const R=[];return o.icon!==void 0?R.push(o.icon()):e.icon!==""&&R.push(X(N,{name:e.icon})),(e.label!==""||o.label!==void 0)&&R[i.value.action](X("div",i.value.data,o.label!==void 0?o.label():[e.label])),lt(o.default,R)}const $=je();return Object.assign($.proxy,{click:c}),()=>X(qe,{class:u.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:c},V)}});const ri=["up","right","down","left"],ui=["left","center","right"];var Fa=Oe({name:"QFab",props:{..._t,...Sa,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{..._t.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>ri.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ui.includes(e)}},emits:xa,setup(e,{slots:o}){const a=G(null),n=G(e.modelValue===!0),s=_a(),{proxy:{$q:i}}=je(),{formClass:u,labelProps:l}=La(e,n),c=v(()=>e.persistent!==!0),{hide:V,toggle:$}=qa({showing:n,hideOnRouteChange:c}),R=v(()=>({opened:n.value})),T=v(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${u.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),U=v(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),f=v(()=>{const A={id:s.value,role:"menu"};return n.value!==!0&&(A["aria-hidden"]="true"),A}),g=v(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function b(A,m){const x=o[A],r=`q-fab__${A} absolute-full`;return x===void 0?X(N,{class:r,name:e[m]||i.iconSet.fab[m]}):X("div",{class:r},x(R.value))}function F(){const A=[];return e.hideIcon!==!0&&A.push(X("div",{class:g.value},[b("icon","icon"),b("active-icon","activeIcon")])),(e.label!==""||o.label!==void 0)&&A[l.value.action](X("div",l.value.data,o.label!==void 0?o.label(R.value):[e.label])),lt(o.tooltip,A)}return Fe(Ia,{showing:n,onChildClick(A){var m;V(A),(A==null?void 0:A.qAvoidFocus)!==!0&&((m=a.value)==null||m.$el.focus())}}),()=>X("div",{class:T.value},[X(qe,{ref:a,class:u.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s.value,onClick:$},F),X("div",{class:U.value,...f.value},It(o.default))])}});const di={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},ci={class:"tw-mb-3 md:tw-mb-8"},vi={class:"tw-mb-2 md:tw-mb-4"},gi={class:"tw-mb-3 md:tw-mb-6"},fi={key:0,class:"tw-mb-4 md:tw-mb-8"},mi={key:1,class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},hi={key:2,class:"tw-mb-4 md:tw-mb-8"},pi={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},wi={key:0},bi={key:1},yi={key:2},Si={key:3},xi={key:3,class:"tw-mt-3 md:tw-mt-6"},_i={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},qi={__name:"VoiceRequestModal",props:{modelValue:{type:Boolean,default:!1},agendaId:{type:Number,required:!0},hasRequest:{type:Boolean,default:!1},requestOrder:{type:Number,default:null},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0}},emits:["update:modelValue","request-removed"],setup(e,{emit:o}){const a=e,n=o,s=v({get:()=>a.modelValue,set:C=>n("update:modelValue",C)}),i=v(()=>{var C;return((C=a.currentSpeech)==null?void 0:C.status)==="speaking"}),u=v(()=>{var C;return((C=a.currentSpeech)==null?void 0:C.status)==="paused"}),l=v(()=>{var C;return((C=a.currentSpeech)==null?void 0:C.status)==="finished"}),c=v(()=>i.value?"mic":u.value?"pause_circle":l.value?"check_circle":"record_voice_over"),V=v(()=>"white"),$=v(()=>i.value?"Voc\xEA est\xE1 falando":u.value?"Fala pausada":l.value?"Fala finalizada":a.hasRequest?"Pedido de Voz Registrado":"Pedido de Voz"),R=v(()=>i.value?"Sua fala est\xE1 em andamento":u.value?"Aguarde a retomada pelo controle":l.value?"Sua fala foi finalizada":a.hasRequest?"Aguarde o controle iniciar sua fala":"Clique no bot\xE3o para solicitar voz"),T=v(()=>i.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":u.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":l.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":a.hasRequest?"tw-bg-gradient-to-br tw-from-purple-600 tw-to-purple-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),U=v(()=>i.value?"tw-bg-green-300":u.value?"tw-bg-yellow-300":"tw-bg-gray-300"),f=v(()=>a.currentSpeech?(a.currentSpeech.allocated_minutes||0)+(a.currentSpeech.additional_minutes||0):0),g=v(()=>{if(!a.currentSpeech)return 0;let C=a.currentSpeech.used_seconds||0;return i.value&&a.currentSpeech.started_at&&(C+=Math.floor((new Date-new Date(a.currentSpeech.started_at))/1e3)),Math.floor(C/60)}),b=v(()=>{var C;return((C=a.currentSpeech)==null?void 0:C.additional_minutes)||0}),F=v(()=>{if(!a.currentSpeech||f.value===0)return 0;const C=f.value*60;let L=a.currentSpeech.used_seconds||0;return i.value&&a.currentSpeech.started_at&&(L+=Math.floor((new Date-new Date(a.currentSpeech.started_at))/1e3)),Math.min(100,L/C*100)}),A=v(()=>{if(!a.currentSpeech)return 0;const C=a.currentSpeech.used_seconds||0;return Math.floor(C/60)}),m=v(()=>a.currentSpeech?(a.currentSpeech.used_seconds||0)%60:0),x=v(()=>a.remainingTime>0&&a.remainingTime<=15),r=v(()=>a.remainingTime<=0),h=v(()=>r.value?"tw-bg-red-600 tw-bg-opacity-90":x.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),q=v(()=>(r.value||x.value,"tw-text-white")),p=v(()=>r.value||x.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),z=v(()=>r.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":x.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");let Q=null;return ge(()=>[l.value,s.value],([C,L])=>{Q&&(clearTimeout(Q),Q=null),C&&L&&(Q=setTimeout(()=>{s.value&&l.value&&(s.value=!1),Q=null},3e3))},{immediate:!0}),ge(()=>s.value,C=>{!C&&Q&&(clearTimeout(Q),Q=null)}),ht(()=>{Q&&clearTimeout(Q)}),(C,L)=>(d(),H(tt,{modelValue:s.value,"onUpdate:modelValue":L[0]||(L[0]=te=>s.value=te),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:E(()=>[t("div",{class:_(["fullscreen tw-flex tw-items-center tw-justify-center",T.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[t("div",di,[t("div",ci,[w(N,{name:c.value,color:V.value,size:C.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),t("div",vi,[w(At,{label:"Pedido de Voz",color:"white","text-color":"purple",size:C.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["size"])]),t("div",gi,[t("h1",{class:_([C.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},S($.value),3),t("p",{class:_([C.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},S(R.value),3)]),!l.value&&e.currentSpeech?(d(),k("div",fi,[t("div",{class:_([C.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",h.value])},[t("div",{class:_([C.$q.screen.lt.md?"text-body2":"text-h5",p.value,"tw-mb-2"])},S(z.value),3),t("div",{class:_([C.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",q.value,r.value?"tw-animate-pulse":""])},S(y(xt)(e.remainingTime)),3)],2)])):B("",!0),e.currentSpeech?(d(),k("div",mi,[t("div",{class:_([C.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),t("div",{class:_([C.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},S(f.value)+" min ",3)],2),t("div",{class:_([C.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),t("div",{class:_([C.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},S(g.value)+" min ",3)],2),b.value>0?(d(),k("div",{key:0,class:_([C.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),t("div",{class:_([C.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+S(b.value)+" min ",3)],2)):B("",!0)])):B("",!0),e.currentSpeech?(d(),k("div",hi,[t("div",pi,[t("div",{class:_(["tw-h-full tw-transition-all tw-duration-1000",U.value]),style:mt({width:F.value+"%"})},null,6)]),t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},S(F.value.toFixed(0))+"% do tempo utilizado ",3)])):B("",!0),t("div",{class:_([C.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[w(N,{name:"info",size:"20px",class:"tw-mr-2"}),i.value?(d(),k("span",wi," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):u.value?(d(),k("span",bi," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):l.value?(d(),k("span",yi," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):e.hasRequest&&!e.currentSpeech?(d(),k("span",Si," Aguarde o controle iniciar sua fala. ")):B("",!0)],2),l.value&&e.currentSpeech?(d(),k("div",xi,[t("div",{class:_([C.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[t("div",{class:_([C.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),t("div",_i,[t("div",null,[t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),t("div",{class:_([C.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},S(f.value)+" min ",3)]),t("div",null,[t("div",{class:_([C.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),t("div",{class:_([C.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},S(A.value)+" min "+S(m.value)+" s ",3)])])],2)])):B("",!0)])],2)]),_:1},8,["modelValue"]))}};var $i=ke(qi,[["__scopeId","data-v-3dadbee0"]]);const Ii={key:1,class:"voice-request-buttons"},Ai={__name:"VoiceRequestButton",props:{agendaId:{type:Number,default:null},showOnExpedient:{type:Boolean,default:!1},showOnVoting:{type:Boolean,default:!1},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null},remainingTime:{type:Number,default:0},inline:{type:Boolean,default:!1}},emits:["request-registered","request-removed"],setup(e,{emit:o}){const a=e,n=o,s=Ae(),i=Ne(),u=G(!1),l=G(!1),c=G(!1),V=v(()=>!!a.agendaId),$=v(()=>a.currentSpeech&&["speaking","paused","finished"].includes(a.currentSpeech.status));async function R(){var g,b,F,A,m,x;if(!a.agendaId)return;const f=(g=s.user)==null?void 0:g.proponent_id;if(!f){Ue.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}c.value=!0;try{if((b=(await me.post(`/api/pauta/${a.agendaId}/voice-request/register`,{proponent_id:f,requested:!0})).data)!=null&&b.success){Ue.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const h=Me.getItem("unit_id_num");h&&i.isConnected&&i.emit("voice-request-registered",{unitId:parseInt(h),agendaId:parseInt(a.agendaId),proponentId:parseInt(f),proponentName:((F=s.user)==null?void 0:F.name)||((A=s.user)==null?void 0:A.first_name)||"Vereador",source:"vereador"}),n("request-registered"),await new Promise(q=>setTimeout(q,500))}}catch(r){console.error("Erro ao solicitar voz:",r),Ue.create({type:"negative",color:"blue-6",message:((x=(m=r.response)==null?void 0:m.data)==null?void 0:x.message)||"Erro ao solicitar voz"})}finally{c.value=!1,u.value=!1}}function T(){l.value=!0}function U(){n("request-removed")}return ge(()=>a.currentSpeech,f=>{f&&["speaking","paused"].includes(f.status)&&(l.value=!0)},{immediate:!0}),(f,g)=>{var b;return d(),k("div",null,[V.value&&!e.inline?(d(),H(Fa,{key:0,modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=F=>u.value=F),"vertical-actions-align":"right",color:"positive",icon:"record_voice_over",direction:"up",class:_({"tw-fixed tw-bottom-4 tw-right-4 tw-z-50":!0}),style:{position:"fixed",bottom:"16px",right:"16px","z-index":"9999"}},{default:E(()=>{var F;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(d(),H(et,{key:0,color:"positive",icon:"record_voice_over",onClick:R,label:e.hasRequest&&((F=e.currentSpeech)==null?void 0:F.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:c.value},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(d(),H(et,{key:1,color:"info",icon:"info",onClick:()=>{},label:"Aguardando Libera\xE7\xE3o"})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(d(),H(et,{key:2,color:"primary",icon:"mic",onClick:T,label:"Ver Fala"})):B("",!0)]}),_:1},8,["modelValue"])):B("",!0),V.value&&e.inline?(d(),k("div",Ii,[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(d(),H(qe,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((b=e.currentSpeech)==null?void 0:b.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:c.value,unelevated:"",rounded:"",size:"md",class:"full-width voice-request-btn",onClick:R},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(d(),H(qe,{key:1,color:"info",icon:"info",label:"Aguardando Libera\xE7\xE3o",unelevated:"",rounded:"",size:"md",class:"full-width voice-request-btn",disable:""})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(d(),H(qe,{key:2,color:"primary",icon:"mic",label:"Ver Fala",unelevated:"",rounded:"",size:"md",class:"full-width voice-request-btn",onClick:T})):B("",!0)])):B("",!0),e.agendaId&&$.value?(d(),H($i,{key:2,modelValue:l.value,"onUpdate:modelValue":g[1]||(g[1]=F=>l.value=F),"agenda-id":e.agendaId,"has-request":e.hasRequest,"request-order":e.requestOrder,"current-speech":e.currentSpeech,"remaining-time":e.remainingTime,onRequestRemoved:U},null,8,["modelValue","agenda-id","has-request","request-order","current-speech","remaining-time"])):B("",!0)])}}};var ki=ke(Ai,[["__scopeId","data-v-c5696c64"]]);const Ri={class:"voice-request-tab"},zi={class:"overview-card modern-card"},Vi={class:"card-content"},Ti={class:"summary-title"},Ci={key:0,class:"voice-request-actions tw-mt-4"},Li={__name:"VoiceRequestTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const o=e,a=xe("voiceRequest"),n=xe("sessionAgenda"),s=v(()=>{var l;return o.sessionId||((l=n==null?void 0:n.selectedAgendaId)==null?void 0:l.value)||null});function i(){a==null||a.loadStatus(!0)}function u(){a==null||a.loadStatus(!0)}return(l,c)=>{var V,$,R,T,U,f,g,b,F,A,m,x,r,h,q,p,z,Q;return d(),k("div",Ri,[t("div",zi,[t("div",Vi,[t("div",Ti,[w(N,{name:"record_voice_over",size:"20px",class:"tw-mr-2"}),c[0]||(c[0]=we(" Pedido de Voz ",-1))]),w(ii,{"has-request":(($=(V=y(a))==null?void 0:V.hasRequest)==null?void 0:$.value)||!1,"request-order":((T=(R=y(a))==null?void 0:R.requestOrder)==null?void 0:T.value)||null,"requested-at":((f=(U=y(a))==null?void 0:U.requestedAt)==null?void 0:f.value)||null,"current-speech":((b=(g=y(a))==null?void 0:g.currentSpeech)==null?void 0:b.value)||null,"remaining-time":((A=(F=y(a))==null?void 0:F.remainingTime)==null?void 0:A.value)||null,"loading-data":((x=(m=y(a))==null?void 0:m.loadingData)==null?void 0:x.value)||!1,"all-finished-speeches":((h=(r=y(a))==null?void 0:r.allFinishedSpeeches)==null?void 0:h.value)||[]},null,8,["has-request","request-order","requested-at","current-speech","remaining-time","loading-data","all-finished-speeches"]),s.value&&y(a)?(d(),k("div",Ci,[w(ki,{"agenda-id":s.value,"show-on-expedient":!1,"show-on-voting":!1,"has-request":((q=y(a).hasRequest)==null?void 0:q.value)||!1,"current-speech":((p=y(a).currentSpeech)==null?void 0:p.value)||null,"request-order":((z=y(a).requestOrder)==null?void 0:z.value)||null,"remaining-time":((Q=y(a).remainingTime)==null?void 0:Q.value)||null,inline:!0,onRequestRegistered:i,onRequestRemoved:u},null,8,["agenda-id","has-request","current-speech","request-order","remaining-time"])])):B("",!0)])])])}}};var Pi=ke(Li,[["__scopeId","data-v-d48038e2"]]);const Fi={class:"voting-tab"},Ei={class:"overview-card modern-card"},Mi={class:"card-content"},Di={class:"summary-title"},Bi={key:0,class:"section-container"},Ui={class:"section-title"},Oi={class:"propositions-list"},Ni={class:"proposition-header"},Qi={class:"proposition-badges"},ji={class:"proposition-number"},Ji={class:"proposition-title"},Hi={key:0,class:"proposition-species"},Wi={key:1,class:"section-container"},Gi={class:"section-title"},Ki={class:"propositions-list"},Yi={class:"voting-results"},Xi={class:"results-grid"},Zi={class:"result-item result-favor"},eo={class:"result-content"},to={class:"result-value"},ao={class:"result-item result-against"},so={class:"result-content"},no={class:"result-value"},io={class:"result-item result-abstain"},oo={class:"result-content"},lo={class:"result-value"},ro={class:"result-item result-total"},uo={class:"result-content"},co={class:"result-value"},vo={key:0,class:"members-section"},go={class:"members-grid"},fo={class:"member-card-content"},mo=["src","alt"],ho={key:1},po={class:"member-info"},wo={class:"member-name"},bo={key:0,class:"member-party"},yo={key:1,class:"secret-voting-message"},So={class:"secret-message-count"},xo={key:2,class:"no-votes-message"},_o={key:2,class:"empty-voting-state"},qo={__name:"VotingTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const o=e,a=xe("voting",null);pt(()=>{a!=null&&a.loadVotingStatus&&a.loadVotingStatus()}),ge(()=>o.sessionId,f=>{f&&(a==null?void 0:a.loadVotingStatus)&&a.loadVotingStatus()},{immediate:!0});const n=v(()=>{var f,g;return(g=(f=a==null?void 0:a.activeVoting)==null?void 0:f.value)!=null&&g.readings?a.activeVoting.value.readings.filter(b=>b.type==="voting"||b.type==="secret_voting"):[]}),s=v(()=>{var f;return(f=a==null?void 0:a.finishedReadings)!=null&&f.value?a.finishedReadings.value.filter(g=>g.type==="voting"||g.type==="secret_voting"):[]});function i(f){if(!f.proposition)return"Proposi\xE7\xE3o sem dados";const g=f.proposition.number,b=f.proposition.year,F=f.proposition.description||f.proposition.title||"";return`${g}/${b}${F?" - "+F:""}`}function u(f){var A;if(f.type==="secret_voting")return`Vota\xE7\xE3o Secreta - ${((A=f.votes)==null?void 0:A.length)||0} voto(s)`;if(!f.votes||f.votes.length===0)return"Nenhum voto registrado";const g=l(f.votes,"favor"),b=l(f.votes,"against"),F=l(f.votes,"abstain");return`${g} a favor, ${b} contra, ${F} absten\xE7\xF5es`}function l(f,g){return!f||!Array.isArray(f)?0:f.filter(b=>b.vote===g).length}function c(f){switch(f){case"favor":return"thumb_up";case"against":return"thumb_down";case"abstain":return"remove_circle";default:return"help"}}function V(f){switch(f){case"favor":return"green";case"against":return"red";case"abstain":return"orange";default:return"grey"}}function $(f){switch(f){case"favor":return"tw-bg-green-50 tw-border-green-200";case"against":return"tw-bg-red-50 tw-border-red-200";case"abstain":return"tw-bg-orange-50 tw-border-orange-200";default:return""}}function R(f){if(!f)return"";const g=f.split(" ");return g.length>=2?(g[0][0]+g[g.length-1][0]).toUpperCase():f.substring(0,2).toUpperCase()}function T(f){if(!f)return null;if(f.startsWith("http://")||f.startsWith("https://"))return f;const g={}.VITE_API_BASE_URL||"http://127.0.0.1:8000";return f.startsWith("/")?`${g}${f}`:`${g}/${f}`}function U(f){return!f||f.type==="secret_voting"||!f.votes||!Array.isArray(f.votes)?!1:f.votes.length>0}return(f,g)=>(d(),k("div",Fi,[t("div",Ei,[t("div",Mi,[t("div",Di,[w(N,{name:"how_to_vote",size:"20px",class:"tw-mr-2"}),g[0]||(g[0]=we(" Vota\xE7\xF5es ",-1))]),n.value.length>0?(d(),k("div",Bi,[t("div",Ui,[w(N,{name:"schedule",size:"20px",class:"section-icon",color:"primary"}),g[1]||(g[1]=t("span",{class:"section-title-text"},"Vota\xE7\xF5es em Andamento",-1))]),t("div",Oi,[(d(!0),k(Ie,null,Le(n.value,b=>(d(),H(Be,{key:b.id,flat:"",bordered:"",class:"proposition-card mobile-card"},{default:E(()=>[w($e,{class:"proposition-card-section"},{default:E(()=>{var F,A,m,x,r;return[t("div",Ni,[t("div",Qi,[w(Xe,{color:b.type==="secret_voting"?"blue":"primary",label:b.type==="secret_voting"?"Secreta":"Vota\xE7\xE3o",class:"type-badge"},null,8,["color","label"]),t("span",ji,S((F=b.proposition)==null?void 0:F.number)+"/"+S((A=b.proposition)==null?void 0:A.year),1)])]),t("div",Ji,S(((m=b.proposition)==null?void 0:m.description)||((x=b.proposition)==null?void 0:x.title)||"Sem descri\xE7\xE3o"),1),(r=b.proposition)!=null&&r.species?(d(),k("div",Hi,S(b.proposition.species.name),1)):B("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):B("",!0),s.value.length>0?(d(),k("div",Wi,[t("div",Gi,[w(N,{name:"check_circle",size:"20px",class:"section-icon",color:"positive"}),g[2]||(g[2]=t("span",{class:"section-title-text"},"Vota\xE7\xF5es Finalizadas",-1))]),t("div",Ki,[(d(!0),k(Ie,null,Le(s.value,b=>(d(),H(Ca,{key:b.id,"header-class":"proposition-expansion-header mobile-expansion-header","expand-icon-class":"expansion-icon",class:"proposition-expansion mobile-expansion"},{header:E(()=>[w(nt,{avatar:"",class:"expansion-avatar"},{default:E(()=>[w(N,{name:b.type==="secret_voting"?"lock":"how_to_vote",color:b.type==="secret_voting"?"blue":"primary",size:"22px"},null,8,["name","color"])]),_:2},1024),w(nt,{class:"expansion-content"},{default:E(()=>[w(vt,{class:"expansion-title"},{default:E(()=>[we(S(i(b)),1)]),_:2},1024),w(vt,{caption:"",class:"expansion-caption"},{default:E(()=>[we(S(u(b)),1)]),_:2},1024)]),_:2},1024)]),default:E(()=>[w(Be,{flat:"",class:"expansion-content-card"},{default:E(()=>[w($e,{class:"expansion-card-section"},{default:E(()=>{var F,A;return[t("div",Yi,[g[7]||(g[7]=t("div",{class:"results-title"}," Resultado da Vota\xE7\xE3o ",-1)),t("div",Xi,[t("div",Zi,[w(N,{name:"thumb_up",color:"green",size:"18px"}),t("div",eo,[t("span",to,S(l(b.votes,"favor")),1),g[3]||(g[3]=t("span",{class:"result-label"},"A Favor",-1))])]),t("div",ao,[w(N,{name:"thumb_down",color:"red",size:"18px"}),t("div",so,[t("span",no,S(l(b.votes,"against")),1),g[4]||(g[4]=t("span",{class:"result-label"},"Contra",-1))])]),t("div",io,[w(N,{name:"remove_circle",color:"orange",size:"18px"}),t("div",oo,[t("span",lo,S(l(b.votes,"abstain")),1),g[5]||(g[5]=t("span",{class:"result-label"},"Absten\xE7\xF5es",-1))])]),t("div",ro,[w(N,{name:"people",color:"grey",size:"18px"}),t("div",uo,[t("span",co,S(((F=b.votes)==null?void 0:F.length)||0),1),g[6]||(g[6]=t("span",{class:"result-label"},"Total",-1))])])])]),b.type!=="secret_voting"&&U(b)?(d(),k("div",vo,[g[8]||(g[8]=t("div",{class:"members-title"}," Votos dos Vereadores ",-1)),t("div",go,[(d(!0),k(Ie,null,Le(b.votes,m=>(d(),H(Be,{key:m.id||`vote-${m.proponent_id}-${m.vote}`,flat:"",bordered:"",class:_(["member-vote-card","mobile-member-card",$(m.vote)])},{default:E(()=>[w($e,{class:"member-card-section"},{default:E(()=>[t("div",fo,[w(ot,{size:"28px",color:"primary","text-color":"white",class:"member-avatar"},{default:E(()=>[m.proponent_photo?(d(),k("img",{key:0,src:T(m.proponent_photo),alt:m.proponent_name},null,8,mo)):(d(),k("span",ho,S(R(m.proponent_name)),1))]),_:2},1024),t("div",po,[t("div",wo,S(m.proponent_name),1),m.proponent_party?(d(),k("div",bo,S(m.proponent_party.abbreviation||m.proponent_party.name),1)):B("",!0)]),w(N,{name:c(m.vote),color:V(m.vote),size:"18px",class:"member-vote-icon"},null,8,["name","color"])])]),_:2},1024)]),_:2},1032,["class"]))),128))])])):b.type==="secret_voting"?(d(),k("div",yo,[w(N,{name:"lock",size:"28px",color:"blue"}),g[9]||(g[9]=t("div",{class:"secret-message-text"}," Vota\xE7\xE3o secreta - Os votos n\xE3o s\xE3o exibidos publicamente ",-1)),t("div",So," Total de votos: "+S(((A=b.votes)==null?void 0:A.length)||0),1)])):b.type!=="secret_voting"?(d(),k("div",xo,[w(N,{name:"info",size:"28px",color:"grey"}),g[10]||(g[10]=t("div",{class:"no-votes-text"}," Nenhum voto registrado ",-1))])):B("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])):B("",!0),n.value.length===0&&s.value.length===0?(d(),k("div",_o,[w(N,{name:"how_to_vote",size:"64px",color:"grey-5",class:"tw-mb-4"}),g[11]||(g[11]=t("div",{class:"empty-title"},"Aguardando Vota\xE7\xF5es",-1)),g[12]||(g[12]=t("div",{class:"empty-subtitle"}," Nenhuma vota\xE7\xE3o est\xE1 em andamento ou foi finalizada ainda. ",-1))])):B("",!0)])])]))}};var $o=ke(qo,[["__scopeId","data-v-57743baf"]]);let Io=0;const Ao=["click","keydown"],ko={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Io++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ro(e,o,a,n){const s=xe(Aa,Ze);if(s===Ze)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ze;const{proxy:i}=je(),u=G(null),l=G(null),c=G(null),V=v(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),$=v(()=>s.currentModel.value===e.name),R=v(()=>"q-tab relative-position self-stretch flex flex-center text-center"+($.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),T=v(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),U=v(()=>e.disable===!0||s.hasFocus.value===!0||$.value===!1&&s.hasActiveTab.value===!0?-1:e.tabindex||0);function f(m,x){var r;if(x!==!0&&(m==null?void 0:m.qAvoidFocus)!==!0&&((r=u.value)==null||r.focus()),e.disable===!0){(n==null?void 0:n.hasRouterLink.value)===!0&&ct(m);return}if(n===void 0){s.updateModel({name:e.name}),a("click",m);return}if(n.hasRouterLink.value===!0){const h=(q={})=>{let p;const z=q.to===void 0||Ka(q.to,e.to)===!0?s.avoidRouteWatcher=$a():null;return n.navigateToRouterLink(m,{...q,returnRouterError:!0}).catch(Q=>{p=Q}).then(Q=>{var C;if(z===s.avoidRouteWatcher&&(s.avoidRouteWatcher=!1,p===void 0&&(Q===void 0||((C=Q.message)==null?void 0:C.startsWith("Avoided redundant navigation"))===!0)&&s.updateModel({name:e.name})),q.returnRouterError===!0)return p!==void 0?Promise.reject(p):Q})};a("click",m,h),m.defaultPrevented!==!0&&h();return}a("click",m)}function g(m){Wa(m,[13,32])?f(m,!0):Ga(m)!==!0&&m.keyCode>=35&&m.keyCode<=40&&m.altKey!==!0&&m.metaKey!==!0&&s.onKbdNavigate(m.keyCode,i.$el)===!0&&ct(m),a("keydown",m)}function b(){const m=s.tabProps.value.narrowIndicator,x=[],r=X("div",{ref:c,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});e.icon!==void 0&&x.push(X(N,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&x.push(X("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&x.push(e.alertIcon!==void 0?X(N,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):X("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),m===!0&&x.push(r);const h=[X("div",{class:"q-focus-helper",tabindex:-1,ref:u}),X("div",{class:T.value},lt(o.default,x))];return m===!1&&h.push(r),h}const F={name:v(()=>e.name),rootRef:l,tabIndicatorRef:c,routeData:n};rt(()=>{s.unregisterTab(F)}),pt(()=>{s.registerTab(F)});function A(m,x){const r={ref:l,class:R.value,tabindex:U.value,role:"tab","aria-selected":$.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:f,onKeydown:g,...x};return Qe(X(m,r,b()),[[pa,V.value]])}return{renderTab:A,$tabs:s}}var zo=Oe({name:"QTab",props:ko,emits:Ao,setup(e,{slots:o,emit:a}){const{renderTab:n}=Ro(e,o,a);return()=>n("div")}});let Ea=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,Ea=e.scrollLeft>=0,e.remove()}function Vo(e,o,a){const n=a===!0?["left","right"]:["top","bottom"];return`absolute-${o===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const To=["left","center","right","justify"];var Co=Oe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>To.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:o,emit:a}){const{proxy:n}=je(),{$q:s}=n,{registerTick:i}=bt(),{registerTick:u}=bt(),{registerTick:l}=bt(),{registerTimeout:c,removeTimeout:V}=va(),{registerTimeout:$,removeTimeout:R}=va(),T=G(null),U=G(null),f=G(e.modelValue),g=G(!1),b=G(!0),F=G(!1),A=G(!1),m=[],x=G(0),r=G(!1);let h=null,q=null,p;const z=v(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Vo(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),Q=v(()=>{const j=x.value,K=f.value;for(let oe=0;oe<j;oe++)if(m[oe].name.value===K)return!0;return!1}),C=v(()=>`q-tabs__content--align-${g.value===!0?"left":A.value===!0?"justify":e.align}`),L=v(()=>`q-tabs row no-wrap items-center q-tabs--${g.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),te=v(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+C.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),se=v(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),le=v(()=>e.vertical!==!0&&s.lang.rtl===!0),re=v(()=>Ea===!1&&le.value===!0);ge(le,M),ge(()=>e.modelValue,j=>{J({name:j,setCurrent:!0,skipEmit:!0})}),ge(()=>e.outsideArrows,ae);function J({name:j,setCurrent:K,skipEmit:oe}){f.value!==j&&(oe!==!0&&e["onUpdate:modelValue"]!==void 0&&a("update:modelValue",j),(K===!0||e["onUpdate:modelValue"]===void 0)&&(ee(f.value,j),f.value=j))}function ae(){i(()=>{T.value&&Z({width:T.value.offsetWidth,height:T.value.offsetHeight})})}function Z(j){if(se.value===void 0||U.value===null)return;const K=j[se.value.container],oe=Math.min(U.value[se.value.scroll],Array.prototype.reduce.call(U.value.children,(pe,ce)=>pe+(ce[se.value.content]||0),0)),he=K>0&&oe>K;g.value=he,he===!0&&u(M),A.value=K<parseInt(e.breakpoint,10)}function ee(j,K){const oe=j!=null&&j!==""?m.find(pe=>pe.name.value===j):null,he=K!=null&&K!==""?m.find(pe=>pe.name.value===K):null;if(Je===!0)Je=!1;else if(oe&&he){const pe=oe.tabIndicatorRef.value,ce=he.tabIndicatorRef.value;h!==null&&(clearTimeout(h),h=null),pe.style.transition="none",pe.style.transform="none",ce.style.transition="none",ce.style.transform="none";const ue=pe.getBoundingClientRect(),Se=ce.getBoundingClientRect();ce.style.transform=e.vertical===!0?`translate3d(0,${ue.top-Se.top}px,0) scale3d(1,${Se.height?ue.height/Se.height:1},1)`:`translate3d(${ue.left-Se.left}px,0,0) scale3d(${Se.width?ue.width/Se.width:1},1,1)`,l(()=>{h=setTimeout(()=>{h=null,ce.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ce.style.transform="none"},70)})}he&&g.value===!0&&I(he.rootRef.value)}function I(j){const{left:K,width:oe,top:he,height:pe}=U.value.getBoundingClientRect(),ce=j.getBoundingClientRect();let ue=e.vertical===!0?ce.top-he:ce.left-K;if(ue<0){U.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ue),M();return}ue+=e.vertical===!0?ce.height-pe:ce.width-oe,ue>0&&(U.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ue),M())}function M(){const j=U.value;if(j===null)return;const K=j.getBoundingClientRect(),oe=e.vertical===!0?j.scrollTop:Math.abs(j.scrollLeft);le.value===!0?(b.value=Math.ceil(oe+K.width)<j.scrollWidth-1,F.value=oe>0):(b.value=oe>0,F.value=e.vertical===!0?Math.ceil(oe+K.height)<j.scrollHeight:Math.ceil(oe+K.width)<j.scrollWidth)}function O(j){q!==null&&clearInterval(q),q=setInterval(()=>{ne(j)===!0&&D()},5)}function W(){O(re.value===!0?Number.MAX_SAFE_INTEGER:0)}function P(){O(re.value===!0?0:Number.MAX_SAFE_INTEGER)}function D(){q!==null&&(clearInterval(q),q=null)}function Y(j,K){const oe=Array.prototype.filter.call(U.value.children,Se=>Se===K||Se.matches&&Se.matches(".q-tab.q-focusable")===!0),he=oe.length;if(he===0)return;if(j===36)return I(oe[0]),oe[0].focus(),!0;if(j===35)return I(oe[he-1]),oe[he-1].focus(),!0;const pe=j===(e.vertical===!0?38:37),ce=j===(e.vertical===!0?40:39),ue=pe===!0?-1:ce===!0?1:void 0;if(ue!==void 0){const Se=le.value===!0?-1:1,Pe=oe.indexOf(K)+ue*Se;return Pe>=0&&Pe<he&&(I(oe[Pe]),oe[Pe].focus({preventScroll:!0})),!0}}const ie=v(()=>re.value===!0?{get:j=>Math.abs(j.scrollLeft),set:(j,K)=>{j.scrollLeft=-K}}:e.vertical===!0?{get:j=>j.scrollTop,set:(j,K)=>{j.scrollTop=K}}:{get:j=>j.scrollLeft,set:(j,K)=>{j.scrollLeft=K}});function ne(j){const K=U.value,{get:oe,set:he}=ie.value;let pe=!1,ce=oe(K);const ue=j<ce?-1:1;return ce+=ue*5,ce<0?(pe=!0,ce=0):(ue===-1&&ce<=j||ue===1&&ce>=j)&&(pe=!0,ce=j),he(K,ce),M(),pe}function fe(j,K){for(const oe in j)if(j[oe]!==K[oe])return!1;return!0}function be(){let j=null,K={matchedLen:0,queryDiff:9999,hrefLen:0};const oe=m.filter(ue=>{var Se;return((Se=ue.routeData)==null?void 0:Se.hasRouterLink.value)===!0}),{hash:he,query:pe}=n.$route,ce=Object.keys(pe).length;for(const ue of oe){const Se=ue.routeData.exact.value===!0;if(ue.routeData[Se===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Pe,query:Ge,matched:ut,href:dt}=ue.routeData.resolvedLink.value,Ke=Object.keys(Ge).length;if(Se===!0){if(Pe!==he||Ke!==ce||fe(pe,Ge)===!1)continue;j=ue.name.value;break}if(Pe!==""&&Pe!==he||Ke!==0&&fe(Ge,pe)===!1)continue;const De={matchedLen:ut.length,queryDiff:ce-Ke,hrefLen:dt.length-Pe.length};if(De.matchedLen>K.matchedLen){j=ue.name.value,K=De;continue}else if(De.matchedLen!==K.matchedLen)continue;if(De.queryDiff<K.queryDiff)j=ue.name.value,K=De;else if(De.queryDiff!==K.queryDiff)continue;De.hrefLen>K.hrefLen&&(j=ue.name.value,K=De)}if(j===null&&m.some(ue=>ue.routeData===void 0&&ue.name.value===f.value)===!0){Je=!1;return}J({name:j,setCurrent:!0})}function Re(j){if(V(),r.value!==!0&&T.value!==null&&j.target&&typeof j.target.closest=="function"){const K=j.target.closest(".q-tab");K&&T.value.contains(K)===!0&&(r.value=!0,g.value===!0&&I(K))}}function ze(){c(()=>{r.value=!1},30)}function de(){_e.avoidRouteWatcher===!1?$(be):R()}function Ve(){if(p===void 0){const j=ge(()=>n.$route.fullPath,de);p=()=>{j(),p=void 0}}}function Te(j){m.push(j),x.value++,ae(),j.routeData===void 0||n.$route===void 0?$(()=>{if(g.value===!0){const K=f.value,oe=K!=null&&K!==""?m.find(he=>he.name.value===K):null;oe&&I(oe.rootRef.value)}}):(Ve(),j.routeData.hasRouterLink.value===!0&&de())}function Ce(j){m.splice(m.indexOf(j),1),x.value--,ae(),p!==void 0&&j.routeData!==void 0&&(m.every(K=>K.routeData===void 0)===!0&&p(),de())}const _e={currentModel:f,tabProps:z,hasFocus:r,hasActiveTab:Q,registerTab:Te,unregisterTab:Ce,verifyRouteModel:de,updateModel:J,onKbdNavigate:Y,avoidRouteWatcher:!1};Fe(Aa,_e);function at(){h!==null&&clearTimeout(h),D(),p==null||p()}let st,Je;return rt(at),Ya(()=>{st=p!==void 0,at()}),Xa(()=>{st===!0&&(Ve(),Je=!0,de()),ae()}),()=>X("div",{ref:T,class:L.value,role:"tablist",onFocusin:Re,onFocusout:ze},[X(ka,{onResize:Z}),X("div",{ref:U,class:te.value,onScroll:M},It(o.default)),X(N,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(b.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||s.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:D,onMouseleavePassive:D,onTouchendPassive:D}),X(N,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||s.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:P,onTouchstartPassive:P,onMouseupPassive:D,onMouseleavePassive:D,onTouchendPassive:D})])}}),Lo=Oe({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:o,emit:a}){const{proxy:{$q:n}}=je(),s=xe(es,Ze);if(s===Ze)return console.error("QFooter needs to be child of QLayout"),Ze;const i=G(parseInt(e.heightHint,10)),u=G(!0),l=G(Za.value===!0||s.isContainer.value===!0?0:window.innerHeight),c=v(()=>e.reveal===!0||s.view.value.indexOf("F")!==-1||n.platform.is.ios&&s.isContainer.value===!0),V=v(()=>s.isContainer.value===!0?s.containerHeight.value:l.value),$=v(()=>{if(e.modelValue!==!0)return 0;if(c.value===!0)return u.value===!0?i.value:0;const r=s.scroll.value.position+V.value+i.value-s.height.value;return r>0?r:0}),R=v(()=>e.modelValue!==!0||c.value===!0&&u.value!==!0),T=v(()=>e.modelValue===!0&&R.value===!0&&e.reveal===!0),U=v(()=>"q-footer q-layout__section--marginal "+(c.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(R.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(c.value!==!0?" hidden":""):"")),f=v(()=>{const r=s.rows.value.bottom,h={};return r[0]==="l"&&s.left.space===!0&&(h[n.lang.rtl===!0?"right":"left"]=`${s.left.size}px`),r[2]==="r"&&s.right.space===!0&&(h[n.lang.rtl===!0?"left":"right"]=`${s.right.size}px`),h});function g(r,h){s.update("footer",r,h)}function b(r,h){r.value!==h&&(r.value=h)}function F({height:r}){b(i,r),g("size",r)}function A(){if(e.reveal!==!0)return;const{direction:r,position:h,inflectionPoint:q}=s.scroll.value;b(u,r==="up"||h-q<100||s.height.value-V.value-h-i.value<300)}function m(r){T.value===!0&&b(u,!0),a("focusin",r)}ge(()=>e.modelValue,r=>{g("space",r),b(u,!0),s.animate()}),ge($,r=>{g("offset",r)}),ge(()=>e.reveal,r=>{r===!1&&b(u,e.modelValue)}),ge(u,r=>{s.animate(),a("reveal",r)}),ge([i,s.scroll,s.height],A),ge(()=>n.screen.height,r=>{s.isContainer.value!==!0&&b(l,r)});const x={};return s.instances.footer=x,e.modelValue===!0&&g("size",i.value),g("space",e.modelValue),g("offset",$.value),rt(()=>{s.instances.footer===x&&(s.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const r=lt(o.default,[X(ka,{debounce:0,onResize:F})]);return e.elevated===!0&&r.push(X("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),X("footer",{class:U.value,style:f.value,onFocusin:m},r)}}});const Po={__name:"MobileBottomNavigation",props:{modelValue:{type:String,default:"home"},tabs:{type:Array,required:!0}},emits:["update:model-value","tab-change"],setup(e,{emit:o}){const a=e,n=o,s=v({get:()=>a.modelValue,set:u=>n("update:model-value",u)});function i(u){s.value=u,n("tab-change",u)}return(u,l)=>(d(),H(Lo,{class:"mobile-bottom-nav",elevated:""},{default:E(()=>[w(Co,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=c=>s.value=c),i],class:"bottom-nav-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:E(()=>[(d(!0),k(Ie,null,Le(e.tabs,c=>(d(),H(zo,{key:c.name,name:c.name,icon:c.icon,label:c.label,class:_(["bottom-nav-tab",{"tab-active":s.value===c.name}])},null,8,["name","icon","label","class"]))),128))]),_:1},8,["modelValue"])]),_:1}))}};var Fo=ke(Po,[["__scopeId","data-v-a84bfa88"]]);const Eo={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},Mo={class:"tw-mb-3 md:tw-mb-8"},Do={class:"tw-mb-2 md:tw-mb-4"},Bo={class:"tw-mb-3 md:tw-mb-6"},Uo={key:0,class:"tw-mb-4 md:tw-mb-8"},Oo={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},No={class:"tw-mb-4 md:tw-mb-8"},Qo={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},jo={key:0},Jo={key:1},Ho={key:2},Wo={key:1,class:"tw-mt-3 md:tw-mt-6"},Go={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Ko={__name:"SpeechFullscreenModal",props:{modelValue:{type:Boolean,default:!1},speech:{type:Object,default:null},remainingTime:{type:Number,default:0},expedientType:{type:String,default:"Expediente"}},emits:["update:modelValue"],setup(e,{emit:o}){const a=e,n=o,s=v({get:()=>a.modelValue,set:L=>n("update:modelValue",L)}),i=v(()=>{var L;return((L=a.speech)==null?void 0:L.status)==="speaking"}),u=v(()=>{var L;return((L=a.speech)==null?void 0:L.status)==="paused"}),l=v(()=>{var L;return((L=a.speech)==null?void 0:L.status)==="finished"}),c=v(()=>i.value?"mic":u.value?"pause_circle":l.value?"check_circle":"mic_off"),V=v(()=>(i.value||u.value,"white")),$=v(()=>i.value?"Voc\xEA est\xE1 falando":u.value?"Fala pausada":"Fala finalizada"),R=v(()=>i.value?"Sua fala est\xE1 em andamento":u.value?"Aguarde a retomada pelo controle":"Sua fala foi finalizada"),T=v(()=>i.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":u.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":l.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),U=v(()=>i.value?"tw-bg-green-300":u.value?"tw-bg-yellow-300":"tw-bg-gray-300"),f=v(()=>a.speech?(a.speech.allocated_minutes||0)+(a.speech.additional_minutes||0):0),g=v(()=>{if(!a.speech)return 0;let L=a.speech.used_seconds||0;return i.value&&a.speech.started_at&&(L+=Math.floor((new Date-new Date(a.speech.started_at))/1e3)),Math.floor(L/60)}),b=v(()=>{var L;return((L=a.speech)==null?void 0:L.additional_minutes)||0}),F=v(()=>{if(!a.speech||f.value===0)return 0;const L=f.value*60;let te=a.speech.used_seconds||0;return i.value&&a.speech.started_at&&(te+=Math.floor((new Date-new Date(a.speech.started_at))/1e3)),Math.min(100,te/L*100)}),A=v(()=>{if(!a.speech)return 0;const L=a.speech.used_seconds||0;return Math.floor(L/60)}),m=v(()=>a.speech?(a.speech.used_seconds||0)%60:0),x=v(()=>a.remainingTime>0&&a.remainingTime<=15),r=v(()=>a.remainingTime<=0),h=v(()=>r.value?"tw-bg-red-600 tw-bg-opacity-90":x.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),q=v(()=>(r.value||x.value,"tw-text-white")),p=v(()=>r.value||x.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),z=v(()=>r.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":x.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");function Q(L){if(L<=0)return"0:00";const te=Math.floor(L/60),se=L%60;return`${te}:${se.toString().padStart(2,"0")}`}let C=null;return ge(()=>[l.value,s.value],([L,te])=>{C&&(clearTimeout(C),C=null),L&&te&&(C=setTimeout(()=>{s.value&&l.value&&(s.value=!1),C=null},3e3))},{immediate:!0}),ge(()=>s.value,L=>{!L&&C&&(clearTimeout(C),C=null)}),ht(()=>{C&&clearTimeout(C)}),(L,te)=>(d(),H(tt,{modelValue:s.value,"onUpdate:modelValue":te[0]||(te[0]=se=>s.value=se),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:E(()=>[t("div",{class:_(["fullscreen tw-flex tw-items-center tw-justify-center",T.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[t("div",Eo,[t("div",Mo,[w(N,{name:c.value,color:V.value,size:L.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),t("div",Do,[w(At,{label:a.expedientType,color:"white","text-color":"primary",size:L.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["label","size"])]),t("div",Bo,[t("h1",{class:_([L.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},S($.value),3),t("p",{class:_([L.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},S(R.value),3)]),l.value?B("",!0):(d(),k("div",Uo,[t("div",{class:_([L.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",h.value])},[t("div",{class:_([L.$q.screen.lt.md?"text-body2":"text-h5",p.value,"tw-mb-2"])},S(z.value),3),t("div",{class:_([L.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",q.value,r.value?"tw-animate-pulse":""])},S(Q(a.remainingTime)),3)],2)])),t("div",Oo,[t("div",{class:_([L.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),t("div",{class:_([L.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},S(f.value)+" min ",3)],2),t("div",{class:_([L.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),t("div",{class:_([L.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},S(g.value)+" min ",3)],2),b.value>0?(d(),k("div",{key:0,class:_([L.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),t("div",{class:_([L.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+S(b.value)+" min ",3)],2)):B("",!0)]),t("div",No,[t("div",Qo,[t("div",{class:_(["tw-h-full tw-transition-all tw-duration-1000",U.value]),style:mt({width:F.value+"%"})},null,6)]),t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},S(F.value.toFixed(0))+"% do tempo utilizado ",3)]),t("div",{class:_([L.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[w(N,{name:"info",size:"20px",class:"tw-mr-2"}),i.value?(d(),k("span",jo," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):u.value?(d(),k("span",Jo," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):l.value?(d(),k("span",Ho," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):B("",!0)],2),l.value?(d(),k("div",Wo,[t("div",{class:_([L.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[t("div",{class:_([L.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),t("div",Go,[t("div",null,[t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),t("div",{class:_([L.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},S(f.value)+" min ",3)]),t("div",null,[t("div",{class:_([L.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),t("div",{class:_([L.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},S(A.value)+" min "+S(m.value)+" s ",3)])])],2)])):B("",!0)])],2)]),_:1},8,["modelValue"]))}};var fa=ke(Ko,[["__scopeId","data-v-5bd5520b"]]);const Yo={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Xo={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},Zo={class:"tw-text-center"},el={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},tl={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},al={class:"text-body2 tw-text-white tw-mb-0"},sl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4 tw-relative"},nl={class:"tw-max-w-4xl tw-mx-auto"},il={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ol={class:"tw-text-center"},ll={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},rl={class:"text-body2 tw-text-gray-700"},ul={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},dl={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},cl={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},vl={class:"tw-flex tw-flex-wrap tw-gap-2"},gl={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},fl={class:"tw-flex tw-flex-wrap tw-gap-2"},ml={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},hl={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},pl={class:"tw-flex tw-items-center tw-gap-3"},wl=["src","alt"],bl={key:1},yl={class:"tw-flex-1 tw-min-w-0"},Sl={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},xl={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},_l={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},ql={__name:"ReadingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},reading:{type:Object,default:null},agendaId:{type:Number,default:null},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null}},emits:["update:modelValue","request-registered"],setup(e,{emit:o}){const a=e,n=o,s=Ae(),i=Ne(),u=G(!1),l=G(!1),c=xe("voiceRequest",null),V=v({get:()=>a.modelValue,set:m=>n("update:modelValue",m)}),$=v(()=>a.reading?a.reading.type==="reading"?"menu_book":a.reading.type==="secret_voting"?"lock":"how_to_vote":"menu_book"),R=v(()=>a.reading?a.reading.type==="reading"?"Leitura em Andamento":a.reading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":"Leitura em Andamento"),T=v(()=>a.reading?a.reading.type==="reading"?"A proposi\xE7\xE3o est\xE1 sendo lida":a.reading.type==="secret_voting"?"A vota\xE7\xE3o secreta est\xE1 em andamento":"A vota\xE7\xE3o est\xE1 em andamento":"Aguarde as informa\xE7\xF5es da proposi\xE7\xE3o");function U(m){if(!m)return"";const x=m.split(" ");return x.length>=2?(x[0][0]+x[x.length-1][0]).toUpperCase():m.substring(0,2).toUpperCase()}function f(m){m&&window.open(m,"_blank")}function g(){var x,r;if(!((r=(x=a.reading)==null?void 0:x.proposition)!=null&&r.protocol_document))return null;const m=a.reading.proposition.protocol_document;return m.signed_file_url||m.file_url||null}function b(){var x,r;return(r=(x=a.reading)==null?void 0:x.proposition)!=null&&r.protocol_document?a.reading.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function F(){var x,r,h,q,p,z;if(!a.agendaId)return;const m=(x=s.user)==null?void 0:x.proponent_id;if(!m){Ue.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}l.value=!0;try{if((r=(await me.post(`/api/pauta/${a.agendaId}/voice-request/register`,{proponent_id:m,requested:!0})).data)!=null&&r.success){Ue.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const C=Me.getItem("unit_id_num");C&&i.isConnected&&i.emit("voice-request-registered",{unitId:parseInt(C),agendaId:parseInt(a.agendaId),proponentId:parseInt(m),proponentName:((h=s.user)==null?void 0:h.name)||((q=s.user)==null?void 0:q.first_name)||"Vereador",source:"vereador"}),n("request-registered"),c!=null&&c.loadStatus&&await c.loadStatus(!0),await new Promise(L=>setTimeout(L,500))}}catch(Q){Ue.create({type:"negative",color:"blue-6",message:((z=(p=Q.response)==null?void 0:p.data)==null?void 0:z.message)||"Erro ao solicitar voz"})}finally{l.value=!1,u.value=!1}}function A(){(c==null?void 0:c.showSpeechModal)!==void 0&&(c.showSpeechModal.value=!0)}return(m,x)=>(d(),H(tt,{modelValue:V.value,"onUpdate:modelValue":x[3]||(x[3]=r=>V.value=r),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:E(()=>{var r,h,q,p,z,Q,C,L,te,se,le,re,J,ae;return[t("div",Yo,[t("div",Xo,[t("div",Zo,[t("div",el,[w(N,{name:$.value,color:"gray-700",size:"32px"},null,8,["name"]),t("h1",tl,S(R.value),1)]),t("p",al,S(T.value),1)])]),t("div",sl,[t("div",nl,[(r=e.reading)!=null&&r.proposition?(d(),k("div",il,[t("div",ol,[t("div",ll,S((h=e.reading.proposition.species)==null?void 0:h.name)+" "+S(e.reading.proposition.number)+"/"+S(e.reading.proposition.year),1),t("div",rl,S(e.reading.proposition.title||e.reading.proposition.ementa||"N/A"),1)])])):B("",!0),(p=(q=e.reading)==null?void 0:q.proposition)!=null&&p.description?(d(),k("div",ul,[x[4]||(x[4]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),t("div",dl,S(e.reading.proposition.description),1)])):B("",!0),((Q=(z=e.reading)==null?void 0:z.proposition)==null?void 0:Q.documents)&&e.reading.proposition.documents.length>0?(d(),k("div",cl,[x[5]||(x[5]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",vl,[(d(!0),k(Ie,null,Le(e.reading.proposition.documents,Z=>(d(),H(qe,{key:Z.id,href:Z.file_url||Z.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:Z.title||Z.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((L=(C=e.reading)==null?void 0:C.proposition)==null?void 0:L.file_url)||((se=(te=e.reading)==null?void 0:te.proposition)==null?void 0:se.protocol_document)?(d(),k("div",gl,[x[6]||(x[6]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",fl,[e.reading.proposition.file_url?(d(),H(qe,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:x[0]||(x[0]=Z=>f(e.reading.proposition.file_url))})):B("",!0),g()?(d(),H(qe,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:b(),size:"sm",onClick:x[1]||(x[1]=Z=>f(g()))},null,8,["label"])):B("",!0)])])):B("",!0),((re=(le=e.reading)==null?void 0:le.proposition)==null?void 0:re.proponents)&&e.reading.proposition.proponents.length>0?(d(),k("div",ml,[x[7]||(x[7]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),t("div",hl,[(d(!0),k(Ie,null,Le(e.reading.proposition.proponents,Z=>(d(),k("div",{key:Z.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[t("div",pl,[w(ot,{size:"40px",color:"primary","text-color":"white"},{default:E(()=>[Z.avatar?(d(),k("img",{key:0,src:Z.avatar,alt:Z.name},null,8,wl)):(d(),k("span",bl,S(U(Z.name)),1))]),_:2},1024),t("div",yl,[t("div",Sl,S(Z.name),1),Z.party?(d(),k("div",xl,S(Z.party),1)):B("",!0)])])]))),128))])])):(J=e.reading)!=null&&J.proposition?B("",!0):(d(),k("div",_l,[w(N,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),x[8]||(x[8]=t("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da leitura ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&((ae=e.reading)==null?void 0:ae.type)==="reading"?(d(),H(Fa,{key:0,modelValue:u.value,"onUpdate:modelValue":x[2]||(x[2]=Z=>u.value=Z),"vertical-actions-align":"right",color:e.hasRequest?"info":"positive",icon:e.hasRequest?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:E(()=>{var Z;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(d(),H(et,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((Z=e.currentSpeech)==null?void 0:Z.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:l.value,onClick:F},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(d(),H(et,{key:1,color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(d(),H(et,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:A})):B("",!0)]}),_:1},8,["modelValue","color","icon"])):B("",!0)])]}),_:1},8,["modelValue"]))}};var $l=ke(ql,[["__scopeId","data-v-75716dae"]]);const Il={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Al={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},kl={class:"tw-text-center"},Rl={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},zl={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},Vl={class:"text-body2 tw-text-white tw-mb-0"},Tl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4"},Cl={class:"tw-max-w-4xl tw-mx-auto"},Ll={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Pl={class:"tw-text-center tw-mb-3"},Fl={class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"},El={key:0,class:"tw-flex tw-justify-center"},Ml={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200 tw-min-w-[120px]"},Dl={class:"tw-text-center tw-pr-2"},Bl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Ul={key:1,class:"tw-grid tw-grid-cols-4 tw-gap-2"},Ol={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-green-50 tw-rounded-lg tw-border tw-border-green-200"},Nl={class:"tw-text-center"},Ql={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},jl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-red-50 tw-rounded-lg tw-border tw-border-red-200"},Jl={class:"tw-text-center"},Hl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Wl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-orange-50 tw-rounded-lg tw-border tw-border-orange-200"},Gl={class:"tw-text-center"},Kl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Yl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200"},Xl={class:"tw-text-center"},Zl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},er={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},tr={class:"tw-text-center"},ar={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},sr={class:"text-body2 tw-text-gray-700"},nr={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ir={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},or={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},lr={class:"tw-flex tw-flex-wrap tw-gap-2"},rr={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ur={class:"tw-flex tw-flex-wrap tw-gap-2"},dr={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},cr={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},vr={class:"tw-flex tw-items-center tw-gap-3"},gr=["src","alt"],fr={key:1},mr={class:"tw-flex-1 tw-min-w-0"},hr={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},pr={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},wr={key:6,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},br={key:0,class:"tw-flex-shrink-0 tw-bg-white tw-p-4 tw-border-t tw-border-gray-200 tw-shadow-md"},yr={class:"tw-max-w-2xl tw-mx-auto"},Sr={class:"text-h6 tw-font-bold tw-text-gray-800 tw-mb-2 tw-text-center"},xr={key:0},_r={key:1},qr={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-3"},$r={__name:"VotingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},voting:{type:Object,default:null},agendaId:{type:Number,required:!0}},emits:["update:modelValue","vote-registered"],setup(e,{emit:o}){const a=e,n=o,s=Ae(),i=Ne(),u=G(!1),l=G(!1),c=G(null),V=v({get:()=>a.modelValue,set:p=>n("update:modelValue",p)});ge(()=>a.modelValue,p=>{p||(l.value=!1,c.value=null,u.value=!1)}),ge(()=>{var p;return(p=a.voting)==null?void 0:p.id},(p,z)=>{p!==z&&z!==void 0&&(l.value=!1,c.value=null,u.value=!1)}),ge(()=>a.voting,p=>{var z;console.log("[VotingFullscreenModal] Voting atualizado:",{voting:p,hasId:!!(p!=null&&p.id),hasVotes:!!(p!=null&&p.votes),votesCount:(z=p==null?void 0:p.votes)==null?void 0:z.length})},{immediate:!0,deep:!0});const $=v(()=>{var Q,C,L,te,se;const p=(Q=s.user)==null?void 0:Q.proponent_id;if(!((C=a.voting)!=null&&C.votes)||!p)return console.log("[VotingFullscreenModal] myVote computed:",{hasVoting:!!a.voting,hasVotes:!!((L=a.voting)!=null&&L.votes),votesLength:(se=(te=a.voting)==null?void 0:te.votes)==null?void 0:se.length,proponentId:p}),null;const z=a.voting.votes.find(le=>le.proponent_id===parseInt(p));return(z==null?void 0:z.vote)||null}),R=v(()=>$.value!==null),T=v(()=>{const p=$.value||(l.value?c.value:null);return p?p==="favor"?"A Favor":p==="against"?"Contra":"Absten\xE7\xE3o":""});v(()=>{const p=$.value||(l.value?c.value:null);return p?p==="favor"?"thumb_up":p==="against"?"thumb_down":"remove_circle":"how_to_vote"}),v(()=>{const p=$.value||(l.value?c.value:null);return p?p==="favor"?"green":p==="against"?"red":"orange":"primary"});const U=v(()=>{const p=$.value||(l.value?c.value:null);return p?p==="favor"?"tw-text-green-600":p==="against"?"tw-text-red-600":"tw-text-orange-600":""}),f=v(()=>{var p;return((p=a.voting)==null?void 0:p.type)==="secret_voting"}),g=v(()=>f.value?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento"),b=v(()=>f.value?"Vota\xE7\xE3o secreta - Seu voto ser\xE1 mantido em sigilo":"Registre seu voto"),F=v(()=>f.value?"lock":"how_to_vote");v(()=>f.value?"purple":"deep-purple");const A=v(()=>{var z;if(!((z=a.voting)!=null&&z.votes))return{favor:0,against:0,abstain:0,total:0};const p=a.voting.votes;return{favor:p.filter(Q=>Q.vote==="favor").length,against:p.filter(Q=>Q.vote==="against").length,abstain:p.filter(Q=>Q.vote==="abstain").length,total:p.length}});function m(p){if(!p)return"";const z=p.split(" ");return z.length>=2?(z[0][0]+z[z.length-1][0]).toUpperCase():p.substring(0,2).toUpperCase()}function x(p){p&&window.open(p,"_blank")}function r(){var z,Q;if(!((Q=(z=a.voting)==null?void 0:z.proposition)!=null&&Q.protocol_document))return null;const p=a.voting.proposition.protocol_document;return p.signed_file_url||p.file_url||null}function h(){var z,Q;return(Q=(z=a.voting)==null?void 0:z.proposition)!=null&&Q.protocol_document?a.voting.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function q(p){var Q,C,L,te,se,le,re;const z=(Q=s.user)==null?void 0:Q.proponent_id;if(!((C=a.voting)!=null&&C.id)||!z){Ue.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}if(a.voting.type==="reading"){Ue.create({type:"negative",color:"blue-6",message:"N\xE3o \xE9 poss\xEDvel votar em uma leitura. Apenas vota\xE7\xF5es permitem votos."});return}if(a.voting.type!=="voting"&&a.voting.type!=="secret_voting"){Ue.create({type:"negative",color:"blue-6",message:"Tipo de vota\xE7\xE3o inv\xE1lido."});return}u.value=!0;try{const J=await me.post(`/pauta/${a.agendaId}/voting/reading/${a.voting.id}/vote`,{proponent_id:parseInt(z),vote:p});if((L=J==null?void 0:J.data)!=null&&L.success){l.value=!0,c.value=p,u.value=!1;const ae=Me.getItem("unit_id_num");ae&&i.isConnected&&i.emit("voting-vote-registered",{unitId:parseInt(ae),agendaId:a.agendaId,readingId:a.voting.id,proponentId:parseInt(z),vote:p,timestamp:new Date().toISOString()}),n("vote-registered")}}catch(J){console.error("[VotingFullscreenModal] Erro ao votar:",J);const ae=((se=(te=J.response)==null?void 0:te.data)==null?void 0:se.message)||((re=(le=J.response)==null?void 0:le.data)==null?void 0:re.error)||"Erro ao registrar voto. Tente novamente.";Ue.create({type:"negative",color:"blue-6",message:ae,position:"top",timeout:5e3}),l.value=!1,c.value=null,u.value=!1}}return(p,z)=>(d(),H(tt,{modelValue:V.value,"onUpdate:modelValue":z[5]||(z[5]=Q=>V.value=Q),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:E(()=>{var Q,C,L,te,se,le,re,J,ae,Z,ee,I,M;return[t("div",Il,[t("div",Al,[t("div",kl,[t("div",Rl,[w(N,{name:F.value,color:"white",size:"32px"},null,8,["name"]),t("h1",zl,S(g.value),1)]),t("p",Vl,S(b.value),1)])]),t("div",Tl,[t("div",Cl,[e.voting&&e.voting.votes&&e.voting.votes.length>0?(d(),k("div",Ll,[t("div",Pl,[t("div",Fl,[w(N,{name:"people",color:"primary",size:"20px",class:"tw-pr-2"}),we(" "+S((f.value,"Votos Registrados")),1)]),f.value?(d(),k("div",El,[t("div",Ml,[t("div",Dl,[t("div",Bl,S(A.value.total),1)]),z[6]||(z[6]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Votaram ",-1))])])):(d(),k("div",Ul,[t("div",Ol,[w(N,{name:"thumb_up",color:"green",size:"20px"}),t("div",Nl,[t("div",Ql,S(A.value.favor),1),z[7]||(z[7]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," A Favor ",-1))])]),t("div",jl,[w(N,{name:"thumb_down",color:"red",size:"20px"}),t("div",Jl,[t("div",Hl,S(A.value.against),1),z[8]||(z[8]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Contra ",-1))])]),t("div",Wl,[w(N,{name:"remove_circle",color:"orange",size:"20px"}),t("div",Gl,[t("div",Kl,S(A.value.abstain),1),z[9]||(z[9]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Absten\xE7\xF5es ",-1))])]),t("div",Yl,[w(N,{name:"people",color:"primary",size:"20px"}),t("div",Xl,[t("div",Zl,S(A.value.total),1),z[10]||(z[10]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Total ",-1))])])]))])])):B("",!0),(Q=e.voting)!=null&&Q.proposition?(d(),k("div",er,[t("div",tr,[t("div",ar,S((C=e.voting.proposition.species)==null?void 0:C.name)+" "+S(e.voting.proposition.number)+"/"+S(e.voting.proposition.year),1),t("div",sr,S(e.voting.proposition.title||e.voting.proposition.ementa||"N/A"),1)])])):B("",!0),(te=(L=e.voting)==null?void 0:L.proposition)!=null&&te.description?(d(),k("div",nr,[z[11]||(z[11]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),t("div",ir,S(e.voting.proposition.description),1)])):B("",!0),((le=(se=e.voting)==null?void 0:se.proposition)==null?void 0:le.documents)&&e.voting.proposition.documents.length>0?(d(),k("div",or,[z[12]||(z[12]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",lr,[(d(!0),k(Ie,null,Le(e.voting.proposition.documents,O=>(d(),H(qe,{key:O.id,href:O.file_url||O.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:O.title||O.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((J=(re=e.voting)==null?void 0:re.proposition)==null?void 0:J.file_url)||((Z=(ae=e.voting)==null?void 0:ae.proposition)==null?void 0:Z.protocol_document)?(d(),k("div",rr,[z[13]||(z[13]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",ur,[e.voting.proposition.file_url?(d(),H(qe,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:z[0]||(z[0]=O=>x(e.voting.proposition.file_url))})):B("",!0),r()?(d(),H(qe,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:h(),size:"sm",onClick:z[1]||(z[1]=O=>x(r()))},null,8,["label"])):B("",!0)])])):B("",!0),((I=(ee=e.voting)==null?void 0:ee.proposition)==null?void 0:I.proponents)&&e.voting.proposition.proponents.length>0?(d(),k("div",dr,[z[14]||(z[14]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),t("div",cr,[(d(!0),k(Ie,null,Le(e.voting.proposition.proponents,O=>(d(),k("div",{key:O.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[t("div",vr,[w(ot,{size:"40px",color:"primary","text-color":"white"},{default:E(()=>[O.avatar?(d(),k("img",{key:0,src:O.avatar,alt:O.name},null,8,gr)):(d(),k("span",fr,S(m(O.name)),1))]),_:2},1024),t("div",mr,[t("div",hr,S(O.name),1),O.party?(d(),k("div",pr,S(O.party),1)):B("",!0)])])]))),128))])])):(M=e.voting)!=null&&M.proposition?B("",!0):(d(),k("div",wr,[w(N,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),z[15]||(z[15]=t("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da vota\xE7\xE3o ser\xE3o exibidas aqui ",-1))]))])]),e.voting&&e.voting.id&&e.voting.type!=="reading"?(d(),k("div",br,[t("div",yr,[t("div",Sr,[R.value?(d(),k("span",xr,[z[16]||(z[16]=we("Seu voto atual: ",-1)),t("strong",{class:_(U.value)},S(T.value),3)])):(d(),k("span",_r,"Como deseja votar?"))]),u.value?(d(),k("div",qr,[w(ba,{color:"primary",size:"24px"}),z[17]||(z[17]=t("span",{class:"text-body2 tw-text-gray-600"},"Aguarde, processando voto...",-1))])):B("",!0),t("div",{class:_(["tw-grid tw-grid-cols-3 tw-gap-2",{"tw-opacity-50":u.value}])},[w(qe,{color:"green",outline:$.value!=="favor",size:"md",icon:"thumb_up",label:"A Favor",class:_(["tw-rounded-md",$.value==="favor"?"vote-selected":""]),disable:u.value,loading:u.value&&c.value==="favor",onClick:z[2]||(z[2]=O=>q("favor"))},null,8,["outline","class","disable","loading"]),w(qe,{color:"red",outline:$.value!=="against",size:"md",icon:"thumb_down",label:"Contra",class:_(["tw-rounded-md",$.value==="against"?"vote-selected":""]),disable:u.value,loading:u.value&&c.value==="against",onClick:z[3]||(z[3]=O=>q("against"))},null,8,["outline","class","disable","loading"]),w(qe,{color:"orange",outline:$.value!=="abstain",size:"md",icon:"remove_circle",label:"Absten\xE7\xE3o",class:_(["tw-py-2 tw-rounded-md",$.value==="abstain"?"vote-selected":""]),disable:u.value,loading:u.value&&c.value==="abstain",onClick:z[4]||(z[4]=O=>q("abstain"))},null,8,["outline","class","disable","loading"])],2)])])):B("",!0)])]}),_:1},8,["modelValue"]))}};var Ir=ke($r,[["__scopeId","data-v-0d29f2ee"]]);const Ar={class:"tw-flex tw-flex-col"},kr={class:"tw-text-xs tw-text-gray-300"},Rr={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},zr={class:"tw-flex tw-items-center tw-justify-between tw-mb-3"},Vr={class:"tw-flex tw-items-center tw-gap-3 tw-flex-1"},Tr=["src","alt"],Cr={class:"tw-flex-1"},Lr={class:"tw-font-semibold tw-text-base"},Pr={class:"tw-text-sm tw-text-gray-600"},Fr={class:"tw-flex tw-flex-col tw-gap-1"},Er={class:"text-caption"},Mr={class:"tw-flex tw-flex-col tw-gap-1"},Dr={class:"text-caption"},Br={key:0,class:"text-caption tw-text-gray-600"},Ur={key:3,class:"tw-text-center tw-py-2 tw-text-gray-500 text-caption"},ma={__name:"SpeechControlListModal",props:{modelValue:{type:Boolean,default:!1},agendaId:{type:[String,Number],required:!0},expedientType:{type:String,default:"small"}},emits:["update:modelValue"],setup(e,{emit:o}){const a=e,n=o,s=Ne(),i=kt(),u=v({get:()=>a.modelValue,set:M=>n("update:modelValue",M)}),l=v(()=>i.getExpedientName(a.expedientType)),c=v(()=>a.expedientType==="small"?"secondary":"orange"),V=v(()=>a.expedientType==="small"?"small-expedient":"large-expedient"),$=G(!1),R=G(!1),T=G([]),U=G([]),f=G(0);let g=null;const b=v(()=>U.value.find(M=>M.status==="speaking")),F=v(()=>U.value.find(M=>M.status==="paused"));function A(M){return U.value.find(O=>O.proponent_id===M)}function m(M){const O=A(M);return(O==null?void 0:O.status)||"pending"}function x(M){f.value;const O=A(M);if(!O)return 0;let W=O.used_seconds||0;if(O.status==="speaking"&&O.started_at){const ie=new Date(O.started_at),ne=new Date;W+=Math.floor((ne-ie)/1e3)}const P=O.allocated_minutes||0,D=O.additional_minutes||0,Y=(P+D)*60;return Math.max(0,Y-W)}function r(M){if(M<=0)return"0:00";const O=Math.floor(M/60),W=M%60;return`${O}:${W.toString().padStart(2,"0")}`}function h(M){if(!M)return"";try{return new Date(M).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return M}}function q(M){const O=A(M);if(!O||O.status!=="finished")return"0 min 0 s";const W=O.used_seconds||0,P=Math.floor(W/60),D=W%60;return`${P} min ${D} s`}function p(M){const O=A(M);return!O||O.status!=="finished"?null:O.finished_at||null}function z(M){if(!M)return null;if(M.startsWith("http://")||M.startsWith("https://"))return M;const O=me.defaults.baseURL||"http://127.0.0.1:8000",W=M.startsWith("/")?M:"/"+M;return`${O}${W}`}function Q(M){M.target.style.display="none"}async function C(){var M,O;try{const W=await me.get(`/pauta/${a.agendaId}/${V.value}/members`),P=((O=(M=W==null?void 0:W.data)==null?void 0:M.data)==null?void 0:O.members)||[];T.value=P.filter(D=>D.is_registered&&D.is_present).sort((D,Y)=>{const ie=D.registration_order||999,ne=Y.registration_order||999;return ie-ne})}catch(W){console.error("Erro ao carregar membros inscritos:",W)}}async function L(){var M;try{const O=await me.get(`/pauta/${a.agendaId}/${V.value}/speeches/status`);(M=O.data)!=null&&M.success&&(U.value=O.data.data.speeches||[])}catch(O){console.error("Erro ao carregar falas:",O)}}async function te(){if(!a.agendaId){console.error("[SpeechControlListModal] agendaId n\xE3o dispon\xEDvel");return}$.value=!1,R.value=!0;try{await C(),await L(),$.value=!0}finally{R.value=!1}}function se(){g||(b.value||F.value)&&(g=setInterval(()=>{b.value||F.value?f.value++:g&&(clearInterval(g),g=null)},1e3))}function le(){u.value=!1}ge(()=>a.modelValue,M=>{M?(i.loadSettings(),te(),setTimeout(()=>{se()},500)):(g&&(clearInterval(g),g=null),$.value=!1)}),ge([b,F],([M,O])=>{a.modelValue&&(M||O)?se():!M&&!O&&g&&(clearInterval(g),g=null)});function re(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&L()}function J(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&L()}function ae(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&L()}function Z(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&L()}function ee(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&L()}function I(M){M&&M.agendaId&&parseInt(M.agendaId)===parseInt(a.agendaId)&&C()}return pt(()=>{s.on("speech-started",re),s.on("speech-paused",J),s.on("speech-resumed",ae),s.on("speech-time-added",Z),s.on("speech-finished",ee),a.expedientType==="small"?s.on("small-expedient-order-updated",I):s.on("large-expedient-order-updated",I)}),ht(()=>{g&&clearInterval(g),s.off("speech-started",re),s.off("speech-paused",J),s.off("speech-resumed",ae),s.off("speech-time-added",Z),s.off("speech-finished",ee),a.expedientType==="small"?s.off("small-expedient-order-updated",I):s.off("large-expedient-order-updated",I)}),(M,O)=>(d(),H(tt,{modelValue:u.value,"onUpdate:modelValue":O[0]||(O[0]=W=>u.value=W),maximized:"","transition-show":"fade","transition-hide":"fade"},{default:E(()=>[w(Be,null,{default:E(()=>[w($e,{class:"tw-flex tw-items-center tw-justify-between tw-bg-black tw-text-white"},{default:E(()=>[t("div",Ar,[O[1]||(O[1]=t("div",{class:"tw-text-lg tw-font-semibold"},"Controle de Fala",-1)),t("div",kr,S(l.value)+" - Lista de Parlamentares Inscritos ",1)]),w(qe,{flat:"",round:"",dense:"",icon:"close",onClick:le})]),_:1}),w(it),$.value?B("",!0):(d(),H($e,{key:0,class:"tw-py-12"},{default:E(()=>[w(wt,{showing:R.value,color:c.value},null,8,["showing","color"])]),_:1})),$.value?(d(),k(Ie,{key:1},[w($e,{class:"tw-flex tw-items-center tw-gap-3"},{default:E(()=>[w(Xe,{color:"grey-7"},{default:E(()=>[we(" Total Inscritos: "+S(T.value.length),1)]),_:1}),b.value?(d(),H(Xe,{key:0,color:"positive",icon:"mic"},{default:E(()=>{var W;return[we(" Falando: "+S(((W=b.value.proponent)==null?void 0:W.name)||"N/A"),1)]}),_:1})):B("",!0),F.value?(d(),H(Xe,{key:1,color:"warning",icon:"pause"},{default:E(()=>{var W;return[we(" Pausado: "+S(((W=F.value.proponent)==null?void 0:W.name)||"N/A"),1)]}),_:1})):B("",!0),w(ss)]),_:1}),w(it),w($e,{class:"tw-py-3",style:{"max-height":"calc(100vh - 150px)","overflow-y":"auto"}},{default:E(()=>[t("div",Rr,[(d(!0),k(Ie,null,Le(T.value,W=>(d(),H(Be,{key:W.proponent_id,flat:"",bordered:"",class:_({"tw-border-green-500":m(W.proponent_id)==="speaking","tw-border-yellow-500":m(W.proponent_id)==="paused","tw-border-gray-300":m(W.proponent_id)==="finished"})},{default:E(()=>[w($e,null,{default:E(()=>[t("div",zr,[t("div",Vr,[W.photo_url?(d(),H(ot,{key:0,size:"64px"},{default:E(()=>[t("img",{src:z(W.photo_url),alt:W.name,onError:Q},null,40,Tr)]),_:2},1024)):(d(),H(ot,{key:1,size:"64px",color:"grey-4","text-color":"grey-8",icon:"person"})),t("div",Cr,[t("div",Lr,S(W.name),1),t("div",Pr,S(W.party||"\u2014"),1)])]),W.registration_order?(d(),H(Xe,{key:0,color:c.value,class:"tw-font-bold tw-text-lg tw-px-4 tw-py-2 tw-min-w-[56px] tw-text-center",style:{"font-size":"20px"}},{default:E(()=>[we(S(W.registration_order)+"\xBA ",1)]),_:2},1032,["color"])):B("",!0)]),m(W.proponent_id)==="speaking"?(d(),H(ye,{key:0,class:_(["q-mb-3","dense","rounded",x(W.proponent_id)<=0?"bg-red-8 text-white":x(W.proponent_id)<=15?"bg-orange-6 text-white":"bg-green-3 text-black"])},{avatar:E(()=>[w(N,{name:"mic",color:"green",size:"20px"})]),default:E(()=>[t("div",Fr,[O[2]||(O[2]=t("div",{class:"text-body2 tw-font-semibold"}," Falando ",-1)),t("div",Er," Tempo restante: "+S(r(x(W.proponent_id))),1)])]),_:2},1032,["class"])):m(W.proponent_id)==="paused"?(d(),H(ye,{key:1,class:"bg-yellow-3 text-black q-mb-3 dense rounded"},{avatar:E(()=>[w(N,{name:"pause",color:"orange",size:"20px"})]),default:E(()=>[O[3]||(O[3]=t("div",{class:"text-body2 tw-font-semibold"},"Pausado",-1))]),_:1})):m(W.proponent_id)==="finished"?(d(),H(ye,{key:2,class:"bg-blue-3 text-black q-mb-3 dense rounded"},{avatar:E(()=>[w(N,{name:"check_circle",color:"blue",size:"20px"})]),default:E(()=>[t("div",Mr,[O[4]||(O[4]=t("div",{class:"text-body2 tw-font-semibold"}," Finalizado ",-1)),t("div",Dr," Tempo utilizado: "+S(q(W.proponent_id)),1),p(W.proponent_id)?(d(),k("div",Br," Finalizado em: "+S(h(p(W.proponent_id))),1)):B("",!0)])]),_:2},1024)):(d(),k("div",Ur," Aguardando "))]),_:2},1024)]),_:2},1032,["class"]))),128))])]),_:1})],64)):B("",!0)]),_:1})]),_:1},8,["modelValue"]))}};function Or(e){const o=G(!1),a=G((e==null?void 0:e.value)||null),n=G(0),s=G(null),i=v(()=>{const c=Me.getItem("unit_id_num");return c?parseInt(c):null});async function u(){var c;o.value=!0;try{const V=await me.get("/pauta",{params:{session_status:"started",per_page:1}}),$=((c=V==null?void 0:V.data)==null?void 0:c.data)||[];$.length>0?a.value=$[0].id:a.value=null}catch(V){console.error(V),a.value=null}finally{o.value=!1}}function l(c,V){if(!i.value)return;const $=Date.now(),R=a.value;if(s.value===R&&$-n.value<500){console.log("[useSessionAgenda] ensureSubscribed ignorado - subscri\xE7\xE3o muito recente");return}const T=`unit.${i.value}.sessions`;if(c.subscribeToChannel(T),R){const U=`unit.${i.value}.agenda.${R}`;c.subscribeToChannel(U),s.value!==R||$-n.value>=1e3?(s.value=R,n.value=$,V&&(console.log("[useSessionAgenda] Executando fun\xE7\xF5es de carregamento para agenda:",R),Object.values(V).forEach(f=>{typeof f=="function"&&f()}))):console.log("[useSessionAgenda] Fun\xE7\xF5es de carregamento ignoradas - subscri\xE7\xE3o muito recente")}}return{loadingAgendas:o,selectedAgendaId:a,unitId:i,loadStartedAgenda:u,ensureSubscribed:l}}function ha(e,o,a="small"){const n=G(null),s=G(0),i=G(null),u=G(!1),l=G(!1),c=G(0),V=a==="small"?"small-expedient":"large-expedient",$=v(()=>{var A;return((A=n.value)==null?void 0:A.status)==="finished"?n.value:null}),R=v(()=>$.value?($.value.allocated_minutes||0)+($.value.additional_minutes||0):0),T=v(()=>{if(!$.value)return 0;const A=$.value.used_seconds||0;return Math.floor(A/60)}),U=v(()=>$.value?($.value.used_seconds||0)%60:0),f=v(()=>{var A;return((A=$.value)==null?void 0:A.finished_at)||null});function g(){if(!n.value){s.value=0;return}const A=n.value;let m=A.used_seconds||0;A.status==="speaking"&&A.started_at&&(m+=Math.floor((new Date-new Date(A.started_at))/1e3));const x=(A.allocated_minutes+A.additional_minutes)*60;s.value=Math.max(0,x-m)}async function b(){var m,x;if(l.value){console.log(`[useSpeech ${a}] loadSpeechStatus j\xE1 em andamento, ignorando.`);return}const A=Date.now();if(A-c.value<100){console.log(`[useSpeech ${a}] loadSpeechStatus chamado muito recentemente, ignorando.`);return}if(!e.value||!o.value){n.value=null,s.value=0,i.value&&(clearInterval(i.value),i.value=null);return}l.value=!0,c.value=A;try{const r=await me.get(`/pauta/${e.value}/${V}/speeches/status`);if(((m=r==null?void 0:r.data)==null?void 0:m.success)&&((x=r==null?void 0:r.data)==null?void 0:x.data)){const h=r.data.data.speeches||[];let q=h.find(p=>p.proponent_id===parseInt(o.value)&&(p.status==="speaking"||p.status==="paused"));q||(q=h.find(p=>p.proponent_id===parseInt(o.value))),q?(n.value=q,g(),q.status==="speaking"||q.status==="paused"?(u.value||(u.value=!0),i.value||(i.value=setInterval(()=>{g()},1e3))):(q.status==="finished"||(u.value=!1),i.value&&(clearInterval(i.value),i.value=null))):(n.value=null,s.value=0,u.value=!1,i.value&&(clearInterval(i.value),i.value=null))}}catch(r){console.error(`Erro ao carregar status da fala (${a}):`,r),n.value=null,s.value=0}finally{l.value=!1}}function F(){i.value&&(clearInterval(i.value),i.value=null)}return{currentSpeech:n,remainingTime:s,showSpeechModal:u,loadingSpeech:l,finishedSpeech:$,finishedSpeechTotalMinutes:R,finishedSpeechUsedMinutes:T,finishedSpeechUsedSeconds:U,finishedSpeechFinishedAt:f,loadSpeechStatus:b,cleanup:F}}function Nr(e,o){const a=G([]),n=G(!1);async function s(){var i,u,l,c,V,$;if(!e.value||!o.value){a.value=[];return}try{const R=await me.get(`/pauta/${e.value}/session-logs`);if(((i=R==null?void 0:R.data)==null?void 0:i.success)&&((u=R==null?void 0:R.data)==null?void 0:u.data)){const T=R.data.data.logs||[],U=Ae(),f=T.filter(r=>{var h,q;return((h=r.event_data)==null?void 0:h.proponent_id)===parseInt(o.value)||r.user_id===((q=U.user)==null?void 0:q.id)}),g=[],b=f.find(r=>r.event_type==="session_attendance"&&r.event_subtype==="attendance_registered");b&&g.push({icon:"how_to_reg",color:"green",label:"Presen\xE7a registrada no qu\xF3rum",time:Ee(b.occurred_at)});const F=f.find(r=>r.event_type==="small_expedient"&&(r.event_subtype==="register_speaker"||r.event_subtype==="small_expedient_registered"));F&&g.push({icon:"assignment",color:"secondary",label:"Inscrito no Pequeno Expediente",time:Ee(F.occurred_at)});const A=f.find(r=>r.event_type==="large_expedient"&&(r.event_subtype==="register_speaker"||r.event_subtype==="large_expedient_registered"));A&&g.push({icon:"assignment_turned_in",color:"orange",label:"Inscrito no Grande Expediente",time:Ee(A.occurred_at)});const m=f.filter(r=>r.event_type==="small_expedient_speech");if(m.length>0){const r=m.find(q=>q.event_subtype==="speech_started"),h=m.find(q=>q.event_subtype==="speech_finished");if(r&&g.push({icon:"mic",color:"primary",label:"Fala iniciada",time:Ee(r.occurred_at)}),h){const q=((l=h.event_data)==null?void 0:l.total_minutes_allocated)||0,p=((c=h.event_data)==null?void 0:c.total_seconds_used)||0,z=Math.floor(p/60);g.push({icon:"mic_off",color:"grey",label:`Fala finalizada (${z}min de ${q}min dispon\xEDveis)`,time:Ee(h.occurred_at)})}}const x=f.filter(r=>r.event_type==="large_expedient_speech");if(x.length>0){const r=x.find(q=>q.event_subtype==="speech_started"),h=x.find(q=>q.event_subtype==="speech_finished");if(r&&g.push({icon:"mic",color:"orange",label:"Fala iniciada (Grande Expediente)",time:Ee(r.occurred_at)}),h){const q=((V=h.event_data)==null?void 0:V.total_minutes_allocated)||0,p=(($=h.event_data)==null?void 0:$.total_seconds_used)||0,z=Math.floor(p/60);g.push({icon:"mic_off",color:"grey",label:`Fala finalizada - Grande Expediente (${z}min de ${q}min dispon\xEDveis)`,time:Ee(h.occurred_at)})}}a.value=g}}catch(R){console.error("Erro ao carregar intera\xE7\xF5es da sess\xE3o:",R),a.value=[]}}return{sessionInteractions:a,loadingSessionInteractions:n,loadSessionInteractions:s}}function Qr(e,o,a,n={}){const s=Ne();Ae();const{onQuorumStarted:i,onQuorumFinalized:u,onSmallExpedientStarted:l,onSmallExpedientFinalized:c,onSmallExpedientRegistration:V,onSmallExpedientOrderUpdated:$,onLargeExpedientStarted:R,onLargeExpedientFinalized:T,onLargeExpedientRegistration:U,onLargeExpedientOrderUpdated:f,onVotingStarted:g,onVotingReadingStarted:b,onVotingReadingFinished:F,onVotingVoteRegistered:A,onSpeechStarted:m,onSpeechPaused:x,onSpeechResumed:r,onSpeechTimeAdded:h,onSpeechFinished:q,onSessionAttendance:p,onSessionAbsences:z,onSpeechControlOpened:Q,onSpeechControlClosed:C,onVoiceRequestRegistered:L,onVoiceRequestRemoved:te,onVoiceRequestSpeechStarted:se,onVoiceRequestSpeechPaused:le,onVoiceRequestSpeechResumed:re,onVoiceRequestSpeechTimeAdded:J,onVoiceRequestSpeechFinished:ae}=n;function Z(){i&&s.on("quorum-started",I=>{ee(I,"agendaId")&&(i(I),ve.success("Qu\xF3rum iniciado! Voc\xEA j\xE1 pode marcar sua presen\xE7a."))}),u&&s.on("quorum-finalized",I=>{ee(I,"agendaId")&&(u(I),ve.warning("O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado."))}),l&&s.on("small-expedient-started",I=>{ee(I,"agendaId")&&l(I)}),c&&s.on("small-expedient-finalized",async I=>{ee(I,"agendaId")&&await c(I)}),V&&s.on("small-expedient-registration",async I=>{ee(I,"agendaId","proponentId")&&await V(I)}),$&&s.on("small-expedient-order-updated",async I=>{ee(I,"agendaId")&&await $(I)}),R&&s.on("large-expedient-started",I=>{ee(I,"agendaId")&&R(I)}),T&&s.on("large-expedient-finalized",async I=>{ee(I,"agendaId")&&await T(I)}),U&&s.on("large-expedient-registration",async I=>{ee(I,"agendaId","proponentId")&&await U(I)}),f&&s.on("large-expedient-order-updated",async I=>{ee(I,"agendaId")&&await f(I)}),g&&s.on("voting-started",async I=>{ee(I,"agendaId")&&(await g(I),ve.info("Vota\xE7\xE3o iniciada na sess\xE3o."))}),b&&s.on("voting-reading-started",async I=>{if(ee(I,"agendaId")){await b(I);const M=I.type==="reading",O=I.type==="reading"?"Leitura":I.type==="secret_voting"?"Vota\xE7\xE3o Secreta":"Vota\xE7\xE3o";M||ve.info(`${O} iniciada.`)}}),F&&s.on("voting-reading-finished",async I=>{if(ee(I,"agendaId")){await F(I);const M=(I==null?void 0:I.type)||"reading",O=M==="secret_voting"?"Vota\xE7\xE3o secreta encerrada.":M==="voting"?"Vota\xE7\xE3o encerrada.":M==="reading"?"Leitura encerrada.":"Vota\xE7\xE3o encerrada.";ve.info(O)}}),A&&s.on("voting-vote-registered",async I=>{ee(I,"agendaId")&&await A(I)}),m&&s.on("speech-started",async I=>{ee(I,"agendaId","proponentId")&&(await m(I),ve.success("Sua fala foi iniciada!"))}),x&&s.on("speech-paused",async I=>{ee(I,"agendaId","proponentId")&&(await x(I),ve.info("Sua fala foi pausada."))}),r&&s.on("speech-resumed",async I=>{ee(I,"agendaId","proponentId")&&(await r(I),ve.success("Sua fala foi retomada!"))}),h&&s.on("speech-time-added",async I=>{ee(I,"agendaId","proponentId")&&(await h(I),ve.success(`Tempo adicional de ${I.minutes} minuto(s) adicionado!`))}),q&&s.on("speech-finished",async I=>{ee(I,"agendaId","proponentId")&&(await q(I),ve.warning("Sua fala foi finalizada."))}),p&&s.on("session-attendance",I=>{ee(I,"agendaId","proponentId")&&p(I)}),z&&s.on("session-absences",I=>{ee(I,"agendaId","proponentId")&&z(I)}),Q&&s.on("speech-control-opened",I=>{ee(I,"agendaId")&&Q(I)}),C&&s.on("speech-control-closed",I=>{ee(I,"agendaId")&&C(I)}),L&&s.on("voice-request-registered",async I=>{ee(I,"agendaId")&&await L(I)}),te&&s.on("voice-request-removed",async I=>{ee(I,"agendaId")&&await te(I)}),se&&s.on("voice-request-speech-started",async I=>{ee(I,"agendaId","proponentId")&&await se(I)}),le&&s.on("voice-request-speech-paused",async I=>{ee(I,"agendaId","proponentId")&&await le(I)}),re&&s.on("voice-request-speech-resumed",async I=>{ee(I,"agendaId","proponentId")&&await re(I)}),J&&s.on("voice-request-speech-time-added",async I=>{ee(I,"agendaId","proponentId")&&await J(I)}),ae&&s.on("voice-request-speech-finished",async I=>{ee(I,"agendaId","proponentId")&&await ae(I)})}function ee(I,...M){if(!I)return!1;if(M.includes("agendaId")){const O=parseInt(I.agendaId),W=e.value?parseInt(e.value):null;if(O!==W&&!(!W&&(a==null?void 0:a.value)===O))return!1}if(M.includes("proponentId")){const O=parseInt(I.proponentId),W=o.value?parseInt(o.value):null;if(O!==W)return!1}return!0}return{setupSocketListeners:Z}}const jr={key:0,class:"dashboard-tabs-container"},Jr={class:"tab-panels-container"},Hr={class:"tab-panel"},Wr={class:"tab-panel"},Gr={class:"tab-panel"},Kr={class:"tab-panel"},Yr={class:"tab-panel"},Xr={class:"tab-panel"},Zr={key:1,class:"modals-container"},eu={key:2,class:"dashboard-content"},tu={class:"dashboard-greeting"},au={class:"greeting-content"},su={class:"greeting-text"},nu={class:"greeting-title"},iu={class:"greeting-subtitle"},ou={key:0,class:"dashboard-content"},lu={key:1,class:"dashboard-content"},ru={key:2,class:"dashboard-content"},uu={class:"empty-state-card"},du={class:"empty-state-content"},cu={__name:"Dashboard",setup(e){const o=Ae(),a=Ne(),n=kt(),s=G(null),i=G(null),u=G(null),l=G([]),c=G(null),V=G([]),$=G(!1),R=G("home"),T=v(()=>[{name:"home",label:"In\xEDcio",icon:"home"},{name:"quorum",label:"Qu\xF3rum",icon:"groups"},{name:"small-expedient",label:"Pequeno",icon:"timer"},{name:"large-expedient",label:"Grande",icon:"assignment_turned_in"},{name:"voice-request",label:"Voz",icon:"mic"},{name:"voting",label:"Vota\xE7\xE3o",icon:"how_to_vote"}]);function U(P){R.value=P,console.log("[Dashboard] Tab mudou para:",P)}const f=v(()=>{var P;return((P=s.value)==null?void 0:P.id)||null}),g=Or(f),b=v(()=>{var P;return((P=o.user)==null?void 0:P.proponent_id)||null}),F=Ra(g.selectedAgendaId),A=gt(g.selectedAgendaId,"small"),m=gt(g.selectedAgendaId,"large"),x=za(g.selectedAgendaId),r=ha(g.selectedAgendaId,b,"small"),h=ha(g.selectedAgendaId,b,"large"),q=Va(g.selectedAgendaId),p=Nr(g.selectedAgendaId,b),z=v({get:()=>r.showSpeechModal.value,set:P=>{r.showSpeechModal.value=P}}),Q=v({get:()=>h.showSpeechModal.value,set:P=>{h.showSpeechModal.value=P}}),C=v({get:()=>x.showReadingModal.value,set:P=>{x.showReadingModal.value=P}}),L=v({get:()=>x.showVotingModal.value,set:P=>{x.showVotingModal.value=P}}),te=G(!1),se=G(!1);function le(){const P=new Date().getHours();return P<12?"Bom dia!":P<18?"Boa tarde!":"Boa noite!"}function re(){const P=new Date;return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}-${String(P.getDate()).padStart(2,"0")}`}const J=v(()=>{if(!u.value)return!1;const P=re();return u.value.session_date===P});async function ae(){var P,D;$.value=!0;try{const Y=await me.get("/pauta",{params:{session_status:"started",per_page:1}}),ie=((P=Y==null?void 0:Y.data)==null?void 0:P.data)||[];if(ie.length>0){const de=ie[0];s.value=de,i.value=de,u.value=null,l.value=[],c.value=null,V.value=[],de.id&&(g.selectedAgendaId.value=de.id);return}const ne=re(),fe=await me.get("/pauta",{params:{date_from:ne,date_to:ne,per_page:10}}),be=((D=fe==null?void 0:fe.data)==null?void 0:D.data)||[],Re=be.filter(de=>de.session_status!=="closed"),ze=be.filter(de=>de.session_status==="closed");if(Re.length>0){const de=Re[0];u.value=de,s.value=null,c.value=null,V.value=[],await I(de.id)}else if(ze.length>0){const de=ze[0];u.value=de,s.value=null,c.value=null,V.value=[],await I(de.id)}else s.value=null,u.value=null,l.value=[],await Z()}catch(Y){console.error("Erro ao carregar sess\xE3o:",Y),s.value=null,u.value=null,l.value=[],c.value=null,V.value=[]}finally{$.value=!1}}async function Z(){var P;try{const D=re(),Y=await me.get("/pauta",{params:{date_from:D,per_page:1}}),ie=((P=Y==null?void 0:Y.data)==null?void 0:P.data)||[];if(ie.length>0){const ne=ie[0];c.value=ne,await ee(ne.id)}else c.value=null,V.value=[]}catch(D){console.error("Erro ao carregar pr\xF3xima sess\xE3o futura:",D),c.value=null,V.value=[]}}async function ee(P){var D;try{const Y=await me.get(`/pauta/${P}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),ie=((D=Y==null?void 0:Y.data)==null?void 0:D.data)||[];V.value=ie.filter(ne=>ne.proposition).map(ne=>{var fe,be;return{id:ne.proposition.id,number:ne.proposition.number,year:ne.proposition.year,title:ne.proposition.title,species:((fe=ne.proposition.species)==null?void 0:fe.name)||((be=ne.proposition.species)==null?void 0:be.title),proponents:ne.proposition.proponents||[]}})}catch(Y){console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o futura:",Y),V.value=[]}}async function I(P){var D;try{const Y=await me.get(`/pauta/${P}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),ie=((D=Y==null?void 0:Y.data)==null?void 0:D.data)||[];l.value=ie.filter(ne=>ne.proposition).map(ne=>{var fe,be;return{id:ne.proposition.id,number:ne.proposition.number,year:ne.proposition.year,title:ne.proposition.title,species:((fe=ne.proposition.species)==null?void 0:fe.name)||((be=ne.proposition.species)==null?void 0:be.title),proponents:ne.proposition.proponents||[]}})}catch(Y){console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o:",Y),l.value=[]}}const{setupSocketListeners:M}=Qr(g.selectedAgendaId,b,v(()=>{var P;return((P=s.value)==null?void 0:P.id)||null}),{onQuorumStarted:async()=>{await F.loadQuorumStatus(),await F.loadCurrentAttendanceStatus()},onQuorumFinalized:async()=>{await F.loadQuorumStatus(),await F.loadCurrentAttendanceStatus()},onSmallExpedientStarted:A.loadStatus,onSmallExpedientFinalized:async P=>{await A.loadStatus(),A.isRegistered.value?ve.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${A.registrationOrder.value||"N/A"}\xBA.`):ve.warning(`As inscri\xE7\xF5es de ${n.smallExpedientName.value.toLowerCase()} foram finalizadas.`)},onSmallExpedientRegistration:async P=>{P.source==="controle"&&(A.isRegistered.value=P.registered||!1,await A.loadStatus())},onSmallExpedientOrderUpdated:async()=>{await A.loadStatus(!0)},onLargeExpedientStarted:m.loadStatus,onLargeExpedientFinalized:async P=>{await m.loadStatus(),m.isRegistered.value?ve.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${m.registrationOrder.value||"N/A"}\xBA.`):ve.warning(`As inscri\xE7\xF5es de ${n.largeExpedientName.value.toLowerCase()} foram finalizadas.`)},onLargeExpedientRegistration:async P=>{P.source==="controle"&&(m.isRegistered.value=P.registered||!1,await m.loadStatus())},onLargeExpedientOrderUpdated:async()=>{await m.loadStatus(!0)},onVotingStarted:x.loadVotingStatus,onVotingReadingStarted:x.loadVotingStatus,onVotingReadingFinished:x.loadVotingStatus,onVotingVoteRegistered:x.loadVotingStatus,onSpeechControlOpened:P=>{const D=P.speech_type||"small";D==="small"?te.value=!0:D==="large"&&(se.value=!0)},onSpeechControlClosed:P=>{const D=P.speech_type||"small";D==="small"?te.value=!1:D==="large"&&(se.value=!1)},onSpeechStarted:async P=>{var Y,ie;const D=P.speech_type||"small";D==="small"?(r.currentSpeech.value=null,await r.loadSpeechStatus(),((Y=r.currentSpeech.value)==null?void 0:Y.status)==="speaking"&&(r.showSpeechModal.value=!0)):D==="large"&&(h.currentSpeech.value=null,await h.loadSpeechStatus(),((ie=h.currentSpeech.value)==null?void 0:ie.status)==="speaking"&&(h.showSpeechModal.value=!0))},onSpeechPaused:async P=>{var Y,ie;const D=P.speech_type||"small";D==="small"?(await r.loadSpeechStatus(),((Y=r.currentSpeech.value)==null?void 0:Y.status)==="paused"&&(r.showSpeechModal.value=!0)):D==="large"&&(await h.loadSpeechStatus(),((ie=h.currentSpeech.value)==null?void 0:ie.status)==="paused"&&(h.showSpeechModal.value=!0))},onSpeechResumed:async P=>{var Y,ie;const D=P.speech_type||"small";D==="small"?(await r.loadSpeechStatus(),((Y=r.currentSpeech.value)==null?void 0:Y.status)==="speaking"&&(r.showSpeechModal.value=!0)):D==="large"&&(await h.loadSpeechStatus(),((ie=h.currentSpeech.value)==null?void 0:ie.status)==="speaking"&&(h.showSpeechModal.value=!0))},onSpeechTimeAdded:async P=>{const D=P.speech_type||"small";D==="small"?await r.loadSpeechStatus():D==="large"&&await h.loadSpeechStatus()},onSpeechFinished:async P=>{var Y,ie;const D=P.speech_type||"small";D==="small"?(await r.loadSpeechStatus(),await p.loadSessionInteractions(),((Y=r.currentSpeech.value)==null?void 0:Y.status)==="finished"&&(r.showSpeechModal.value=!0)):D==="large"&&(await h.loadSpeechStatus(),await p.loadSessionInteractions(),((ie=h.currentSpeech.value)==null?void 0:ie.status)==="finished"&&(h.showSpeechModal.value=!0))},onSessionAttendance:async P=>{F.isPresent.value=P.present||!1,await F.loadCurrentAttendanceStatus(),P.source==="controle"&&ve.success(P.present?"Presen\xE7a confirmada pelo controle":"Presen\xE7a removida pelo controle")},onSessionAbsences:async P=>{await F.loadCurrentAttendanceStatus(),P.absenceReason&&(F.absenceReason.value=P.absenceReason),P.justified&&P.absenceReason&&ve.info("Aus\xEAncia justificada pelo controle")},onVoiceRequestRegistered:async P=>{await q.loadStatus(!0)},onVoiceRequestRemoved:async P=>{await q.loadStatus(!0)},onVoiceRequestSpeechStarted:async P=>{await q.loadStatus(!0)},onVoiceRequestSpeechPaused:async P=>{await q.loadStatus(!0)},onVoiceRequestSpeechResumed:async P=>{await q.loadStatus(!0)},onVoiceRequestSpeechTimeAdded:async P=>{await q.loadStatus(!0)},onVoiceRequestSpeechFinished:async P=>{await q.loadStatus(!0)}});function O(){const P=Me.getItem("unit_id_num");if(P&&a.isConnected){const D=`unit.${P}.sessions`;a.subscribeToChannel(D)}a.on("session-status-changed",D=>{if(console.log("[Vereador] Status da sess\xE3o alterado:",D),D.status==="started"&&D.agendaId){const Y=Me.getItem("unit_id_num");if(Y&&a.isConnected){const ie=`unit.${Y}.agenda.${D.agendaId}`;a.subscribeToChannel(ie)}ae()}else D.status==="closed"&&(s.value=null,i.value=null,ae())})}Fe("quorum",F),Fe("smallExpedient",A),Fe("largeExpedient",m),Fe("voting",x),Fe("voiceRequest",q),Fe("smallSpeech",r),Fe("largeSpeech",h),Fe("sessionAgenda",g),Fe("sessionSettings",n),Fe("sessionInteractions",p),ge(()=>{var P;return(P=s.value)==null?void 0:P.id},async(P,D)=>{P&&P!==D&&(g.selectedAgendaId.value=P,a.isConnected&&g.ensureSubscribed(a,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:A.loadStatus,loadLargeExpedientStatus:m.loadStatus,loadVotingStatus:x.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus}),await Promise.all([F.loadQuorumStatus(),F.loadCurrentAttendanceStatus(),A.loadStatus(),m.loadStatus(),x.loadVotingStatus(),r.loadSpeechStatus(),h.loadSpeechStatus(),q.loadStatus(),p.loadSessionInteractions()]),M())},{immediate:!0});let W=null;return pt(async()=>{if(await n.loadSettings(),O(),await ae(),a.isConnected)(()=>{var D;(D=s.value)!=null&&D.id&&g.ensureSubscribed(a,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:A.loadStatus,loadLargeExpedientStatus:m.loadStatus,loadVotingStatus:x.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus})})();else{const P=setInterval(()=>{var D;a.isConnected&&((D=s.value)!=null&&D.id&&g.ensureSubscribed(a,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:A.loadStatus,loadLargeExpedientStatus:m.loadStatus,loadVotingStatus:x.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus}),clearInterval(P))},500);setTimeout(()=>clearInterval(P),1e4)}W=setInterval(()=>{ae()},3e4)}),ht(()=>{W&&clearInterval(W),r.cleanup(),h.cleanup()}),(P,D)=>(d(),H(ts,{class:"mobile-dashboard-page"},{default:E(()=>{var Y,ie,ne,fe,be,Re,ze,de,Ve,Te,Ce;return[s.value&&i.value?(d(),k("div",jr,[t("div",Jr,[Qe(t("div",Hr,[w(on,{"session-data":i.value,"selected-agenda-id":(Y=s.value)==null?void 0:Y.id},null,8,["session-data","selected-agenda-id"])],512),[[We,R.value==="home"]]),Qe(t("div",Wr,[w(kn,{"session-id":(ie=s.value)==null?void 0:ie.id,"session-data":i.value},null,8,["session-id","session-data"])],512),[[We,R.value==="quorum"]]),Qe(t("div",Gr,[w(Hn,{"session-id":(ne=s.value)==null?void 0:ne.id,"session-data":i.value},null,8,["session-id","session-data"])],512),[[We,R.value==="small-expedient"]]),Qe(t("div",Kr,[w(Zn,{"session-id":(fe=s.value)==null?void 0:fe.id,"session-data":i.value},null,8,["session-id","session-data"])],512),[[We,R.value==="large-expedient"]]),Qe(t("div",Yr,[w(Pi,{"session-id":(be=s.value)==null?void 0:be.id,"session-data":i.value},null,8,["session-id","session-data"])],512),[[We,R.value==="voice-request"]]),Qe(t("div",Xr,[w($o,{"session-id":(Re=s.value)==null?void 0:Re.id,"session-data":i.value},null,8,["session-id","session-data"])],512),[[We,R.value==="voting"]])]),w(Fo,{modelValue:R.value,"onUpdate:modelValue":D[0]||(D[0]=_e=>R.value=_e),tabs:T.value,onTabChange:U},null,8,["modelValue","tabs"])])):B("",!0),s.value&&i.value?(d(),k("div",Zr,[w(fa,{modelValue:z.value,"onUpdate:modelValue":D[1]||(D[1]=_e=>z.value=_e),speech:y(r).currentSpeech.value,"remaining-time":y(r).remainingTime.value,"expedient-type":"Pequeno Expediente"},null,8,["modelValue","speech","remaining-time"]),w(fa,{modelValue:Q.value,"onUpdate:modelValue":D[2]||(D[2]=_e=>Q.value=_e),speech:y(h).currentSpeech.value,"remaining-time":y(h).remainingTime.value,"expedient-type":"Grande Expediente"},null,8,["modelValue","speech","remaining-time"]),w($l,{modelValue:C.value,"onUpdate:modelValue":D[3]||(D[3]=_e=>C.value=_e),reading:y(x).activeReading.value,"agenda-id":(ze=s.value)==null?void 0:ze.id,"has-request":y(q).hasRequest.value,"current-speech":y(q).currentSpeech.value,"request-order":y(q).requestOrder.value,onRequestRegistered:D[4]||(D[4]=_e=>y(q).loadStatus(!0))},null,8,["modelValue","reading","agenda-id","has-request","current-speech","request-order"]),(de=s.value)!=null&&de.id?(d(),H(Ir,{key:0,modelValue:L.value,"onUpdate:modelValue":D[5]||(D[5]=_e=>L.value=_e),voting:y(x).activeVoting.value,"agenda-id":s.value.id,onVoteRegistered:y(x).handleVoteRegistered},null,8,["modelValue","voting","agenda-id","onVoteRegistered"])):B("",!0),(Ve=s.value)!=null&&Ve.id?(d(),H(ma,{key:1,modelValue:te.value,"onUpdate:modelValue":D[6]||(D[6]=_e=>te.value=_e),"agenda-id":s.value.id,"expedient-type":"small"},null,8,["modelValue","agenda-id"])):B("",!0),(Te=s.value)!=null&&Te.id?(d(),H(ma,{key:2,modelValue:se.value,"onUpdate:modelValue":D[7]||(D[7]=_e=>se.value=_e),"agenda-id":s.value.id,"expedient-type":"large"},null,8,["modelValue","agenda-id"])):B("",!0)])):(d(),k("div",eu,[t("div",tu,[t("div",au,[w(N,{name:"waving_hand",size:"32px",class:"greeting-icon"}),t("div",su,[t("div",nu," Ol\xE1, Ver. "+S(((Ce=y(o).user)==null?void 0:Ce.first_name)||"Vereador")+"! ",1),t("div",iu,S(le()),1)])])]),u.value&&J.value?(d(),k("div",ou,[w(ga,{"scheduled-session":u.value,propositions:l.value},null,8,["scheduled-session","propositions"])])):c.value?(d(),k("div",lu,[w(ga,{"scheduled-session":c.value,propositions:V.value,"is-future":!0},null,8,["scheduled-session","propositions"])])):(d(),k("div",ru,[t("div",uu,[t("div",du,[w(N,{name:"event_busy",size:"80px",color:"grey-5",class:"empty-state-icon"}),D[8]||(D[8]=t("div",{class:"empty-state-title"},"Nenhuma sess\xE3o agendada",-1)),D[9]||(D[9]=t("div",{class:"empty-state-subtitle"}," Aguarde uma sess\xE3o ser agendada e iniciada. ",-1))])])]))]))]}),_:1}))}};var wu=ke(cu,[["__scopeId","data-v-b0f33fa0"]]);export{wu as default};
