import{c as Je,e as Vt,O as Ka,i as Rt,P as Ya,h as v,aF as Xa,B as Xe,y as se,a1 as N,aG as Za,aH as ka,F as ht,_ as Fe,R as c,S as G,U as M,Y as a,ab as W,V as S,Z as k,X as Ce,a3 as T,a5 as B,a4 as pe,aI as ze,aJ as Le,W as Oe,Q as ut,A as dt,T as Va,aK as es,az as Ra,a as za,g as Ca,r as ee,aL as Ta,m as La,w as Se,aM as Pa,ac as pt,$ as He,aN as Ge,z as zt,d as St,u as Te,ae as Ue,ad as qe,a8 as de,aj as ct,ag as m,a0 as ke,f as ts,l as as,aO as Ea,a7 as vt,a2 as ss,a6 as ns,G as xe,aP as Fa,aQ as rt,H as it,aR as Ma,N as is,aS as os,aT as ls,j as _t,k as $a,ah as Ee,aB as rs,aC as us,ao as ds,J as cs,ar as Ct,ak as vs,aU as Da,aV as Ke,aW as Ye}from"./index.5ed22e55.js";import{Q as gs}from"./QPage.713ce29c.js";import{u as Ze}from"./socket.875c09ee.js";import{g as fs,i as ot,h as tt,e as bt,f as ms,Q as hs}from"./QSpace.31f262a6.js";import{Q as Re}from"./QBanner.420fedd4.js";import{Q as ja}from"./QResizeObserver.6aab1be3.js";const ps={xs:8,sm:10,md:14,lg:20,xl:24};var Tt=Je({name:"QChip",props:{...Vt,...Ka,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Xe(),t=Rt(e,n),o=Ya(e,ps),r=v(()=>e.selected===!0||e.icon!==void 0),l=v(()=>e.selected===!0?e.iconSelected||n.iconSet.chip.selected:e.icon),u=v(()=>e.iconRemove||n.iconSet.chip.remove),R=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),g=v(()=>{const x=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(x?` text-${x} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(R.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),y=v(()=>{const x=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},F={...x,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove};return{chip:x,remove:F}});function L(x){x.keyCode===13&&U(x)}function U(x){e.disable||(s("update:selected",!e.selected),s("click",x))}function h(x){(x.keyCode===void 0||x.keyCode===13)&&(ht(x),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function d(){const x=[];R.value===!0&&x.push(se("div",{class:"q-focus-helper"})),r.value===!0&&x.push(se(N,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const F=e.label!==void 0?[se("div",{class:"ellipsis"},[e.label])]:void 0;return x.push(se("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Za(i.default,F))),e.iconRight&&x.push(se(N,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&x.push(se(N,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:u.value,...y.value.remove,onClick:h,onKeyup:h})),x}return()=>{if(e.modelValue===!1)return;const x={class:g.value,style:o.value};return R.value===!0&&Object.assign(x,y.value.chip,{onClick:U,onKeyup:L}),Xa("div",x,d(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ka,e.ripple]])}}});const bs={class:"tw-flex tw-items-center tw-gap-3"},ws={class:"card-icon-wrapper"},Ss={class:"card-title"},ys={class:"session-info-compact tw-mb-3"},_s={class:"session-info-row"},xs={class:"session-info-col"},qs={class:"session-info-value-compact"},$s={class:"session-info-row"},Is={class:"session-info-col"},As={class:"session-info-value-compact"},ks={key:0,class:"session-info-col"},Vs={class:"session-info-value-compact"},Rs={key:1,class:"session-info-col"},zs={class:"session-info-value-compact"},Cs={class:"tw-flex tw-items-start tw-gap-3"},Ts={class:"tw-flex-1"},Ls={class:"status-message-text"},Ps={key:0},Es={key:0},Fs={key:1},Ms={key:2},Ds={key:1},js={key:2},Os={key:0,class:"tw-mt-3"},Us={class:"propositions-title"},Bs={class:"proposition-count"},Ns={class:"propositions-list tw-mt-2"},Qs={class:"proposition-header"},Js={class:"proposition-number"},Hs={key:0,class:"proposition-title"},Ws={key:1,class:"proposition-proponents"},Gs={key:0,class:"proponent-more"},Ks={key:1,class:"empty-propositions tw-mt-4"},Ys={__name:"ScheduledSessionCard",props:{scheduledSession:{type:Object,default:null},propositions:{type:Array,default:()=>[]},isFuture:{type:Boolean,default:!1}},setup(e){const i=e;function s(){var o;return((o=i.scheduledSession)==null?void 0:o.session_status)==="closed"?"header-closed":i.isFuture?"header-future":"header-today"}function n(){var o;return((o=i.scheduledSession)==null?void 0:o.session_status)==="closed"?"banner-closed":i.isFuture?"banner-future":"banner-today"}function t(){var o;return((o=i.scheduledSession)==null?void 0:o.session_status)==="closed"?"status-avatar-closed":i.isFuture?"status-avatar-future":"status-avatar-today"}return(o,r)=>(c(),G(Oe,{class:"modern-card session-card slide-up"},{default:M(()=>[a("div",{class:W(["card-header session-header",s()])},[a("div",bs,[a("div",ws,[S(N,{name:e.scheduledSession.session_status==="closed"?"event_busy":e.isFuture?"event_available":"event",size:"24px",class:"tw-text-white"},null,8,["name"])]),a("div",Ss,k(e.scheduledSession.session_status==="closed"?"Sess\xE3o Encerrada":e.isFuture?"Pr\xF3xima Sess\xE3o Futura":"Sess\xE3o Agendada para Hoje"),1)])],2),S(Ce,{class:"tw-p-4 md:tw-p-6 session-card-section"},{default:M(()=>[a("div",ys,[a("div",_s,[a("div",xs,[S(N,{name:"title",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",qs,k(e.scheduledSession.name||"N\xE3o informado"),1)])]),a("div",$s,[a("div",Is,[S(N,{name:"calendar_today",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",As,k(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"N\xE3o informado"),1)]),e.scheduledSession.session_time?(c(),T("div",ks,[S(N,{name:"schedule",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Vs,k(e.scheduledSession.session_time),1)])):B("",!0),e.scheduledSession.session_type?(c(),T("div",Rs,[S(N,{name:"category",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",zs,k(e.scheduledSession.session_type),1)])):B("",!0)])]),a("div",{class:W(["session-status-banner tw-mb-4",n()])},[a("div",Cs,[a("div",{class:W(["status-avatar",t()])},[S(N,{name:e.scheduledSession.session_status==="closed"?"check_circle":e.isFuture?"calendar_today":"schedule",size:"20px"},null,8,["name"])],2),a("div",Ts,[a("div",Ls,[e.scheduledSession.session_status==="closed"?(c(),T("span",Ps,[r[0]||(r[0]=pe(" Esta sess\xE3o j\xE1 foi encerrada ",-1)),e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date?(c(),T("span",Es," em "+k(e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date),1)):B("",!0),e.scheduledSession.closing_time?(c(),T("span",Fs," \xE0s "+k(e.scheduledSession.closing_time),1)):B("",!0),!e.scheduledSession.closing_date_formatted&&!e.scheduledSession.closing_time?(c(),T("span",Ms," anteriormente ")):B("",!0),r[1]||(r[1]=pe(" . ",-1))])):e.isFuture?(c(),T("span",Ds," Esta sess\xE3o est\xE1 agendada para "+k(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"data futura")+". Ainda n\xE3o \xE9 poss\xEDvel realizar a\xE7\xF5es. ",1)):(c(),T("span",js," A sess\xE3o ainda n\xE3o foi iniciada. Aguarde o in\xEDcio da sess\xE3o para realizar a\xE7\xF5es. "))])])])],2),e.propositions.length>0?(c(),T("div",Os,[a("div",Us,[S(N,{name:"description",size:"18px",class:"tw-mr-2"}),pe(" "+k(e.scheduledSession.session_status==="closed"?"Proposi\xE7\xF5es que foram votadas":"Proposi\xE7\xF5es que ser\xE3o votadas")+" ",1),a("span",Bs,"("+k(e.propositions.length)+")",1)]),a("div",Ns,[(c(!0),T(ze,null,Le(e.propositions,(l,u)=>(c(),T("div",{key:l.id||u,class:"proposition-item"},[a("div",Qs,[a("span",Js,k(l.species||"Proposi\xE7\xE3o")+" n\xBA "+k(l.number||"S/N")+"/"+k(l.year||new Date().getFullYear()),1)]),l.title?(c(),T("div",Hs,k(l.title),1)):B("",!0),l.proponents&&l.proponents.length>0?(c(),T("div",Ws,[(c(!0),T(ze,null,Le(l.proponents.slice(0,3),R=>(c(),G(Tt,{key:R.id,size:"sm",class:"proponent-chip"},{default:M(()=>[pe(k(R.name),1)]),_:2},1024))),128)),l.proponents.length>3?(c(),T("span",Gs," +"+k(l.proponents.length-3)+" mais ",1)):B("",!0)])):B("",!0)]))),128))])])):(c(),T("div",Ks,[S(N,{name:"inbox",size:"32px",class:"tw-mb-2",color:"grey-5"}),r[2]||(r[2]=a("div",{class:"empty-text"}," Nenhuma proposi\xE7\xE3o cadastrada nesta sess\xE3o ainda. ",-1))]))]),_:1})]),_:1}))}};var Ia=Fe(Ys,[["__scopeId","data-v-fcb6ccaa"]]);const Xs=["top","middle","bottom"];var nt=Je({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Xs.includes(e)}},setup(e,{slots:i}){const s=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=v(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>se("div",{class:n.value,style:s.value,role:"status","aria-label":e.label},ut(i.default,e.label!==void 0?[e.label]:[]))}}),Zs=Je({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:i,emit:s}){let n=!1,t,o,r=null,l=null,u,R;function g(){t==null||t(),t=null,n=!1,r!==null&&(clearTimeout(r),r=null),l!==null&&(clearTimeout(l),l=null),o==null||o.removeEventListener("transitionend",u),u=null}function y(d,x,F){x!==void 0&&(d.style.height=`${x}px`),d.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,t=F}function L(d,x){d.style.overflowY=null,d.style.height=null,d.style.transition=null,g(),x!==R&&s(x)}function U(d,x){let F=0;o=d,n===!0?(g(),F=d.offsetHeight===d.scrollHeight?0:void 0):(R="hide",d.style.overflowY="hidden"),y(d,F,x),r=setTimeout(()=>{r=null,d.style.height=`${d.scrollHeight}px`,u=P=>{l=null,(Object(P)!==P||P.target===d)&&L(d,"show")},d.addEventListener("transitionend",u),l=setTimeout(u,e.duration*1.1)},100)}function h(d,x){let F;o=d,n===!0?g():(R="show",d.style.overflowY="hidden",F=d.scrollHeight),y(d,F,x),r=setTimeout(()=>{r=null,d.style.height=0,u=P=>{l=null,(Object(P)!==P||P.target===d)&&L(d,"hide")},d.addEventListener("transitionend",u),l=setTimeout(u,e.duration*1.1)},100)}return dt(()=>{n===!0&&g()}),()=>se(Va,{css:!1,appear:e.appear,onEnter:U,onLeave:h},i.default)}});const et=es({}),en=Object.keys(Ra);var Oa=Je({name:"QExpansionItem",props:{...Ra,...za,...Vt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ca,"click","afterShow","afterHide"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Xe(),t=Rt(e,n),o=ee(e.modelValue!==null?e.modelValue:e.defaultOpened),r=ee(null),l=Ta(),{show:u,hide:R,toggle:g}=La({showing:o});let y,L;const U=v(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),h=v(()=>{if(e.contentInsetLevel===void 0)return null;const H=n.lang.rtl===!0?"Right":"Left";return{["padding"+H]:e.contentInsetLevel*56+"px"}}),d=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),x=v(()=>{const H={};return en.forEach(oe=>{H[oe]=e[oe]}),H}),F=v(()=>d.value===!0||e.expandIconToggle!==!0),P=v(()=>e.expandedIcon!==void 0&&o.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),b=v(()=>e.disable!==!0&&(d.value===!0||e.expandIconToggle===!0)),V=v(()=>({expanded:o.value===!0,detailsId:l.value,toggle:g,show:u,hide:R})),f=v(()=>{const H=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[o.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":l.value,"aria-label":H}});Se(()=>e.group,H=>{L==null||L(),H!==void 0&&$()});function z(H){d.value!==!0&&g(H),s("click",H)}function C(H){H.keyCode===13&&p(H,!0)}function p(H,oe){var K;oe!==!0&&H.qAvoidFocus!==!0&&((K=r.value)==null||K.focus()),g(H),ht(H)}function I(){s("afterShow")}function q(){s("afterHide")}function $(){y===void 0&&(y=Pa()),o.value===!0&&(et[e.group]=y);const H=Se(o,K=>{K===!0?et[e.group]=y:et[e.group]===y&&delete et[e.group]}),oe=Se(()=>et[e.group],(K,he)=>{he===y&&K!==void 0&&K!==y&&R()});L=()=>{H(),oe(),et[e.group]===y&&delete et[e.group],L=void 0}}function A(){const H={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},oe=[se(N,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:P.value})];return b.value===!0&&(Object.assign(H,{tabindex:0,...f.value,onClick:p,onKeyup:C}),oe.unshift(se("div",{ref:r,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),se(tt,H,()=>oe)}function J(){let H;return i.header!==void 0?H=[].concat(i.header(V.value)):(H=[se(tt,()=>[se(ot,{lines:e.labelLines},()=>e.label||""),e.caption?se(ot,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&H[e.switchToggleSide===!0?"push":"unshift"](se(tt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>se(N,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&H[e.switchToggleSide===!0?"unshift":"push"](A()),H}function te(){const H={ref:"item",style:e.headerStyle,class:e.headerClass,dark:t.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return F.value===!0&&(H.clickable=!0,H.onClick=z,Object.assign(H,d.value===!0?x.value:f.value)),se(fs,H,J)}function ne(){return He(se("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:h.value,id:l.value},zt(i.default)),[[Ge,o.value]])}function re(){const H=[te(),se(Zs,{duration:e.duration,onShow:I,onHide:q},ne)];return e.expandSeparator===!0&&H.push(se(pt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:t.value}),se(pt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:t.value})),H}return e.group!==void 0&&$(),dt(()=>{L==null||L()}),()=>se("div",{class:U.value},[se("div",{class:"q-expansion-item__container relative-position"},re())])}});const Ua=St("quorum",{state:()=>({isPresent:!1,isAbsentJustified:!1,absenceReason:null,quorumFinalized:!1,quorumStarted:!1,quorumFinalizedAt:null,loadingQuorum:!1,loadingAttendance:!1,loadingJustify:!1,quorumStatusCache:null,quorumStatusLastUpdate:null,QUORUM_STATUS_TTL:2e3,attendanceStatusCache:null,attendanceStatusLastUpdate:null,ATTENDANCE_STATUS_TTL:2e3,_quorumStatusLoadingPromise:null,_attendanceStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=Te().user)==null?void 0:i.proponent_id)||null},unitId(){const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadQuorumStatus(e,i=!1){if(!e){this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null;return}if(!i&&this.quorumStatusCache&&this.quorumStatusLastUpdate){const n=Date.now()-this.quorumStatusLastUpdate;if(n<this.QUORUM_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de quorum status (${n}ms atr\xE1s)`),this.quorumStatusCache}if(this._quorumStatusLoadingPromise)return this._quorumStatusLoadingPromise;if(this.loadingQuorum){console.log("[QuorumStore] loadQuorumStatus j\xE1 em andamento, ignorando.");return}return this.loadingQuorum=!0,this._quorumStatusLoadingPromise=(async()=>{var s,n;try{const t=await qe.get(`/pauta/${e}/quorum/status`),o=((s=t==null?void 0:t.data)==null?void 0:s.success)&&((n=t==null?void 0:t.data)==null?void 0:n.data)?t.data.data:null;return o?(this.quorumStarted=o.is_started||!1,this.quorumFinalized=o.is_finalized||!1,this.quorumFinalizedAt=o.finalized_at||null):(this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null),this.quorumStatusCache=o,this.quorumStatusLastUpdate=Date.now(),o}catch(t){throw console.error("Erro ao carregar status do qu\xF3rum:",t),this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null,this.quorumStatusCache=null,t}finally{this.loadingQuorum=!1,this._quorumStatusLoadingPromise=null}})(),this._quorumStatusLoadingPromise},async loadCurrentAttendanceStatus(e,i=!1){if(!e||!this.proponentId){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null;return}if(!i&&this.attendanceStatusCache&&this.attendanceStatusLastUpdate){const n=Date.now()-this.attendanceStatusLastUpdate;if(n<this.ATTENDANCE_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de attendance status (${n}ms atr\xE1s)`),this.attendanceStatusCache}return this._attendanceStatusLoadingPromise?this._attendanceStatusLoadingPromise:(this._attendanceStatusLoadingPromise=(async()=>{var s,n;try{const t=await qe.get(`/pauta/${e}/session-members`),r=(((n=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:n.members)||[]).find(l=>l.proponent_id===this.proponentId);return this.isPresent=(r==null?void 0:r.is_present)||!1,this.isAbsentJustified=(r==null?void 0:r.is_absent_justified)||!1,this.absenceReason=(r==null?void 0:r.absence_reason)||null,this.attendanceStatusCache=r,this.attendanceStatusLastUpdate=Date.now(),r}catch(t){throw console.error("Erro ao carregar estado da presen\xE7a:",t),this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.attendanceStatusCache=null,t}finally{this._attendanceStatusLoadingPromise=null}})(),this._attendanceStatusLoadingPromise)},invalidateQuorumStatusCache(){this.quorumStatusCache=null,this.quorumStatusLastUpdate=null},invalidateAttendanceStatusCache(){this.attendanceStatusCache=null,this.attendanceStatusLastUpdate=null},resetState(){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.quorumFinalized=!1,this.quorumStarted=!1,this.quorumFinalizedAt=null,this.invalidateQuorumStatusCache(),this.invalidateAttendanceStatusCache()}}});function Ba(e){const i=Ze(),s=Te(),n=Ua(),t=v(()=>n.isPresent),o=v(()=>n.isAbsentJustified),r=v(()=>n.absenceReason),l=v(()=>n.quorumFinalized),u=v(()=>n.quorumStarted),R=v(()=>n.quorumFinalizedAt),g=v(()=>n.loadingQuorum),y=v(()=>n.loadingAttendance),L=v(()=>n.loadingJustify||!1),U=v(()=>n.canSend);async function h(){return await n.loadQuorumStatus(e.value)}async function d(){return await n.loadCurrentAttendanceStatus(e.value)}async function x(){var P,b,V,f,z;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){de.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isAbsentJustified){de.warning("N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 uma justificativa de aus\xEAncia registrada.");return}if(n.isPresent){de.warning("N\xE3o \xE9 poss\xEDvel desmarcar a presen\xE7a ap\xF3s ela ser registrada.");return}if(!n.loadingAttendance){n.loadingAttendance=!0;try{(P=(await qe.post(`/pauta/${e.value}/session-attendance/register`,{proponent_id:parseInt(n.proponentId),present:!0})).data)!=null&&P.success&&(n.isPresent=!0,n.invalidateAttendanceStatusCache(),await n.loadCurrentAttendanceStatus(e.value,!0),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!0,userId:(b=s.user)==null?void 0:b.id,userName:(V=s.user)==null?void 0:V.first_name,source:"vereador"}),de.success("Presen\xE7a registrada com sucesso!"))}catch(C){console.error("[Vereador] Erro ao registrar presen\xE7a:",C),de.negative("Erro ao registrar presen\xE7a: "+(((z=(f=C.response)==null?void 0:f.data)==null?void 0:z.message)||C.message))}finally{n.loadingAttendance=!1}}}}async function F(P){var b,V,f,z,C;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){de.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. N\xE3o \xE9 mais poss\xEDvel justificar aus\xEAncia.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isPresent){de.warning("N\xE3o \xE9 poss\xEDvel justificar aus\xEAncia quando voc\xEA est\xE1 presente.");return}if(!n.loadingJustify){n.loadingJustify=!0;try{(b=(await qe.post(`/pauta/${e.value}/session-absences/justify`,{proponent_id:parseInt(n.proponentId),absence_reason:P})).data)!=null&&b.success&&(n.isAbsentJustified=!0,n.absenceReason=P,n.invalidateAttendanceStatusCache(),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!1,justified:!0,reason:P,userId:(V=s.user)==null?void 0:V.id,userName:(f=s.user)==null?void 0:f.first_name,source:"vereador"}),de.success("Aus\xEAncia justificada com sucesso!"))}catch(p){console.error("[Vereador] Erro ao justificar aus\xEAncia:",p),de.negative("Erro ao justificar aus\xEAncia: "+(((C=(z=p.response)==null?void 0:z.data)==null?void 0:C.message)||p.message))}finally{n.loadingJustify=!1}}}}return{isPresent:t,isAbsentJustified:o,absenceReason:r,quorumFinalized:l,quorumStarted:u,quorumFinalizedAt:R,loadingQuorum:g,loadingAttendance:y,loadingJustify:L,canSend:U,loadQuorumStatus:h,loadCurrentAttendanceStatus:d,toggleAttendance:x,justifyAbsence:F}}const Na=St("expedient",{state:()=>({smallExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},largeExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},miscellaneousSubject:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},statusCache:{small:null,large:null,miscellaneous:null},statusLastUpdate:{small:null,large:null,miscellaneous:null},STATUS_TTL:2e3,_statusLoadingPromises:{small:null,large:null,miscellaneous:null}}),getters:{proponentId(){var i;return((i=Te().user)==null?void 0:i.proponent_id)||null},unitId(){const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadStatus(e,i,s=!1){if(!e||!this.proponentId){this.resetState(i);return}const n=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",t=n==="small"?this.smallExpedient:n==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient,o=n==="small"?"small-expedient":n==="miscellaneous"?"miscellaneous-subject":"large-expedient";if(!s&&t.loadingData){console.log(`[ExpedientStore ${n}] loadStatus j\xE1 em andamento, ignorando.`);return}if(!s&&this.statusCache[n]&&this.statusLastUpdate[n]){const l=Date.now()-this.statusLastUpdate[n];if(l<this.STATUS_TTL){console.log(`[ExpedientStore ${n}] Usando cache de status (${l}ms atr\xE1s)`);const u=this.statusCache[n];return t.started=u.started||!1,t.finalized=u.finalized||!1,t.finalizedAt=u.finalizedAt||null,t.isRegistered=u.isRegistered||!1,t.registrationOrder=u.registrationOrder||null,t.registeredAt=u.registeredAt||null,this.statusCache[n]}}return this._statusLoadingPromises[n]?this._statusLoadingPromises[n]:(t.loadingData=!0,this._statusLoadingPromises[n]=(async()=>{var r,l,u,R;try{console.log(`[ExpedientStore ${n}] Carregando status do ${o} para agenda ${e} (force: ${s})`);const g=await qe.get(`/pauta/${e}/${o}/status`),y=((r=g==null?void 0:g.data)==null?void 0:r.success)&&((l=g==null?void 0:g.data)==null?void 0:l.data)?g.data.data:null;console.log(`[ExpedientStore ${n}] Resposta do status:`,y),y&&(t.started=y.is_started||!1,t.finalized=y.is_finalized||!1,t.finalizedAt=y.finalized_at||null,console.log(`[ExpedientStore ${n}] Status atualizado:`,{started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt}));const L=await qe.get(`/pauta/${e}/${o}/members`),h=(((R=(u=L==null?void 0:L.data)==null?void 0:u.data)==null?void 0:R.members)||[]).find(d=>d.proponent_id===this.proponentId);return t.isRegistered=(h==null?void 0:h.is_registered)||!1,t.registrationOrder=(h==null?void 0:h.registration_order)||null,t.registeredAt=(h==null?void 0:h.registered_at)||null,this.statusCache[n]={started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt,isRegistered:t.isRegistered,registrationOrder:t.registrationOrder,registeredAt:t.registeredAt},this.statusLastUpdate[n]=Date.now(),this.statusCache[n]}catch(g){throw console.error(`Erro ao carregar status do ${o}:`,g),this.resetState(i),g}finally{t.loadingData=!1,this._statusLoadingPromises[n]=null}})(),this._statusLoadingPromises[n])},invalidateStatusCache(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large";this.statusCache[i]=null,this.statusLastUpdate[i]=null},resetState(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large",s=i==="small"?this.smallExpedient:i==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient;s.isRegistered=!1,s.started=!1,s.finalized=!1,s.finalizedAt=null,s.registrationOrder=null,s.registeredAt=null,this.invalidateStatusCache(e)}}});var wt=Object.freeze(Object.defineProperty({__proto__:null,useExpedientStore:Na},Symbol.toStringTag,{value:"Module"}));function lt(e,i="small"){const s=Ze(),n=Te(),t=Na(),o=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",r=o==="small"?t.smallExpedient:o==="miscellaneous"?t.miscellaneousSubject:t.largeExpedient,l=i==="small"?"small-expedient":i==="miscellaneous"?"miscellaneous-subject":"large-expedient",u=i==="small"?"pequeno expediente":i==="miscellaneous"?"assuntos diversos":"grande expediente",R=v(()=>r.isRegistered),g=v(()=>r.started),y=v(()=>r.finalized),L=v(()=>r.finalizedAt),U=v(()=>r.registrationOrder),h=v(()=>r.registeredAt),d=v(()=>r.loadingData),x=v(()=>r.loadingAction),F=v(()=>t.canSend);async function P(V=!1){return await t.loadStatus(e.value,i,V)}async function b(){var f,z,C,p,I,q;if(!t.canSend||!e.value)return;if(!r.started||r.finalized){de.warning(r.finalized?`As inscri\xE7\xF5es de ${u} foram finalizadas.`:`As inscri\xE7\xF5es de ${u} ainda n\xE3o foram iniciadas.`);return}if(r.loadingAction)return;r.loadingAction=!0;const V=!r.isRegistered;try{const $=await qe.post(`/pauta/${e.value}/${l}/register`,{proponent_id:parseInt(t.proponentId),registered:V});(f=$.data)!=null&&f.success?(t.invalidateStatusCache(i),await P(),s.emit(`${l}-registration`,{unitId:parseInt(t.unitId),agendaId:parseInt(e.value),proponentId:parseInt(t.proponentId),registered:V,userId:(z=n.user)==null?void 0:z.id,userName:(C=n.user)==null?void 0:C.first_name,source:"vereador"}),V&&r.registrationOrder?de.success(`Inscri\xE7\xE3o realizada com sucesso! Sua posi\xE7\xE3o na fila: ${r.registrationOrder}\xBA`):de.success(V?"Inscri\xE7\xE3o realizada com sucesso!":"Inscri\xE7\xE3o cancelada com sucesso!")):de.error(((p=$.data)==null?void 0:p.message)||"Erro ao registrar inscri\xE7\xE3o.")}catch($){console.error(`[Vereador] Erro ao registrar ${u} via API:`,$),de.error("Erro ao registrar inscri\xE7\xE3o: "+(((q=(I=$.response)==null?void 0:I.data)==null?void 0:q.message)||$.message))}finally{r.loadingAction=!1}}return{isRegistered:R,started:g,finalized:y,finalizedAt:L,registrationOrder:U,registeredAt:h,loadingData:d,loadingAction:x,canSend:F,loadStatus:P,toggleRegistration:b}}const tn=St("voting",{state:()=>({votingStatus:null,activeReading:null,activeVoting:null,finishedReadings:[],quorumMembers:[],showReadingModal:!1,showVotingModal:!1,loadingVoting:!1,votingStatusCache:null,votingStatusLastUpdate:null,VOTING_STATUS_TTL:2e3,_votingStatusLoadingPromise:null}),getters:{activeReadingIcon:e=>e.activeReading?e.activeReading.type==="reading"?"menu_book":e.activeReading.type==="secret_voting"?"lock":"how_to_vote":"menu_book",activeReadingLabel:e=>e.activeReading?e.activeReading.type==="reading"?"Leitura em Andamento":e.activeReading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":""},actions:{async loadVotingStatus(e,i=!1){if(!e){const s=!!this.activeReading,n=!!this.activeVoting;this.votingStatus=null,this.activeReading=null,this.activeVoting=null,s&&(this.showReadingModal=!1),n&&(this.showVotingModal=!1);return}if(!i&&this.votingStatusCache&&this.votingStatusLastUpdate){const n=Date.now()-this.votingStatusLastUpdate;if(n<this.VOTING_STATUS_TTL)return console.log(`[VotingStore] Usando cache de voting status (${n}ms atr\xE1s)`),this.votingStatusCache}if(this._votingStatusLoadingPromise)return this._votingStatusLoadingPromise;if(!this.loadingVoting)return this.loadingVoting=!0,this._votingStatusLoadingPromise=(async()=>{var s,n,t,o,r,l,u,R;try{const g=await qe.get(`/pauta/${e}/voting/status`);if((s=g.data)!=null&&s.success){this.votingStatus=g.data.data,this.finishedReadings=((n=g.data.data)==null?void 0:n.finished_readings)||[],this.quorumMembers=((o=(t=g.data.data)==null?void 0:t.active_voting)==null?void 0:o.quorum_members)||[];const y=(r=this.activeReading)==null?void 0:r.id,L=(l=this.activeVoting)==null?void 0:l.id,U=!!this.activeReading,h=!!this.activeVoting;if((R=(u=this.votingStatus)==null?void 0:u.active_voting)!=null&&R.readings){const b=this.votingStatus.active_voting.readings.filter(C=>!C.finished_at),V=b.find(C=>C.type==="secret_voting"),f=b.find(C=>C.type==="voting"),z=b.find(C=>C.type==="reading");V?(this.activeVoting=V,this.activeReading=null):f?(this.activeVoting=f,this.activeReading=null):z?(this.activeReading=z,this.activeVoting=null):(this.activeReading=null,this.activeVoting=null)}else this.activeReading=null,this.activeVoting=null;const d=!y&&!L,x=U&&!this.activeReading&&!!this.activeVoting,F=this.activeVoting&&(d||this.activeVoting.id!==L||x),P=this.activeReading&&(d||this.activeReading.id!==y);F?(this.showVotingModal=!0,this.showReadingModal=!1):P&&!this.activeVoting&&(this.showReadingModal=!0,this.showVotingModal=!1),!this.activeVoting&&L&&(this.showVotingModal=!1),!this.activeReading&&y&&(this.showReadingModal=!1),this.votingStatusCache=g.data.data,this.votingStatusLastUpdate=Date.now()}}catch(g){throw console.error("[Vereador] Erro ao carregar status da vota\xE7\xE3o:",g),this.votingStatus=null,this.activeReading=null,this.activeVoting=null,this.showReadingModal=!1,this.showVotingModal=!1,this.votingStatusCache=null,g}finally{this.loadingVoting=!1,this._votingStatusLoadingPromise=null}})(),this._votingStatusLoadingPromise},invalidateVotingStatusCache(){this.votingStatusCache=null,this.votingStatusLastUpdate=null}}});function Qa(e){const i=tn(),s=v(()=>i.votingStatus),n=v(()=>i.activeReading),t=v(()=>i.activeVoting),o=v(()=>i.finishedReadings),r=v(()=>i.quorumMembers),l=v({get:()=>i.showReadingModal,set:h=>{i.showReadingModal=h}}),u=v({get:()=>i.showVotingModal,set:h=>{i.showVotingModal=h}}),R=v(()=>i.loadingVoting),g=v(()=>i.activeReadingIcon),y=v(()=>i.activeReadingLabel);async function L(h=!1){return await i.loadVotingStatus(e.value,h)}async function U(){return i.invalidateVotingStatusCache(),await L()}return{votingStatus:s,activeReading:n,activeVoting:t,finishedReadings:o,quorumMembers:r,showReadingModal:l,showVotingModal:u,loadingVoting:R,activeReadingIcon:g,activeReadingLabel:y,loadVotingStatus:L,handleVoteRegistered:U}}const an=St("voiceRequest",{state:()=>({hasRequest:!1,requestOrder:null,requestedAt:null,currentSpeech:null,allSpeeches:[],remainingTime:0,loadingData:!1,speechInterval:null,voiceRequestStatusCache:null,voiceRequestStatusLastUpdate:null,VOICE_REQUEST_STATUS_TTL:2e3,_voiceRequestStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=Te().user)==null?void 0:i.proponent_id)||null},unitId(){const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var t;const e=Te(),i=Ue.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n},allFinishedSpeeches(){return this.allSpeeches.filter(e=>e.status==="finished").sort((e,i)=>new Date(i.finished_at||0)-new Date(e.finished_at||0))}},actions:{updateRemainingTime(){if(!this.currentSpeech){this.remainingTime=0;return}const e=this.currentSpeech;let i=e.used_seconds||0;e.status==="speaking"&&e.started_at&&(i+=Math.floor((new Date-new Date(e.started_at))/1e3));const s=(e.allocated_minutes+e.additional_minutes)*60;this.remainingTime=Math.max(0,s-i)},ensureSpeechInterval(){var e;!this.speechInterval&&((e=this.currentSpeech)==null?void 0:e.status)==="speaking"&&(this.speechInterval=setInterval(()=>{this.updateRemainingTime()},1e3))},clearSpeechInterval(){this.speechInterval&&(clearInterval(this.speechInterval),this.speechInterval=null)},async loadStatus(e,i=!1){if(!(!i&&this.loadingData)){if(!e||!this.proponentId){this.resetState();return}if(!i&&this.voiceRequestStatusCache&&this.voiceRequestStatusLastUpdate){const n=Date.now()-this.voiceRequestStatusLastUpdate;if(n<this.VOICE_REQUEST_STATUS_TTL)return console.log(`[VoiceRequestStore] Usando cache de voice request status (${n}ms atr\xE1s)`),this.voiceRequestStatusCache}return this._voiceRequestStatusLoadingPromise?this._voiceRequestStatusLoadingPromise:(this.loadingData=!0,this._voiceRequestStatusLoadingPromise=(async()=>{var s,n;try{const t=await qe.get(`/api/pauta/${e}/voice-request/members`);let o=!1;if((s=t==null?void 0:t.data)!=null&&s.success){const u=(t.data.data.members||[]).find(R=>R.proponent_id===this.proponentId);o=(u==null?void 0:u.has_voice_request)&&!["finished","cancelled"].includes(u.request_status),this.hasRequest=o,this.requestOrder=(u==null?void 0:u.request_order)||null,this.requestedAt=(u==null?void 0:u.requested_at)||null}const r=await qe.get(`/api/pauta/${e}/voice-request/speeches/status`);if((n=r==null?void 0:r.data)!=null&&n.success){const u=(r.data.data.speeches||[]).filter(R=>R.proponent_id===this.proponentId);if(this.allSpeeches=u,u.length>0)if(u.sort((R,g)=>{var h,d;const y={speaking:0,paused:1,finished:2},L=(h=y[R.status])!=null?h:99,U=(d=y[g.status])!=null?d:99;return L!==U?L-U:new Date(g.started_at||0)-new Date(R.started_at||0)}),o){const R=u.find(g=>g.status==="speaking"||g.status==="paused");this.currentSpeech=R||null}else this.currentSpeech=u[0];else this.currentSpeech=null;this.currentSpeech?(this.updateRemainingTime(),this.currentSpeech.status==="speaking"?this.ensureSpeechInterval():this.clearSpeechInterval()):this.clearSpeechInterval()}this.voiceRequestStatusCache={hasRequest:this.hasRequest,requestOrder:this.requestOrder,requestedAt:this.requestedAt,currentSpeech:this.currentSpeech,allSpeeches:this.allSpeeches},this.voiceRequestStatusLastUpdate=Date.now()}catch(t){throw console.error("Erro ao carregar status de pedido de voz:",t),this.resetState(),t}finally{this.loadingData=!1,this._voiceRequestStatusLoadingPromise=null}})(),this._voiceRequestStatusLoadingPromise)}},invalidateVoiceRequestStatusCache(){this.voiceRequestStatusCache=null,this.voiceRequestStatusLastUpdate=null},resetState(){this.hasRequest=!1,this.requestOrder=null,this.requestedAt=null,this.currentSpeech=null,this.allSpeeches=[],this.remainingTime=0,this.clearSpeechInterval(),this.invalidateVoiceRequestStatusCache()}}});function Ja(e){const i=an(),s=v(()=>i.hasRequest),n=v(()=>i.requestOrder),t=v(()=>i.requestedAt),o=v(()=>i.currentSpeech),r=v(()=>i.allFinishedSpeeches),l=v(()=>i.remainingTime),u=v(()=>i.loadingData),R=v(()=>i.canSend);async function g(U=!1){return await i.loadStatus(e.value,U)}function y(){i.resetState()}function L(){i.updateRemainingTime()}return Se(()=>i.currentSpeech,U=>{U?(i.updateRemainingTime(),U.status==="speaking"?i.ensureSpeechInterval():i.clearSpeechInterval()):(i.remainingTime=0,i.clearSpeechInterval())},{deep:!0,immediate:!0}),Se(()=>{var U;return(U=i.currentSpeech)==null?void 0:U.additional_minutes},()=>{i.currentSpeech&&i.updateRemainingTime()}),{hasRequest:s,requestOrder:n,requestedAt:t,currentSpeech:o,allFinishedSpeeches:r,remainingTime:l,loadingData:u,canSend:R,loadStatus:g,resetState:y,updateRemainingTime:L}}const je=ee(null),xt=ee(!1);function yt(){const e=v(()=>{var g;return((g=je.value)==null?void 0:g.small_expedient_name)||"Pequeno Expediente"}),i=v(()=>{var g;return((g=je.value)==null?void 0:g.large_expedient_name)||"Grande Expediente"}),s=v(()=>{var g,y;return(y=(g=je.value)==null?void 0:g.enable_small_expedient_speech)!=null?y:!0}),n=v(()=>{var g,y;return(y=(g=je.value)==null?void 0:g.enable_small_expedient_ata_voting)!=null?y:!1}),t=v(()=>{var g,y;return(y=(g=je.value)==null?void 0:g.enable_large_expedient)!=null?y:!0}),o=v(()=>{var g,y;return(y=(g=je.value)==null?void 0:g.enable_miscellaneous_subjects)!=null?y:!1}),r=v(()=>{var g;return((g=je.value)==null?void 0:g.miscellaneous_subjects_name)||"Assuntos Diversos"});async function l(){if(!xt.value){if(je.value)return je.value;xt.value=!0;try{const{data:g}=await qe.get("/api/config/sessao/settings");(g==null?void 0:g.success)&&(g==null?void 0:g.data)&&(je.value=g.data)}catch(g){console.error("[useSessionSettings] Erro ao carregar configura\xE7\xF5es:",g)}finally{xt.value=!1}}}function u(g){return g==="small"?e.value:g==="large"?i.value:g==="miscellaneous"?r.value:""}function R(){je.value=null}return{smallExpedientName:e,largeExpedientName:i,enableSmallExpedientSpeech:s,enableSmallExpedientAtaVoting:n,enableLargeExpedient:t,enableMiscellaneousSubjects:o,miscellaneousSubjectsName:r,loadSettings:l,getExpedientName:u,clearCache:R}}var mt=Object.freeze(Object.defineProperty({__proto__:null,useSessionSettings:yt},Symbol.toStringTag,{value:"Module"}));const sn={class:"session-overview"},nn={class:"overview-card modern-card"},on={class:"card-content"},ln={class:"summary-title"},rn={class:"summary-grid"},un={class:"tw-relative"},dn={key:0,class:"session-info-compact"},cn={class:"session-info-line"},vn={key:0,class:"session-info-line"},gn={key:1,class:"session-info-line"},fn={class:"summary-label"},mn={class:"summary-label"},hn={class:"summary-label"},pn={key:0,class:"info-banner"},bn={key:0,class:"propositions-section"},wn={class:"propositions-title"},Sn={class:"proposition-detail-section"},yn={class:"detail-value"},_n={key:0,class:"proposition-detail-section"},xn={class:"detail-value"},qn={key:1,class:"proposition-detail-section"},$n={class:"detail-value"},In={key:2,class:"proposition-detail-section"},An={class:"proponents-chips"},kn={key:3,class:"proposition-detail-section"},Vn={class:"documents-buttons"},Rn={__name:"SessionOverview",props:{sessionData:{type:Object,default:null},selectedAgendaId:{type:[Number,String],default:null},loading:{type:Boolean,default:!1}},setup(e){const i=e,s=Ze(),n=yt(),t=Ba(v(()=>i.selectedAgendaId)),o=lt(v(()=>i.selectedAgendaId),"small"),r=lt(v(()=>i.selectedAgendaId),"large"),l=Qa(v(()=>i.selectedAgendaId)),u=Ja(v(()=>i.selectedAgendaId)),R=ee([]),g=ee(!1);async function y(){var q;if(!i.selectedAgendaId){R.value=[];return}g.value=!0;try{const $=await qe.get(`/api/pauta/${i.selectedAgendaId}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),A=((q=$==null?void 0:$.data)==null?void 0:q.data)||[];R.value=A.filter(J=>J.proposition).map(J=>{var te,ne;return{id:J.proposition.id,number:J.proposition.number,year:J.proposition.year,title:J.proposition.title,ementa:J.proposition.ementa,description:J.proposition.description,species:((te=J.proposition.species)==null?void 0:te.name)||((ne=J.proposition.species)==null?void 0:ne.title)||null,proponents:J.proposition.proponents||[],documents:J.proposition.documents||[],file_url:J.proposition.file_url||null,protocol_document:J.proposition.protocol_document||null}})}catch($){console.error("[SessionOverview] Erro ao carregar proposi\xE7\xF5es:",$),R.value=[]}finally{g.value=!1}}Se(()=>i.selectedAgendaId,q=>{q?y():R.value=[]},{immediate:!0});function L(q){if(!(q!=null&&q.protocol_document))return null;const $=q.protocol_document;return $.signed_file_url||$.file_url||null}function U(q){return q!=null&&q.protocol_document?q.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}ct(()=>{i.selectedAgendaId&&y()});function h(){if(i.loading)return"Carregando...";if(i.sessionData){const q=i.sessionData.name||"Em Andamento";return q.length>20?q.substring(0,20)+"...":q}return"Aguardando"}function d(){return i.loading?"status-info":i.sessionData?"status-success":"status-info"}function x(){var q,$,A,J,te,ne,re,H;return t?(q=t.quorumFinalized)!=null&&q.value?($=t.isPresent)!=null&&$.value?"Presente":(A=t.isAbsentJustified)!=null&&A.value?"Ausente Justificado":"Ausente":(J=t.quorumStarted)!=null&&J.value?(te=t.isPresent)!=null&&te.value?"Presente":"Aguardando":(ne=t.quorumFinalizedAt)!=null&&ne.value?(re=t.isPresent)!=null&&re.value?"Presente":(H=t.isAbsentJustified)!=null&&H.value?"Ausente Justificado":"Ausente":"Aguardando":"Aguardando"}function F(){var q,$,A,J;return t?(q=t.quorumFinalized)!=null&&q.value?($=t.isPresent)!=null&&$.value?"status-success":"status-error":(A=t.quorumStarted)!=null&&A.value?(J=t.isPresent)!=null&&J.value?"status-success":"status-warning":"status-info":"status-info"}function P(){var q,$,A,J,te,ne;return o?(q=o.finalized)!=null&&q.value?"Finalizado":($=o.started)!=null&&$.value?(A=o.isRegistered)!=null&&A.value?`Inscrito (${(J=o.registrationOrder)==null?void 0:J.value}\xBA)`:"Aberto":(te=o.finalizedAt)!=null&&te.value?"Finalizado":(ne=o.registeredAt)!=null&&ne.value?"J\xE1 Inscrito":"Aguardando":"Aguardando"}function b(){var q,$;return!o||(q=o.finalized)!=null&&q.value?"status-info":($=o.isRegistered)!=null&&$.value?"status-success":"status-warning"}function V(){var q,$,A,J,te,ne;return r?(q=r.finalized)!=null&&q.value?"Finalizado":($=r.started)!=null&&$.value?(A=r.isRegistered)!=null&&A.value?`Inscrito (${(J=r.registrationOrder)==null?void 0:J.value}\xBA)`:"Aberto":(te=r.finalizedAt)!=null&&te.value?"Finalizado":(ne=r.registeredAt)!=null&&ne.value?"J\xE1 Inscrito":"Aguardando":"Aguardando"}function f(){var q,$;return!r||(q=r.finalized)!=null&&q.value?"status-info":($=r.isRegistered)!=null&&$.value?"status-success":"status-warning"}function z(){var q,$,A;return l?(q=l.activeVoting)!=null&&q.value?"Em Andamento":($=l.activeReading)!=null&&$.value?"Lendo":((A=l.finishedReadings)==null?void 0:A.value)&&l.finishedReadings.value.length>0?"J\xE1 Realizado":"Aguardando":"Aguardando"}function C(){var q,$,A;return l?(q=l.activeVoting)!=null&&q.value||($=l.activeReading)!=null&&$.value?"status-active":((A=l.finishedReadings)==null?void 0:A.value)&&l.finishedReadings.value.length>0?"status-success":"status-info":"status-info"}function p(){var q,$,A,J;return u?(q=u.currentSpeech)!=null&&q.value?"Falando":($=u.hasRequest)!=null&&$.value?(A=u.requestOrder)!=null&&A.value?`Na Fila (${u.requestOrder.value}\xBA)`:"Na Fila":((J=u.allFinishedSpeeches)==null?void 0:J.value)&&u.allFinishedSpeeches.value.length>0?"J\xE1 Falou":"Aguardando":"Aguardando"}function I(){var q,$,A;return u?(q=u.currentSpeech)!=null&&q.value?"status-active":($=u.hasRequest)!=null&&$.value?"status-warning":((A=u.allFinishedSpeeches)==null?void 0:A.value)&&u.allFinishedSpeeches.value.length>0?"status-success":"status-info":"status-info"}return(q,$)=>{var A,J,te,ne,re,H,oe,K,he,ue,D,O,j,w,ie,ce,ge,be,_,E,ae,le,X,we,_e,Ve,Pe,ye,We,Be,Q,Z,Y,$e,Ie,me,ve,Ae,Me,at,gt,ft,st,De,Et,Ft,Mt,Dt,jt,Ot,Ut,Bt,Nt,Qt,Jt,Ht,Wt,Gt,Kt,Yt,Xt,Zt,ea,ta,aa,sa,na,ia,oa,la,ra,ua,da,ca,va,ga,fa,ma,ha,pa,ba,wa,Sa,ya,_a,xa,qa;return c(),T("div",sn,[a("div",nn,[a("div",on,[a("div",ln,[S(N,{name:"dashboard",size:"20px",class:"tw-mr-2"}),$[0]||($[0]=pe(" Resumo R\xE1pido ",-1))]),a("div",rn,[a("div",{class:W(["summary-item",{active:i.sessionData}])},[a("div",un,[S(N,{name:"event",color:i.sessionData?"primary":"grey",size:"24px"},null,8,["color"]),m(s).isConnected?(c(),G(nt,{key:0,color:"positive",size:"xs",class:"session-badge"})):B("",!0)]),$[1]||($[1]=a("div",{class:"summary-label"},"Sess\xE3o",-1)),a("div",{class:W(["summary-status",d()])},k(h()),3),i.sessionData?(c(),T("div",dn,[a("div",cn,k(i.sessionData.session_date_formatted||i.sessionData.session_date||"N/A"),1),i.sessionData.session_time?(c(),T("div",vn,k(i.sessionData.session_time),1)):B("",!0),i.sessionData.session_type?(c(),T("div",gn,k(i.sessionData.session_type),1)):B("",!0)])):B("",!0)],2),a("div",{class:W(["summary-item",{active:((J=(A=m(t))==null?void 0:A.quorumStarted)==null?void 0:J.value)||((ne=(te=m(t))==null?void 0:te.quorumFinalized)==null?void 0:ne.value)||((H=(re=m(t))==null?void 0:re.quorumFinalizedAt)==null?void 0:H.value)}])},[S(N,{name:(K=(oe=m(t))==null?void 0:oe.isPresent)!=null&&K.value?"check_circle":"groups",color:(ue=(he=m(t))==null?void 0:he.isPresent)!=null&&ue.value?"positive":((O=(D=m(t))==null?void 0:D.quorumFinalized)==null?void 0:O.value)||((w=(j=m(t))==null?void 0:j.quorumFinalizedAt)==null?void 0:w.value)?"primary":"grey",size:"24px"},null,8,["name","color"]),$[2]||($[2]=a("div",{class:"summary-label"},"Qu\xF3rum",-1)),a("div",{class:W(["summary-status",F()])},k(x()),3)],2),a("div",{class:W(["summary-item",{active:((ce=(ie=m(o))==null?void 0:ie.started)==null?void 0:ce.value)||((be=(ge=m(o))==null?void 0:ge.finalized)==null?void 0:be.value)||((E=(_=m(o))==null?void 0:_.finalizedAt)==null?void 0:E.value)||((le=(ae=m(o))==null?void 0:ae.registeredAt)==null?void 0:le.value)}])},[S(N,{name:"timer",color:(we=(X=m(o))==null?void 0:X.isRegistered)!=null&&we.value||((Ve=(_e=m(o))==null?void 0:_e.finalized)==null?void 0:Ve.value)||((ye=(Pe=m(o))==null?void 0:Pe.finalizedAt)==null?void 0:ye.value)||((Be=(We=m(o))==null?void 0:We.registeredAt)==null?void 0:Be.value)?"secondary":"grey",size:"24px"},null,8,["color"]),a("div",fn,k(((Q=m(n).smallExpedientName)==null?void 0:Q.value)||"Pequeno Expediente"),1),a("div",{class:W(["summary-status",b()])},k(P()),3)],2),(Z=m(n).enableLargeExpedient)!=null&&Z.value?(c(),T("div",{key:0,class:W(["summary-item",{active:(($e=(Y=m(r))==null?void 0:Y.started)==null?void 0:$e.value)||((me=(Ie=m(r))==null?void 0:Ie.finalized)==null?void 0:me.value)||((Ae=(ve=m(r))==null?void 0:ve.finalizedAt)==null?void 0:Ae.value)||((at=(Me=m(r))==null?void 0:Me.registeredAt)==null?void 0:at.value)}])},[S(N,{name:"assignment_turned_in",color:(ft=(gt=m(r))==null?void 0:gt.isRegistered)!=null&&ft.value||((De=(st=m(r))==null?void 0:st.finalized)==null?void 0:De.value)||((Ft=(Et=m(r))==null?void 0:Et.finalizedAt)==null?void 0:Ft.value)||((Dt=(Mt=m(r))==null?void 0:Mt.registeredAt)==null?void 0:Dt.value)?"orange":"grey",size:"24px"},null,8,["color"]),a("div",mn,k(((jt=m(n).largeExpedientName)==null?void 0:jt.value)||"Grande Expediente"),1),a("div",{class:W(["summary-status",f()])},k(V()),3)],2)):B("",!0),a("div",{class:W(["summary-item",{active:((Ut=(Ot=m(l))==null?void 0:Ot.activeVoting)==null?void 0:Ut.value)||((Nt=(Bt=m(l))==null?void 0:Bt.activeReading)==null?void 0:Nt.value)||((Jt=(Qt=m(l))==null?void 0:Qt.finishedReadings)==null?void 0:Jt.value)&&m(l).finishedReadings.value.length>0}])},[S(N,{name:(Wt=(Ht=m(l))==null?void 0:Ht.activeVoting)!=null&&Wt.value?"how_to_vote":(Kt=(Gt=m(l))==null?void 0:Gt.activeReading)!=null&&Kt.value?"menu_book":"how_to_vote",color:((Xt=(Yt=m(l))==null?void 0:Yt.activeVoting)==null?void 0:Xt.value)||((ea=(Zt=m(l))==null?void 0:Zt.activeReading)==null?void 0:ea.value)||((aa=(ta=m(l))==null?void 0:ta.finishedReadings)==null?void 0:aa.value)&&m(l).finishedReadings.value.length>0?"deep-purple":"grey",size:"24px"},null,8,["name","color"]),a("div",hn,k((na=(sa=m(l))==null?void 0:sa.activeVoting)!=null&&na.value?"Vota\xE7\xE3o":(oa=(ia=m(l))==null?void 0:ia.activeReading)!=null&&oa.value?"Leitura":"Vota\xE7\xE3o"),1),a("div",{class:W(["summary-status",C()])},k(z()),3)],2),a("div",{class:W(["summary-item",{active:((ra=(la=m(u))==null?void 0:la.hasRequest)==null?void 0:ra.value)||((da=(ua=m(u))==null?void 0:ua.currentSpeech)==null?void 0:da.value)||((va=(ca=m(u))==null?void 0:ca.allFinishedSpeeches)==null?void 0:va.value)&&m(u).allFinishedSpeeches.value.length>0}])},[S(N,{name:(fa=(ga=m(u))==null?void 0:ga.currentSpeech)!=null&&fa.value?"mic":(ha=(ma=m(u))==null?void 0:ma.hasRequest)!=null&&ha.value?"mic_none":((ba=(pa=m(u))==null?void 0:pa.allFinishedSpeeches)==null?void 0:ba.value)&&m(u).allFinishedSpeeches.value.length>0?"mic":"mic_off",color:(Sa=(wa=m(u))==null?void 0:wa.currentSpeech)!=null&&Sa.value?"red":(_a=(ya=m(u))==null?void 0:ya.hasRequest)!=null&&_a.value||((qa=(xa=m(u))==null?void 0:xa.allFinishedSpeeches)==null?void 0:qa.value)&&m(u).allFinishedSpeeches.value.length>0?"orange":"grey",size:"24px"},null,8,["name","color"]),$[3]||($[3]=a("div",{class:"summary-label"},"Pedido de Voz",-1)),a("div",{class:W(["summary-status",I()])},k(p()),3)],2)]),i.selectedAgendaId?B("",!0):(c(),T("div",pn,[S(N,{name:"info",color:"primary",size:"18px",class:"tw-mr-2"}),$[4]||($[4]=a("span",{class:"banner-text"},"Aguardando sess\xE3o ser iniciada...",-1))]))])]),i.selectedAgendaId&&R.value.length>0?(c(),T("div",bn,[a("div",wn,[S(N,{name:"description",size:"20px",class:"tw-mr-2"}),$[5]||($[5]=pe(" Proposi\xE7\xF5es do Dia ",-1))]),S(ms,{separator:"",class:"propositions-list"},{default:M(()=>[(c(!0),T(ze,null,Le(R.value,fe=>(c(),G(Oa,{key:fe.id,icon:"description",class:"proposition-item","header-class":"proposition-header"},{header:M(()=>[S(tt,{avatar:""},{default:M(()=>[S(N,{name:"description",color:"primary"})]),_:1}),S(tt,null,{default:M(()=>[S(ot,{class:"proposition-number"},{default:M(()=>[pe(k(fe.number)+"/"+k(fe.year),1)]),_:2},1024),S(ot,{caption:"",class:"proposition-title"},{default:M(()=>[pe(k(fe.title||fe.ementa||"Sem t\xEDtulo"),1)]),_:2},1024)]),_:2},1024)]),default:M(()=>[S(Oe,{flat:"",class:"proposition-details"},{default:M(()=>[S(Ce,null,{default:M(()=>[a("div",Sn,[$[6]||($[6]=a("div",{class:"detail-label"},"Ementa",-1)),a("div",yn,k(fe.title||fe.ementa||fe.description||"N/A"),1)]),fe.description&&fe.description!==fe.title?(c(),T("div",_n,[$[7]||($[7]=a("div",{class:"detail-label"},"Descri\xE7\xE3o",-1)),a("div",xn,k(fe.description),1)])):B("",!0),fe.species?(c(),T("div",qn,[$[8]||($[8]=a("div",{class:"detail-label"},"Esp\xE9cie",-1)),a("div",$n,k(fe.species),1)])):B("",!0),fe.proponents&&fe.proponents.length>0?(c(),T("div",In,[$[9]||($[9]=a("div",{class:"detail-label"},"Proponentes",-1)),a("div",An,[(c(!0),T(ze,null,Le(fe.proponents,Ne=>(c(),G(Tt,{key:Ne.id,color:"primary","text-color":"white",icon:"person",size:"sm"},{default:M(()=>[pe(k(Ne.name)+" ",1),Ne.party?(c(),G(bt,{key:0},{default:M(()=>[pe(k(Ne.party),1)]),_:2},1024)):B("",!0)]),_:2},1024))),128))])])):B("",!0),fe.documents&&fe.documents.length>0||fe.file_url||fe.protocol_document?(c(),T("div",kn,[$[10]||($[10]=a("div",{class:"detail-label"},"Documentos",-1)),a("div",Vn,[(c(!0),T(ze,null,Le(fe.documents,Ne=>(c(),G(ke,{key:Ne.id,href:Ne.file_url||Ne.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:Ne.title||Ne.original_filename||"Abrir PDF",size:"sm",class:"document-button"},null,8,["href","label"]))),128)),fe.file_url&&(!fe.documents||fe.documents.length===0)?(c(),G(ke,{key:0,href:fe.file_url,target:"_blank",color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",class:"document-button"},null,8,["href"])):B("",!0),L(fe)&&(!fe.documents||fe.documents.length===0)?(c(),G(ke,{key:1,href:L(fe),target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:U(fe),size:"sm",class:"document-button"},null,8,["href","label"])):B("",!0)])])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):B("",!0)])}}};var zn=Fe(Rn,[["__scopeId","data-v-838ce642"]]),Lt=Je({name:"QInnerLoading",props:{...Vt,...ts,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:i}){const s=Xe(),n=Rt(e,s.proxy.$q),{transitionProps:t,transitionStyle:o}=as(e),r=v(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),l=v(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function u(){const g=[se(Ea,{size:e.size,color:e.color})];return e.label!==void 0&&g.push(se("div",{class:l.value,style:e.labelStyle},[e.label])),g}function R(){return e.showing===!0?se("div",{class:r.value,style:o.value},i.default!==void 0?i.default():u()):null}return()=>se(Va,t.value,R)}});function Qe(e){if(!e)return"";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function Aa(e){const i=Math.floor(e/60),s=e%60;return`${i}:${s.toString().padStart(2,"0")}`}const Cn={class:"card-header quorum-header"},Tn={class:"tw-flex tw-items-center tw-gap-3"},Ln={class:"card-icon-wrapper"},Pn={class:"tw-flex tw-flex-col tw-gap-2"},En={key:0,class:"status-message text-grey-8"},Fn={key:1,class:"status-hint text-grey-6"},Mn={class:"status-avatar status-present"},Dn={class:"status-avatar status-waiting"},jn={class:"tw-flex tw-flex-col tw-gap-2"},On={key:0,class:"status-message text-grey-8"},Un={key:1,class:"status-hint text-grey-6"},Bn={class:"status-avatar status-absent"},Nn={class:"status-avatar status-waiting"},Qn={key:5,class:"tw-w-full"};const Jn={__name:"QuorumCard",props:{isPresent:{type:Boolean,default:!1},isAbsentJustified:{type:Boolean,default:!1},absenceReason:{type:String,default:null},quorumFinalized:{type:Boolean,default:!1},quorumStarted:{type:Boolean,default:!1},quorumFinalizedAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingQuorum:{type:Boolean,default:!1},loadingAttendance:{type:Boolean,default:!1},loadingJustify:{type:Boolean,default:!1}},emits:["toggle-attendance","justify-absence"],setup(e,{emit:i}){const s=e,n=i,t=ee(!1),o=ee(""),r=v(()=>!s.canSend||!s.selectedAgendaId||!s.quorumStarted||s.quorumFinalized||s.isAbsentJustified||s.loadingAttendance||s.loadingQuorum),l=v(()=>s.canSend?s.selectedAgendaId?s.quorumStarted?s.quorumFinalized?"Qu\xF3rum foi finalizado":s.isAbsentJustified?"N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 justificativa de aus\xEAncia":s.loadingAttendance?"Processando presen\xE7a...":s.loadingQuorum?"Carregando qu\xF3rum...":"":"Qu\xF3rum ainda n\xE3o foi iniciado":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function u(){if(console.log("[QuorumCard] handleToggleAttendance chamado",{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,quorumStarted:s.quorumStarted,quorumFinalized:s.quorumFinalized,loadingAttendance:s.loadingAttendance,loadingQuorum:s.loadingQuorum,isButtonDisabled:r.value}),r.value){console.warn("[QuorumCard] Bot\xE3o est\xE1 desabilitado:",l.value);return}console.log("[QuorumCard] Emitindo toggle-attendance"),n("toggle-attendance")}function R(){t.value=!1,o.value=""}function g(){!o.value||!o.value.trim()||(n("justify-absence",o.value.trim()),t.value=!1,o.value="")}return(y,L)=>(c(),G(Oe,{flat:"",class:"modern-card quorum-card tw-h-full tw-relative tw-overflow-hidden"},{default:M(()=>[a("div",Cn,[a("div",Tn,[a("div",Ln,[S(N,{name:"groups",size:"24px",class:"tw-text-white"})]),L[3]||(L[3]=a("div",{class:"card-title"},"Qu\xF3rum",-1))])]),S(Ce,{class:"tw-relative tw-p-4",style:{"min-height":"120px"}},{default:M(()=>[S(Lt,{showing:e.loadingQuorum,color:"primary",size:"50px"},null,8,["showing"]),e.loadingQuorum?B("",!0):(c(),T(ze,{key:0},[e.quorumFinalized?(c(),G(Re,{key:0,class:"modern-banner banner-finalized q-mb-3",dense:""},{avatar:M(()=>[a("div",{class:W(["status-avatar",e.isPresent?"status-present":e.isAbsentJustified?"status-waiting":"status-absent"])},[S(N,{name:e.isPresent?"check_circle":e.isAbsentJustified?"event_busy":"cancel",size:"24px"},null,8,["name"])],2)]),default:M(()=>[a("div",Pn,[L[5]||(L[5]=a("div",{class:"status-title"},"Qu\xF3rum Finalizado",-1)),a("div",{class:W(["status-message",e.isPresent?"text-positive":e.isAbsentJustified?"text-info":"text-negative"])},k(e.isPresent?"Voc\xEA estava presente no qu\xF3rum":e.isAbsentJustified?"Falta Justificada":"Voc\xEA n\xE3o estava presente no qu\xF3rum"),3),e.isAbsentJustified&&e.absenceReason?(c(),T("div",En,[L[4]||(L[4]=a("strong",null,"Justificativa:",-1)),pe(" "+k(e.absenceReason),1)])):B("",!0),e.quorumFinalizedAt?(c(),T("div",Fn," Finalizado em: "+k(m(Qe)(e.quorumFinalizedAt)),1)):B("",!0),L[6]||(L[6]=a("div",{class:"status-hint text-grey-6"}," Aguarde um novo qu\xF3rum ser iniciado. ",-1))])]),_:1})):e.quorumStarted&&e.isPresent?(c(),G(Re,{key:1,class:"modern-banner banner-success q-mb-3",dense:""},{avatar:M(()=>[a("div",Mn,[S(N,{name:"check_circle",size:"24px"})])]),default:M(()=>[L[7]||(L[7]=a("div",{class:"status-title"},"Voc\xEA est\xE1 presente no qu\xF3rum",-1))]),_:1})):e.quorumStarted&&!e.isPresent&&e.isAbsentJustified?(c(),G(Re,{key:2,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:M(()=>[a("div",Dn,[S(N,{name:"event_busy",size:"24px"})])]),default:M(()=>[a("div",jn,[L[9]||(L[9]=a("div",{class:"status-title"},"Falta Justificada",-1)),e.absenceReason?(c(),T("div",On,[L[8]||(L[8]=a("strong",null,"Justificativa:",-1)),pe(" "+k(e.absenceReason),1)])):(c(),T("div",Un," Sua aus\xEAncia foi justificada. "))])]),_:1})):e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(c(),G(Re,{key:3,class:"modern-banner banner-warning q-mb-3",dense:""},{avatar:M(()=>[a("div",Bn,[S(N,{name:"person_off",size:"24px"})])]),default:M(()=>[L[10]||(L[10]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"status-title"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum"),a("div",{class:"status-hint text-grey-6"}," Marque sua presen\xE7a para participar. ")],-1))]),_:1})):e.quorumStarted?B("",!0):(c(),G(Re,{key:4,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:M(()=>[a("div",Nn,[S(N,{name:"schedule",size:"24px"})])]),default:M(()=>[L[11]||(L[11]=a("div",{class:"status-title"},"Aguardando o in\xEDcio do qu\xF3rum.",-1))]),_:1})),!e.quorumFinalized&&e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(c(),T("div",Qn,[S(ke,{class:"tw-w-full modern-action-btn btn-add",icon:"how_to_reg",label:"Marcar Presen\xE7a",disable:r.value,loading:e.loadingAttendance||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:u},{default:M(()=>[r.value?(c(),G(bt,{key:0,class:"bg-red"},{default:M(()=>[pe(k(l.value),1)]),_:1})):B("",!0)]),_:1},8,["disable","loading"]),S(ke,{class:"tw-w-full modern-action-btn btn-justify",icon:"event_busy",label:"Justificar",disable:r.value,loading:e.loadingJustify||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:L[0]||(L[0]=U=>t.value=!0)},{default:M(()=>[r.value?(c(),G(bt,{key:0,class:"bg-red"},{default:M(()=>[pe(k(l.value),1)]),_:1})):B("",!0)]),_:1},8,["disable","loading"])])):B("",!0),B("",!0)],64))]),_:1}),S(vt,{modelValue:t.value,"onUpdate:modelValue":L[2]||(L[2]=U=>t.value=U),persistent:""},{default:M(()=>[S(Oe,{style:{"min-width":"350px","max-width":"500px"}},{default:M(()=>[S(Ce,null,{default:M(()=>[...L[12]||(L[12]=[a("div",{class:"text-h6"},"Justificar Aus\xEAncia",-1)])]),_:1}),S(Ce,{class:"q-pt-none"},{default:M(()=>[S(ss,{modelValue:o.value,"onUpdate:modelValue":L[1]||(L[1]=U=>o.value=U),type:"textarea",label:"Motivo da aus\xEAncia",placeholder:"Digite o motivo da sua aus\xEAncia...",autofocus:"",rules:[U=>U&&U.trim()||"Por favor, informe o motivo da aus\xEAncia"],rows:"4",outlined:"",counter:"",maxlength:"500"},null,8,["modelValue","rules"])]),_:1}),S(ns,{align:"right",class:"text-primary"},{default:M(()=>[S(ke,{flat:"",label:"Cancelar",onClick:R}),S(ke,{flat:"",label:"Justificar",color:"primary",loading:e.loadingJustify,disable:!o.value||!o.value.trim(),onClick:g},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Hn=Fe(Jn,[["__scopeId","data-v-601c49e9"]]);const Wn={class:"quorum-tab"},Gn={class:"overview-card modern-card"},Kn={class:"card-content"},Yn={class:"summary-title"},Xn={__name:"QuorumTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=xe("quorum"),n=xe("sessionAgenda"),t=v(()=>{var l;return i.sessionId||((l=n==null?void 0:n.selectedAgendaId)==null?void 0:l.value)||null});function o(){s!=null&&s.toggleAttendance?s.toggleAttendance():console.error("[QuorumTab] quorum.toggleAttendance n\xE3o est\xE1 dispon\xEDvel")}function r(l){s!=null&&s.justifyAbsence?s.justifyAbsence(l):console.error("[QuorumTab] quorum.justifyAbsence n\xE3o est\xE1 dispon\xEDvel")}return(l,u)=>{var R,g,y,L,U,h,d,x,F,P,b,V,f,z,C,p,I,q,$,A;return c(),T("div",Wn,[a("div",Gn,[a("div",Kn,[a("div",Yn,[S(N,{name:"groups",size:"20px",class:"tw-mr-2"}),u[0]||(u[0]=pe(" Qu\xF3rum ",-1))]),S(Hn,{"is-present":((g=(R=m(s))==null?void 0:R.isPresent)==null?void 0:g.value)||!1,"is-absent-justified":((L=(y=m(s))==null?void 0:y.isAbsentJustified)==null?void 0:L.value)||!1,"absence-reason":((h=(U=m(s))==null?void 0:U.absenceReason)==null?void 0:h.value)||null,"quorum-finalized":((x=(d=m(s))==null?void 0:d.quorumFinalized)==null?void 0:x.value)||!1,"quorum-started":((P=(F=m(s))==null?void 0:F.quorumStarted)==null?void 0:P.value)||!1,"quorum-finalized-at":((V=(b=m(s))==null?void 0:b.quorumFinalizedAt)==null?void 0:V.value)||null,"selected-agenda-id":t.value,"can-send":((z=(f=m(s))==null?void 0:f.canSend)==null?void 0:z.value)||!1,"loading-quorum":((p=(C=m(s))==null?void 0:C.loadingQuorum)==null?void 0:p.value)||!1,"loading-attendance":((q=(I=m(s))==null?void 0:I.loadingAttendance)==null?void 0:q.value)||!1,"loading-justify":((A=($=m(s))==null?void 0:$.loadingJustify)==null?void 0:A.value)||!1,onToggleAttendance:o,onJustifyAbsence:r},null,8,["is-present","is-absent-justified","absence-reason","quorum-finalized","quorum-started","quorum-finalized-at","selected-agenda-id","can-send","loading-quorum","loading-attendance","loading-justify"])])])])}}};var Zn=Fe(Xn,[["__scopeId","data-v-013d4040"]]);const ei={class:"tw-flex tw-items-center tw-gap-2"},ti={class:"tw-flex tw-flex-col tw-gap-1"},ai={class:W("text-caption tw-font-bold tw-text-red-700")},si={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},ni={class:"tw-space-y-2"},ii={key:0,class:"tw-text-gray-500 tw-ml-2"},oi={class:"tw-flex tw-flex-col tw-gap-1"},li={class:W("text-body2 tw-font-bold tw-text-green-700")},ri={key:0,class:"text-caption"},ui={key:1,class:"text-caption"},di={class:"tw-flex tw-flex-col tw-gap-1"},ci={class:"text-caption"},vi={__name:"ExpedientCard",props:{title:{type:String,required:!0},expedientLabel:{type:String,required:!0},icon:{type:String,required:!0},headerClass:{type:String,required:!0},headerColor:{type:String,required:!0},buttonColor:{type:String,required:!0},buttonIcon:{type:String,required:!0},isRegistered:{type:Boolean,default:!1},isPresent:{type:Boolean,default:!1},started:{type:Boolean,default:!1},finalized:{type:Boolean,default:!1},finalizedAt:{type:String,default:null},registrationOrder:{type:Number,default:null},registeredAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},loadingAction:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},finishedSpeech:{type:Object,default:null},finishedSpeechTotalMinutes:{type:Number,default:0},finishedSpeechUsedMinutes:{type:Number,default:0},finishedSpeechUsedSeconds:{type:Number,default:0},finishedSpeechFinishedAt:{type:String,default:null},sessionInteractions:{type:Array,default:()=>[]}},emits:["toggle-registration"],setup(e,{emit:i}){const s=e,n=i,t=v(()=>!s.canSend||!s.selectedAgendaId||!s.started||s.finalized||!s.isPresent||s.loadingAction),o=v(()=>s.canSend?s.selectedAgendaId?s.started?s.finalized?"Inscri\xE7\xF5es foram finalizadas":s.isPresent?s.loadingAction?"Processando inscri\xE7\xE3o...":"":"Voc\xEA precisa estar presente no qu\xF3rum para se inscrever":"Inscri\xE7\xF5es ainda n\xE3o foram iniciadas":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function r(){if(console.log(`[ExpedientCard ${s.title}] handleToggleRegistration chamado`,{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,started:s.started,finalized:s.finalized,loadingAction:s.loadingAction,isButtonDisabled:t.value}),t.value){console.warn(`[ExpedientCard ${s.title}] Bot\xE3o est\xE1 desabilitado:`,o.value);return}console.log(`[ExpedientCard ${s.title}] Emitindo toggle-registration`),n("toggle-registration")}return(l,u)=>(c(),G(Oe,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:M(()=>[S(Ce,{class:W(`tw-flex tw-items-center tw-justify-between ${e.headerClass} tw-text-white ${l.$q.screen.lt.md?"tw-py-1":"tw-py-2"}`)},{default:M(()=>[a("div",ei,[S(N,{name:e.icon,size:l.$q.screen.lt.md?"18px":"20px"},null,8,["name","size"]),a("div",{class:W(`${l.$q.screen.lt.md?"text-body2":"text-subtitle1"} tw-font-semibold`)},k(e.title),3)])]),_:1},8,["class"]),S(Ce,{class:W(`tw-relative tw-w-full ${l.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`),style:Fa(l.$q.screen.lt.md?"min-height: 60px":"min-height: 80px")},{default:M(()=>[S(Lt,{showing:e.loadingData,color:e.headerColor,size:"50px"},null,8,["showing","color"]),e.loadingData?B("",!0):(c(),T(ze,{key:0},[e.finalized&&e.isRegistered&&!e.finishedSpeech?(c(),G(Re,{key:0,class:W(`text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:M(()=>[S(N,{name:"check_circle",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",{class:W(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-bold tw-text-green-700`)}," Inscri\xE7\xF5es Finalizadas - Voc\xEA est\xE1 inscrito ",2),e.registrationOrder?(c(),T("div",{key:0,class:W(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Sua posi\xE7\xE3o na fila: "+k(e.registrationOrder)+"\xBA ",3)):B("",!0)],2)]),_:1},8,["class"])):e.finalized&&!e.isRegistered&&!e.isPresent&&!e.finishedSpeech?(c(),G(Re,{key:1,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"person_off",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[u[0]||(u[0]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas "),a("div",{class:"text-caption"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum. ")],-1))]),_:1})):e.finalized&&!e.isRegistered&&e.isPresent&&!e.finishedSpeech?(c(),G(Re,{key:2,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"cancel",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",ti,[u[1]||(u[1]=a("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas ",-1)),a("div",ai," Voc\xEA n\xE3o est\xE1 inscrito no "+k(e.expedientLabel)+". ",1)])]),_:1})):B("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(c(),G(Re,{key:3,class:W(`bg-green-3 text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:M(()=>[S(N,{name:"mic",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",{class:W(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},"Voc\xEA est\xE1 falando",2),a("div",{class:W(`${l.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-green-700`)}," Tempo restante: "+k(m(Aa)(e.remainingTime)),3)],2)]),_:1},8,["class"])):B("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(c(),G(Re,{key:4,class:W(`bg-yellow-3 text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:M(()=>[S(N,{name:"pause",color:"orange",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",{class:W(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala est\xE1 pausada ",2),a("div",{class:W(`${l.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-yellow-700`)}," Tempo restante: "+k(m(Aa)(e.remainingTime)),3)],2)]),_:1},8,["class"])):B("",!0),e.finishedSpeech?(c(),G(Re,{key:5,class:W(`text-black ${l.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:M(()=>[S(N,{name:"check_circle",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",{class:W(`tw-flex tw-flex-col ${l.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala foi finalizada ",2),a("div",{class:W(`tw-grid tw-grid-cols-2 ${l.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-2"}`)},[a("div",null,[a("div",{class:W(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total Alocado ",2),a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},k(e.finishedSpeechTotalMinutes)+" min ",3)]),a("div",null,[a("div",{class:W(l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Utilizado ",2),a("div",{class:W(`${l.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},k(e.finishedSpeechUsedMinutes)+" min "+k(e.finishedSpeechUsedSeconds)+" s ",3)])],2),e.finishedSpeechFinishedAt?(c(),T("div",{key:0,class:W(`${l.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-600 ${l.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Finalizada em: "+k(m(Qe)(e.finishedSpeechFinishedAt)),3)):B("",!0)],2)]),_:1},8,["class"])):B("",!0),e.sessionInteractions.length>0?(c(),G(Oe,{key:6,flat:"",bordered:"",class:"q-mb-2 tw-bg-blue-50"},{default:M(()=>[S(Ce,{class:"tw-py-3"},{default:M(()=>[a("div",si,[S(N,{name:"history",color:"primary",size:"20px"}),u[2]||(u[2]=a("div",{class:"text-body2 tw-font-semibold"}," Suas Intera\xE7\xF5es na Sess\xE3o ",-1))]),a("div",ni,[(c(!0),T(ze,null,Le(e.sessionInteractions,(R,g)=>(c(),T("div",{key:g,class:"tw-text-sm tw-text-gray-700"},[S(N,{name:R.icon,color:R.color,size:"16px",class:"tw-mr-2"},null,8,["name","color"]),a("span",null,k(R.label),1),R.time?(c(),T("span",ii," ("+k(R.time)+") ",1)):B("",!0)]))),128))])]),_:1})]),_:1})):e.started&&e.isRegistered?(c(),G(Re,{key:7,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"check_circle",color:"green",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",oi,[a("div",li," Voc\xEA est\xE1 inscrito no "+k(e.title),1),e.registrationOrder?(c(),T("div",ri," Sua posi\xE7\xE3o na fila: "+k(e.registrationOrder)+"\xBA ",1)):B("",!0),e.registeredAt?(c(),T("div",ui," Inscrito em: "+k(m(Qe)(e.registeredAt)),1)):B("",!0)])]),_:1})):e.started&&!e.isPresent?(c(),G(Re,{key:8,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"person_off",color:"red",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[a("div",di,[u[3]||(u[3]=a("div",{class:"text-body2 tw-font-semibold"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum ",-1)),a("div",ci," Marque sua presen\xE7a no qu\xF3rum para poder se inscrever no "+k(e.expedientLabel)+". ",1)])]),_:1})):e.started&&!e.isRegistered&&e.isPresent?(c(),G(Re,{key:9,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"assignment",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[u[4]||(u[4]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es abertas"),a("div",{class:"text-caption"},"Clique no bot\xE3o para se inscrever.")],-1))]),_:1})):!e.started&&!e.finalized?(c(),G(Re,{key:10,class:"text-black q-mb-2",dense:""},{avatar:M(()=>[S(N,{name:"schedule",color:"blue",size:l.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:M(()=>[u[5]||(u[5]=a("div",{class:"text-body2"},"Aguardando o in\xEDcio das inscri\xE7\xF5es.",-1))]),_:1})):B("",!0),e.started&&!e.finalized&&e.isPresent?(c(),G(ke,{key:11,class:"full-width q-mt-sm",color:e.isRegistered?"negative":e.buttonColor,icon:e.isRegistered?"cancel":e.buttonIcon,label:e.isRegistered?"Remover Inscri\xE7\xE3o":"Inscrever",disable:t.value,loading:e.loadingAction,size:"md",dense:"",onClick:r},{default:M(()=>[t.value?(c(),G(bt,{key:0,class:"bg-red"},{default:M(()=>[pe(k(o.value),1)]),_:1})):B("",!0)]),_:1},8,["color","icon","label","disable","loading"])):B("",!0)],64))]),_:1},8,["class","style"])]),_:1}))}};var Pt=Fe(vi,[["__scopeId","data-v-fdc1449a"]]);const gi={class:"expedient-tab"},fi={class:"overview-card modern-card"},mi={class:"card-content"},hi={class:"summary-title"},pi={key:1,class:"tw-text-center tw-text-gray-500 tw-py-8"},bi={__name:"SmallExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=xe("sessionSettings"),n=xe("quorum"),t=xe("smallExpedient"),o=xe("smallSpeech"),r=xe("sessionInteractions"),l=xe("sessionAgenda"),u=v(()=>{var R;return i.sessionId||((R=l==null?void 0:l.selectedAgendaId)==null?void 0:R.value)||null});return(R,g)=>{var y,L,U,h,d,x,F,P,b,V,f,z,C,p,I,q,$,A,J,te,ne,re,H,oe,K,he,ue,D,O,j,w,ie,ce,ge,be,_,E,ae,le,X,we,_e,Ve,Pe,ye;return c(),T("div",gi,[a("div",fi,[a("div",mi,[a("div",hi,[S(N,{name:"timer",size:"20px",class:"tw-mr-2"}),pe(" "+k(((L=(y=m(s))==null?void 0:y.smallExpedientName)==null?void 0:L.value)||"Pequeno Expediente"),1)]),(h=(U=m(s))==null?void 0:U.enableSmallExpedientSpeech)!=null&&h.value?(c(),G(Pt,{key:0,title:((x=(d=m(s))==null?void 0:d.smallExpedientName)==null?void 0:x.value)||"Pequeno Expediente","expedient-label":(((P=(F=m(s))==null?void 0:F.smallExpedientName)==null?void 0:P.value)||"Pequeno Expediente").toLowerCase(),icon:"timer","header-class":"bg-secondary","header-color":"secondary","button-color":"secondary","button-icon":"assignment","is-registered":((V=(b=m(t))==null?void 0:b.isRegistered)==null?void 0:V.value)||!1,"is-present":((z=(f=m(n))==null?void 0:f.isPresent)==null?void 0:z.value)||!1,started:((p=(C=m(t))==null?void 0:C.started)==null?void 0:p.value)||!1,finalized:((q=(I=m(t))==null?void 0:I.finalized)==null?void 0:q.value)||!1,"finalized-at":((A=($=m(t))==null?void 0:$.finalizedAt)==null?void 0:A.value)||null,"registration-order":((te=(J=m(t))==null?void 0:J.registrationOrder)==null?void 0:te.value)||null,"registered-at":((re=(ne=m(t))==null?void 0:ne.registeredAt)==null?void 0:re.value)||null,"selected-agenda-id":u.value,"can-send":((oe=(H=m(t))==null?void 0:H.canSend)==null?void 0:oe.value)||!1,"loading-data":((he=(K=m(t))==null?void 0:K.loadingData)==null?void 0:he.value)||!1,"loading-action":((D=(ue=m(t))==null?void 0:ue.loadingAction)==null?void 0:D.value)||!1,"current-speech":((j=(O=m(o))==null?void 0:O.currentSpeech)==null?void 0:j.value)||null,"remaining-time":((ie=(w=m(o))==null?void 0:w.remainingTime)==null?void 0:ie.value)||null,"finished-speech":((ge=(ce=m(o))==null?void 0:ce.finishedSpeech)==null?void 0:ge.value)||null,"finished-speech-total-minutes":((_=(be=m(o))==null?void 0:be.finishedSpeechTotalMinutes)==null?void 0:_.value)||0,"finished-speech-used-minutes":((ae=(E=m(o))==null?void 0:E.finishedSpeechUsedMinutes)==null?void 0:ae.value)||0,"finished-speech-used-seconds":((X=(le=m(o))==null?void 0:le.finishedSpeechUsedSeconds)==null?void 0:X.value)||0,"finished-speech-finished-at":((_e=(we=m(o))==null?void 0:we.finishedSpeechFinishedAt)==null?void 0:_e.value)||null,"session-interactions":((Pe=(Ve=m(r))==null?void 0:Ve.sessionInteractions)==null?void 0:Pe.value)||[],onToggleRegistration:(ye=m(t))==null?void 0:ye.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])):(c(),T("div",pi," As falas n\xE3o est\xE3o habilitadas para o pequeno expediente. "))])])])}}};var wi=Fe(bi,[["__scopeId","data-v-42c13971"]]);const Si={class:"expedient-tab"},yi={class:"overview-card modern-card"},_i={class:"card-content"},xi={class:"summary-title"},qi={__name:"LargeExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=xe("sessionSettings"),n=xe("quorum"),t=xe("largeExpedient"),o=xe("largeSpeech"),r=xe("sessionInteractions"),l=xe("sessionAgenda"),u=v(()=>{var R;return i.sessionId||((R=l==null?void 0:l.selectedAgendaId)==null?void 0:R.value)||null});return(R,g)=>{var y,L,U,h,d,x,F,P,b,V,f,z,C,p,I,q,$,A,J,te,ne,re,H,oe,K,he,ue,D,O,j,w,ie,ce,ge,be,_,E,ae,le,X,we,_e,Ve;return c(),T("div",Si,[a("div",yi,[a("div",_i,[a("div",xi,[S(N,{name:"assignment_turned_in",size:"20px",class:"tw-mr-2"}),pe(" "+k(((L=(y=m(s))==null?void 0:y.largeExpedientName)==null?void 0:L.value)||"Grande Expediente"),1)]),S(Pt,{title:((h=(U=m(s))==null?void 0:U.largeExpedientName)==null?void 0:h.value)||"Grande Expediente","expedient-label":(((x=(d=m(s))==null?void 0:d.largeExpedientName)==null?void 0:x.value)||"Grande Expediente").toLowerCase(),icon:"assignment_turned_in","header-class":"bg-orange","header-color":"orange","button-color":"orange","button-icon":"assignment_turned_in","is-registered":((P=(F=m(t))==null?void 0:F.isRegistered)==null?void 0:P.value)||!1,"is-present":((V=(b=m(n))==null?void 0:b.isPresent)==null?void 0:V.value)||!1,started:((z=(f=m(t))==null?void 0:f.started)==null?void 0:z.value)||!1,finalized:((p=(C=m(t))==null?void 0:C.finalized)==null?void 0:p.value)||!1,"finalized-at":((q=(I=m(t))==null?void 0:I.finalizedAt)==null?void 0:q.value)||null,"registration-order":((A=($=m(t))==null?void 0:$.registrationOrder)==null?void 0:A.value)||null,"registered-at":((te=(J=m(t))==null?void 0:J.registeredAt)==null?void 0:te.value)||null,"selected-agenda-id":u.value,"can-send":((re=(ne=m(t))==null?void 0:ne.canSend)==null?void 0:re.value)||!1,"loading-data":((oe=(H=m(t))==null?void 0:H.loadingData)==null?void 0:oe.value)||!1,"loading-action":((he=(K=m(t))==null?void 0:K.loadingAction)==null?void 0:he.value)||!1,"current-speech":((D=(ue=m(o))==null?void 0:ue.currentSpeech)==null?void 0:D.value)||null,"remaining-time":((j=(O=m(o))==null?void 0:O.remainingTime)==null?void 0:j.value)||null,"finished-speech":((ie=(w=m(o))==null?void 0:w.finishedSpeech)==null?void 0:ie.value)||null,"finished-speech-total-minutes":((ge=(ce=m(o))==null?void 0:ce.finishedSpeechTotalMinutes)==null?void 0:ge.value)||0,"finished-speech-used-minutes":((_=(be=m(o))==null?void 0:be.finishedSpeechUsedMinutes)==null?void 0:_.value)||0,"finished-speech-used-seconds":((ae=(E=m(o))==null?void 0:E.finishedSpeechUsedSeconds)==null?void 0:ae.value)||0,"finished-speech-finished-at":((X=(le=m(o))==null?void 0:le.finishedSpeechFinishedAt)==null?void 0:X.value)||null,"session-interactions":((_e=(we=m(r))==null?void 0:we.sessionInteractions)==null?void 0:_e.value)||[],onToggleRegistration:(Ve=m(t))==null?void 0:Ve.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var $i=Fe(qi,[["__scopeId","data-v-d0cf9872"]]);const Ii={class:"expedient-tab"},Ai={class:"overview-card modern-card"},ki={class:"card-content"},Vi={class:"summary-title"},Ri={__name:"MiscellaneousSubjectsTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=xe("sessionSettings"),n=xe("quorum"),t=xe("miscellaneousSubject"),o=xe("miscellaneousSubjectSpeech"),r=xe("sessionInteractions"),l=xe("sessionAgenda"),u=v(()=>{var R;return i.sessionId||((R=l==null?void 0:l.selectedAgendaId)==null?void 0:R.value)||null});return(R,g)=>{var y,L,U,h,d,x,F,P,b,V,f,z,C,p,I,q,$,A,J,te,ne,re,H,oe,K,he,ue,D,O,j,w,ie,ce,ge,be,_,E,ae,le,X,we,_e,Ve;return c(),T("div",Ii,[a("div",Ai,[a("div",ki,[a("div",Vi,[S(N,{name:"topic",size:"20px",class:"tw-mr-2"}),pe(" "+k(((L=(y=m(s))==null?void 0:y.miscellaneousSubjectsName)==null?void 0:L.value)||"Assuntos Diversos"),1)]),S(Pt,{title:((h=(U=m(s))==null?void 0:U.miscellaneousSubjectsName)==null?void 0:h.value)||"Assuntos Diversos","expedient-label":(((x=(d=m(s))==null?void 0:d.miscellaneousSubjectsName)==null?void 0:x.value)||"Assuntos Diversos").toLowerCase(),icon:"topic","header-class":"bg-teal","header-color":"teal","button-color":"teal","button-icon":"topic","is-registered":((P=(F=m(t))==null?void 0:F.isRegistered)==null?void 0:P.value)||!1,"is-present":((V=(b=m(n))==null?void 0:b.isPresent)==null?void 0:V.value)||!1,started:((z=(f=m(t))==null?void 0:f.started)==null?void 0:z.value)||!1,finalized:((p=(C=m(t))==null?void 0:C.finalized)==null?void 0:p.value)||!1,"finalized-at":((q=(I=m(t))==null?void 0:I.finalizedAt)==null?void 0:q.value)||null,"registration-order":((A=($=m(t))==null?void 0:$.registrationOrder)==null?void 0:A.value)||null,"registered-at":((te=(J=m(t))==null?void 0:J.registeredAt)==null?void 0:te.value)||null,"selected-agenda-id":u.value,"can-send":((re=(ne=m(t))==null?void 0:ne.canSend)==null?void 0:re.value)||!1,"loading-data":((oe=(H=m(t))==null?void 0:H.loadingData)==null?void 0:oe.value)||!1,"loading-action":((he=(K=m(t))==null?void 0:K.loadingAction)==null?void 0:he.value)||!1,"current-speech":((D=(ue=m(o))==null?void 0:ue.currentSpeech)==null?void 0:D.value)||null,"remaining-time":((j=(O=m(o))==null?void 0:O.remainingTime)==null?void 0:j.value)||null,"finished-speech":((ie=(w=m(o))==null?void 0:w.finishedSpeech)==null?void 0:ie.value)||null,"finished-speech-total-minutes":((ge=(ce=m(o))==null?void 0:ce.finishedSpeechTotalMinutes)==null?void 0:ge.value)||0,"finished-speech-used-minutes":((_=(be=m(o))==null?void 0:be.finishedSpeechUsedMinutes)==null?void 0:_.value)||0,"finished-speech-used-seconds":((ae=(E=m(o))==null?void 0:E.finishedSpeechUsedSeconds)==null?void 0:ae.value)||0,"finished-speech-finished-at":((X=(le=m(o))==null?void 0:le.finishedSpeechFinishedAt)==null?void 0:X.value)||null,"session-interactions":((_e=(we=m(r))==null?void 0:we.sessionInteractions)==null?void 0:_e.value)||[],onToggleRegistration:(Ve=m(t))==null?void 0:Ve.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var zi=Fe(Ri,[["__scopeId","data-v-1f49aca2"]]);const Ci={class:"voting-tab"},Ti={class:"overview-card modern-card"},Li={class:"card-content"},Pi={class:"summary-title"},Ei={key:0,class:"section-container"},Fi={class:"section-title"},Mi={class:"propositions-list"},Di={class:"proposition-header"},ji={class:"proposition-badges"},Oi={class:"proposition-number"},Ui={class:"proposition-title"},Bi={key:0,class:"proposition-species"},Ni={key:1,class:"section-container"},Qi={class:"section-title"},Ji={class:"propositions-list"},Hi={class:"voting-results"},Wi={class:"results-grid"},Gi={class:"result-item result-favor"},Ki={class:"result-content"},Yi={class:"result-value"},Xi={class:"result-item result-against"},Zi={class:"result-content"},eo={class:"result-value"},to={class:"result-item result-abstain"},ao={class:"result-content"},so={class:"result-value"},no={class:"result-item result-total"},io={class:"result-content"},oo={class:"result-value"},lo={key:0,class:"members-section"},ro={class:"members-grid"},uo={class:"member-card-content"},co=["src","alt"],vo={key:1},go={class:"member-info"},fo={class:"member-name"},mo={key:0,class:"member-party"},ho={key:1,class:"secret-voting-message"},po={class:"secret-message-count"},bo={key:2,class:"no-votes-message"},wo={key:2,class:"empty-voting-state"},So={__name:"VotingTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=xe("voting",null);ct(()=>{s!=null&&s.loadVotingStatus&&s.loadVotingStatus()}),Se(()=>i.sessionId,h=>{h&&(s==null?void 0:s.loadVotingStatus)&&s.loadVotingStatus()},{immediate:!0});const n=v(()=>{var h,d;return(d=(h=s==null?void 0:s.activeVoting)==null?void 0:h.value)!=null&&d.readings?s.activeVoting.value.readings.filter(x=>x.type==="voting"||x.type==="secret_voting"):[]}),t=v(()=>{var h;return(h=s==null?void 0:s.finishedReadings)!=null&&h.value?s.finishedReadings.value.filter(d=>d.type==="voting"||d.type==="secret_voting"):[]});function o(h){if(!h.proposition)return"Proposi\xE7\xE3o sem dados";const d=h.proposition.number,x=h.proposition.year,F=h.proposition.description||h.proposition.title||"";return`${d}/${x}${F?" - "+F:""}`}function r(h){var P;if(h.type==="secret_voting")return`Vota\xE7\xE3o Secreta - ${((P=h.votes)==null?void 0:P.length)||0} voto(s)`;if(!h.votes||h.votes.length===0)return"Nenhum voto registrado";const d=l(h.votes,"favor"),x=l(h.votes,"against"),F=l(h.votes,"abstain");return`${d} a favor, ${x} contra, ${F} absten\xE7\xF5es`}function l(h,d){return!h||!Array.isArray(h)?0:h.filter(x=>x.vote===d).length}function u(h){switch(h){case"favor":return"thumb_up";case"against":return"thumb_down";case"abstain":return"remove_circle";default:return"help"}}function R(h){switch(h){case"favor":return"green";case"against":return"red";case"abstain":return"orange";default:return"grey"}}function g(h){switch(h){case"favor":return"tw-bg-green-50 tw-border-green-200";case"against":return"tw-bg-red-50 tw-border-red-200";case"abstain":return"tw-bg-orange-50 tw-border-orange-200";default:return""}}function y(h){if(!h)return"";const d=h.split(" ");return d.length>=2?(d[0][0]+d[d.length-1][0]).toUpperCase():h.substring(0,2).toUpperCase()}function L(h){if(!h)return null;if(h.startsWith("http://")||h.startsWith("https://"))return h;const d={}.VITE_API_BASE_URL||"http://127.0.0.1:8000";return h.startsWith("/")?`${d}${h}`:`${d}/${h}`}function U(h){return!h||h.type==="secret_voting"||!h.votes||!Array.isArray(h.votes)?!1:h.votes.length>0}return(h,d)=>(c(),T("div",Ci,[a("div",Ti,[a("div",Li,[a("div",Pi,[S(N,{name:"how_to_vote",size:"20px",class:"tw-mr-2"}),d[0]||(d[0]=pe(" Vota\xE7\xF5es ",-1))]),n.value.length>0?(c(),T("div",Ei,[a("div",Fi,[S(N,{name:"schedule",size:"20px",class:"section-icon",color:"primary"}),d[1]||(d[1]=a("span",{class:"section-title-text"},"Vota\xE7\xF5es em Andamento",-1))]),a("div",Mi,[(c(!0),T(ze,null,Le(n.value,x=>(c(),G(Oe,{key:x.id,flat:"",bordered:"",class:"proposition-card mobile-card"},{default:M(()=>[S(Ce,{class:"proposition-card-section"},{default:M(()=>{var F,P,b,V,f;return[a("div",Di,[a("div",ji,[S(nt,{color:x.type==="secret_voting"?"blue":"primary",label:x.type==="secret_voting"?"Secreta":"Vota\xE7\xE3o",class:"type-badge"},null,8,["color","label"]),a("span",Oi,k((F=x.proposition)==null?void 0:F.number)+"/"+k((P=x.proposition)==null?void 0:P.year),1)])]),a("div",Ui,k(((b=x.proposition)==null?void 0:b.description)||((V=x.proposition)==null?void 0:V.title)||"Sem descri\xE7\xE3o"),1),(f=x.proposition)!=null&&f.species?(c(),T("div",Bi,k(x.proposition.species.name),1)):B("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):B("",!0),t.value.length>0?(c(),T("div",Ni,[a("div",Qi,[S(N,{name:"check_circle",size:"20px",class:"section-icon",color:"positive"}),d[2]||(d[2]=a("span",{class:"section-title-text"},"Vota\xE7\xF5es Finalizadas",-1))]),a("div",Ji,[(c(!0),T(ze,null,Le(t.value,x=>(c(),G(Oa,{key:x.id,"header-class":"proposition-expansion-header mobile-expansion-header","expand-icon-class":"expansion-icon",class:"proposition-expansion mobile-expansion"},{header:M(()=>[S(tt,{avatar:"",class:"expansion-avatar"},{default:M(()=>[S(N,{name:x.type==="secret_voting"?"lock":"how_to_vote",color:x.type==="secret_voting"?"blue":"primary",size:"22px"},null,8,["name","color"])]),_:2},1024),S(tt,{class:"expansion-content"},{default:M(()=>[S(ot,{class:"expansion-title"},{default:M(()=>[pe(k(o(x)),1)]),_:2},1024),S(ot,{caption:"",class:"expansion-caption"},{default:M(()=>[pe(k(r(x)),1)]),_:2},1024)]),_:2},1024)]),default:M(()=>[S(Oe,{flat:"",class:"expansion-content-card"},{default:M(()=>[S(Ce,{class:"expansion-card-section"},{default:M(()=>{var F,P;return[a("div",Hi,[d[7]||(d[7]=a("div",{class:"results-title"}," Resultado da Vota\xE7\xE3o ",-1)),a("div",Wi,[a("div",Gi,[S(N,{name:"thumb_up",color:"green",size:"18px"}),a("div",Ki,[a("span",Yi,k(l(x.votes,"favor")),1),d[3]||(d[3]=a("span",{class:"result-label"},"A Favor",-1))])]),a("div",Xi,[S(N,{name:"thumb_down",color:"red",size:"18px"}),a("div",Zi,[a("span",eo,k(l(x.votes,"against")),1),d[4]||(d[4]=a("span",{class:"result-label"},"Contra",-1))])]),a("div",to,[S(N,{name:"remove_circle",color:"orange",size:"18px"}),a("div",ao,[a("span",so,k(l(x.votes,"abstain")),1),d[5]||(d[5]=a("span",{class:"result-label"},"Absten\xE7\xF5es",-1))])]),a("div",no,[S(N,{name:"people",color:"grey",size:"18px"}),a("div",io,[a("span",oo,k(((F=x.votes)==null?void 0:F.length)||0),1),d[6]||(d[6]=a("span",{class:"result-label"},"Total",-1))])])])]),x.type!=="secret_voting"&&U(x)?(c(),T("div",lo,[d[8]||(d[8]=a("div",{class:"members-title"}," Votos dos Vereadores ",-1)),a("div",ro,[(c(!0),T(ze,null,Le(x.votes,b=>(c(),G(Oe,{key:b.id||`vote-${b.proponent_id}-${b.vote}`,flat:"",bordered:"",class:W(["member-vote-card","mobile-member-card",g(b.vote)])},{default:M(()=>[S(Ce,{class:"member-card-section"},{default:M(()=>[a("div",uo,[S(rt,{size:"28px",color:"primary","text-color":"white",class:"member-avatar"},{default:M(()=>[b.proponent_photo?(c(),T("img",{key:0,src:L(b.proponent_photo),alt:b.proponent_name},null,8,co)):(c(),T("span",vo,k(y(b.proponent_name)),1))]),_:2},1024),a("div",go,[a("div",fo,k(b.proponent_name),1),b.proponent_party?(c(),T("div",mo,k(b.proponent_party.abbreviation||b.proponent_party.name),1)):B("",!0)]),S(N,{name:u(b.vote),color:R(b.vote),size:"18px",class:"member-vote-icon"},null,8,["name","color"])])]),_:2},1024)]),_:2},1032,["class"]))),128))])])):x.type==="secret_voting"?(c(),T("div",ho,[S(N,{name:"lock",size:"28px",color:"blue"}),d[9]||(d[9]=a("div",{class:"secret-message-text"}," Vota\xE7\xE3o secreta - Os votos n\xE3o s\xE3o exibidos publicamente ",-1)),a("div",po," Total de votos: "+k(((P=x.votes)==null?void 0:P.length)||0),1)])):x.type!=="secret_voting"?(c(),T("div",bo,[S(N,{name:"info",size:"28px",color:"grey"}),d[10]||(d[10]=a("div",{class:"no-votes-text"}," Nenhum voto registrado ",-1))])):B("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])):B("",!0),n.value.length===0&&t.value.length===0?(c(),T("div",wo,[S(N,{name:"how_to_vote",size:"64px",color:"grey-5",class:"tw-mb-4"}),d[11]||(d[11]=a("div",{class:"empty-title"},"Aguardando Vota\xE7\xF5es",-1)),d[12]||(d[12]=a("div",{class:"empty-subtitle"}," Nenhuma vota\xE7\xE3o est\xE1 em andamento ou foi finalizada ainda. ",-1))])):B("",!0)])])]))}};var yo=Fe(So,[["__scopeId","data-v-57743baf"]]);let _o=0;const xo=["click","keydown"],qo={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${_o++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function $o(e,i,s,n){const t=xe(Ma,it);if(t===it)return console.error("QTab/QRouteTab component needs to be child of QTabs"),it;const{proxy:o}=Xe(),r=ee(null),l=ee(null),u=ee(null),R=v(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),g=v(()=>t.currentModel.value===e.name),y=v(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(t.tabProps.value.activeClass?" "+t.tabProps.value.activeClass:"")+(t.tabProps.value.activeColor?` text-${t.tabProps.value.activeColor}`:"")+(t.tabProps.value.activeBgColor?` bg-${t.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&t.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||t.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),L=v(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(t.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),U=v(()=>e.disable===!0||t.hasFocus.value===!0||g.value===!1&&t.hasActiveTab.value===!0?-1:e.tabindex||0);function h(b,V){var f;if(V!==!0&&(b==null?void 0:b.qAvoidFocus)!==!0&&((f=r.value)==null||f.focus()),e.disable===!0){(n==null?void 0:n.hasRouterLink.value)===!0&&ht(b);return}if(n===void 0){t.updateModel({name:e.name}),s("click",b);return}if(n.hasRouterLink.value===!0){const z=(C={})=>{let p;const I=C.to===void 0||ls(C.to,e.to)===!0?t.avoidRouteWatcher=Pa():null;return n.navigateToRouterLink(b,{...C,returnRouterError:!0}).catch(q=>{p=q}).then(q=>{var $;if(I===t.avoidRouteWatcher&&(t.avoidRouteWatcher=!1,p===void 0&&(q===void 0||(($=q.message)==null?void 0:$.startsWith("Avoided redundant navigation"))===!0)&&t.updateModel({name:e.name})),C.returnRouterError===!0)return p!==void 0?Promise.reject(p):q})};s("click",b,z),b.defaultPrevented!==!0&&z();return}s("click",b)}function d(b){is(b,[13,32])?h(b,!0):os(b)!==!0&&b.keyCode>=35&&b.keyCode<=40&&b.altKey!==!0&&b.metaKey!==!0&&t.onKbdNavigate(b.keyCode,o.$el)===!0&&ht(b),s("keydown",b)}function x(){const b=t.tabProps.value.narrowIndicator,V=[],f=se("div",{ref:u,class:["q-tab__indicator",t.tabProps.value.indicatorClass]});e.icon!==void 0&&V.push(se(N,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&V.push(se("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&V.push(e.alertIcon!==void 0?se(N,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):se("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),b===!0&&V.push(f);const z=[se("div",{class:"q-focus-helper",tabindex:-1,ref:r}),se("div",{class:L.value},ut(i.default,V))];return b===!1&&z.push(f),z}const F={name:v(()=>e.name),rootRef:l,tabIndicatorRef:u,routeData:n};dt(()=>{t.unregisterTab(F)}),ct(()=>{t.registerTab(F)});function P(b,V){const f={ref:l,class:y.value,tabindex:U.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:h,onKeydown:d,...V};return He(se(b,f,x()),[[ka,R.value]])}return{renderTab:P,$tabs:t}}var Io=Je({name:"QTab",props:qo,emits:xo,setup(e,{slots:i,emit:s}){const{renderTab:n}=$o(e,i,s);return()=>n("div")}});let Ha=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const i=document.createElement("div");Object.assign(i.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(i),e.scrollLeft=-1e3,Ha=e.scrollLeft>=0,e.remove()}function Ao(e,i,s){const n=s===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const ko=["left","center","right","justify"];var Vo=Je({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>ko.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:i,emit:s}){const{proxy:n}=Xe(),{$q:t}=n,{registerTick:o}=_t(),{registerTick:r}=_t(),{registerTick:l}=_t(),{registerTimeout:u,removeTimeout:R}=$a(),{registerTimeout:g,removeTimeout:y}=$a(),L=ee(null),U=ee(null),h=ee(e.modelValue),d=ee(!1),x=ee(!0),F=ee(!1),P=ee(!1),b=[],V=ee(0),f=ee(!1);let z=null,C=null,p;const I=v(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ao(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),q=v(()=>{const Q=V.value,Z=h.value;for(let Y=0;Y<Q;Y++)if(b[Y].name.value===Z)return!0;return!1}),$=v(()=>`q-tabs__content--align-${d.value===!0?"left":P.value===!0?"justify":e.align}`),A=v(()=>`q-tabs row no-wrap items-center q-tabs--${d.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),J=v(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+$.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),te=v(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ne=v(()=>e.vertical!==!0&&t.lang.rtl===!0),re=v(()=>Ha===!1&&ne.value===!0);Se(ne,D),Se(()=>e.modelValue,Q=>{H({name:Q,setCurrent:!0,skipEmit:!0})}),Se(()=>e.outsideArrows,oe);function H({name:Q,setCurrent:Z,skipEmit:Y}){h.value!==Q&&(Y!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",Q),(Z===!0||e["onUpdate:modelValue"]===void 0)&&(he(h.value,Q),h.value=Q))}function oe(){o(()=>{L.value&&K({width:L.value.offsetWidth,height:L.value.offsetHeight})})}function K(Q){if(te.value===void 0||U.value===null)return;const Z=Q[te.value.container],Y=Math.min(U.value[te.value.scroll],Array.prototype.reduce.call(U.value.children,(Ie,me)=>Ie+(me[te.value.content]||0),0)),$e=Z>0&&Y>Z;d.value=$e,$e===!0&&r(D),P.value=Z<parseInt(e.breakpoint,10)}function he(Q,Z){const Y=Q!=null&&Q!==""?b.find(Ie=>Ie.name.value===Q):null,$e=Z!=null&&Z!==""?b.find(Ie=>Ie.name.value===Z):null;if(Be===!0)Be=!1;else if(Y&&$e){const Ie=Y.tabIndicatorRef.value,me=$e.tabIndicatorRef.value;z!==null&&(clearTimeout(z),z=null),Ie.style.transition="none",Ie.style.transform="none",me.style.transition="none",me.style.transform="none";const ve=Ie.getBoundingClientRect(),Ae=me.getBoundingClientRect();me.style.transform=e.vertical===!0?`translate3d(0,${ve.top-Ae.top}px,0) scale3d(1,${Ae.height?ve.height/Ae.height:1},1)`:`translate3d(${ve.left-Ae.left}px,0,0) scale3d(${Ae.width?ve.width/Ae.width:1},1,1)`,l(()=>{z=setTimeout(()=>{z=null,me.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",me.style.transform="none"},70)})}$e&&d.value===!0&&ue($e.rootRef.value)}function ue(Q){const{left:Z,width:Y,top:$e,height:Ie}=U.value.getBoundingClientRect(),me=Q.getBoundingClientRect();let ve=e.vertical===!0?me.top-$e:me.left-Z;if(ve<0){U.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ve),D();return}ve+=e.vertical===!0?me.height-Ie:me.width-Y,ve>0&&(U.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ve),D())}function D(){const Q=U.value;if(Q===null)return;const Z=Q.getBoundingClientRect(),Y=e.vertical===!0?Q.scrollTop:Math.abs(Q.scrollLeft);ne.value===!0?(x.value=Math.ceil(Y+Z.width)<Q.scrollWidth-1,F.value=Y>0):(x.value=Y>0,F.value=e.vertical===!0?Math.ceil(Y+Z.height)<Q.scrollHeight:Math.ceil(Y+Z.width)<Q.scrollWidth)}function O(Q){C!==null&&clearInterval(C),C=setInterval(()=>{be(Q)===!0&&ie()},5)}function j(){O(re.value===!0?Number.MAX_SAFE_INTEGER:0)}function w(){O(re.value===!0?0:Number.MAX_SAFE_INTEGER)}function ie(){C!==null&&(clearInterval(C),C=null)}function ce(Q,Z){const Y=Array.prototype.filter.call(U.value.children,Ae=>Ae===Z||Ae.matches&&Ae.matches(".q-tab.q-focusable")===!0),$e=Y.length;if($e===0)return;if(Q===36)return ue(Y[0]),Y[0].focus(),!0;if(Q===35)return ue(Y[$e-1]),Y[$e-1].focus(),!0;const Ie=Q===(e.vertical===!0?38:37),me=Q===(e.vertical===!0?40:39),ve=Ie===!0?-1:me===!0?1:void 0;if(ve!==void 0){const Ae=ne.value===!0?-1:1,Me=Y.indexOf(Z)+ve*Ae;return Me>=0&&Me<$e&&(ue(Y[Me]),Y[Me].focus({preventScroll:!0})),!0}}const ge=v(()=>re.value===!0?{get:Q=>Math.abs(Q.scrollLeft),set:(Q,Z)=>{Q.scrollLeft=-Z}}:e.vertical===!0?{get:Q=>Q.scrollTop,set:(Q,Z)=>{Q.scrollTop=Z}}:{get:Q=>Q.scrollLeft,set:(Q,Z)=>{Q.scrollLeft=Z}});function be(Q){const Z=U.value,{get:Y,set:$e}=ge.value;let Ie=!1,me=Y(Z);const ve=Q<me?-1:1;return me+=ve*5,me<0?(Ie=!0,me=0):(ve===-1&&me<=Q||ve===1&&me>=Q)&&(Ie=!0,me=Q),$e(Z,me),D(),Ie}function _(Q,Z){for(const Y in Q)if(Q[Y]!==Z[Y])return!1;return!0}function E(){let Q=null,Z={matchedLen:0,queryDiff:9999,hrefLen:0};const Y=b.filter(ve=>{var Ae;return((Ae=ve.routeData)==null?void 0:Ae.hasRouterLink.value)===!0}),{hash:$e,query:Ie}=n.$route,me=Object.keys(Ie).length;for(const ve of Y){const Ae=ve.routeData.exact.value===!0;if(ve.routeData[Ae===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Me,query:at,matched:gt,href:ft}=ve.routeData.resolvedLink.value,st=Object.keys(at).length;if(Ae===!0){if(Me!==$e||st!==me||_(Ie,at)===!1)continue;Q=ve.name.value;break}if(Me!==""&&Me!==$e||st!==0&&_(at,Ie)===!1)continue;const De={matchedLen:gt.length,queryDiff:me-st,hrefLen:ft.length-Me.length};if(De.matchedLen>Z.matchedLen){Q=ve.name.value,Z=De;continue}else if(De.matchedLen!==Z.matchedLen)continue;if(De.queryDiff<Z.queryDiff)Q=ve.name.value,Z=De;else if(De.queryDiff!==Z.queryDiff)continue;De.hrefLen>Z.hrefLen&&(Q=ve.name.value,Z=De)}if(Q===null&&b.some(ve=>ve.routeData===void 0&&ve.name.value===h.value)===!0){Be=!1;return}H({name:Q,setCurrent:!0})}function ae(Q){if(R(),f.value!==!0&&L.value!==null&&Q.target&&typeof Q.target.closest=="function"){const Z=Q.target.closest(".q-tab");Z&&L.value.contains(Z)===!0&&(f.value=!0,d.value===!0&&ue(Z))}}function le(){u(()=>{f.value=!1},30)}function X(){Pe.avoidRouteWatcher===!1?g(E):y()}function we(){if(p===void 0){const Q=Se(()=>n.$route.fullPath,X);p=()=>{Q(),p=void 0}}}function _e(Q){b.push(Q),V.value++,oe(),Q.routeData===void 0||n.$route===void 0?g(()=>{if(d.value===!0){const Z=h.value,Y=Z!=null&&Z!==""?b.find($e=>$e.name.value===Z):null;Y&&ue(Y.rootRef.value)}}):(we(),Q.routeData.hasRouterLink.value===!0&&X())}function Ve(Q){b.splice(b.indexOf(Q),1),V.value--,oe(),p!==void 0&&Q.routeData!==void 0&&(b.every(Z=>Z.routeData===void 0)===!0&&p(),X())}const Pe={currentModel:h,tabProps:I,hasFocus:f,hasActiveTab:q,registerTab:_e,unregisterTab:Ve,verifyRouteModel:X,updateModel:H,onKbdNavigate:ce,avoidRouteWatcher:!1};Ee(Ma,Pe);function ye(){z!==null&&clearTimeout(z),ie(),p==null||p()}let We,Be;return dt(ye),rs(()=>{We=p!==void 0,ye()}),us(()=>{We===!0&&(we(),Be=!0,X()),oe()}),()=>se("div",{ref:L,class:A.value,role:"tablist",onFocusin:ae,onFocusout:le},[se(ja,{onResize:K}),se("div",{ref:U,class:J.value,onScroll:D},zt(i.default)),se(N,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(x.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||t.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:j,onTouchstartPassive:j,onMouseupPassive:ie,onMouseleavePassive:ie,onTouchendPassive:ie}),se(N,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||t.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:w,onTouchstartPassive:w,onMouseupPassive:ie,onMouseleavePassive:ie,onTouchendPassive:ie})])}}),Ro=Je({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Xe(),t=xe(cs,it);if(t===it)return console.error("QFooter needs to be child of QLayout"),it;const o=ee(parseInt(e.heightHint,10)),r=ee(!0),l=ee(ds.value===!0||t.isContainer.value===!0?0:window.innerHeight),u=v(()=>e.reveal===!0||t.view.value.indexOf("F")!==-1||n.platform.is.ios&&t.isContainer.value===!0),R=v(()=>t.isContainer.value===!0?t.containerHeight.value:l.value),g=v(()=>{if(e.modelValue!==!0)return 0;if(u.value===!0)return r.value===!0?o.value:0;const f=t.scroll.value.position+R.value+o.value-t.height.value;return f>0?f:0}),y=v(()=>e.modelValue!==!0||u.value===!0&&r.value!==!0),L=v(()=>e.modelValue===!0&&y.value===!0&&e.reveal===!0),U=v(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(y.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),h=v(()=>{const f=t.rows.value.bottom,z={};return f[0]==="l"&&t.left.space===!0&&(z[n.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),f[2]==="r"&&t.right.space===!0&&(z[n.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),z});function d(f,z){t.update("footer",f,z)}function x(f,z){f.value!==z&&(f.value=z)}function F({height:f}){x(o,f),d("size",f)}function P(){if(e.reveal!==!0)return;const{direction:f,position:z,inflectionPoint:C}=t.scroll.value;x(r,f==="up"||z-C<100||t.height.value-R.value-z-o.value<300)}function b(f){L.value===!0&&x(r,!0),s("focusin",f)}Se(()=>e.modelValue,f=>{d("space",f),x(r,!0),t.animate()}),Se(g,f=>{d("offset",f)}),Se(()=>e.reveal,f=>{f===!1&&x(r,e.modelValue)}),Se(r,f=>{t.animate(),s("reveal",f)}),Se([o,t.scroll,t.height],P),Se(()=>n.screen.height,f=>{t.isContainer.value!==!0&&x(l,f)});const V={};return t.instances.footer=V,e.modelValue===!0&&d("size",o.value),d("space",e.modelValue),d("offset",g.value),dt(()=>{t.instances.footer===V&&(t.instances.footer=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const f=ut(i.default,[se(ja,{debounce:0,onResize:F})]);return e.elevated===!0&&f.push(se("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),se("footer",{class:U.value,style:h.value,onFocusin:b},f)}}});const zo={__name:"MobileBottomNavigation",props:{modelValue:{type:String,default:"home"},tabs:{type:Array,required:!0}},emits:["update:model-value","tab-change"],setup(e,{emit:i}){const s=e,n=i,t=v({get:()=>s.modelValue,set:r=>n("update:model-value",r)});function o(r){t.value=r,n("tab-change",r)}return(r,l)=>(c(),G(Ro,{class:"mobile-bottom-nav",elevated:""},{default:M(()=>[S(Vo,{modelValue:t.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>t.value=u),o],class:"bottom-nav-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:M(()=>[(c(!0),T(ze,null,Le(e.tabs,u=>(c(),G(Io,{key:u.name,name:u.name,icon:u.icon,label:u.label,class:W(["bottom-nav-tab",{"tab-active":t.value===u.name}])},null,8,["name","icon","label","class"]))),128))]),_:1},8,["modelValue"])]),_:1}))}};var Co=Fe(zo,[["__scopeId","data-v-a84bfa88"]]);const To={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},Lo={class:"tw-mb-3 md:tw-mb-8"},Po={class:"tw-mb-2 md:tw-mb-4"},Eo={class:"tw-mb-3 md:tw-mb-6"},Fo={key:0,class:"tw-mb-4 md:tw-mb-8"},Mo={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},Do={class:"tw-mb-4 md:tw-mb-8"},jo={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},Oo={key:0},Uo={key:1},Bo={key:2},No={key:1,class:"tw-mt-3 md:tw-mt-6"},Qo={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Jo={__name:"SpeechFullscreenModal",props:{modelValue:{type:Boolean,default:!1},speech:{type:Object,default:null},remainingTime:{type:Number,default:0},expedientType:{type:String,default:"Expediente"}},emits:["update:modelValue"],setup(e,{emit:i}){const s=e,n=i,t=v({get:()=>s.modelValue,set:A=>n("update:modelValue",A)}),o=v(()=>{var A;return((A=s.speech)==null?void 0:A.status)==="speaking"}),r=v(()=>{var A;return((A=s.speech)==null?void 0:A.status)==="paused"}),l=v(()=>{var A;return((A=s.speech)==null?void 0:A.status)==="finished"}),u=v(()=>o.value?"mic":r.value?"pause_circle":l.value?"check_circle":"mic_off"),R=v(()=>(o.value||r.value,"white")),g=v(()=>o.value?"Voc\xEA est\xE1 falando":r.value?"Fala pausada":"Fala finalizada"),y=v(()=>o.value?"Sua fala est\xE1 em andamento":r.value?"Aguarde a retomada pelo controle":"Sua fala foi finalizada"),L=v(()=>o.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":r.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":l.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),U=v(()=>o.value?"tw-bg-green-300":r.value?"tw-bg-yellow-300":"tw-bg-gray-300"),h=v(()=>s.speech?(s.speech.allocated_minutes||0)+(s.speech.additional_minutes||0):0),d=v(()=>{if(!s.speech)return 0;let A=s.speech.used_seconds||0;return o.value&&s.speech.started_at&&(A+=Math.floor((new Date-new Date(s.speech.started_at))/1e3)),Math.floor(A/60)}),x=v(()=>{var A;return((A=s.speech)==null?void 0:A.additional_minutes)||0}),F=v(()=>{if(!s.speech||h.value===0)return 0;const A=h.value*60;let J=s.speech.used_seconds||0;return o.value&&s.speech.started_at&&(J+=Math.floor((new Date-new Date(s.speech.started_at))/1e3)),Math.min(100,J/A*100)}),P=v(()=>{if(!s.speech)return 0;const A=s.speech.used_seconds||0;return Math.floor(A/60)}),b=v(()=>s.speech?(s.speech.used_seconds||0)%60:0),V=v(()=>s.remainingTime>0&&s.remainingTime<=15),f=v(()=>s.remainingTime<=0),z=v(()=>f.value?"tw-bg-red-600 tw-bg-opacity-90":V.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),C=v(()=>(f.value||V.value,"tw-text-white")),p=v(()=>f.value||V.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),I=v(()=>f.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":V.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");function q(A){if(A<=0)return"0:00";const J=Math.floor(A/60),te=A%60;return`${J}:${te.toString().padStart(2,"0")}`}let $=null;return Se(()=>[l.value,t.value],([A,J])=>{$&&(clearTimeout($),$=null),A&&J&&($=setTimeout(()=>{t.value&&l.value&&(t.value=!1),$=null},3e3))},{immediate:!0}),Se(()=>t.value,A=>{!A&&$&&(clearTimeout($),$=null)}),Ct(()=>{$&&clearTimeout($)}),(A,J)=>(c(),G(vt,{modelValue:t.value,"onUpdate:modelValue":J[0]||(J[0]=te=>t.value=te),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:M(()=>[a("div",{class:W(["fullscreen tw-flex tw-items-center tw-justify-center",L.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[a("div",To,[a("div",Lo,[S(N,{name:u.value,color:R.value,size:A.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),a("div",Po,[S(Tt,{label:s.expedientType,color:"white","text-color":"primary",size:A.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["label","size"])]),a("div",Eo,[a("h1",{class:W([A.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},k(g.value),3),a("p",{class:W([A.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},k(y.value),3)]),l.value?B("",!0):(c(),T("div",Fo,[a("div",{class:W([A.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",z.value])},[a("div",{class:W([A.$q.screen.lt.md?"text-body2":"text-h5",p.value,"tw-mb-2"])},k(I.value),3),a("div",{class:W([A.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",C.value,f.value?"tw-animate-pulse":""])},k(q(s.remainingTime)),3)],2)])),a("div",Mo,[a("div",{class:W([A.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),a("div",{class:W([A.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},k(h.value)+" min ",3)],2),a("div",{class:W([A.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),a("div",{class:W([A.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},k(d.value)+" min ",3)],2),x.value>0?(c(),T("div",{key:0,class:W([A.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),a("div",{class:W([A.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+k(x.value)+" min ",3)],2)):B("",!0)]),a("div",Do,[a("div",jo,[a("div",{class:W(["tw-h-full tw-transition-all tw-duration-1000",U.value]),style:Fa({width:F.value+"%"})},null,6)]),a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},k(F.value.toFixed(0))+"% do tempo utilizado ",3)]),a("div",{class:W([A.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[S(N,{name:"info",size:"20px",class:"tw-mr-2"}),o.value?(c(),T("span",Oo," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):r.value?(c(),T("span",Uo," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):l.value?(c(),T("span",Bo," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):B("",!0)],2),l.value?(c(),T("div",No,[a("div",{class:W([A.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[a("div",{class:W([A.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),a("div",Qo,[a("div",null,[a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),a("div",{class:W([A.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},k(h.value)+" min ",3)]),a("div",null,[a("div",{class:W([A.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),a("div",{class:W([A.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},k(P.value)+" min "+k(b.value)+" s ",3)])])],2)])):B("",!0)])],2)]),_:1},8,["modelValue"]))}};var qt=Fe(Jo,[["__scopeId","data-v-5bd5520b"]]);const Ho=["top","right","bottom","left"],kt={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Ho.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Wa(e,i){return{formClass:v(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:v(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:v(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?i.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Ga={start:"self-end",center:"self-center",end:"self-start"},Wo=Object.keys(Ga);var $t=Je({name:"QFabAction",props:{...kt,icon:{type:String,default:""},anchor:{type:String,validator:e=>Wo.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:i,emit:s}){const n=xe(Da,()=>({showing:{value:!0},onChildClick:vs})),{formClass:t,labelProps:o}=Wa(e,n.showing),r=v(()=>{const y=Ga[e.anchor];return t.value+(y!==void 0?` ${y}`:"")}),l=v(()=>e.disable===!0||n.showing.value!==!0);function u(y){n.onChildClick(y),s("click",y)}function R(){const y=[];return i.icon!==void 0?y.push(i.icon()):e.icon!==""&&y.push(se(N,{name:e.icon})),(e.label!==""||i.label!==void 0)&&y[o.value.action](se("div",o.value.data,i.label!==void 0?i.label():[e.label])),ut(i.default,y)}const g=Xe();return Object.assign(g.proxy,{click:u}),()=>se(ke,{class:r.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:u},R)}});const Go=["up","right","down","left"],Ko=["left","center","right"];var Yo=Je({name:"QFab",props:{...kt,...za,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...kt.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Go.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ko.includes(e)}},emits:Ca,setup(e,{slots:i}){const s=ee(null),n=ee(e.modelValue===!0),t=Ta(),{proxy:{$q:o}}=Xe(),{formClass:r,labelProps:l}=Wa(e,n),u=v(()=>e.persistent!==!0),{hide:R,toggle:g}=La({showing:n,hideOnRouteChange:u}),y=v(()=>({opened:n.value})),L=v(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${r.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),U=v(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),h=v(()=>{const P={id:t.value,role:"menu"};return n.value!==!0&&(P["aria-hidden"]="true"),P}),d=v(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function x(P,b){const V=i[P],f=`q-fab__${P} absolute-full`;return V===void 0?se(N,{class:f,name:e[b]||o.iconSet.fab[b]}):se("div",{class:f},V(y.value))}function F(){const P=[];return e.hideIcon!==!0&&P.push(se("div",{class:d.value},[x("icon","icon"),x("active-icon","activeIcon")])),(e.label!==""||i.label!==void 0)&&P[l.value.action](se("div",l.value.data,i.label!==void 0?i.label(y.value):[e.label])),ut(i.tooltip,P)}return Ee(Da,{showing:n,onChildClick(P){var b;R(P),(P==null?void 0:P.qAvoidFocus)!==!0&&((b=s.value)==null||b.$el.focus())}}),()=>se("div",{class:L.value},[se(ke,{ref:s,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t.value,onClick:g},F),se("div",{class:U.value,...h.value},zt(i.default))])}});const Xo={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Zo={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},el={class:"tw-text-center"},tl={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},al={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},sl={class:"text-body2 tw-text-white tw-mb-0"},nl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4 tw-relative"},il={class:"tw-max-w-4xl tw-mx-auto"},ol={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ll={class:"tw-text-center"},rl={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},ul={class:"text-body2 tw-text-gray-700"},dl={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},cl={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},vl={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},gl={class:"tw-flex tw-flex-wrap tw-gap-2"},fl={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ml={class:"tw-flex tw-flex-wrap tw-gap-2"},hl={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},pl={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},bl={class:"tw-flex tw-items-center tw-gap-3"},wl=["src","alt"],Sl={key:1},yl={class:"tw-flex-1 tw-min-w-0"},_l={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},xl={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},ql={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},$l={__name:"ReadingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},reading:{type:Object,default:null},agendaId:{type:Number,default:null},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null}},emits:["update:modelValue","request-registered"],setup(e,{emit:i}){const s=e,n=i,t=Te(),o=Ze(),r=ee(!1),l=ee(!1),u=xe("voiceRequest",null),R=v({get:()=>s.modelValue,set:b=>n("update:modelValue",b)}),g=v(()=>s.reading?s.reading.type==="reading"?"menu_book":s.reading.type==="secret_voting"?"lock":"how_to_vote":"menu_book"),y=v(()=>s.reading?s.reading.type==="reading"?"Leitura em Andamento":s.reading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":"Leitura em Andamento"),L=v(()=>s.reading?s.reading.type==="reading"?"A proposi\xE7\xE3o est\xE1 sendo lida":s.reading.type==="secret_voting"?"A vota\xE7\xE3o secreta est\xE1 em andamento":"A vota\xE7\xE3o est\xE1 em andamento":"Aguarde as informa\xE7\xF5es da proposi\xE7\xE3o");function U(b){if(!b)return"";const V=b.split(" ");return V.length>=2?(V[0][0]+V[V.length-1][0]).toUpperCase():b.substring(0,2).toUpperCase()}function h(b){b&&window.open(b,"_blank")}function d(){var V,f;if(!((f=(V=s.reading)==null?void 0:V.proposition)!=null&&f.protocol_document))return null;const b=s.reading.proposition.protocol_document;return b.signed_file_url||b.file_url||null}function x(){var V,f;return(f=(V=s.reading)==null?void 0:V.proposition)!=null&&f.protocol_document?s.reading.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function F(){var V,f,z,C,p,I;if(!s.agendaId)return;const b=(V=t.user)==null?void 0:V.proponent_id;if(!b){Ke.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}l.value=!0;try{if((f=(await qe.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:b,requested:!0})).data)!=null&&f.success){Ke.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const $=Ue.getItem("unit_id_num");$&&o.isConnected&&o.emit("voice-request-registered",{unitId:parseInt($),agendaId:parseInt(s.agendaId),proponentId:parseInt(b),proponentName:((z=t.user)==null?void 0:z.name)||((C=t.user)==null?void 0:C.first_name)||"Vereador",source:"vereador"}),n("request-registered"),u!=null&&u.loadStatus&&await u.loadStatus(!0),await new Promise(A=>setTimeout(A,500))}}catch(q){Ke.create({type:"negative",color:"blue-6",message:((I=(p=q.response)==null?void 0:p.data)==null?void 0:I.message)||"Erro ao solicitar voz"})}finally{l.value=!1,r.value=!1}}function P(){(u==null?void 0:u.showSpeechModal)!==void 0&&(u.showSpeechModal.value=!0)}return(b,V)=>(c(),G(vt,{modelValue:R.value,"onUpdate:modelValue":V[3]||(V[3]=f=>R.value=f),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:M(()=>{var f,z,C,p,I,q,$,A,J,te,ne,re,H,oe;return[a("div",Xo,[a("div",Zo,[a("div",el,[a("div",tl,[S(N,{name:g.value,color:"gray-700",size:"32px"},null,8,["name"]),a("h1",al,k(y.value),1)]),a("p",sl,k(L.value),1)])]),a("div",nl,[a("div",il,[(f=e.reading)!=null&&f.proposition?(c(),T("div",ol,[a("div",ll,[a("div",rl,k((z=e.reading.proposition.species)==null?void 0:z.name)+" "+k(e.reading.proposition.number)+"/"+k(e.reading.proposition.year),1),a("div",ul,k(e.reading.proposition.title||e.reading.proposition.ementa||"N/A"),1)])])):B("",!0),(p=(C=e.reading)==null?void 0:C.proposition)!=null&&p.description?(c(),T("div",dl,[V[4]||(V[4]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",cl,k(e.reading.proposition.description),1)])):B("",!0),((q=(I=e.reading)==null?void 0:I.proposition)==null?void 0:q.documents)&&e.reading.proposition.documents.length>0?(c(),T("div",vl,[V[5]||(V[5]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",gl,[(c(!0),T(ze,null,Le(e.reading.proposition.documents,K=>(c(),G(ke,{key:K.id,href:K.file_url||K.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:K.title||K.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((A=($=e.reading)==null?void 0:$.proposition)==null?void 0:A.file_url)||((te=(J=e.reading)==null?void 0:J.proposition)==null?void 0:te.protocol_document)?(c(),T("div",fl,[V[6]||(V[6]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",ml,[e.reading.proposition.file_url?(c(),G(ke,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:V[0]||(V[0]=K=>h(e.reading.proposition.file_url))})):B("",!0),d()?(c(),G(ke,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:x(),size:"sm",onClick:V[1]||(V[1]=K=>h(d()))},null,8,["label"])):B("",!0)])])):B("",!0),((re=(ne=e.reading)==null?void 0:ne.proposition)==null?void 0:re.proponents)&&e.reading.proposition.proponents.length>0?(c(),T("div",hl,[V[7]||(V[7]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",pl,[(c(!0),T(ze,null,Le(e.reading.proposition.proponents,K=>(c(),T("div",{key:K.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",bl,[S(rt,{size:"40px",color:"primary","text-color":"white"},{default:M(()=>[K.avatar?(c(),T("img",{key:0,src:K.avatar,alt:K.name},null,8,wl)):(c(),T("span",Sl,k(U(K.name)),1))]),_:2},1024),a("div",yl,[a("div",_l,k(K.name),1),K.party?(c(),T("div",xl,k(K.party),1)):B("",!0)])])]))),128))])])):(H=e.reading)!=null&&H.proposition?B("",!0):(c(),T("div",ql,[S(N,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),V[8]||(V[8]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da leitura ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&((oe=e.reading)==null?void 0:oe.type)==="reading"?(c(),G(Yo,{key:0,modelValue:r.value,"onUpdate:modelValue":V[2]||(V[2]=K=>r.value=K),"vertical-actions-align":"right",color:e.hasRequest?"info":"positive",icon:e.hasRequest?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:M(()=>{var K;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(c(),G($t,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((K=e.currentSpeech)==null?void 0:K.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:l.value,onClick:F},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(c(),G($t,{key:1,color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(c(),G($t,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:P})):B("",!0)]}),_:1},8,["modelValue","color","icon"])):B("",!0)])]}),_:1},8,["modelValue"]))}};var Il=Fe($l,[["__scopeId","data-v-75716dae"]]);const Al={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},kl={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},Vl={class:"tw-text-center"},Rl={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},zl={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},Cl={class:"text-body2 tw-text-white tw-mb-0"},Tl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4"},Ll={class:"tw-max-w-4xl tw-mx-auto"},Pl={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},El={class:"tw-text-center tw-mb-3"},Fl={class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"},Ml={key:0,class:"tw-flex tw-justify-center"},Dl={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200 tw-min-w-[120px]"},jl={class:"tw-text-center tw-pr-2"},Ol={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Ul={key:1,class:"tw-grid tw-grid-cols-4 tw-gap-2"},Bl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-green-50 tw-rounded-lg tw-border tw-border-green-200"},Nl={class:"tw-text-center"},Ql={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Jl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-red-50 tw-rounded-lg tw-border tw-border-red-200"},Hl={class:"tw-text-center"},Wl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Gl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-orange-50 tw-rounded-lg tw-border tw-border-orange-200"},Kl={class:"tw-text-center"},Yl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Xl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200"},Zl={class:"tw-text-center"},er={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},tr={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ar={class:"tw-text-center"},sr={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},nr={class:"text-body2 tw-text-gray-700"},ir={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},or={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},lr={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},rr={class:"tw-flex tw-flex-wrap tw-gap-2"},ur={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},dr={class:"tw-flex tw-flex-wrap tw-gap-2"},cr={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},vr={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},gr={class:"tw-flex tw-items-center tw-gap-3"},fr=["src","alt"],mr={key:1},hr={class:"tw-flex-1 tw-min-w-0"},pr={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},br={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},wr={key:6,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},Sr={key:0,class:"tw-flex-shrink-0 tw-bg-white tw-p-4 tw-border-t tw-border-gray-200 tw-shadow-md"},yr={class:"tw-max-w-2xl tw-mx-auto"},_r={class:"text-h6 tw-font-bold tw-text-gray-800 tw-mb-2 tw-text-center"},xr={key:0},qr={key:1},$r={key:2},Ir={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-3"},Ar={__name:"VotingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},voting:{type:Object,default:null},agendaId:{type:Number,required:!0},onVoteRegistered:{type:Function,default:null}},emits:["update:modelValue","vote-registered"],setup(e,{emit:i}){const s=e,n=i,t=Te(),o=Ze(),r=ee(!1),l=ee(!1),u=ee(null),R=v({get:()=>s.modelValue,set:p=>n("update:modelValue",p)});Se(()=>s.modelValue,p=>{p||(l.value=!1,u.value=null,r.value=!1)}),Se(()=>{var p;return(p=s.voting)==null?void 0:p.id},(p,I)=>{p!==I&&I!==void 0&&(l.value=!1,u.value=null,r.value=!1)}),Se(()=>s.voting,p=>{var I;console.log("[VotingFullscreenModal] Voting atualizado:",{voting:p,hasId:!!(p!=null&&p.id),hasVotes:!!(p!=null&&p.votes),votesCount:(I=p==null?void 0:p.votes)==null?void 0:I.length})},{immediate:!0,deep:!0});const g=v(()=>{var q,$,A,J,te;const p=(q=t.user)==null?void 0:q.proponent_id;if(!(($=s.voting)!=null&&$.votes)||!p)return console.log("[VotingFullscreenModal] myVote computed:",{hasVoting:!!s.voting,hasVotes:!!((A=s.voting)!=null&&A.votes),votesLength:(te=(J=s.voting)==null?void 0:J.votes)==null?void 0:te.length,proponentId:p}),null;const I=s.voting.votes.find(ne=>ne.proponent_id===parseInt(p));return(I==null?void 0:I.vote)||null}),y=v(()=>g.value!==null),L=v(()=>{const p=g.value||(l.value?u.value:null);return p?p==="favor"?"A Favor":p==="against"?"Contra":"Absten\xE7\xE3o":""});v(()=>{const p=g.value||(l.value?u.value:null);return p?p==="favor"?"thumb_up":p==="against"?"thumb_down":"remove_circle":"how_to_vote"}),v(()=>{const p=g.value||(l.value?u.value:null);return p?p==="favor"?"green":p==="against"?"red":"orange":"primary"});const U=v(()=>{const p=g.value||(l.value?u.value:null);return p?p==="favor"?"tw-text-green-600":p==="against"?"tw-text-red-600":"tw-text-orange-600":""}),h=v(()=>{var p;return((p=s.voting)==null?void 0:p.type)==="secret_voting"}),d=v(()=>h.value?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento"),x=v(()=>h.value?"Vota\xE7\xE3o secreta - Seu voto ser\xE1 mantido em sigilo":"Registre seu voto"),F=v(()=>h.value?"lock":"how_to_vote");v(()=>h.value?"purple":"deep-purple");const P=v(()=>{var I;if(!((I=s.voting)!=null&&I.votes))return{favor:0,against:0,abstain:0,total:0};const p=s.voting.votes;return{favor:p.filter(q=>q.vote==="favor").length,against:p.filter(q=>q.vote==="against").length,abstain:p.filter(q=>q.vote==="abstain").length,total:p.length}});function b(p){if(!p)return"";const I=p.split(" ");return I.length>=2?(I[0][0]+I[I.length-1][0]).toUpperCase():p.substring(0,2).toUpperCase()}function V(p){p&&window.open(p,"_blank")}function f(){var I,q;if(!((q=(I=s.voting)==null?void 0:I.proposition)!=null&&q.protocol_document))return null;const p=s.voting.proposition.protocol_document;return p.signed_file_url||p.file_url||null}function z(){var I,q;return(q=(I=s.voting)==null?void 0:I.proposition)!=null&&q.protocol_document?s.voting.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function C(p){var $,A,J,te,ne,re,H,oe,K,he,ue,D,O,j,w,ie,ce;const I=($=t.user)==null?void 0:$.proponent_id,q=((re=(ne=(te=(J=(A=s.voting)==null?void 0:A.proposition)==null?void 0:J.species)==null?void 0:te.name)==null?void 0:ne.toLowerCase())==null?void 0:re.trim())==="ata"||((ue=(he=(K=(oe=(H=s.voting)==null?void 0:H.proposition)==null?void 0:oe.species)==null?void 0:K.title)==null?void 0:he.toLowerCase())==null?void 0:ue.trim())==="ata";if(!((D=s.voting)!=null&&D.id)){Ke.create({type:"negative",color:"blue-6",message:"Erro: Vota\xE7\xE3o n\xE3o identificada"});return}if(!q&&!I){Ke.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}if(s.voting.type==="reading"){Ke.create({type:"negative",color:"blue-6",message:"N\xE3o \xE9 poss\xEDvel votar em uma leitura. Apenas vota\xE7\xF5es permitem votos."});return}if(s.voting.type!=="voting"&&s.voting.type!=="secret_voting"){Ke.create({type:"negative",color:"blue-6",message:"Tipo de vota\xE7\xE3o inv\xE1lido."});return}r.value=!0,u.value=p;try{const ge={vote:p};!q&&I&&(ge.proponent_id=parseInt(I));const be=await qe.post(`/pauta/${s.agendaId}/voting/reading/${s.voting.id}/vote`,ge);if((O=be==null?void 0:be.data)!=null&&O.success){l.value=!0;const _=Ue.getItem("unit_id_num");if(_&&o.isConnected&&o.emit("voting-vote-registered",{unitId:parseInt(_),agendaId:s.agendaId,readingId:s.voting.id,proponentId:q?null:parseInt(I),vote:p,timestamp:new Date().toISOString()}),n("vote-registered"),s.onVoteRegistered&&typeof s.onVoteRegistered=="function")try{await s.onVoteRegistered()}catch(E){console.error("[VotingFullscreenModal] Erro ao atualizar status ap\xF3s voto:",E)}else await new Promise(E=>{setTimeout(E,800)});r.value=!1}else l.value=!1,u.value=null,r.value=!1}catch(ge){console.error("[VotingFullscreenModal] Erro ao votar:",ge);const be=((w=(j=ge.response)==null?void 0:j.data)==null?void 0:w.message)||((ce=(ie=ge.response)==null?void 0:ie.data)==null?void 0:ce.error)||"Erro ao registrar voto. Tente novamente.";Ke.create({type:"negative",color:"blue-6",message:be,position:"top",timeout:5e3}),l.value=!1,u.value=null,r.value=!1}}return(p,I)=>(c(),G(vt,{modelValue:R.value,"onUpdate:modelValue":I[5]||(I[5]=q=>R.value=q),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:M(()=>{var q,$,A,J,te,ne,re,H,oe,K,he,ue,D;return[a("div",Al,[a("div",kl,[a("div",Vl,[a("div",Rl,[S(N,{name:F.value,color:"white",size:"32px"},null,8,["name"]),a("h1",zl,k(d.value),1)]),a("p",Cl,k(x.value),1)])]),a("div",Tl,[a("div",Ll,[e.voting&&e.voting.votes&&e.voting.votes.length>0?(c(),T("div",Pl,[a("div",El,[a("div",Fl,[S(N,{name:"people",color:"primary",size:"20px",class:"tw-pr-2"}),pe(" "+k((h.value,"Votos Registrados")),1)]),h.value?(c(),T("div",Ml,[a("div",Dl,[a("div",jl,[a("div",Ol,k(P.value.total),1)]),I[6]||(I[6]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Votaram ",-1))])])):(c(),T("div",Ul,[a("div",Bl,[S(N,{name:"thumb_up",color:"green",size:"20px"}),a("div",Nl,[a("div",Ql,k(P.value.favor),1),I[7]||(I[7]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," A Favor ",-1))])]),a("div",Jl,[S(N,{name:"thumb_down",color:"red",size:"20px"}),a("div",Hl,[a("div",Wl,k(P.value.against),1),I[8]||(I[8]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Contra ",-1))])]),a("div",Gl,[S(N,{name:"remove_circle",color:"orange",size:"20px"}),a("div",Kl,[a("div",Yl,k(P.value.abstain),1),I[9]||(I[9]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Absten\xE7\xF5es ",-1))])]),a("div",Xl,[S(N,{name:"people",color:"primary",size:"20px"}),a("div",Zl,[a("div",er,k(P.value.total),1),I[10]||(I[10]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Total ",-1))])])]))])])):B("",!0),(q=e.voting)!=null&&q.proposition?(c(),T("div",tr,[a("div",ar,[a("div",sr,k(($=e.voting.proposition.species)==null?void 0:$.name)+" "+k(e.voting.proposition.number)+"/"+k(e.voting.proposition.year),1),a("div",nr,k(e.voting.proposition.title||e.voting.proposition.ementa||"N/A"),1)])])):B("",!0),(J=(A=e.voting)==null?void 0:A.proposition)!=null&&J.description?(c(),T("div",ir,[I[11]||(I[11]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",or,k(e.voting.proposition.description),1)])):B("",!0),((ne=(te=e.voting)==null?void 0:te.proposition)==null?void 0:ne.documents)&&e.voting.proposition.documents.length>0?(c(),T("div",lr,[I[12]||(I[12]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",rr,[(c(!0),T(ze,null,Le(e.voting.proposition.documents,O=>(c(),G(ke,{key:O.id,href:O.file_url||O.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:O.title||O.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((H=(re=e.voting)==null?void 0:re.proposition)==null?void 0:H.file_url)||((K=(oe=e.voting)==null?void 0:oe.proposition)==null?void 0:K.protocol_document)?(c(),T("div",ur,[I[13]||(I[13]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",dr,[e.voting.proposition.file_url?(c(),G(ke,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:I[0]||(I[0]=O=>V(e.voting.proposition.file_url))})):B("",!0),f()?(c(),G(ke,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:z(),size:"sm",onClick:I[1]||(I[1]=O=>V(f()))},null,8,["label"])):B("",!0)])])):B("",!0),((ue=(he=e.voting)==null?void 0:he.proposition)==null?void 0:ue.proponents)&&e.voting.proposition.proponents.length>0?(c(),T("div",cr,[I[14]||(I[14]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",vr,[(c(!0),T(ze,null,Le(e.voting.proposition.proponents,O=>(c(),T("div",{key:O.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",gr,[S(rt,{size:"40px",color:"primary","text-color":"white"},{default:M(()=>[O.avatar?(c(),T("img",{key:0,src:O.avatar,alt:O.name},null,8,fr)):(c(),T("span",mr,k(b(O.name)),1))]),_:2},1024),a("div",hr,[a("div",pr,k(O.name),1),O.party?(c(),T("div",br,k(O.party),1)):B("",!0)])])]))),128))])])):(D=e.voting)!=null&&D.proposition?B("",!0):(c(),T("div",wr,[S(N,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),I[15]||(I[15]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da vota\xE7\xE3o ser\xE3o exibidas aqui ",-1))]))])]),e.voting&&e.voting.id&&e.voting.type!=="reading"?(c(),T("div",Sr,[a("div",yr,[a("div",_r,[y.value&&!h.value?(c(),T("span",xr,[I[16]||(I[16]=pe("Seu voto atual: ",-1)),a("strong",{class:W(U.value)},k(L.value),3)])):y.value&&h.value?(c(),T("span",qr,"Voc\xEA j\xE1 votou nesta vota\xE7\xE3o secreta")):(c(),T("span",$r,"Como deseja votar?"))]),r.value?(c(),T("div",Ir,[S(Ea,{color:"primary",size:"24px"}),I[17]||(I[17]=a("span",{class:"text-body2 tw-text-gray-600"},"Aguarde, processando voto...",-1))])):B("",!0),a("div",{class:W(["tw-grid tw-grid-cols-3 tw-gap-2",{"tw-opacity-50":r.value}])},[S(ke,{color:"green",outline:h.value?!0:g.value!=="favor",size:"md",icon:"thumb_up",label:"A Favor",class:W(["tw-rounded-md",!h.value&&g.value==="favor"?"vote-selected":""]),disable:r.value||h.value&&y.value&&g.value==="favor",loading:r.value&&u.value==="favor",onClick:I[2]||(I[2]=O=>C("favor"))},null,8,["outline","class","disable","loading"]),S(ke,{color:"red",outline:h.value?!0:g.value!=="against",size:"md",icon:"thumb_down",label:"Contra",class:W(["tw-rounded-md",!h.value&&g.value==="against"?"vote-selected":""]),disable:r.value||h.value&&y.value&&g.value==="against",loading:r.value&&u.value==="against",onClick:I[3]||(I[3]=O=>C("against"))},null,8,["outline","class","disable","loading"]),S(ke,{color:"orange",outline:h.value?!0:g.value!=="abstain",size:"md",icon:"remove_circle",label:"Absten\xE7\xE3o",class:W(["tw-py-2 tw-rounded-md",!h.value&&g.value==="abstain"?"vote-selected":""]),disable:r.value||h.value&&y.value&&g.value==="abstain",loading:r.value&&u.value==="abstain",onClick:I[4]||(I[4]=O=>C("abstain"))},null,8,["outline","class","disable","loading"])],2)])])):B("",!0)])]}),_:1},8,["modelValue"]))}};var kr=Fe(Ar,[["__scopeId","data-v-5e3e3adb"]]);const Vr={class:"tw-flex tw-flex-col"},Rr={class:"tw-text-xs tw-text-gray-300"},zr={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Cr={class:"tw-flex tw-items-center tw-justify-between tw-mb-3"},Tr={class:"tw-flex tw-items-center tw-gap-3 tw-flex-1"},Lr=["src","alt"],Pr={class:"tw-flex-1"},Er={class:"tw-font-semibold tw-text-base"},Fr={class:"tw-text-sm tw-text-gray-600"},Mr={class:"tw-flex tw-flex-col tw-gap-1"},Dr={class:"text-caption"},jr={class:"tw-flex tw-flex-col tw-gap-1"},Or={class:"text-caption"},Ur={key:0,class:"text-caption tw-text-gray-600"},Br={key:3,class:"tw-text-center tw-py-2 tw-text-gray-500 text-caption"},It={__name:"SpeechControlListModal",props:{modelValue:{type:Boolean,default:!1},agendaId:{type:[String,Number],required:!0},expedientType:{type:String,default:"small"}},emits:["update:modelValue"],setup(e,{emit:i}){const s=e,n=i,t=Ze(),o=yt(),r=v({get:()=>s.modelValue,set:D=>n("update:modelValue",D)}),l=v(()=>o.getExpedientName(s.expedientType)),u=v(()=>s.expedientType==="small"?"secondary":s.expedientType==="miscellaneous"?"teal":"orange"),R=v(()=>s.expedientType==="small"?"small-expedient":s.expedientType==="miscellaneous"?"miscellaneous-subject":"large-expedient"),g=ee(!1),y=ee(!1),L=ee([]),U=ee([]),h=ee(0);let d=null;const x=v(()=>U.value.find(D=>D.status==="speaking")),F=v(()=>U.value.find(D=>D.status==="paused"));function P(D){return U.value.find(O=>O.proponent_id===D)}function b(D){const O=P(D);return(O==null?void 0:O.status)||"pending"}function V(D){h.value;const O=P(D);if(!O)return 0;let j=O.used_seconds||0;if(O.status==="speaking"&&O.started_at){const ge=new Date(O.started_at),be=new Date;j+=Math.floor((be-ge)/1e3)}const w=O.allocated_minutes||0,ie=O.additional_minutes||0,ce=(w+ie)*60;return Math.max(0,ce-j)}function f(D){if(D<=0)return"0:00";const O=Math.floor(D/60),j=D%60;return`${O}:${j.toString().padStart(2,"0")}`}function z(D){if(!D)return"";try{return new Date(D).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return D}}function C(D){const O=P(D);if(!O||O.status!=="finished")return"0 min 0 s";const j=O.used_seconds||0,w=Math.floor(j/60),ie=j%60;return`${w} min ${ie} s`}function p(D){const O=P(D);return!O||O.status!=="finished"?null:O.finished_at||null}function I(D){if(!D)return null;if(D.startsWith("http://")||D.startsWith("https://"))return D;const O=qe.defaults.baseURL||"http://127.0.0.1:8000",j=D.startsWith("/")?D:"/"+D;return`${O}${j}`}function q(D){D.target.style.display="none"}async function $(){var D,O;try{const j=await qe.get(`/pauta/${s.agendaId}/${R.value}/members`),w=((O=(D=j==null?void 0:j.data)==null?void 0:D.data)==null?void 0:O.members)||[];L.value=w.filter(ie=>ie.is_registered&&ie.is_present).sort((ie,ce)=>{const ge=ie.registration_order||999,be=ce.registration_order||999;return ge-be})}catch(j){console.error("Erro ao carregar membros inscritos:",j)}}async function A(){var D;try{const O=await qe.get(`/pauta/${s.agendaId}/${R.value}/speeches/status`);(D=O.data)!=null&&D.success&&(U.value=O.data.data.speeches||[])}catch(O){console.error("Erro ao carregar falas:",O)}}async function J(){if(!s.agendaId){console.error("[SpeechControlListModal] agendaId n\xE3o dispon\xEDvel");return}g.value=!1,y.value=!0;try{await $(),await A(),g.value=!0}finally{y.value=!1}}function te(){d||(x.value||F.value)&&(d=setInterval(()=>{x.value||F.value?h.value++:d&&(clearInterval(d),d=null)},1e3))}function ne(){r.value=!1}Se(()=>s.modelValue,D=>{D?(o.loadSettings(),J(),setTimeout(()=>{te()},500)):(d&&(clearInterval(d),d=null),g.value=!1)}),Se([x,F],([D,O])=>{s.modelValue&&(D||O)?te():!D&&!O&&d&&(clearInterval(d),d=null)});function re(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&A()}function H(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&A()}function oe(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&A()}function K(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&A()}function he(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&A()}function ue(D){D&&D.agendaId&&parseInt(D.agendaId)===parseInt(s.agendaId)&&$()}return ct(()=>{t.on("speech-started",re),t.on("speech-paused",H),t.on("speech-resumed",oe),t.on("speech-time-added",K),t.on("speech-finished",he),s.expedientType==="small"?t.on("small-expedient-order-updated",ue):s.expedientType==="miscellaneous"?t.on("miscellaneous-subject-order-updated",ue):t.on("large-expedient-order-updated",ue)}),Ct(()=>{d&&clearInterval(d),t.off("speech-started",re),t.off("speech-paused",H),t.off("speech-resumed",oe),t.off("speech-time-added",K),t.off("speech-finished",he),s.expedientType==="small"?t.off("small-expedient-order-updated",ue):s.expedientType==="miscellaneous"?t.off("miscellaneous-subject-order-updated",ue):t.off("large-expedient-order-updated",ue)}),(D,O)=>(c(),G(vt,{modelValue:r.value,"onUpdate:modelValue":O[0]||(O[0]=j=>r.value=j),maximized:"","transition-show":"fade","transition-hide":"fade"},{default:M(()=>[S(Oe,null,{default:M(()=>[S(Ce,{class:"tw-flex tw-items-center tw-justify-between tw-bg-black tw-text-white"},{default:M(()=>[a("div",Vr,[O[1]||(O[1]=a("div",{class:"tw-text-lg tw-font-semibold"},"Controle de Fala",-1)),a("div",Rr,k(l.value)+" - Lista de Parlamentares Inscritos ",1)]),S(ke,{flat:"",round:"",dense:"",icon:"close",onClick:ne})]),_:1}),S(pt),g.value?B("",!0):(c(),G(Ce,{key:0,class:"tw-py-12"},{default:M(()=>[S(Lt,{showing:y.value,color:u.value},null,8,["showing","color"])]),_:1})),g.value?(c(),T(ze,{key:1},[S(Ce,{class:"tw-flex tw-items-center tw-gap-3"},{default:M(()=>[S(nt,{color:"grey-7"},{default:M(()=>[pe(" Total Inscritos: "+k(L.value.length),1)]),_:1}),x.value?(c(),G(nt,{key:0,color:"positive",icon:"mic"},{default:M(()=>{var j;return[pe(" Falando: "+k(((j=x.value.proponent)==null?void 0:j.name)||"N/A"),1)]}),_:1})):B("",!0),F.value?(c(),G(nt,{key:1,color:"warning",icon:"pause"},{default:M(()=>{var j;return[pe(" Pausado: "+k(((j=F.value.proponent)==null?void 0:j.name)||"N/A"),1)]}),_:1})):B("",!0),S(hs)]),_:1}),S(pt),S(Ce,{class:"tw-py-3",style:{"max-height":"calc(100vh - 150px)","overflow-y":"auto"}},{default:M(()=>[a("div",zr,[(c(!0),T(ze,null,Le(L.value,j=>(c(),G(Oe,{key:j.proponent_id,flat:"",bordered:"",class:W({"tw-border-green-500":b(j.proponent_id)==="speaking","tw-border-yellow-500":b(j.proponent_id)==="paused","tw-border-gray-300":b(j.proponent_id)==="finished"})},{default:M(()=>[S(Ce,null,{default:M(()=>[a("div",Cr,[a("div",Tr,[j.photo_url?(c(),G(rt,{key:0,size:"64px"},{default:M(()=>[a("img",{src:I(j.photo_url),alt:j.name,onError:q},null,40,Lr)]),_:2},1024)):(c(),G(rt,{key:1,size:"64px",color:"grey-4","text-color":"grey-8",icon:"person"})),a("div",Pr,[a("div",Er,k(j.name),1),a("div",Fr,k(j.party||"\u2014"),1)])]),j.registration_order?(c(),G(nt,{key:0,color:u.value,class:"tw-font-bold tw-text-lg tw-px-4 tw-py-2 tw-min-w-[56px] tw-text-center",style:{"font-size":"20px"}},{default:M(()=>[pe(k(j.registration_order)+"\xBA ",1)]),_:2},1032,["color"])):B("",!0)]),b(j.proponent_id)==="speaking"?(c(),G(Re,{key:0,class:W(["q-mb-3","dense","rounded",V(j.proponent_id)<=0?"bg-red-8 text-white":V(j.proponent_id)<=15?"bg-orange-6 text-white":"bg-green-3 text-black"])},{avatar:M(()=>[S(N,{name:"mic",color:"green",size:"20px"})]),default:M(()=>[a("div",Mr,[O[2]||(O[2]=a("div",{class:"text-body2 tw-font-semibold"}," Falando ",-1)),a("div",Dr," Tempo restante: "+k(f(V(j.proponent_id))),1)])]),_:2},1032,["class"])):b(j.proponent_id)==="paused"?(c(),G(Re,{key:1,class:"bg-yellow-3 text-black q-mb-3 dense rounded"},{avatar:M(()=>[S(N,{name:"pause",color:"orange",size:"20px"})]),default:M(()=>[O[3]||(O[3]=a("div",{class:"text-body2 tw-font-semibold"},"Pausado",-1))]),_:1})):b(j.proponent_id)==="finished"?(c(),G(Re,{key:2,class:"bg-blue-3 text-black q-mb-3 dense rounded"},{avatar:M(()=>[S(N,{name:"check_circle",color:"blue",size:"20px"})]),default:M(()=>[a("div",jr,[O[4]||(O[4]=a("div",{class:"text-body2 tw-font-semibold"}," Finalizado ",-1)),a("div",Or," Tempo utilizado: "+k(C(j.proponent_id)),1),p(j.proponent_id)?(c(),T("div",Ur," Finalizado em: "+k(z(p(j.proponent_id))),1)):B("",!0)])]),_:2},1024)):(c(),T("div",Br," Aguardando "))]),_:2},1024)]),_:2},1032,["class"]))),128))])]),_:1})],64)):B("",!0)]),_:1})]),_:1},8,["modelValue"]))}};function Nr(e){const i=ee(!1),s=ee((e==null?void 0:e.value)||null),n=ee(0),t=ee(null),o=v(()=>{const u=Ue.getItem("unit_id_num");return u?parseInt(u):null});async function r(){var u;i.value=!0;try{const R=await qe.get("/pauta",{params:{session_status:"started",per_page:1}}),g=((u=R==null?void 0:R.data)==null?void 0:u.data)||[];g.length>0?s.value=g[0].id:s.value=null}catch(R){console.error(R),s.value=null}finally{i.value=!1}}function l(u,R){if(!o.value)return;const g=Date.now(),y=s.value;if(t.value===y&&g-n.value<500){console.log("[useSessionAgenda] ensureSubscribed ignorado - subscri\xE7\xE3o muito recente");return}const L=`unit.${o.value}.sessions`;if(u.subscribeToChannel(L),y){const U=`unit.${o.value}.agenda.${y}`;u.subscribeToChannel(U),t.value!==y||g-n.value>=1e3?(t.value=y,n.value=g,R&&(console.log("[useSessionAgenda] Executando fun\xE7\xF5es de carregamento para agenda:",y),Object.values(R).forEach(h=>{typeof h=="function"&&h()}))):console.log("[useSessionAgenda] Fun\xE7\xF5es de carregamento ignoradas - subscri\xE7\xE3o muito recente")}}return{loadingAgendas:i,selectedAgendaId:s,unitId:o,loadStartedAgenda:r,ensureSubscribed:l}}function At(e,i,s="small"){const n=ee(null),t=ee(0),o=ee(null),r=ee(!1),l=ee(!1),u=ee(0),R=s==="small"?"small-expedient":s==="miscellaneous"?"miscellaneous-subject":"large-expedient",g=v(()=>{var P;return((P=n.value)==null?void 0:P.status)==="finished"?n.value:null}),y=v(()=>g.value?(g.value.allocated_minutes||0)+(g.value.additional_minutes||0):0),L=v(()=>{if(!g.value)return 0;const P=g.value.used_seconds||0;return Math.floor(P/60)}),U=v(()=>g.value?(g.value.used_seconds||0)%60:0),h=v(()=>{var P;return((P=g.value)==null?void 0:P.finished_at)||null});function d(){if(!n.value){t.value=0;return}const P=n.value;let b=P.used_seconds||0;P.status==="speaking"&&P.started_at&&(b+=Math.floor((new Date-new Date(P.started_at))/1e3));const V=(P.allocated_minutes+P.additional_minutes)*60;t.value=Math.max(0,V-b)}async function x(){var b,V;if(l.value){console.log(`[useSpeech ${s}] loadSpeechStatus j\xE1 em andamento, ignorando.`);return}const P=Date.now();if(P-u.value<100){console.log(`[useSpeech ${s}] loadSpeechStatus chamado muito recentemente, ignorando.`);return}if(!e.value||!i.value){n.value=null,t.value=0,o.value&&(clearInterval(o.value),o.value=null);return}l.value=!0,u.value=P;try{const f=await qe.get(`/pauta/${e.value}/${R}/speeches/status`);if(((b=f==null?void 0:f.data)==null?void 0:b.success)&&((V=f==null?void 0:f.data)==null?void 0:V.data)){const z=f.data.data.speeches||[];let C=z.find(p=>p.proponent_id===parseInt(i.value)&&(p.status==="speaking"||p.status==="paused"));C||(C=z.find(p=>p.proponent_id===parseInt(i.value))),C?(n.value=C,d(),C.status==="speaking"||C.status==="paused"?(r.value||(r.value=!0),o.value||(o.value=setInterval(()=>{d()},1e3))):(C.status==="finished"||(r.value=!1),o.value&&(clearInterval(o.value),o.value=null))):(n.value=null,t.value=0,r.value=!1,o.value&&(clearInterval(o.value),o.value=null))}}catch(f){console.error(`Erro ao carregar status da fala (${s}):`,f),n.value=null,t.value=0}finally{l.value=!1}}function F(){o.value&&(clearInterval(o.value),o.value=null)}return{currentSpeech:n,remainingTime:t,showSpeechModal:r,loadingSpeech:l,finishedSpeech:g,finishedSpeechTotalMinutes:y,finishedSpeechUsedMinutes:L,finishedSpeechUsedSeconds:U,finishedSpeechFinishedAt:h,loadSpeechStatus:x,cleanup:F}}function Qr(e,i){const s=ee([]),n=ee(!1);async function t(){var o,r,l,u,R,g;if(!e.value||!i.value){s.value=[];return}try{const y=await qe.get(`/pauta/${e.value}/session-logs`);if(((o=y==null?void 0:y.data)==null?void 0:o.success)&&((r=y==null?void 0:y.data)==null?void 0:r.data)){const L=y.data.data.logs||[],U=Te(),h=L.filter(f=>{var z,C;return((z=f.event_data)==null?void 0:z.proponent_id)===parseInt(i.value)||f.user_id===((C=U.user)==null?void 0:C.id)}),d=[],x=h.find(f=>f.event_type==="session_attendance"&&f.event_subtype==="attendance_registered");x&&d.push({icon:"how_to_reg",color:"green",label:"Presen\xE7a registrada no qu\xF3rum",time:Qe(x.occurred_at)});const F=h.find(f=>f.event_type==="small_expedient"&&(f.event_subtype==="register_speaker"||f.event_subtype==="small_expedient_registered"));if(F){const{useSessionSettings:f}=await Ye(()=>Promise.resolve().then(function(){return mt}),void 0),z=f();await z.loadSettings(),d.push({icon:"assignment",color:"secondary",label:`Inscrito no ${z.smallExpedientName.value||"Pequeno Expediente"}`,time:Qe(F.occurred_at)})}const P=h.find(f=>f.event_type==="large_expedient"&&(f.event_subtype==="register_speaker"||f.event_subtype==="large_expedient_registered"));if(P){const{useSessionSettings:f}=await Ye(()=>Promise.resolve().then(function(){return mt}),void 0),z=f();await z.loadSettings(),d.push({icon:"assignment_turned_in",color:"orange",label:`Inscrito no ${z.largeExpedientName.value||"Grande Expediente"}`,time:Qe(P.occurred_at)})}const b=h.filter(f=>f.event_type==="small_expedient_speech");if(b.length>0){const f=b.find(C=>C.event_subtype==="speech_started"),z=b.find(C=>C.event_subtype==="speech_finished");if(f&&d.push({icon:"mic",color:"primary",label:"Fala iniciada",time:Qe(f.occurred_at)}),z){const C=((l=z.event_data)==null?void 0:l.total_minutes_allocated)||0,p=((u=z.event_data)==null?void 0:u.total_seconds_used)||0,I=Math.floor(p/60);d.push({icon:"mic_off",color:"grey",label:`Fala finalizada (${I}min de ${C}min dispon\xEDveis)`,time:Qe(z.occurred_at)})}}const V=h.filter(f=>f.event_type==="large_expedient_speech");if(V.length>0){const f=V.find(C=>C.event_subtype==="speech_started"),z=V.find(C=>C.event_subtype==="speech_finished");if(f){const{useSessionSettings:C}=await Ye(()=>Promise.resolve().then(function(){return mt}),void 0),p=C();await p.loadSettings(),d.push({icon:"mic",color:"orange",label:`Fala iniciada (${p.largeExpedientName.value||"Grande Expediente"})`,time:Qe(f.occurred_at)})}if(z){const{useSessionSettings:C}=await Ye(()=>Promise.resolve().then(function(){return mt}),void 0),p=C();await p.loadSettings();const I=((R=z.event_data)==null?void 0:R.total_minutes_allocated)||0,q=((g=z.event_data)==null?void 0:g.total_seconds_used)||0,$=Math.floor(q/60);d.push({icon:"mic_off",color:"grey",label:`Fala finalizada - ${p.largeExpedientName.value||"Grande Expediente"} (${$}min de ${I}min dispon\xEDveis)`,time:Qe(z.occurred_at)})}}s.value=d}}catch(y){console.error("Erro ao carregar intera\xE7\xF5es da sess\xE3o:",y),s.value=[]}}return{sessionInteractions:s,loadingSessionInteractions:n,loadSessionInteractions:t}}function Jr(e,i,s,n={}){const t=Ze();Te();const{onQuorumStarted:o,onQuorumFinalized:r,onSmallExpedientStarted:l,onSmallExpedientFinalized:u,onSmallExpedientRegistration:R,onSmallExpedientOrderUpdated:g,onLargeExpedientStarted:y,onLargeExpedientFinalized:L,onLargeExpedientRegistration:U,onLargeExpedientOrderUpdated:h,onMiscellaneousSubjectStarted:d,onMiscellaneousSubjectFinalized:x,onMiscellaneousSubjectRegistration:F,onMiscellaneousSubjectOrderUpdated:P,onVotingStarted:b,onVotingReadingStarted:V,onVotingReadingFinished:f,onVotingVoteRegistered:z,onSpeechStarted:C,onSpeechPaused:p,onSpeechResumed:I,onSpeechTimeAdded:q,onSpeechFinished:$,onSessionAttendance:A,onSessionAbsences:J,onSpeechControlOpened:te,onSpeechControlClosed:ne,onVoiceRequestRegistered:re,onVoiceRequestRemoved:H,onVoiceRequestSpeechStarted:oe,onVoiceRequestSpeechPaused:K,onVoiceRequestSpeechResumed:he,onVoiceRequestSpeechTimeAdded:ue,onVoiceRequestSpeechFinished:D}=n;function O(){o&&t.on("quorum-started",w=>{j(w,"agendaId")&&(o(w),de.success("Qu\xF3rum iniciado! Voc\xEA j\xE1 pode marcar sua presen\xE7a."))}),r&&t.on("quorum-finalized",w=>{j(w,"agendaId")&&(r(w),de.warning("O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado."))}),l&&t.on("small-expedient-started",async w=>{if(j(w,"agendaId")){const{useExpedientStore:ie}=await Ye(()=>Promise.resolve().then(function(){return wt}),void 0);ie().invalidateStatusCache("small"),await l(w)}}),u&&t.on("small-expedient-finalized",async w=>{j(w,"agendaId")&&await u(w)}),R&&t.on("small-expedient-registration",async w=>{j(w,"agendaId","proponentId")&&await R(w)}),g&&t.on("small-expedient-order-updated",async w=>{j(w,"agendaId")&&await g(w)}),y&&t.on("large-expedient-started",w=>{j(w,"agendaId")&&y(w)}),L&&t.on("large-expedient-finalized",async w=>{j(w,"agendaId")&&await L(w)}),U&&t.on("large-expedient-registration",async w=>{j(w,"agendaId","proponentId")&&await U(w)}),h&&t.on("large-expedient-order-updated",async w=>{j(w,"agendaId")&&await h(w)}),d&&t.on("miscellaneous-subject-started",async w=>{if(j(w,"agendaId")){const{useExpedientStore:ie}=await Ye(()=>Promise.resolve().then(function(){return wt}),void 0);ie().invalidateStatusCache("miscellaneous"),await d(w)}}),x&&t.on("miscellaneous-subject-finalized",async w=>{j(w,"agendaId")&&await x(w)}),F&&t.on("miscellaneous-subject-registration",async w=>{j(w,"agendaId","proponentId")&&await F(w)}),P&&t.on("miscellaneous-subject-order-updated",async w=>{j(w,"agendaId")&&await P(w)}),b&&t.on("voting-started",async w=>{j(w,"agendaId")&&(await b(w),de.info("Vota\xE7\xE3o iniciada na sess\xE3o."))}),V&&t.on("voting-reading-started",async w=>{if(j(w,"agendaId")){await V(w);const ie=w.type==="reading",ce=w.type==="reading"?"Leitura":w.type==="secret_voting"?"Vota\xE7\xE3o Secreta":"Vota\xE7\xE3o";ie||de.info(`${ce} iniciada.`)}}),f&&t.on("voting-reading-finished",async w=>{if(j(w,"agendaId")){await f(w);const ie=(w==null?void 0:w.type)||"reading",ce=ie==="secret_voting"?"Vota\xE7\xE3o secreta encerrada.":ie==="voting"?"Vota\xE7\xE3o encerrada.":ie==="reading"?"Leitura encerrada.":"Vota\xE7\xE3o encerrada.";de.info(ce)}}),z&&t.on("voting-vote-registered",async w=>{j(w,"agendaId")&&await z(w)}),C&&t.on("speech-started",async w=>{j(w,"agendaId","proponentId")&&(await C(w),de.success("Sua fala foi iniciada!"))}),p&&t.on("speech-paused",async w=>{j(w,"agendaId","proponentId")&&(await p(w),de.info("Sua fala foi pausada."))}),I&&t.on("speech-resumed",async w=>{j(w,"agendaId","proponentId")&&(await I(w),de.success("Sua fala foi retomada!"))}),q&&t.on("speech-time-added",async w=>{j(w,"agendaId","proponentId")&&(await q(w),de.success(`Tempo adicional de ${w.minutes} minuto(s) adicionado!`))}),$&&t.on("speech-finished",async w=>{j(w,"agendaId","proponentId")&&(await $(w),de.warning("Sua fala foi finalizada."))}),A&&t.on("session-attendance",w=>{j(w,"agendaId","proponentId")&&A(w)}),J&&t.on("session-absences",w=>{j(w,"agendaId","proponentId")&&J(w)}),te&&t.on("speech-control-opened",w=>{j(w,"agendaId")&&te(w)}),ne&&t.on("speech-control-closed",w=>{j(w,"agendaId")&&ne(w)}),re&&t.on("voice-request-registered",async w=>{j(w,"agendaId")&&await re(w)}),H&&t.on("voice-request-removed",async w=>{j(w,"agendaId")&&await H(w)}),oe&&t.on("voice-request-speech-started",async w=>{j(w,"agendaId","proponentId")&&await oe(w)}),K&&t.on("voice-request-speech-paused",async w=>{j(w,"agendaId","proponentId")&&await K(w)}),he&&t.on("voice-request-speech-resumed",async w=>{j(w,"agendaId","proponentId")&&await he(w)}),ue&&t.on("voice-request-speech-time-added",async w=>{j(w,"agendaId","proponentId")&&await ue(w)}),D&&t.on("voice-request-speech-finished",async w=>{j(w,"agendaId","proponentId")&&await D(w)})}function j(w,...ie){if(!w)return!1;if(ie.includes("agendaId")){const ce=parseInt(w.agendaId),ge=e.value?parseInt(e.value):null;if(ce!==ge&&!(!ge&&(s==null?void 0:s.value)===ce))return!1}if(ie.includes("proponentId")){const ce=parseInt(w.proponentId),ge=i.value?parseInt(i.value):null;if(ce!==ge)return!1}return!0}return{setupSocketListeners:O}}const Hr={key:0,class:"dashboard-tabs-container"},Wr={class:"tab-panels-container"},Gr={class:"tab-panel"},Kr={class:"tab-panel"},Yr={class:"tab-panel"},Xr={class:"tab-panel"},Zr={class:"tab-panel"},eu={class:"tab-panel"},tu={class:"tab-panel"},au={class:"empty-state-card"},su={class:"empty-state-content"},nu={key:1,class:"modals-container"},iu={key:2,class:"dashboard-content"},ou={class:"dashboard-greeting"},lu={class:"greeting-content"},ru={class:"greeting-text"},uu={class:"greeting-title"},du={class:"greeting-subtitle"},cu={key:0,class:"dashboard-content"},vu={key:1,class:"dashboard-content"},gu={key:2,class:"dashboard-content"},fu={class:"empty-state-card"},mu={class:"empty-state-content"},hu={__name:"Dashboard",setup(e){const i=Te(),s=Ze(),n=yt(),t=ee(null),o=ee(null),r=ee(null),l=ee([]),u=ee(null),R=ee([]),g=ee(!1),y=ee("home"),L=v(()=>{const _=[{name:"home",label:"In\xEDcio",icon:"home"},{name:"quorum",label:"Qu\xF3rum",icon:"groups"},{name:"small-expedient",label:n.smallExpedientName.value||"Pequeno Expediente",icon:"timer"},...n.enableLargeExpedient.value?[{name:"large-expedient",label:n.largeExpedientName.value||"Grande Expediente",icon:"assignment_turned_in"}]:[],...n.enableMiscellaneousSubjects.value?[{name:"miscellaneous-subject",label:n.miscellaneousSubjectsName.value||"Assuntos Diversos",icon:"topic"}]:[],{name:"voting",label:"Vota\xE7\xE3o",icon:"how_to_vote"}];return t.value&&o.value&&!F.isPresent.value?_.filter(E=>E.name!=="voting"):_});function U(_){y.value=_,console.log("[Dashboard] Tab mudou para:",_)}const h=v(()=>{var _;return((_=t.value)==null?void 0:_.id)||null}),d=Nr(h),x=v(()=>{var _;return((_=i.user)==null?void 0:_.proponent_id)||null}),F=Ba(d.selectedAgendaId),P=Ua(),b=lt(d.selectedAgendaId,"small"),V=lt(d.selectedAgendaId,"large"),f=lt(d.selectedAgendaId,"miscellaneous"),z=Qa(d.selectedAgendaId),C=At(d.selectedAgendaId,x,"small"),p=At(d.selectedAgendaId,x,"large"),I=At(d.selectedAgendaId,x,"miscellaneous"),q=Ja(d.selectedAgendaId),$=Qr(d.selectedAgendaId,x),A=v({get:()=>C.showSpeechModal.value,set:_=>{C.showSpeechModal.value=_}}),J=v({get:()=>p.showSpeechModal.value,set:_=>{p.showSpeechModal.value=_}}),te=v({get:()=>I.showSpeechModal.value,set:_=>{I.showSpeechModal.value=_}}),ne=v({get:()=>z.showReadingModal.value,set:_=>{z.showReadingModal.value=_}}),re=v({get:()=>z.showVotingModal.value&&t.value&&o.value&&!F.isPresent.value?!1:z.showVotingModal.value,set:_=>{if(_&&t.value&&o.value&&!F.isPresent.value){de.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.");return}z.showVotingModal.value=_}});Se(()=>z.showVotingModal.value,_=>{_&&t.value&&o.value&&(F.isPresent.value||(console.log("[Dashboard] Tentativa de abrir modal de vota\xE7\xE3o sem presen\xE7a no quorum - bloqueando"),z.showVotingModal.value=!1,de.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")))},{immediate:!1});const H=ee(!1),oe=ee(!1),K=ee(!1);function he(){const _=new Date().getHours();return _<12?"Bom dia!":_<18?"Boa tarde!":"Boa noite!"}function ue(){const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`}const D=v(()=>{if(!r.value)return!1;const _=ue();return r.value.session_date===_});async function O(){var _,E;g.value=!0;try{const ae=await qe.get("/pauta",{params:{session_status:"started",per_page:1}}),le=((_=ae==null?void 0:ae.data)==null?void 0:_.data)||[];if(le.length>0){const ye=le[0];t.value=ye,o.value=ye,r.value=null,l.value=[],u.value=null,R.value=[],ye.id&&(d.selectedAgendaId.value=ye.id);return}const X=ue(),we=await qe.get("/pauta",{params:{date_from:X,date_to:X,per_page:10}}),_e=((E=we==null?void 0:we.data)==null?void 0:E.data)||[],Ve=_e.filter(ye=>ye.session_status!=="closed"),Pe=_e.filter(ye=>ye.session_status==="closed");if(Ve.length>0){const ye=Ve[0];r.value=ye,t.value=null,u.value=null,R.value=[],await ie(ye.id)}else if(Pe.length>0){const ye=Pe[0];r.value=ye,t.value=null,u.value=null,R.value=[],await ie(ye.id)}else t.value=null,r.value=null,l.value=[],await j()}catch(ae){console.error("Erro ao carregar sess\xE3o:",ae),t.value=null,r.value=null,l.value=[],u.value=null,R.value=[]}finally{g.value=!1}}async function j(){var _;try{const E=ue(),ae=await qe.get("/pauta",{params:{date_from:E,per_page:1}}),le=((_=ae==null?void 0:ae.data)==null?void 0:_.data)||[];if(le.length>0){const X=le[0];u.value=X,await w(X.id)}else u.value=null,R.value=[]}catch(E){console.error("Erro ao carregar pr\xF3xima sess\xE3o futura:",E),u.value=null,R.value=[]}}async function w(_){var E;try{const ae=await qe.get(`/pauta/${_}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),le=((E=ae==null?void 0:ae.data)==null?void 0:E.data)||[];R.value=le.filter(X=>X.proposition).map(X=>{var we,_e;return{id:X.proposition.id,number:X.proposition.number,year:X.proposition.year,title:X.proposition.title,species:((we=X.proposition.species)==null?void 0:we.name)||((_e=X.proposition.species)==null?void 0:_e.title),proponents:X.proposition.proponents||[]}})}catch(ae){console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o futura:",ae),R.value=[]}}async function ie(_){var E;try{const ae=await qe.get(`/pauta/${_}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),le=((E=ae==null?void 0:ae.data)==null?void 0:E.data)||[];l.value=le.filter(X=>X.proposition).map(X=>{var we,_e;return{id:X.proposition.id,number:X.proposition.number,year:X.proposition.year,title:X.proposition.title,species:((we=X.proposition.species)==null?void 0:we.name)||((_e=X.proposition.species)==null?void 0:_e.title),proponents:X.proposition.proponents||[]}})}catch(ae){console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o:",ae),l.value=[]}}const{setupSocketListeners:ce}=Jr(d.selectedAgendaId,x,v(()=>{var _;return((_=t.value)==null?void 0:_.id)||null}),{onQuorumStarted:async()=>{await F.loadQuorumStatus(),await F.loadCurrentAttendanceStatus()},onQuorumFinalized:async()=>{await F.loadQuorumStatus(),await F.loadCurrentAttendanceStatus()},onSmallExpedientStarted:async()=>{const{useExpedientStore:_}=await Ye(()=>Promise.resolve().then(function(){return wt}),void 0);_().invalidateStatusCache("small"),await b.loadStatus(!0)},onSmallExpedientFinalized:async _=>{await b.loadStatus(),b.isRegistered.value?de.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${b.registrationOrder.value||"N/A"}\xBA.`):de.warning(`As inscri\xE7\xF5es de ${n.smallExpedientName.value.toLowerCase()} foram finalizadas.`)},onSmallExpedientRegistration:async _=>{_.source==="controle"&&(b.isRegistered.value=_.registered||!1,await b.loadStatus())},onSmallExpedientOrderUpdated:async()=>{await b.loadStatus(!0)},onLargeExpedientStarted:V.loadStatus,onLargeExpedientFinalized:async _=>{await V.loadStatus(),V.isRegistered.value?de.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${V.registrationOrder.value||"N/A"}\xBA.`):de.warning(`As inscri\xE7\xF5es de ${n.largeExpedientName.value.toLowerCase()} foram finalizadas.`)},onLargeExpedientRegistration:async _=>{_.source==="controle"&&(V.isRegistered.value=_.registered||!1,await V.loadStatus())},onLargeExpedientOrderUpdated:async()=>{await V.loadStatus(!0)},onMiscellaneousSubjectStarted:async()=>{console.log("[Dashboard] Evento miscellaneous-subject-started recebido - invalidando cache e recarregando status");const{useExpedientStore:_}=await Ye(()=>Promise.resolve().then(function(){return wt}),void 0);_().invalidateStatusCache("miscellaneous"),await f.loadStatus(!0),console.log("[Dashboard] Status recarregado ap\xF3s miscellaneous-subject-started:",{started:f.started.value,finalized:f.finalized.value,isRegistered:f.isRegistered.value})},onMiscellaneousSubjectFinalized:async _=>{await f.loadStatus(),f.isRegistered.value?de.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${f.registrationOrder.value||"N/A"}\xBA.`):de.warning(`As inscri\xE7\xF5es de ${n.miscellaneousSubjectsName.value.toLowerCase()} foram finalizadas.`)},onMiscellaneousSubjectRegistration:async _=>{_.source==="controle"&&(f.isRegistered.value=_.registered||!1,await f.loadStatus())},onMiscellaneousSubjectOrderUpdated:async()=>{await f.loadStatus(!0)},onVotingStarted:async()=>{F.isPresent.value?await z.loadVotingStatus():(await z.loadVotingStatus(),z.showVotingModal.value&&(z.showVotingModal.value=!1))},onVotingReadingStarted:async _=>{if((_==null?void 0:_.type)&&_.type!=="reading"&&!F.isPresent.value){await z.loadVotingStatus(),z.showVotingModal.value&&(z.showVotingModal.value=!1),de.warning("Voc\xEA precisa estar presente no qu\xF3rum para participar da vota\xE7\xE3o.");return}await z.loadVotingStatus()},onVotingReadingFinished:z.loadVotingStatus,onVotingVoteRegistered:z.loadVotingStatus,onSpeechControlOpened:_=>{const E=_.speech_type||"small";E==="small"?H.value=!0:E==="large"?oe.value=!0:E==="miscellaneous"&&(K.value=!0)},onSpeechControlClosed:_=>{const E=_.speech_type||"small";E==="small"?H.value=!1:E==="large"?oe.value=!1:E==="miscellaneous"&&(K.value=!1)},onSpeechStarted:async _=>{var ae,le,X;const E=_.speech_type||"small";E==="small"?(C.currentSpeech.value=null,await C.loadSpeechStatus(),((ae=C.currentSpeech.value)==null?void 0:ae.status)==="speaking"&&(C.showSpeechModal.value=!0)):E==="large"?(p.currentSpeech.value=null,await p.loadSpeechStatus(),((le=p.currentSpeech.value)==null?void 0:le.status)==="speaking"&&(p.showSpeechModal.value=!0)):E==="miscellaneous"&&(I.currentSpeech.value=null,await I.loadSpeechStatus(),((X=I.currentSpeech.value)==null?void 0:X.status)==="speaking"&&(I.showSpeechModal.value=!0))},onSpeechPaused:async _=>{var ae,le,X;const E=_.speech_type||"small";E==="small"?(await C.loadSpeechStatus(),((ae=C.currentSpeech.value)==null?void 0:ae.status)==="paused"&&(C.showSpeechModal.value=!0)):E==="large"?(await p.loadSpeechStatus(),((le=p.currentSpeech.value)==null?void 0:le.status)==="paused"&&(p.showSpeechModal.value=!0)):E==="miscellaneous"&&(await I.loadSpeechStatus(),((X=I.currentSpeech.value)==null?void 0:X.status)==="paused"&&(I.showSpeechModal.value=!0))},onSpeechResumed:async _=>{var ae,le,X;const E=_.speech_type||"small";E==="small"?(await C.loadSpeechStatus(),((ae=C.currentSpeech.value)==null?void 0:ae.status)==="speaking"&&(C.showSpeechModal.value=!0)):E==="large"?(await p.loadSpeechStatus(),((le=p.currentSpeech.value)==null?void 0:le.status)==="speaking"&&(p.showSpeechModal.value=!0)):E==="miscellaneous"&&(await I.loadSpeechStatus(),((X=I.currentSpeech.value)==null?void 0:X.status)==="speaking"&&(I.showSpeechModal.value=!0))},onSpeechTimeAdded:async _=>{const E=_.speech_type||"small";E==="small"?await C.loadSpeechStatus():E==="large"?await p.loadSpeechStatus():E==="miscellaneous"&&await I.loadSpeechStatus()},onSpeechFinished:async _=>{var ae,le,X;const E=_.speech_type||"small";E==="small"?(await C.loadSpeechStatus(),await $.loadSessionInteractions(),((ae=C.currentSpeech.value)==null?void 0:ae.status)==="finished"&&(C.showSpeechModal.value=!0)):E==="large"?(await p.loadSpeechStatus(),await $.loadSessionInteractions(),((le=p.currentSpeech.value)==null?void 0:le.status)==="finished"&&(p.showSpeechModal.value=!0)):E==="miscellaneous"&&(await I.loadSpeechStatus(),await $.loadSessionInteractions(),((X=I.currentSpeech.value)==null?void 0:X.status)==="finished"&&(I.showSpeechModal.value=!0))},onSessionAttendance:async _=>{P.isPresent=_.present||!1,await F.loadCurrentAttendanceStatus(),!_.present&&y.value==="voting"&&(de.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."),y.value="home"),!_.present&&z.showVotingModal.value&&(z.showVotingModal.value=!1,de.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")),_.source==="controle"&&de.success(_.present?"Presen\xE7a confirmada pelo controle":"Presen\xE7a removida pelo controle")},onSessionAbsences:async _=>{await F.loadCurrentAttendanceStatus(),_.absenceReason&&(F.absenceReason.value=_.absenceReason),_.justified&&_.absenceReason&&de.info("Aus\xEAncia justificada pelo controle")},onVoiceRequestRegistered:async _=>{await q.loadStatus(!0)},onVoiceRequestRemoved:async _=>{await q.loadStatus(!0)},onVoiceRequestSpeechStarted:async _=>{await q.loadStatus(!0)},onVoiceRequestSpeechPaused:async _=>{await q.loadStatus(!0)},onVoiceRequestSpeechResumed:async _=>{await q.loadStatus(!0)},onVoiceRequestSpeechTimeAdded:async _=>{await q.loadStatus(!0)},onVoiceRequestSpeechFinished:async _=>{await q.loadStatus(!0)}});function ge(){const _=Ue.getItem("unit_id_num");if(_&&s.isConnected){const E=`unit.${_}.sessions`;s.subscribeToChannel(E)}s.on("session-status-changed",E=>{if(console.log("[Vereador] Status da sess\xE3o alterado:",E),E.status==="started"&&E.agendaId){const ae=Ue.getItem("unit_id_num");if(ae&&s.isConnected){const le=`unit.${ae}.agenda.${E.agendaId}`;s.subscribeToChannel(le)}O()}else E.status==="closed"&&(t.value=null,o.value=null,O())})}Ee("quorum",F),Ee("smallExpedient",b),Ee("largeExpedient",V),Ee("miscellaneousSubject",f),Ee("voting",z),Ee("voiceRequest",q),Ee("smallSpeech",C),Ee("largeSpeech",p),Ee("miscellaneousSubjectSpeech",I),Ee("sessionAgenda",d),Ee("sessionSettings",n),Ee("sessionInteractions",$),Se(()=>{var _;return(_=t.value)==null?void 0:_.id},async(_,E)=>{_&&_!==E&&(d.selectedAgendaId.value=_,s.isConnected&&d.ensureSubscribed(s,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:b.loadStatus,loadLargeExpedientStatus:V.loadStatus,loadMiscellaneousSubjectStatus:f.loadStatus,loadVotingStatus:z.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus}),await Promise.all([F.loadQuorumStatus(),F.loadCurrentAttendanceStatus(),b.loadStatus(),V.loadStatus(),f.loadStatus(),z.loadVotingStatus(),C.loadSpeechStatus(),p.loadSpeechStatus(),I.loadSpeechStatus(),q.loadStatus(),$.loadSessionInteractions()]),ce())},{immediate:!0}),Se(()=>F.isPresent.value,_=>{t.value&&o.value&&!_&&z.showVotingModal.value&&(z.showVotingModal.value=!1,de.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."))});let be=null;return ct(async()=>{if(await n.loadSettings(),ge(),await O(),s.isConnected)(()=>{var E;(E=t.value)!=null&&E.id&&d.ensureSubscribed(s,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:b.loadStatus,loadLargeExpedientStatus:V.loadStatus,loadMiscellaneousSubjectStatus:f.loadStatus,loadVotingStatus:z.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus})})();else{const _=setInterval(()=>{var E;s.isConnected&&((E=t.value)!=null&&E.id&&d.ensureSubscribed(s,{loadQuorumStatus:F.loadQuorumStatus,loadCurrentAttendanceStatus:F.loadCurrentAttendanceStatus,loadSmallExpedientStatus:b.loadStatus,loadLargeExpedientStatus:V.loadStatus,loadMiscellaneousSubjectStatus:f.loadStatus,loadVotingStatus:z.loadVotingStatus,loadVoiceRequestStatus:q.loadStatus}),clearInterval(_))},500);setTimeout(()=>clearInterval(_),1e4)}be=setInterval(()=>{O()},3e4)}),Ct(()=>{be&&clearInterval(be),C.cleanup(),p.cleanup()}),(_,E)=>(c(),G(gs,{class:"mobile-dashboard-page"},{default:M(()=>{var ae,le,X,we,_e,Ve,Pe,ye,We,Be,Q,Z;return[t.value&&o.value?(c(),T("div",Hr,[a("div",Wr,[He(a("div",Gr,[S(zn,{"session-data":o.value,"selected-agenda-id":(ae=t.value)==null?void 0:ae.id},null,8,["session-data","selected-agenda-id"])],512),[[Ge,y.value==="home"]]),He(a("div",Kr,[S(Zn,{"session-id":(le=t.value)==null?void 0:le.id,"session-data":o.value},null,8,["session-id","session-data"])],512),[[Ge,y.value==="quorum"]]),He(a("div",Yr,[S(wi,{"session-id":(X=t.value)==null?void 0:X.id,"session-data":o.value},null,8,["session-id","session-data"])],512),[[Ge,y.value==="small-expedient"]]),He(a("div",Xr,[S($i,{"session-id":(we=t.value)==null?void 0:we.id,"session-data":o.value},null,8,["session-id","session-data"])],512),[[Ge,y.value==="large-expedient"&&m(n).enableLargeExpedient.value]]),He(a("div",Zr,[S(zi,{"session-id":(_e=t.value)==null?void 0:_e.id,"session-data":o.value},null,8,["session-id","session-data"])],512),[[Ge,y.value==="miscellaneous-subject"&&m(n).enableMiscellaneousSubjects.value]]),He(a("div",eu,[S(yo,{"session-id":(Ve=t.value)==null?void 0:Ve.id,"session-data":o.value},null,8,["session-id","session-data"])],512),[[Ge,y.value==="voting"&&m(F).isPresent.value]]),He(a("div",tu,[a("div",au,[a("div",su,[S(N,{name:"how_to_vote",size:"80px",color:"grey-5",class:"empty-state-icon"}),E[10]||(E[10]=a("div",{class:"empty-state-title"},"Acesso \xE0 Vota\xE7\xE3o Restrito",-1)),E[11]||(E[11]=a("div",{class:"empty-state-subtitle"}," Voc\xEA precisa estar presente no qu\xF3rum para acessar a tela de vota\xE7\xE3o. ",-1))])])],512),[[Ge,y.value==="voting"&&!m(F).isPresent.value]])]),S(Co,{modelValue:y.value,"onUpdate:modelValue":E[0]||(E[0]=Y=>y.value=Y),tabs:L.value,onTabChange:U},null,8,["modelValue","tabs"])])):B("",!0),t.value&&o.value?(c(),T("div",nu,[S(qt,{modelValue:A.value,"onUpdate:modelValue":E[1]||(E[1]=Y=>A.value=Y),speech:m(C).currentSpeech.value,"remaining-time":m(C).remainingTime.value,"expedient-type":m(n).smallExpedientName.value||"Pequeno Expediente"},null,8,["modelValue","speech","remaining-time","expedient-type"]),S(qt,{modelValue:J.value,"onUpdate:modelValue":E[2]||(E[2]=Y=>J.value=Y),speech:m(p).currentSpeech.value,"remaining-time":m(p).remainingTime.value,"expedient-type":m(n).largeExpedientName.value||"Grande Expediente"},null,8,["modelValue","speech","remaining-time","expedient-type"]),m(n).enableMiscellaneousSubjects.value?(c(),G(qt,{key:0,modelValue:te.value,"onUpdate:modelValue":E[3]||(E[3]=Y=>te.value=Y),speech:m(I).currentSpeech.value,"remaining-time":m(I).remainingTime.value,"expedient-type":m(n).miscellaneousSubjectsName.value||"Assuntos Diversos"},null,8,["modelValue","speech","remaining-time","expedient-type"])):B("",!0),S(Il,{modelValue:ne.value,"onUpdate:modelValue":E[4]||(E[4]=Y=>ne.value=Y),reading:m(z).activeReading.value,"agenda-id":(Pe=t.value)==null?void 0:Pe.id,"has-request":m(q).hasRequest.value,"current-speech":m(q).currentSpeech.value,"request-order":m(q).requestOrder.value,onRequestRegistered:E[5]||(E[5]=Y=>m(q).loadStatus(!0))},null,8,["modelValue","reading","agenda-id","has-request","current-speech","request-order"]),((ye=t.value)==null?void 0:ye.id)&&m(F).isPresent.value?(c(),G(kr,{key:1,modelValue:re.value,"onUpdate:modelValue":E[6]||(E[6]=Y=>re.value=Y),voting:m(z).activeVoting.value,"agenda-id":t.value.id,"on-vote-registered":m(z).handleVoteRegistered,onVoteRegistered:m(z).handleVoteRegistered},null,8,["modelValue","voting","agenda-id","on-vote-registered","onVoteRegistered"])):B("",!0),(We=t.value)!=null&&We.id?(c(),G(It,{key:2,modelValue:H.value,"onUpdate:modelValue":E[7]||(E[7]=Y=>H.value=Y),"agenda-id":t.value.id,"expedient-type":"small"},null,8,["modelValue","agenda-id"])):B("",!0),(Be=t.value)!=null&&Be.id?(c(),G(It,{key:3,modelValue:oe.value,"onUpdate:modelValue":E[8]||(E[8]=Y=>oe.value=Y),"agenda-id":t.value.id,"expedient-type":"large"},null,8,["modelValue","agenda-id"])):B("",!0),((Q=t.value)==null?void 0:Q.id)&&m(n).enableMiscellaneousSubjects.value?(c(),G(It,{key:4,modelValue:K.value,"onUpdate:modelValue":E[9]||(E[9]=Y=>K.value=Y),"agenda-id":t.value.id,"expedient-type":"miscellaneous"},null,8,["modelValue","agenda-id"])):B("",!0)])):(c(),T("div",iu,[a("div",ou,[a("div",lu,[S(N,{name:"waving_hand",size:"32px",class:"greeting-icon"}),a("div",ru,[a("div",uu," Ol\xE1, Ver. "+k(((Z=m(i).user)==null?void 0:Z.first_name)||"Vereador")+"! ",1),a("div",du,k(he()),1)])])]),r.value&&D.value?(c(),T("div",cu,[S(Ia,{"scheduled-session":r.value,propositions:l.value},null,8,["scheduled-session","propositions"])])):u.value?(c(),T("div",vu,[S(Ia,{"scheduled-session":u.value,propositions:R.value,"is-future":!0},null,8,["scheduled-session","propositions"])])):(c(),T("div",gu,[a("div",fu,[a("div",mu,[S(N,{name:"event_busy",size:"80px",color:"grey-5",class:"empty-state-icon"}),E[12]||(E[12]=a("div",{class:"empty-state-title"},"Nenhuma sess\xE3o agendada",-1)),E[13]||(E[13]=a("div",{class:"empty-state-subtitle"}," Aguarde uma sess\xE3o ser agendada e iniciada. ",-1))])])]))]))]}),_:1}))}};var xu=Fe(hu,[["__scopeId","data-v-ea5a9f06"]]);export{xu as default};
