import{c as je,e as _t,O as na,i as xt,P as ia,h as l,aF as oa,B as Ke,y as Z,a1 as Q,aG as la,aH as Tt,F as ut,_ as ze,R as v,S as K,U as j,Y as t,ab as F,V as $,Z as A,X as Me,a3 as k,a5 as O,a4 as pe,aI as Ie,aJ as Re,W as Ue,Q as nt,A as it,T as Ct,aK as ra,az as Pt,a as Lt,g as Et,r as X,aL as Mt,m as Ft,w as ge,aM as Dt,ac as Rt,$ as Be,aN as We,z as qt,d as vt,u as ke,ae as Le,ad as _e,a8 as oe,aj as ot,ag as I,a0 as qe,f as ua,l as da,aO as jt,a7 as lt,a2 as ca,a6 as va,G as fe,aP as $t,aQ as It,H as et,aR as Ot,N as ma,aS as ga,aT as fa,j as ht,k as zt,ah as Ce,aB as ha,aC as pa,ao as wa,J as ba,ar as At,ak as Sa,aU as Nt,aV as Ee,aW as Ge}from"./index.7364dde9.js";import{Q as ya}from"./QPage.4ca47673.js";import{u as Ze}from"./socket.6fd611a7.js";import{f as _a,h as at,g as Xe,Q as dt,e as xa}from"./QList.98dc8fe4.js";import{Q as Ve}from"./QBanner.8793c49e.js";import{Q as Bt}from"./QResizeObserver.d5b57ba5.js";const qa={xs:8,sm:10,md:14,lg:20,xl:24};var mt=je({name:"QChip",props:{..._t,...na,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Ke(),a=xt(e,n),c=ia(e,qa),u=l(()=>e.selected===!0||e.icon!==void 0),r=l(()=>e.selected===!0?e.iconSelected||n.iconSet.chip.selected:e.icon),g=l(()=>e.iconRemove||n.iconSet.chip.remove),q=l(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),P=l(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),R=l(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},M={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove};return{chip:y,remove:M}});function b(y){y.keyCode===13&&f(y)}function f(y){e.disable||(s("update:selected",!e.selected),s("click",y))}function o(y){(y.keyCode===void 0||y.keyCode===13)&&(ut(y),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function d(){const y=[];q.value===!0&&y.push(Z("div",{class:"q-focus-helper"})),u.value===!0&&y.push(Z(Q,{class:"q-chip__icon q-chip__icon--left",name:r.value}));const M=e.label!==void 0?[Z("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(Z("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},la(i.default,M))),e.iconRight&&y.push(Z(Q,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(Z(Q,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:g.value,...R.value.remove,onClick:o,onKeyup:o})),y}return()=>{if(e.modelValue===!1)return;const y={class:P.value,style:c.value};return q.value===!0&&Object.assign(y,R.value.chip,{onClick:f,onKeyup:b}),oa("div",y,d(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Tt,e.ripple]])}}});const $a={class:"tw-flex tw-items-center tw-gap-3"},Ia={class:"card-icon-wrapper"},Aa={class:"card-title"},ka={class:"session-info-compact tw-mb-3"},Va={class:"session-info-row"},Ra={class:"session-info-col"},za={class:"session-info-value-compact"},Ta={class:"session-info-row"},Ca={class:"session-info-col"},Pa={class:"session-info-value-compact"},La={key:0,class:"session-info-col"},Ea={class:"session-info-value-compact"},Ma={key:1,class:"session-info-col"},Fa={class:"session-info-value-compact"},Da={class:"tw-flex tw-items-start tw-gap-3"},ja={class:"tw-flex-1"},Oa={class:"status-message-text"},Na={key:0},Ba={key:0},Ua={key:1},Qa={key:2},Ja={key:1},Ha={key:2},Wa={key:0,class:"tw-mt-3"},Ga={class:"propositions-title"},Ka={class:"proposition-count"},Ya={class:"propositions-list tw-mt-2"},Xa={class:"proposition-header"},Za={class:"proposition-number"},es={key:0,class:"proposition-title"},ts={key:1,class:"proposition-proponents"},as={key:0,class:"proponent-more"},ss={key:1,class:"empty-propositions tw-mt-4"},ns={__name:"ScheduledSessionCard",props:{scheduledSession:{type:Object,default:null},propositions:{type:Array,default:()=>[]},isFuture:{type:Boolean,default:!1}},setup(e){const i=e;function s(){var c;return((c=i.scheduledSession)==null?void 0:c.session_status)==="closed"?"header-closed":i.isFuture?"header-future":"header-today"}function n(){var c;return((c=i.scheduledSession)==null?void 0:c.session_status)==="closed"?"banner-closed":i.isFuture?"banner-future":"banner-today"}function a(){var c;return((c=i.scheduledSession)==null?void 0:c.session_status)==="closed"?"status-avatar-closed":i.isFuture?"status-avatar-future":"status-avatar-today"}return(c,u)=>(v(),K(Ue,{class:"modern-card session-card slide-up"},{default:j(()=>[t("div",{class:F(["card-header session-header",s()])},[t("div",$a,[t("div",Ia,[$(Q,{name:e.scheduledSession.session_status==="closed"?"event_busy":e.isFuture?"event_available":"event",size:"24px",class:"tw-text-white"},null,8,["name"])]),t("div",Aa,A(e.scheduledSession.session_status==="closed"?"Sess\xE3o Encerrada":e.isFuture?"Pr\xF3xima Sess\xE3o Futura":"Sess\xE3o Agendada para Hoje"),1)])],2),$(Me,{class:"tw-p-4 md:tw-p-6 session-card-section"},{default:j(()=>[t("div",ka,[t("div",Va,[t("div",Ra,[$(Q,{name:"title",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",za,A(e.scheduledSession.name||"N\xE3o informado"),1)])]),t("div",Ta,[t("div",Ca,[$(Q,{name:"calendar_today",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",Pa,A(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"N\xE3o informado"),1)]),e.scheduledSession.session_time?(v(),k("div",La,[$(Q,{name:"schedule",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",Ea,A(e.scheduledSession.session_time),1)])):O("",!0),e.scheduledSession.session_type?(v(),k("div",Ma,[$(Q,{name:"category",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),t("span",Fa,A(e.scheduledSession.session_type),1)])):O("",!0)])]),t("div",{class:F(["session-status-banner tw-mb-4",n()])},[t("div",Da,[t("div",{class:F(["status-avatar",a()])},[$(Q,{name:e.scheduledSession.session_status==="closed"?"check_circle":e.isFuture?"calendar_today":"schedule",size:"20px"},null,8,["name"])],2),t("div",ja,[t("div",Oa,[e.scheduledSession.session_status==="closed"?(v(),k("span",Na,[u[0]||(u[0]=pe(" Esta sess\xE3o j\xE1 foi encerrada ",-1)),e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date?(v(),k("span",Ba," em "+A(e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date),1)):O("",!0),e.scheduledSession.closing_time?(v(),k("span",Ua," \xE0s "+A(e.scheduledSession.closing_time),1)):O("",!0),!e.scheduledSession.closing_date_formatted&&!e.scheduledSession.closing_time?(v(),k("span",Qa," anteriormente ")):O("",!0),u[1]||(u[1]=pe(" . ",-1))])):e.isFuture?(v(),k("span",Ja," Esta sess\xE3o est\xE1 agendada para "+A(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"data futura")+". Ainda n\xE3o \xE9 poss\xEDvel realizar a\xE7\xF5es. ",1)):(v(),k("span",Ha," A sess\xE3o ainda n\xE3o foi iniciada. Aguarde o in\xEDcio da sess\xE3o para realizar a\xE7\xF5es. "))])])])],2),e.propositions.length>0?(v(),k("div",Wa,[t("div",Ga,[$(Q,{name:"description",size:"18px",class:"tw-mr-2"}),pe(" "+A(e.scheduledSession.session_status==="closed"?"Proposi\xE7\xF5es que foram votadas":"Proposi\xE7\xF5es que ser\xE3o votadas")+" ",1),t("span",Ka,"("+A(e.propositions.length)+")",1)]),t("div",Ya,[(v(!0),k(Ie,null,Re(e.propositions,(r,g)=>(v(),k("div",{key:r.id||g,class:"proposition-item"},[t("div",Xa,[t("span",Za,A(r.species||"Proposi\xE7\xE3o")+" n\xBA "+A(r.number||"S/N")+"/"+A(r.year||new Date().getFullYear()),1)]),r.title?(v(),k("div",es,A(r.title),1)):O("",!0),r.proponents&&r.proponents.length>0?(v(),k("div",ts,[(v(!0),k(Ie,null,Re(r.proponents.slice(0,3),q=>(v(),K(mt,{key:q.id,size:"sm",class:"proponent-chip"},{default:j(()=>[pe(A(q.name),1)]),_:2},1024))),128)),r.proponents.length>3?(v(),k("span",as," +"+A(r.proponents.length-3)+" mais ",1)):O("",!0)])):O("",!0)]))),128))])])):(v(),k("div",ss,[$(Q,{name:"inbox",size:"32px",class:"tw-mb-2",color:"grey-5"}),u[2]||(u[2]=t("div",{class:"empty-text"}," Nenhuma proposi\xE7\xE3o cadastrada nesta sess\xE3o ainda. ",-1))]))]),_:1})]),_:1}))}};var is=ze(ns,[["__scopeId","data-v-fcb6ccaa"]]);const os=["top","middle","bottom"];var Ut=je({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>os.includes(e)}},setup(e,{slots:i}){const s=l(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=l(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>Z("div",{class:n.value,style:s.value,role:"status","aria-label":e.label},nt(i.default,e.label!==void 0?[e.label]:[]))}}),ls=je({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:i,emit:s}){let n=!1,a,c,u=null,r=null,g,q;function P(){a==null||a(),a=null,n=!1,u!==null&&(clearTimeout(u),u=null),r!==null&&(clearTimeout(r),r=null),c==null||c.removeEventListener("transitionend",g),g=null}function R(d,y,M){y!==void 0&&(d.style.height=`${y}px`),d.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,a=M}function b(d,y){d.style.overflowY=null,d.style.height=null,d.style.transition=null,P(),y!==q&&s(y)}function f(d,y){let M=0;c=d,n===!0?(P(),M=d.offsetHeight===d.scrollHeight?0:void 0):(q="hide",d.style.overflowY="hidden"),R(d,M,y),u=setTimeout(()=>{u=null,d.style.height=`${d.scrollHeight}px`,g=T=>{r=null,(Object(T)!==T||T.target===d)&&b(d,"show")},d.addEventListener("transitionend",g),r=setTimeout(g,e.duration*1.1)},100)}function o(d,y){let M;c=d,n===!0?P():(q="show",d.style.overflowY="hidden",M=d.scrollHeight),R(d,M,y),u=setTimeout(()=>{u=null,d.style.height=0,g=T=>{r=null,(Object(T)!==T||T.target===d)&&b(d,"hide")},d.addEventListener("transitionend",g),r=setTimeout(g,e.duration*1.1)},100)}return it(()=>{n===!0&&P()}),()=>Z(Ct,{css:!1,appear:e.appear,onEnter:f,onLeave:o},i.default)}});const Ye=ra({}),rs=Object.keys(Pt);var Qt=je({name:"QExpansionItem",props:{...Pt,...Lt,..._t,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Et,"click","afterShow","afterHide"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Ke(),a=xt(e,n),c=X(e.modelValue!==null?e.modelValue:e.defaultOpened),u=X(null),r=Mt(),{show:g,hide:q,toggle:P}=Ft({showing:c});let R,b;const f=l(()=>`q-expansion-item q-item-type q-expansion-item--${c.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),o=l(()=>{if(e.contentInsetLevel===void 0)return null;const W=n.lang.rtl===!0?"Right":"Left";return{["padding"+W]:e.contentInsetLevel*56+"px"}}),d=l(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),y=l(()=>{const W={};return rs.forEach(re=>{W[re]=e[re]}),W}),M=l(()=>d.value===!0||e.expandIconToggle!==!0),T=l(()=>e.expandedIcon!==void 0&&c.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),p=l(()=>e.disable!==!0&&(d.value===!0||e.expandIconToggle===!0)),x=l(()=>({expanded:c.value===!0,detailsId:r.value,toggle:P,show:g,hide:q})),h=l(()=>{const W=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[c.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":c.value===!0?"true":"false","aria-controls":r.value,"aria-label":W}});ge(()=>e.group,W=>{b==null||b(),W!==void 0&&z()});function w(W){d.value!==!0&&P(W),s("click",W)}function C(W){W.keyCode===13&&N(W,!0)}function N(W,re){var te;re!==!0&&W.qAvoidFocus!==!0&&((te=u.value)==null||te.focus()),P(W),ut(W)}function ee(){s("afterShow")}function B(){s("afterHide")}function z(){R===void 0&&(R=Dt()),c.value===!0&&(Ye[e.group]=R);const W=ge(c,te=>{te===!0?Ye[e.group]=R:Ye[e.group]===R&&delete Ye[e.group]}),re=ge(()=>Ye[e.group],(te,E)=>{E===R&&te!==void 0&&te!==R&&q()});b=()=>{W(),re(),Ye[e.group]===R&&delete Ye[e.group],b=void 0}}function D(){const W={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},re=[Z(Q,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&c.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:T.value})];return p.value===!0&&(Object.assign(W,{tabindex:0,...h.value,onClick:N,onKeyup:C}),re.unshift(Z("div",{ref:u,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Z(Xe,W,()=>re)}function V(){let W;return i.header!==void 0?W=[].concat(i.header(x.value)):(W=[Z(Xe,()=>[Z(at,{lines:e.labelLines},()=>e.label||""),e.caption?Z(at,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&W[e.switchToggleSide===!0?"push":"unshift"](Z(Xe,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>Z(Q,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&W[e.switchToggleSide===!0?"unshift":"push"](D()),W}function G(){const W={ref:"item",style:e.headerStyle,class:e.headerClass,dark:a.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return M.value===!0&&(W.clickable=!0,W.onClick=w,Object.assign(W,d.value===!0?y.value:h.value)),Z(_a,W,V)}function se(){return Be(Z("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:o.value,id:r.value},qt(i.default)),[[We,c.value]])}function ue(){const W=[G(),Z(ls,{duration:e.duration,onShow:ee,onHide:B},se)];return e.expandSeparator===!0&&W.push(Z(Rt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:a.value}),Z(Rt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:a.value})),W}return e.group!==void 0&&z(),it(()=>{b==null||b()}),()=>Z("div",{class:f.value},[Z("div",{class:"q-expansion-item__container relative-position"},ue())])}});const Jt=vt("quorum",{state:()=>({isPresent:!1,isAbsentJustified:!1,absenceReason:null,quorumFinalized:!1,quorumStarted:!1,quorumFinalizedAt:null,loadingQuorum:!1,loadingAttendance:!1,loadingJustify:!1,quorumStatusCache:null,quorumStatusLastUpdate:null,QUORUM_STATUS_TTL:2e3,attendanceStatusCache:null,attendanceStatusLastUpdate:null,ATTENDANCE_STATUS_TTL:2e3,_quorumStatusLoadingPromise:null,_attendanceStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=ke().user)==null?void 0:i.proponent_id)||null},unitId(){const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var a;const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((a=e.user)==null?void 0:a.proponent_id)||null;return!!s&&!!n}},actions:{async loadQuorumStatus(e,i=!1){if(!e){this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null;return}if(!i&&this.quorumStatusCache&&this.quorumStatusLastUpdate){const n=Date.now()-this.quorumStatusLastUpdate;if(n<this.QUORUM_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de quorum status (${n}ms atr\xE1s)`),this.quorumStatusCache}if(this._quorumStatusLoadingPromise)return this._quorumStatusLoadingPromise;if(this.loadingQuorum){console.log("[QuorumStore] loadQuorumStatus j\xE1 em andamento, ignorando.");return}return this.loadingQuorum=!0,this._quorumStatusLoadingPromise=(async()=>{var s,n;try{const a=await _e.get(`/pauta/${e}/quorum/status`),c=((s=a==null?void 0:a.data)==null?void 0:s.success)&&((n=a==null?void 0:a.data)==null?void 0:n.data)?a.data.data:null;return c?(this.quorumStarted=c.is_started||!1,this.quorumFinalized=c.is_finalized||!1,this.quorumFinalizedAt=c.finalized_at||null):(this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null),this.quorumStatusCache=c,this.quorumStatusLastUpdate=Date.now(),c}catch(a){throw console.error("Erro ao carregar status do qu\xF3rum:",a),this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null,this.quorumStatusCache=null,a}finally{this.loadingQuorum=!1,this._quorumStatusLoadingPromise=null}})(),this._quorumStatusLoadingPromise},async loadCurrentAttendanceStatus(e,i=!1){if(!e||!this.proponentId){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null;return}if(!i&&this.attendanceStatusCache&&this.attendanceStatusLastUpdate){const n=Date.now()-this.attendanceStatusLastUpdate;if(n<this.ATTENDANCE_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de attendance status (${n}ms atr\xE1s)`),this.attendanceStatusCache}return this._attendanceStatusLoadingPromise?this._attendanceStatusLoadingPromise:(this._attendanceStatusLoadingPromise=(async()=>{var s,n;try{const a=await _e.get(`/pauta/${e}/session-members`),u=(((n=(s=a==null?void 0:a.data)==null?void 0:s.data)==null?void 0:n.members)||[]).find(r=>r.proponent_id===this.proponentId);return this.isPresent=(u==null?void 0:u.is_present)||!1,this.isAbsentJustified=(u==null?void 0:u.is_absent_justified)||!1,this.absenceReason=(u==null?void 0:u.absence_reason)||null,this.attendanceStatusCache=u,this.attendanceStatusLastUpdate=Date.now(),u}catch(a){throw console.error("Erro ao carregar estado da presen\xE7a:",a),this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.attendanceStatusCache=null,a}finally{this._attendanceStatusLoadingPromise=null}})(),this._attendanceStatusLoadingPromise)},invalidateQuorumStatusCache(){this.quorumStatusCache=null,this.quorumStatusLastUpdate=null},invalidateAttendanceStatusCache(){this.attendanceStatusCache=null,this.attendanceStatusLastUpdate=null},resetState(){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.quorumFinalized=!1,this.quorumStarted=!1,this.quorumFinalizedAt=null,this.invalidateQuorumStatusCache(),this.invalidateAttendanceStatusCache()}}});function Ht(e){const i=Ze(),s=ke(),n=Jt(),a=l(()=>n.isPresent),c=l(()=>n.isAbsentJustified),u=l(()=>n.absenceReason),r=l(()=>n.quorumFinalized),g=l(()=>n.quorumStarted),q=l(()=>n.quorumFinalizedAt),P=l(()=>n.loadingQuorum),R=l(()=>n.loadingAttendance),b=l(()=>n.loadingJustify||!1),f=l(()=>n.canSend);async function o(){return await n.loadQuorumStatus(e.value)}async function d(){return await n.loadCurrentAttendanceStatus(e.value)}async function y(){var T,p,x,h,w;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){oe.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isAbsentJustified){oe.warning("N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 uma justificativa de aus\xEAncia registrada.");return}if(n.isPresent){oe.warning("N\xE3o \xE9 poss\xEDvel desmarcar a presen\xE7a ap\xF3s ela ser registrada.");return}if(!n.loadingAttendance){n.loadingAttendance=!0;try{(T=(await _e.post(`/pauta/${e.value}/session-attendance/register`,{proponent_id:parseInt(n.proponentId),present:!0})).data)!=null&&T.success&&(n.isPresent=!0,n.invalidateAttendanceStatusCache(),await n.loadCurrentAttendanceStatus(e.value,!0),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!0,userId:(p=s.user)==null?void 0:p.id,userName:(x=s.user)==null?void 0:x.first_name,source:"vereador"}),oe.success("Presen\xE7a registrada com sucesso!"))}catch(C){console.error("[Vereador] Erro ao registrar presen\xE7a:",C),oe.negative("Erro ao registrar presen\xE7a: "+(((w=(h=C.response)==null?void 0:h.data)==null?void 0:w.message)||C.message))}finally{n.loadingAttendance=!1}}}}async function M(T){var p,x,h,w,C;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){oe.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. N\xE3o \xE9 mais poss\xEDvel justificar aus\xEAncia.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isPresent){oe.warning("N\xE3o \xE9 poss\xEDvel justificar aus\xEAncia quando voc\xEA est\xE1 presente.");return}if(!n.loadingJustify){n.loadingJustify=!0;try{(p=(await _e.post(`/pauta/${e.value}/session-absences/justify`,{proponent_id:parseInt(n.proponentId),absence_reason:T})).data)!=null&&p.success&&(n.isAbsentJustified=!0,n.absenceReason=T,n.invalidateAttendanceStatusCache(),i.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!1,justified:!0,reason:T,userId:(x=s.user)==null?void 0:x.id,userName:(h=s.user)==null?void 0:h.first_name,source:"vereador"}),oe.success("Aus\xEAncia justificada com sucesso!"))}catch(N){console.error("[Vereador] Erro ao justificar aus\xEAncia:",N),oe.negative("Erro ao justificar aus\xEAncia: "+(((C=(w=N.response)==null?void 0:w.data)==null?void 0:C.message)||N.message))}finally{n.loadingJustify=!1}}}}return{isPresent:a,isAbsentJustified:c,absenceReason:u,quorumFinalized:r,quorumStarted:g,quorumFinalizedAt:q,loadingQuorum:P,loadingAttendance:R,loadingJustify:b,canSend:f,loadQuorumStatus:o,loadCurrentAttendanceStatus:d,toggleAttendance:y,justifyAbsence:M}}const Wt=vt("expedient",{state:()=>({smallExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},largeExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},miscellaneousSubject:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1},statusCache:{small:null,large:null,miscellaneous:null},statusLastUpdate:{small:null,large:null,miscellaneous:null},STATUS_TTL:2e3,_statusLoadingPromises:{small:null,large:null,miscellaneous:null}}),getters:{proponentId(){var i;return((i=ke().user)==null?void 0:i.proponent_id)||null},unitId(){const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var a;const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((a=e.user)==null?void 0:a.proponent_id)||null;return!!s&&!!n}},actions:{async loadStatus(e,i,s=!1){if(!e||!this.proponentId){this.resetState(i);return}const n=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",a=n==="small"?this.smallExpedient:n==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient,c=n==="small"?"small-expedient":n==="miscellaneous"?"miscellaneous-subject":"large-expedient";if(!s&&a.loadingData){console.log(`[ExpedientStore ${n}] loadStatus j\xE1 em andamento, ignorando.`);return}if(!s&&this.statusCache[n]&&this.statusLastUpdate[n]){const r=Date.now()-this.statusLastUpdate[n];if(r<this.STATUS_TTL){console.log(`[ExpedientStore ${n}] Usando cache de status (${r}ms atr\xE1s)`);const g=this.statusCache[n];return a.started=g.started||!1,a.finalized=g.finalized||!1,a.finalizedAt=g.finalizedAt||null,a.isRegistered=g.isRegistered||!1,a.registrationOrder=g.registrationOrder||null,a.registeredAt=g.registeredAt||null,this.statusCache[n]}}return this._statusLoadingPromises[n]?this._statusLoadingPromises[n]:(a.loadingData=!0,this._statusLoadingPromises[n]=(async()=>{var u,r,g,q;try{console.log(`[ExpedientStore ${n}] Carregando status do ${c} para agenda ${e} (force: ${s})`);const P=await _e.get(`/pauta/${e}/${c}/status`),R=((u=P==null?void 0:P.data)==null?void 0:u.success)&&((r=P==null?void 0:P.data)==null?void 0:r.data)?P.data.data:null;console.log(`[ExpedientStore ${n}] Resposta do status:`,R),R&&(a.started=R.is_started||!1,a.finalized=R.is_finalized||!1,a.finalizedAt=R.finalized_at||null,console.log(`[ExpedientStore ${n}] Status atualizado:`,{started:a.started,finalized:a.finalized,finalizedAt:a.finalizedAt}));const b=await _e.get(`/pauta/${e}/${c}/members`),o=(((q=(g=b==null?void 0:b.data)==null?void 0:g.data)==null?void 0:q.members)||[]).find(d=>d.proponent_id===this.proponentId);return a.isRegistered=(o==null?void 0:o.is_registered)||!1,a.registrationOrder=(o==null?void 0:o.registration_order)||null,a.registeredAt=(o==null?void 0:o.registered_at)||null,this.statusCache[n]={started:a.started,finalized:a.finalized,finalizedAt:a.finalizedAt,isRegistered:a.isRegistered,registrationOrder:a.registrationOrder,registeredAt:a.registeredAt},this.statusLastUpdate[n]=Date.now(),this.statusCache[n]}catch(P){throw console.error(`Erro ao carregar status do ${c}:`,P),this.resetState(i),P}finally{a.loadingData=!1,this._statusLoadingPromises[n]=null}})(),this._statusLoadingPromises[n])},invalidateStatusCache(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large";this.statusCache[i]=null,this.statusLastUpdate[i]=null},resetState(e){const i=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large",s=i==="small"?this.smallExpedient:i==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient;s.isRegistered=!1,s.started=!1,s.finalized=!1,s.finalizedAt=null,s.registrationOrder=null,s.registeredAt=null,this.invalidateStatusCache(e)}}});var ct=Object.freeze(Object.defineProperty({__proto__:null,useExpedientStore:Wt},Symbol.toStringTag,{value:"Module"}));function st(e,i="small"){const s=Ze(),n=ke(),a=Wt(),c=i==="small"?"small":i==="miscellaneous"?"miscellaneous":"large",u=c==="small"?a.smallExpedient:c==="miscellaneous"?a.miscellaneousSubject:a.largeExpedient,r=i==="small"?"small-expedient":i==="miscellaneous"?"miscellaneous-subject":"large-expedient",g=i==="small"?"pequeno expediente":i==="miscellaneous"?"assuntos diversos":"grande expediente",q=l(()=>u.isRegistered),P=l(()=>u.started),R=l(()=>u.finalized),b=l(()=>u.finalizedAt),f=l(()=>u.registrationOrder),o=l(()=>u.registeredAt),d=l(()=>u.loadingData),y=l(()=>u.loadingAction),M=l(()=>a.canSend);async function T(x=!1){return await a.loadStatus(e.value,i,x)}async function p(){var h,w,C,N,ee,B;if(!a.canSend||!e.value)return;if(!u.started||u.finalized){oe.warning(u.finalized?`As inscri\xE7\xF5es de ${g} foram finalizadas.`:`As inscri\xE7\xF5es de ${g} ainda n\xE3o foram iniciadas.`);return}if(u.loadingAction)return;u.loadingAction=!0;const x=!u.isRegistered;try{const z=await _e.post(`/pauta/${e.value}/${r}/register`,{proponent_id:parseInt(a.proponentId),registered:x});(h=z.data)!=null&&h.success?(a.invalidateStatusCache(i),await T(),s.emit(`${r}-registration`,{unitId:parseInt(a.unitId),agendaId:parseInt(e.value),proponentId:parseInt(a.proponentId),registered:x,userId:(w=n.user)==null?void 0:w.id,userName:(C=n.user)==null?void 0:C.first_name,source:"vereador"}),x&&u.registrationOrder?oe.success(`Inscri\xE7\xE3o realizada com sucesso! Sua posi\xE7\xE3o na fila: ${u.registrationOrder}\xBA`):oe.success(x?"Inscri\xE7\xE3o realizada com sucesso!":"Inscri\xE7\xE3o cancelada com sucesso!")):oe.error(((N=z.data)==null?void 0:N.message)||"Erro ao registrar inscri\xE7\xE3o.")}catch(z){console.error(`[Vereador] Erro ao registrar ${g} via API:`,z),oe.error("Erro ao registrar inscri\xE7\xE3o: "+(((B=(ee=z.response)==null?void 0:ee.data)==null?void 0:B.message)||z.message))}finally{u.loadingAction=!1}}return{isRegistered:q,started:P,finalized:R,finalizedAt:b,registrationOrder:f,registeredAt:o,loadingData:d,loadingAction:y,canSend:M,loadStatus:T,toggleRegistration:p}}const us=vt("voting",{state:()=>({votingStatus:null,activeReading:null,activeVoting:null,finishedReadings:[],quorumMembers:[],showReadingModal:!1,showVotingModal:!1,loadingVoting:!1,votingStatusCache:null,votingStatusLastUpdate:null,VOTING_STATUS_TTL:2e3,_votingStatusLoadingPromise:null}),getters:{activeReadingIcon:e=>e.activeReading?e.activeReading.type==="reading"?"menu_book":e.activeReading.type==="secret_voting"?"lock":"how_to_vote":"menu_book",activeReadingLabel:e=>e.activeReading?e.activeReading.type==="reading"?"Leitura em Andamento":e.activeReading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":""},actions:{async loadVotingStatus(e,i=!1){if(!e){const s=!!this.activeReading,n=!!this.activeVoting;this.votingStatus=null,this.activeReading=null,this.activeVoting=null,s&&(this.showReadingModal=!1),n&&(this.showVotingModal=!1);return}if(!i&&this.votingStatusCache&&this.votingStatusLastUpdate){const n=Date.now()-this.votingStatusLastUpdate;if(n<this.VOTING_STATUS_TTL)return console.log(`[VotingStore] Usando cache de voting status (${n}ms atr\xE1s)`),this.votingStatusCache}if(this._votingStatusLoadingPromise)return this._votingStatusLoadingPromise;if(!this.loadingVoting)return this.loadingVoting=!0,this._votingStatusLoadingPromise=(async()=>{var s,n,a,c;try{const u=await _e.get(`/pauta/${e}/voting/status`);if((s=u.data)!=null&&s.success){this.votingStatus=u.data.data,this.finishedReadings=((n=u.data.data)==null?void 0:n.finished_readings)||[];const r=u.data.data,g=r==null?void 0:r.active_voting_ata,q=r==null?void 0:r.active_voting_propositions,P=r==null?void 0:r.active_voting;this.quorumMembers=(g==null?void 0:g.quorum_members)||(q==null?void 0:q.quorum_members)||(P==null?void 0:P.quorum_members)||[];const R=(a=this.activeReading)==null?void 0:a.id,b=(c=this.activeVoting)==null?void 0:c.id,f=!!this.activeReading,o=!!this.activeVoting,d=[...(g==null?void 0:g.readings)||[],...(q==null?void 0:q.readings)||[],...(P==null?void 0:P.readings)||[]].filter(x=>!x.finished_at);if(d.length){const x=d.find(C=>C.type==="secret_voting"),h=d.find(C=>C.type==="voting"),w=d.find(C=>C.type==="reading");x?(this.activeVoting=x,this.activeReading=null):h?(this.activeVoting=h,this.activeReading=null):w?(this.activeReading=w,this.activeVoting=null):(this.activeReading=null,this.activeVoting=null)}else this.activeReading=null,this.activeVoting=null;const y=!R&&!b,M=f&&!this.activeReading&&!!this.activeVoting,T=this.activeVoting&&(y||this.activeVoting.id!==b||M),p=this.activeReading&&(y||this.activeReading.id!==R);T?(this.showVotingModal=!0,this.showReadingModal=!1):p&&!this.activeVoting&&(this.showReadingModal=!0,this.showVotingModal=!1),!this.activeVoting&&b&&(this.showVotingModal=!1),!this.activeReading&&R&&(this.showReadingModal=!1),this.votingStatusCache=u.data.data,this.votingStatusLastUpdate=Date.now()}}catch(u){throw console.error("[Vereador] Erro ao carregar status da vota\xE7\xE3o:",u),this.votingStatus=null,this.activeReading=null,this.activeVoting=null,this.showReadingModal=!1,this.showVotingModal=!1,this.votingStatusCache=null,u}finally{this.loadingVoting=!1,this._votingStatusLoadingPromise=null}})(),this._votingStatusLoadingPromise},invalidateVotingStatusCache(){this.votingStatusCache=null,this.votingStatusLastUpdate=null}}});function Gt(e){const i=us(),s=l(()=>i.votingStatus),n=l(()=>i.activeReading),a=l(()=>i.activeVoting),c=l(()=>i.finishedReadings),u=l(()=>i.quorumMembers),r=l({get:()=>i.showReadingModal,set:o=>{i.showReadingModal=o}}),g=l({get:()=>i.showVotingModal,set:o=>{i.showVotingModal=o}}),q=l(()=>i.loadingVoting),P=l(()=>i.activeReadingIcon),R=l(()=>i.activeReadingLabel);async function b(o=!1){return await i.loadVotingStatus(e.value,o)}async function f(){return i.invalidateVotingStatusCache(),await b()}return{votingStatus:s,activeReading:n,activeVoting:a,finishedReadings:c,quorumMembers:u,showReadingModal:r,showVotingModal:g,loadingVoting:q,activeReadingIcon:P,activeReadingLabel:R,loadVotingStatus:b,handleVoteRegistered:f}}const ds=vt("voiceRequest",{state:()=>({hasRequest:!1,requestOrder:null,requestedAt:null,currentSpeech:null,allSpeeches:[],remainingTime:0,loadingData:!1,speechInterval:null,voiceRequestStatusCache:null,voiceRequestStatusLastUpdate:null,VOICE_REQUEST_STATUS_TTL:2e3,_voiceRequestStatusLoadingPromise:null}),getters:{proponentId(){var i;return((i=ke().user)==null?void 0:i.proponent_id)||null},unitId(){const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId;return i?parseInt(i):null},canSend(){var a;const e=ke(),i=Le.getItem("unit_id_num")||e.currentUnitId,s=i?parseInt(i):null,n=((a=e.user)==null?void 0:a.proponent_id)||null;return!!s&&!!n},allFinishedSpeeches(){return this.allSpeeches.filter(e=>e.status==="finished").sort((e,i)=>new Date(i.finished_at||0)-new Date(e.finished_at||0))}},actions:{updateRemainingTime(){if(!this.currentSpeech){this.remainingTime=0;return}const e=this.currentSpeech;let i=e.used_seconds||0;e.status==="speaking"&&e.started_at&&(i+=Math.floor((new Date-new Date(e.started_at))/1e3));const s=(e.allocated_minutes+e.additional_minutes)*60;this.remainingTime=Math.max(0,s-i)},ensureSpeechInterval(){var e;!this.speechInterval&&((e=this.currentSpeech)==null?void 0:e.status)==="speaking"&&(this.speechInterval=setInterval(()=>{this.updateRemainingTime()},1e3))},clearSpeechInterval(){this.speechInterval&&(clearInterval(this.speechInterval),this.speechInterval=null)},async loadStatus(e,i=!1){if(!(!i&&this.loadingData)){if(!e||!this.proponentId){this.resetState();return}if(!i&&this.voiceRequestStatusCache&&this.voiceRequestStatusLastUpdate){const n=Date.now()-this.voiceRequestStatusLastUpdate;if(n<this.VOICE_REQUEST_STATUS_TTL)return console.log(`[VoiceRequestStore] Usando cache de voice request status (${n}ms atr\xE1s)`),this.voiceRequestStatusCache}return this._voiceRequestStatusLoadingPromise?this._voiceRequestStatusLoadingPromise:(this.loadingData=!0,this._voiceRequestStatusLoadingPromise=(async()=>{var s,n;try{const a=await _e.get(`/api/pauta/${e}/voice-request/members`);let c=!1;if((s=a==null?void 0:a.data)!=null&&s.success){const g=(a.data.data.members||[]).find(q=>q.proponent_id===this.proponentId);c=(g==null?void 0:g.has_voice_request)&&!["finished","cancelled"].includes(g.request_status),this.hasRequest=c,this.requestOrder=(g==null?void 0:g.request_order)||null,this.requestedAt=(g==null?void 0:g.requested_at)||null}const u=await _e.get(`/api/pauta/${e}/voice-request/speeches/status`);if((n=u==null?void 0:u.data)!=null&&n.success){const g=(u.data.data.speeches||[]).filter(q=>q.proponent_id===this.proponentId);if(this.allSpeeches=g,g.length>0)if(g.sort((q,P)=>{var o,d;const R={speaking:0,paused:1,finished:2},b=(o=R[q.status])!=null?o:99,f=(d=R[P.status])!=null?d:99;return b!==f?b-f:new Date(P.started_at||0)-new Date(q.started_at||0)}),c){const q=g.find(P=>P.status==="speaking"||P.status==="paused");this.currentSpeech=q||null}else this.currentSpeech=g[0];else this.currentSpeech=null;this.currentSpeech?(this.updateRemainingTime(),this.currentSpeech.status==="speaking"?this.ensureSpeechInterval():this.clearSpeechInterval()):this.clearSpeechInterval()}this.voiceRequestStatusCache={hasRequest:this.hasRequest,requestOrder:this.requestOrder,requestedAt:this.requestedAt,currentSpeech:this.currentSpeech,allSpeeches:this.allSpeeches},this.voiceRequestStatusLastUpdate=Date.now()}catch(a){throw console.error("Erro ao carregar status de pedido de voz:",a),this.resetState(),a}finally{this.loadingData=!1,this._voiceRequestStatusLoadingPromise=null}})(),this._voiceRequestStatusLoadingPromise)}},invalidateVoiceRequestStatusCache(){this.voiceRequestStatusCache=null,this.voiceRequestStatusLastUpdate=null},resetState(){this.hasRequest=!1,this.requestOrder=null,this.requestedAt=null,this.currentSpeech=null,this.allSpeeches=[],this.remainingTime=0,this.clearSpeechInterval(),this.invalidateVoiceRequestStatusCache()}}});function Kt(e){const i=ds(),s=l(()=>i.hasRequest),n=l(()=>i.requestOrder),a=l(()=>i.requestedAt),c=l(()=>i.currentSpeech),u=l(()=>i.allFinishedSpeeches),r=l(()=>i.remainingTime),g=l(()=>i.loadingData),q=l(()=>i.canSend);async function P(f=!1){return await i.loadStatus(e.value,f)}function R(){i.resetState()}function b(){i.updateRemainingTime()}return ge(()=>i.currentSpeech,f=>{f?(i.updateRemainingTime(),f.status==="speaking"?i.ensureSpeechInterval():i.clearSpeechInterval()):(i.remainingTime=0,i.clearSpeechInterval())},{deep:!0,immediate:!0}),ge(()=>{var f;return(f=i.currentSpeech)==null?void 0:f.additional_minutes},()=>{i.currentSpeech&&i.updateRemainingTime()}),{hasRequest:s,requestOrder:n,requestedAt:a,currentSpeech:c,allFinishedSpeeches:u,remainingTime:r,loadingData:g,canSend:q,loadStatus:P,resetState:R,updateRemainingTime:b}}const Te=X(null),pt=X(!1);function kt(){const e=l(()=>{var f;return((f=Te.value)==null?void 0:f.small_expedient_name)||"Pequeno Expediente"}),i=l(()=>{var f;return((f=Te.value)==null?void 0:f.large_expedient_name)||"Grande Expediente"}),s=l(()=>{var f,o;return(o=(f=Te.value)==null?void 0:f.enable_small_expedient_speech)!=null?o:!0}),n=l(()=>{var f,o;return(o=(f=Te.value)==null?void 0:f.enable_small_expedient_ata_voting)!=null?o:!1}),a=l(()=>{var f,o;return(o=(f=Te.value)==null?void 0:f.enable_small_expedient)!=null?o:!0}),c=l(()=>{var f,o;return(o=(f=Te.value)==null?void 0:f.enable_large_expedient)!=null?o:!0}),u=l(()=>{var f;return((f=Te.value)==null?void 0:f.voting_button_label)||"Ativar Vota\xE7\xE3o"}),r=l(()=>{var f,o;return(o=(f=Te.value)==null?void 0:f.enable_miscellaneous_subjects)!=null?o:!1}),g=l(()=>{var o;const f=(o=Te.value)==null?void 0:o.deduct_aside_time;return f===!0||f===1||f==="1"}),q=l(()=>{var f;return((f=Te.value)==null?void 0:f.miscellaneous_subjects_name)||"Assuntos Diversos"});async function P(){var f;if(!pt.value){if(Te.value)return Te.value;pt.value=!0;try{const{data:o}=await _e.get("/api/config/sessao/settings");if((o==null?void 0:o.success)&&(o==null?void 0:o.data)){Te.value=o.data;const d=(f=o.data)==null?void 0:f.deduct_aside_time;console.log("[aporte] useSessionSettings:loadSettings",{deduct_aside_time:d,type:typeof d,parsed:d===!0||d===1||d==="1"})}}catch(o){console.error("[useSessionSettings] Erro ao carregar configura\xE7\xF5es:",o)}finally{pt.value=!1}}}function R(f){return f==="small"?e.value:f==="large"?i.value:f==="miscellaneous"?q.value:""}function b(){Te.value=null}return{smallExpedientName:e,largeExpedientName:i,enableSmallExpedientSpeech:s,enableSmallExpedientAtaVoting:n,enableSmallExpedient:a,enableLargeExpedient:c,votingButtonLabel:u,enableMiscellaneousSubjects:r,deductAsideTime:g,miscellaneousSubjectsName:q,loadSettings:P,getExpedientName:R,clearCache:b}}var rt=Object.freeze(Object.defineProperty({__proto__:null,useSessionSettings:kt},Symbol.toStringTag,{value:"Module"}));const cs={class:"session-overview"},vs={class:"overview-card modern-card"},ms={class:"card-content"},gs={class:"summary-title"},fs={class:"summary-grid"},hs={class:"summary-item-col summary-item-col-left"},ps={class:"tw-relative"},ws={class:"summary-status tw-pt-2"},bs={key:0,class:"summary-item-col summary-item-col-right session-info-compact"},Ss={class:"session-info-line"},ys={key:0,class:"session-info-line"},_s={key:1,class:"session-info-line"},xs={key:0,class:"info-banner"},qs={key:0,class:"propositions-section"},$s={class:"propositions-title"},Is={class:"proposition-detail-section"},As={class:"detail-value"},ks={key:0,class:"proposition-detail-section"},Vs={class:"detail-value"},Rs={key:1,class:"proposition-detail-section"},zs={class:"detail-value"},Ts={key:2,class:"proposition-detail-section"},Cs={class:"proponents-chips"},Ps={key:3,class:"proposition-detail-section"},Ls={class:"documents-buttons"},Es={__name:"SessionOverview",props:{sessionData:{type:Object,default:null},selectedAgendaId:{type:[Number,String],default:null},loading:{type:Boolean,default:!1}},setup(e){const i=e,s=Ze();kt();const n=Ht(l(()=>i.selectedAgendaId));st(l(()=>i.selectedAgendaId),"small"),st(l(()=>i.selectedAgendaId),"large"),Gt(l(()=>i.selectedAgendaId)),Kt(l(()=>i.selectedAgendaId));const a=X([]),c=X(!1);async function u(){var b;if(!i.selectedAgendaId){a.value=[];return}c.value=!0;try{const f=await _e.get(`/api/pauta/${i.selectedAgendaId}/agenda-itens`,{params:{type:"proposition",item_status:"active"}}),o=((b=f==null?void 0:f.data)==null?void 0:b.data)||[];a.value=o.filter(d=>d.proposition).map(d=>{var y,M;return{id:d.proposition.id,number:d.proposition.number,year:d.proposition.year,title:d.proposition.title,ementa:d.proposition.ementa,description:d.proposition.description,species:((y=d.proposition.species)==null?void 0:y.name)||((M=d.proposition.species)==null?void 0:M.title)||null,proponents:d.proposition.proponents||[],documents:d.proposition.documents||[],file_url:d.proposition.file_url||null,protocol_document:d.proposition.protocol_document||null}})}catch(f){console.error("[SessionOverview] Erro ao carregar proposi\xE7\xF5es:",f),a.value=[]}finally{c.value=!1}}ge(()=>i.selectedAgendaId,b=>{b?u():a.value=[]},{immediate:!0});function r(b){if(!(b!=null&&b.protocol_document))return null;const f=b.protocol_document;return f.signed_file_url||f.file_url||null}function g(b){return b!=null&&b.protocol_document?b.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}ot(()=>{i.selectedAgendaId&&u()});function q(){if(i.loading)return"Carregando...";if(i.sessionData){const b=i.sessionData.name||"Em Andamento";return b.length>20?b.substring(0,20)+"...":b}return"Aguardando"}function P(){var b,f,o,d,y,M,T,p;return n?(b=n.quorumFinalized)!=null&&b.value?(f=n.isPresent)!=null&&f.value?"Presente":(o=n.isAbsentJustified)!=null&&o.value?"Ausente Justificado":"Ausente":(d=n.quorumStarted)!=null&&d.value?(y=n.isPresent)!=null&&y.value?"Presente":"Aguardando":(M=n.quorumFinalizedAt)!=null&&M.value?(T=n.isPresent)!=null&&T.value?"Presente":(p=n.isAbsentJustified)!=null&&p.value?"Ausente Justificado":"Ausente":"Aguardando":"Aguardando"}function R(){var b,f,o,d;return n?(b=n.quorumFinalized)!=null&&b.value?(f=n.isPresent)!=null&&f.value?"status-success":"status-error":(o=n.quorumStarted)!=null&&o.value?(d=n.isPresent)!=null&&d.value?"status-success":"status-warning":"status-info":"status-info"}return(b,f)=>{var o,d,y,M,T,p,x,h,w,C,N,ee,B,z;return v(),k("div",cs,[t("div",vs,[t("div",ms,[t("div",gs,[$(Q,{name:"dashboard",size:"20px",class:"tw-mr-2"}),f[0]||(f[0]=pe(" Resumo R\xE1pido ",-1))]),t("div",fs,[t("div",{class:F(["summary-item summary-item-cols",{active:i.sessionData}])},[t("div",hs,[t("div",ps,[$(Q,{name:"event",color:i.sessionData?"primary":"grey",size:"30px"},null,8,["color"]),I(s).isConnected?(v(),K(Ut,{key:0,color:"positive",size:"xs",class:"session-badge"})):O("",!0)]),t("div",ws,A(q()),1)]),i.sessionData?(v(),k("div",bs,[t("div",Ss,A(i.sessionData.session_date_formatted||i.sessionData.session_date||"N/A"),1),i.sessionData.session_time?(v(),k("div",ys,A(i.sessionData.session_time),1)):O("",!0),i.sessionData.session_type?(v(),k("div",_s,A(i.sessionData.session_type),1)):O("",!0)])):O("",!0)],2),t("div",{class:F(["summary-item",{active:((d=(o=I(n))==null?void 0:o.quorumStarted)==null?void 0:d.value)||((M=(y=I(n))==null?void 0:y.quorumFinalized)==null?void 0:M.value)||((p=(T=I(n))==null?void 0:T.quorumFinalizedAt)==null?void 0:p.value)}])},[$(Q,{name:(h=(x=I(n))==null?void 0:x.isPresent)!=null&&h.value?"check_circle":"groups",color:(C=(w=I(n))==null?void 0:w.isPresent)!=null&&C.value?"positive":((ee=(N=I(n))==null?void 0:N.quorumFinalized)==null?void 0:ee.value)||((z=(B=I(n))==null?void 0:B.quorumFinalizedAt)==null?void 0:z.value)?"primary":"grey",size:"24px"},null,8,["name","color"]),f[1]||(f[1]=t("div",{class:"summary-label"},"Qu\xF3rum",-1)),t("div",{class:F(["summary-status",R()])},A(P()),3)],2)]),i.selectedAgendaId?O("",!0):(v(),k("div",xs,[$(Q,{name:"info",color:"primary",size:"18px",class:"tw-mr-2"}),f[2]||(f[2]=t("span",{class:"banner-text"},"Aguardando sess\xE3o ser iniciada...",-1))]))])]),i.selectedAgendaId&&a.value.length>0?(v(),k("div",qs,[t("div",$s,[$(Q,{name:"description",size:"20px",class:"tw-mr-2"}),f[3]||(f[3]=pe(" Proposi\xE7\xF5es do Dia ",-1))]),$(xa,{separator:"",class:"propositions-list"},{default:j(()=>[(v(!0),k(Ie,null,Re(a.value,D=>(v(),K(Qt,{key:D.id,icon:"description",class:"proposition-item","header-class":"proposition-header"},{header:j(()=>[$(Xe,{avatar:""},{default:j(()=>[$(Q,{name:"description",color:"primary"})]),_:1}),$(Xe,null,{default:j(()=>[$(at,{class:"proposition-number"},{default:j(()=>[pe(A(D.number)+"/"+A(D.year),1)]),_:2},1024),$(at,{caption:"",class:"proposition-title"},{default:j(()=>[pe(A(D.title||D.ementa||"Sem t\xEDtulo"),1)]),_:2},1024)]),_:2},1024)]),default:j(()=>[$(Ue,{flat:"",class:"proposition-details"},{default:j(()=>[$(Me,null,{default:j(()=>[t("div",Is,[f[4]||(f[4]=t("div",{class:"detail-label"},"Ementa",-1)),t("div",As,A(D.title||D.ementa||D.description||"N/A"),1)]),D.description&&D.description!==D.title?(v(),k("div",ks,[f[5]||(f[5]=t("div",{class:"detail-label"},"Descri\xE7\xE3o",-1)),t("div",Vs,A(D.description),1)])):O("",!0),D.species?(v(),k("div",Rs,[f[6]||(f[6]=t("div",{class:"detail-label"},"Esp\xE9cie",-1)),t("div",zs,A(D.species),1)])):O("",!0),D.proponents&&D.proponents.length>0?(v(),k("div",Ts,[f[7]||(f[7]=t("div",{class:"detail-label"},"Proponentes",-1)),t("div",Cs,[(v(!0),k(Ie,null,Re(D.proponents,V=>(v(),K(mt,{key:V.id,color:"primary","text-color":"white",icon:"person",size:"sm"},{default:j(()=>[pe(A(V.name)+" ",1),V.party?(v(),K(dt,{key:0},{default:j(()=>[pe(A(V.party),1)]),_:2},1024)):O("",!0)]),_:2},1024))),128))])])):O("",!0),D.documents&&D.documents.length>0||D.file_url||D.protocol_document?(v(),k("div",Ps,[f[8]||(f[8]=t("div",{class:"detail-label"},"Documentos",-1)),t("div",Ls,[(v(!0),k(Ie,null,Re(D.documents,V=>(v(),K(qe,{key:V.id,href:V.file_url||V.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:V.title||V.original_filename||"Abrir PDF",size:"sm",class:"document-button"},null,8,["href","label"]))),128)),D.file_url&&(!D.documents||D.documents.length===0)?(v(),K(qe,{key:0,href:D.file_url,target:"_blank",color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",class:"document-button"},null,8,["href"])):O("",!0),r(D)&&(!D.documents||D.documents.length===0)?(v(),K(qe,{key:1,href:r(D),target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:g(D),size:"sm",class:"document-button"},null,8,["href","label"])):O("",!0)])])):O("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):O("",!0)])}}};var Ms=ze(Es,[["__scopeId","data-v-23cf50f4"]]),Yt=je({name:"QInnerLoading",props:{..._t,...ua,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:i}){const s=Ke(),n=xt(e,s.proxy.$q),{transitionProps:a,transitionStyle:c}=da(e),u=l(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),r=l(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function g(){const P=[Z(jt,{size:e.size,color:e.color})];return e.label!==void 0&&P.push(Z("div",{class:r.value,style:e.labelStyle},[e.label])),P}function q(){return e.showing===!0?Z("div",{class:u.value,style:c.value},i.default!==void 0?i.default():g()):null}return()=>Z(Ct,a.value,q)}});function De(e){if(!e)return"";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function St(e){if(e==null||e<=0)return"0:00";const i=Math.floor(Number(e)),s=Math.floor(i/60),n=i%60;return`${s}:${n.toString().padStart(2,"0")}`}const Fs={class:"card-header quorum-header"},Ds={class:"tw-flex tw-items-center tw-gap-3"},js={class:"card-icon-wrapper"},Os={class:"tw-flex tw-flex-col tw-gap-2"},Ns={key:0,class:"status-message text-grey-8"},Bs={key:1,class:"status-hint text-grey-6"},Us={class:"status-avatar status-present"},Qs={class:"status-avatar status-waiting"},Js={class:"tw-flex tw-flex-col tw-gap-2"},Hs={key:0,class:"status-message text-grey-8"},Ws={key:1,class:"status-hint text-grey-6"},Gs={class:"status-avatar status-absent"},Ks={class:"status-avatar status-waiting"},Ys={key:5,class:"tw-w-full"};const Xs={__name:"QuorumCard",props:{isPresent:{type:Boolean,default:!1},isAbsentJustified:{type:Boolean,default:!1},absenceReason:{type:String,default:null},quorumFinalized:{type:Boolean,default:!1},quorumStarted:{type:Boolean,default:!1},quorumFinalizedAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingQuorum:{type:Boolean,default:!1},loadingAttendance:{type:Boolean,default:!1},loadingJustify:{type:Boolean,default:!1}},emits:["toggle-attendance","justify-absence"],setup(e,{emit:i}){const s=e,n=i,a=X(!1),c=X(""),u=l(()=>!s.canSend||!s.selectedAgendaId||!s.quorumStarted||s.quorumFinalized||s.isAbsentJustified||s.loadingAttendance||s.loadingQuorum),r=l(()=>s.canSend?s.selectedAgendaId?s.quorumStarted?s.quorumFinalized?"Qu\xF3rum foi finalizado":s.isAbsentJustified?"N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 justificativa de aus\xEAncia":s.loadingAttendance?"Processando presen\xE7a...":s.loadingQuorum?"Carregando qu\xF3rum...":"":"Qu\xF3rum ainda n\xE3o foi iniciado":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function g(){if(console.log("[QuorumCard] handleToggleAttendance chamado",{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,quorumStarted:s.quorumStarted,quorumFinalized:s.quorumFinalized,loadingAttendance:s.loadingAttendance,loadingQuorum:s.loadingQuorum,isButtonDisabled:u.value}),u.value){console.warn("[QuorumCard] Bot\xE3o est\xE1 desabilitado:",r.value);return}console.log("[QuorumCard] Emitindo toggle-attendance"),n("toggle-attendance")}function q(){a.value=!1,c.value=""}function P(){!c.value||!c.value.trim()||(n("justify-absence",c.value.trim()),a.value=!1,c.value="")}return(R,b)=>(v(),K(Ue,{flat:"",class:"modern-card quorum-card tw-h-full tw-relative tw-overflow-hidden"},{default:j(()=>[t("div",Fs,[t("div",Ds,[t("div",js,[$(Q,{name:"groups",size:"24px",class:"tw-text-white"})]),b[3]||(b[3]=t("div",{class:"card-title"},"Qu\xF3rum",-1))])]),$(Me,{class:"tw-relative tw-p-4",style:{"min-height":"120px"}},{default:j(()=>[$(Yt,{showing:e.loadingQuorum,color:"primary",size:"50px"},null,8,["showing"]),e.loadingQuorum?O("",!0):(v(),k(Ie,{key:0},[e.quorumFinalized?(v(),K(Ve,{key:0,class:"modern-banner banner-finalized q-mb-3",dense:""},{avatar:j(()=>[t("div",{class:F(["status-avatar",e.isPresent?"status-present":e.isAbsentJustified?"status-waiting":"status-absent"])},[$(Q,{name:e.isPresent?"check_circle":e.isAbsentJustified?"event_busy":"cancel",size:"24px"},null,8,["name"])],2)]),default:j(()=>[t("div",Os,[b[5]||(b[5]=t("div",{class:"status-title"},"Qu\xF3rum Finalizado",-1)),t("div",{class:F(["status-message",e.isPresent?"text-positive":e.isAbsentJustified?"text-info":"text-negative"])},A(e.isPresent?"Voc\xEA estava presente no qu\xF3rum":e.isAbsentJustified?"Falta Justificada":"Voc\xEA n\xE3o estava presente no qu\xF3rum"),3),e.isAbsentJustified&&e.absenceReason?(v(),k("div",Ns,[b[4]||(b[4]=t("strong",null,"Justificativa:",-1)),pe(" "+A(e.absenceReason),1)])):O("",!0),e.quorumFinalizedAt?(v(),k("div",Bs," Finalizado em: "+A(I(De)(e.quorumFinalizedAt)),1)):O("",!0),b[6]||(b[6]=t("div",{class:"status-hint text-grey-6"}," Aguarde um novo qu\xF3rum ser iniciado. ",-1))])]),_:1})):e.quorumStarted&&e.isPresent?(v(),K(Ve,{key:1,class:"modern-banner banner-success q-mb-3",dense:""},{avatar:j(()=>[t("div",Us,[$(Q,{name:"check_circle",size:"24px"})])]),default:j(()=>[b[7]||(b[7]=t("div",{class:"status-title"},"Voc\xEA est\xE1 presente no qu\xF3rum",-1))]),_:1})):e.quorumStarted&&!e.isPresent&&e.isAbsentJustified?(v(),K(Ve,{key:2,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:j(()=>[t("div",Qs,[$(Q,{name:"event_busy",size:"24px"})])]),default:j(()=>[t("div",Js,[b[9]||(b[9]=t("div",{class:"status-title"},"Falta Justificada",-1)),e.absenceReason?(v(),k("div",Hs,[b[8]||(b[8]=t("strong",null,"Justificativa:",-1)),pe(" "+A(e.absenceReason),1)])):(v(),k("div",Ws," Sua aus\xEAncia foi justificada. "))])]),_:1})):e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(v(),K(Ve,{key:3,class:"modern-banner banner-warning q-mb-3",dense:""},{avatar:j(()=>[t("div",Gs,[$(Q,{name:"person_off",size:"24px"})])]),default:j(()=>[b[10]||(b[10]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"status-title"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum"),t("div",{class:"status-hint text-grey-6"}," Marque sua presen\xE7a para participar. ")],-1))]),_:1})):e.quorumStarted?O("",!0):(v(),K(Ve,{key:4,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:j(()=>[t("div",Ks,[$(Q,{name:"schedule",size:"24px"})])]),default:j(()=>[b[11]||(b[11]=t("div",{class:"status-title"},"Aguardando o in\xEDcio do qu\xF3rum.",-1))]),_:1})),!e.quorumFinalized&&e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(v(),k("div",Ys,[$(qe,{class:"tw-w-full modern-action-btn btn-add",icon:"how_to_reg",label:"Marcar Presen\xE7a",disable:u.value,loading:e.loadingAttendance||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:g},{default:j(()=>[u.value?(v(),K(dt,{key:0,class:"bg-red"},{default:j(()=>[pe(A(r.value),1)]),_:1})):O("",!0)]),_:1},8,["disable","loading"]),$(qe,{class:"tw-w-full modern-action-btn btn-justify",icon:"event_busy",label:"Justificar",disable:u.value,loading:e.loadingJustify||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:b[0]||(b[0]=f=>a.value=!0)},{default:j(()=>[u.value?(v(),K(dt,{key:0,class:"bg-red"},{default:j(()=>[pe(A(r.value),1)]),_:1})):O("",!0)]),_:1},8,["disable","loading"])])):O("",!0),O("",!0)],64))]),_:1}),$(lt,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=f=>a.value=f),persistent:""},{default:j(()=>[$(Ue,{style:{"min-width":"350px","max-width":"500px"}},{default:j(()=>[$(Me,null,{default:j(()=>[...b[12]||(b[12]=[t("div",{class:"text-h6"},"Justificar Aus\xEAncia",-1)])]),_:1}),$(Me,{class:"q-pt-none"},{default:j(()=>[$(ca,{modelValue:c.value,"onUpdate:modelValue":b[1]||(b[1]=f=>c.value=f),type:"textarea",label:"Motivo da aus\xEAncia",placeholder:"Digite o motivo da sua aus\xEAncia...",autofocus:"",rules:[f=>f&&f.trim()||"Por favor, informe o motivo da aus\xEAncia"],rows:"4",outlined:"",counter:"",maxlength:"500"},null,8,["modelValue","rules"])]),_:1}),$(va,{align:"right",class:"text-primary"},{default:j(()=>[$(qe,{flat:"",label:"Cancelar",onClick:q}),$(qe,{flat:"",label:"Justificar",color:"primary",loading:e.loadingJustify,disable:!c.value||!c.value.trim(),onClick:P},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Zs=ze(Xs,[["__scopeId","data-v-601c49e9"]]);const en={class:"quorum-tab"},tn={class:"overview-card modern-card"},an={class:"card-content"},sn={class:"summary-title"},nn={__name:"QuorumTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=fe("quorum"),n=fe("sessionAgenda"),a=l(()=>{var r;return i.sessionId||((r=n==null?void 0:n.selectedAgendaId)==null?void 0:r.value)||null});function c(){s!=null&&s.toggleAttendance?s.toggleAttendance():console.error("[QuorumTab] quorum.toggleAttendance n\xE3o est\xE1 dispon\xEDvel")}function u(r){s!=null&&s.justifyAbsence?s.justifyAbsence(r):console.error("[QuorumTab] quorum.justifyAbsence n\xE3o est\xE1 dispon\xEDvel")}return(r,g)=>{var q,P,R,b,f,o,d,y,M,T,p,x,h,w,C,N,ee,B,z,D;return v(),k("div",en,[t("div",tn,[t("div",an,[t("div",sn,[$(Q,{name:"groups",size:"20px",class:"tw-mr-2"}),g[0]||(g[0]=pe(" Qu\xF3rum ",-1))]),$(Zs,{"is-present":((P=(q=I(s))==null?void 0:q.isPresent)==null?void 0:P.value)||!1,"is-absent-justified":((b=(R=I(s))==null?void 0:R.isAbsentJustified)==null?void 0:b.value)||!1,"absence-reason":((o=(f=I(s))==null?void 0:f.absenceReason)==null?void 0:o.value)||null,"quorum-finalized":((y=(d=I(s))==null?void 0:d.quorumFinalized)==null?void 0:y.value)||!1,"quorum-started":((T=(M=I(s))==null?void 0:M.quorumStarted)==null?void 0:T.value)||!1,"quorum-finalized-at":((x=(p=I(s))==null?void 0:p.quorumFinalizedAt)==null?void 0:x.value)||null,"selected-agenda-id":a.value,"can-send":((w=(h=I(s))==null?void 0:h.canSend)==null?void 0:w.value)||!1,"loading-quorum":((N=(C=I(s))==null?void 0:C.loadingQuorum)==null?void 0:N.value)||!1,"loading-attendance":((B=(ee=I(s))==null?void 0:ee.loadingAttendance)==null?void 0:B.value)||!1,"loading-justify":((D=(z=I(s))==null?void 0:z.loadingJustify)==null?void 0:D.value)||!1,onToggleAttendance:c,onJustifyAbsence:u},null,8,["is-present","is-absent-justified","absence-reason","quorum-finalized","quorum-started","quorum-finalized-at","selected-agenda-id","can-send","loading-quorum","loading-attendance","loading-justify"])])])])}}};var on=ze(nn,[["__scopeId","data-v-013d4040"]]);const ln={class:"tw-flex tw-items-center tw-gap-2"},rn={class:"tw-flex tw-flex-col tw-gap-1"},un={class:F("text-caption tw-font-bold tw-text-red-700")},dn={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},cn={class:"tw-space-y-2"},vn={key:0,class:"tw-text-gray-500 tw-ml-2"},mn={class:"tw-flex tw-flex-col tw-gap-1"},gn={class:F("text-body2 tw-font-bold tw-text-green-700")},fn={key:0,class:"text-caption"},hn={key:1,class:"text-caption"},pn={class:"tw-flex tw-flex-col tw-gap-1"},wn={class:"text-caption"},bn={__name:"ExpedientCard",props:{title:{type:String,required:!0},expedientLabel:{type:String,required:!0},icon:{type:String,required:!0},headerClass:{type:String,required:!0},headerColor:{type:String,required:!0},buttonColor:{type:String,required:!0},buttonIcon:{type:String,required:!0},isRegistered:{type:Boolean,default:!1},isPresent:{type:Boolean,default:!1},started:{type:Boolean,default:!1},finalized:{type:Boolean,default:!1},finalizedAt:{type:String,default:null},registrationOrder:{type:Number,default:null},registeredAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},loadingAction:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},finishedSpeech:{type:Object,default:null},finishedSpeechTotalMinutes:{type:Number,default:0},finishedSpeechUsedMinutes:{type:Number,default:0},finishedSpeechUsedSeconds:{type:Number,default:0},finishedSpeechFinishedAt:{type:String,default:null},sessionInteractions:{type:Array,default:()=>[]}},emits:["toggle-registration"],setup(e,{emit:i}){const s=e,n=i,a=l(()=>!s.canSend||!s.selectedAgendaId||!s.started||s.finalized||!s.isPresent||s.loadingAction),c=l(()=>s.canSend?s.selectedAgendaId?s.started?s.finalized?"Inscri\xE7\xF5es foram finalizadas":s.isPresent?s.loadingAction?"Processando inscri\xE7\xE3o...":"":"Voc\xEA precisa estar presente no qu\xF3rum para se inscrever":"Inscri\xE7\xF5es ainda n\xE3o foram iniciadas":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function u(){if(console.log(`[ExpedientCard ${s.title}] handleToggleRegistration chamado`,{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,started:s.started,finalized:s.finalized,loadingAction:s.loadingAction,isButtonDisabled:a.value}),a.value){console.warn(`[ExpedientCard ${s.title}] Bot\xE3o est\xE1 desabilitado:`,c.value);return}console.log(`[ExpedientCard ${s.title}] Emitindo toggle-registration`),n("toggle-registration")}return(r,g)=>(v(),K(Ue,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:j(()=>[$(Me,{class:F(`tw-flex tw-items-center tw-justify-between ${e.headerClass} tw-text-white ${r.$q.screen.lt.md?"tw-py-1":"tw-py-2"}`)},{default:j(()=>[t("div",ln,[$(Q,{name:e.icon,size:r.$q.screen.lt.md?"18px":"20px"},null,8,["name","size"]),t("div",{class:F(`${r.$q.screen.lt.md?"text-body2":"text-subtitle1"} tw-font-semibold`)},A(e.title),3)])]),_:1},8,["class"]),$(Me,{class:F(`tw-relative tw-w-full ${r.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`),style:$t(r.$q.screen.lt.md?"min-height: 60px":"min-height: 80px")},{default:j(()=>[$(Yt,{showing:e.loadingData,color:e.headerColor,size:"50px"},null,8,["showing","color"]),e.loadingData?O("",!0):(v(),k(Ie,{key:0},[e.finalized&&e.isRegistered&&!e.finishedSpeech?(v(),K(Ve,{key:0,class:F(`text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:j(()=>[$(Q,{name:"check_circle",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",{class:F(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-bold tw-text-green-700`)}," Inscri\xE7\xF5es Finalizadas - Voc\xEA est\xE1 inscrito ",2),e.registrationOrder?(v(),k("div",{key:0,class:F(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption")}," Sua posi\xE7\xE3o na fila: "+A(e.registrationOrder)+"\xBA ",3)):O("",!0)],2)]),_:1},8,["class"])):e.finalized&&!e.isRegistered&&!e.isPresent&&!e.finishedSpeech?(v(),K(Ve,{key:1,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[g[0]||(g[0]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas "),t("div",{class:"text-caption"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum. ")],-1))]),_:1})):e.finalized&&!e.isRegistered&&e.isPresent&&!e.finishedSpeech?(v(),K(Ve,{key:2,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"cancel",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",rn,[g[1]||(g[1]=t("div",{class:"text-body2 tw-font-semibold"}," Inscri\xE7\xF5es Finalizadas ",-1)),t("div",un," Voc\xEA n\xE3o est\xE1 inscrito no "+A(e.expedientLabel)+". ",1)])]),_:1})):O("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(v(),K(Ve,{key:3,class:F(`bg-green-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:j(()=>[$(Q,{name:"mic",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",{class:F(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)},"Voc\xEA est\xE1 falando",2),t("div",{class:F(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-green-700`)}," Tempo restante: "+A(I(St)(e.remainingTime)),3)],2)]),_:1},8,["class"])):O("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(v(),K(Ve,{key:4,class:F(`bg-yellow-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:j(()=>[$(Q,{name:"pause",color:"orange",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",{class:F(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala est\xE1 pausada ",2),t("div",{class:F(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-yellow-700`)}," Tempo restante: "+A(I(St)(e.remainingTime)),3)],2)]),_:1},8,["class"])):O("",!0),e.finishedSpeech?(v(),K(Ve,{key:5,class:F(`text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:j(()=>[$(Q,{name:"check_circle",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",{class:F(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala foi finalizada ",2),t("div",{class:F(`tw-grid tw-grid-cols-2 ${r.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-2"}`)},[t("div",null,[t("div",{class:F(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total Alocado ",2),t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},A(e.finishedSpeechTotalMinutes)+" min ",3)]),t("div",null,[t("div",{class:F(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Utilizado ",2),t("div",{class:F(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},A(e.finishedSpeechUsedMinutes)+" min "+A(e.finishedSpeechUsedSeconds)+" s ",3)])],2),e.finishedSpeechFinishedAt?(v(),k("div",{key:0,class:F(`${r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-600 ${r.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Finalizada em: "+A(I(De)(e.finishedSpeechFinishedAt)),3)):O("",!0)],2)]),_:1},8,["class"])):O("",!0),e.sessionInteractions.length>0?(v(),K(Ue,{key:6,flat:"",bordered:"",class:"q-mb-2 tw-bg-blue-50"},{default:j(()=>[$(Me,{class:"tw-py-3"},{default:j(()=>[t("div",dn,[$(Q,{name:"history",color:"primary",size:"20px"}),g[2]||(g[2]=t("div",{class:"text-body2 tw-font-semibold"}," Suas Intera\xE7\xF5es na Sess\xE3o ",-1))]),t("div",cn,[(v(!0),k(Ie,null,Re(e.sessionInteractions,(q,P)=>(v(),k("div",{key:P,class:"tw-text-sm tw-text-gray-700"},[$(Q,{name:q.icon,color:q.color,size:"16px",class:"tw-mr-2"},null,8,["name","color"]),t("span",null,A(q.label),1),q.time?(v(),k("span",vn," ("+A(q.time)+") ",1)):O("",!0)]))),128))])]),_:1})]),_:1})):e.started&&e.isRegistered?(v(),K(Ve,{key:7,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"check_circle",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",mn,[t("div",gn," Voc\xEA est\xE1 inscrito no "+A(e.title),1),e.registrationOrder?(v(),k("div",fn," Sua posi\xE7\xE3o na fila: "+A(e.registrationOrder)+"\xBA ",1)):O("",!0),e.registeredAt?(v(),k("div",hn," Inscrito em: "+A(I(De)(e.registeredAt)),1)):O("",!0)])]),_:1})):e.started&&!e.isPresent?(v(),K(Ve,{key:8,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[t("div",pn,[g[3]||(g[3]=t("div",{class:"text-body2 tw-font-semibold"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum ",-1)),t("div",wn," Marque sua presen\xE7a no qu\xF3rum para poder se inscrever no "+A(e.expedientLabel)+". ",1)])]),_:1})):e.started&&!e.isRegistered&&e.isPresent?(v(),K(Ve,{key:9,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"assignment",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[g[4]||(g[4]=t("div",{class:"tw-flex tw-flex-col tw-gap-1"},[t("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es abertas"),t("div",{class:"text-caption"},"Clique no bot\xE3o para se inscrever.")],-1))]),_:1})):!e.started&&!e.finalized?(v(),K(Ve,{key:10,class:"text-black q-mb-2",dense:""},{avatar:j(()=>[$(Q,{name:"schedule",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:j(()=>[g[5]||(g[5]=t("div",{class:"text-body2"},"Aguardando o in\xEDcio das inscri\xE7\xF5es.",-1))]),_:1})):O("",!0),e.started&&!e.finalized&&e.isPresent?(v(),K(qe,{key:11,class:"full-width q-mt-sm",color:e.isRegistered?"negative":e.buttonColor,icon:e.isRegistered?"cancel":e.buttonIcon,label:e.isRegistered?"Remover Inscri\xE7\xE3o":"Inscrever",disable:a.value,loading:e.loadingAction,size:"md",dense:"",onClick:u},{default:j(()=>[a.value?(v(),K(dt,{key:0,class:"bg-red"},{default:j(()=>[pe(A(c.value),1)]),_:1})):O("",!0)]),_:1},8,["color","icon","label","disable","loading"])):O("",!0)],64))]),_:1},8,["class","style"])]),_:1}))}};var Vt=ze(bn,[["__scopeId","data-v-fdc1449a"]]);const Sn={class:"expedient-tab"},yn={class:"overview-card modern-card"},_n={class:"card-content"},xn={class:"summary-title"},qn={key:1,class:"tw-text-center tw-text-gray-500 tw-py-8"},$n={__name:"SmallExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=fe("sessionSettings"),n=fe("quorum"),a=fe("smallExpedient"),c=fe("smallSpeech"),u=fe("sessionInteractions"),r=fe("sessionAgenda"),g=l(()=>{var q;return i.sessionId||((q=r==null?void 0:r.selectedAgendaId)==null?void 0:q.value)||null});return(q,P)=>{var R,b,f,o,d,y,M,T,p,x,h,w,C,N,ee,B,z,D,V,G,se,ue,W,re,te,E,L,ae,S,_,m,J,H,de,ce,he,we,be,xe,ie,ne,Ae,Pe,Qe,Je;return v(),k("div",Sn,[t("div",yn,[t("div",_n,[t("div",xn,[$(Q,{name:"timer",size:"20px",class:"tw-mr-2"}),pe(" "+A(((b=(R=I(s))==null?void 0:R.smallExpedientName)==null?void 0:b.value)||"Pequeno Expediente"),1)]),(o=(f=I(s))==null?void 0:f.enableSmallExpedientSpeech)!=null&&o.value?(v(),K(Vt,{key:0,title:((y=(d=I(s))==null?void 0:d.smallExpedientName)==null?void 0:y.value)||"Pequeno Expediente","expedient-label":(((T=(M=I(s))==null?void 0:M.smallExpedientName)==null?void 0:T.value)||"Pequeno Expediente").toLowerCase(),icon:"timer","header-class":"bg-secondary","header-color":"secondary","button-color":"secondary","button-icon":"assignment","is-registered":((x=(p=I(a))==null?void 0:p.isRegistered)==null?void 0:x.value)||!1,"is-present":((w=(h=I(n))==null?void 0:h.isPresent)==null?void 0:w.value)||!1,started:((N=(C=I(a))==null?void 0:C.started)==null?void 0:N.value)||!1,finalized:((B=(ee=I(a))==null?void 0:ee.finalized)==null?void 0:B.value)||!1,"finalized-at":((D=(z=I(a))==null?void 0:z.finalizedAt)==null?void 0:D.value)||null,"registration-order":((G=(V=I(a))==null?void 0:V.registrationOrder)==null?void 0:G.value)||null,"registered-at":((ue=(se=I(a))==null?void 0:se.registeredAt)==null?void 0:ue.value)||null,"selected-agenda-id":g.value,"can-send":((re=(W=I(a))==null?void 0:W.canSend)==null?void 0:re.value)||!1,"loading-data":((E=(te=I(a))==null?void 0:te.loadingData)==null?void 0:E.value)||!1,"loading-action":((ae=(L=I(a))==null?void 0:L.loadingAction)==null?void 0:ae.value)||!1,"current-speech":((_=(S=I(c))==null?void 0:S.currentSpeech)==null?void 0:_.value)||null,"remaining-time":((J=(m=I(c))==null?void 0:m.remainingTime)==null?void 0:J.value)||null,"finished-speech":((de=(H=I(c))==null?void 0:H.finishedSpeech)==null?void 0:de.value)||null,"finished-speech-total-minutes":((he=(ce=I(c))==null?void 0:ce.finishedSpeechTotalMinutes)==null?void 0:he.value)||0,"finished-speech-used-minutes":((be=(we=I(c))==null?void 0:we.finishedSpeechUsedMinutes)==null?void 0:be.value)||0,"finished-speech-used-seconds":((ie=(xe=I(c))==null?void 0:xe.finishedSpeechUsedSeconds)==null?void 0:ie.value)||0,"finished-speech-finished-at":((Ae=(ne=I(c))==null?void 0:ne.finishedSpeechFinishedAt)==null?void 0:Ae.value)||null,"session-interactions":((Qe=(Pe=I(u))==null?void 0:Pe.sessionInteractions)==null?void 0:Qe.value)||[],onToggleRegistration:(Je=I(a))==null?void 0:Je.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])):(v(),k("div",qn," As falas n\xE3o est\xE3o habilitadas para o pequeno expediente. "))])])])}}};var In=ze($n,[["__scopeId","data-v-42c13971"]]);const An={class:"expedient-tab"},kn={class:"overview-card modern-card"},Vn={class:"card-content"},Rn={class:"summary-title"},zn={__name:"LargeExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=fe("sessionSettings"),n=fe("quorum"),a=fe("largeExpedient"),c=fe("largeSpeech"),u=fe("sessionInteractions"),r=fe("sessionAgenda"),g=l(()=>{var q;return i.sessionId||((q=r==null?void 0:r.selectedAgendaId)==null?void 0:q.value)||null});return(q,P)=>{var R,b,f,o,d,y,M,T,p,x,h,w,C,N,ee,B,z,D,V,G,se,ue,W,re,te,E,L,ae,S,_,m,J,H,de,ce,he,we,be,xe,ie,ne,Ae,Pe;return v(),k("div",An,[t("div",kn,[t("div",Vn,[t("div",Rn,[$(Q,{name:"assignment_turned_in",size:"20px",class:"tw-mr-2"}),pe(" "+A(((b=(R=I(s))==null?void 0:R.largeExpedientName)==null?void 0:b.value)||"Grande Expediente"),1)]),$(Vt,{title:((o=(f=I(s))==null?void 0:f.largeExpedientName)==null?void 0:o.value)||"Grande Expediente","expedient-label":(((y=(d=I(s))==null?void 0:d.largeExpedientName)==null?void 0:y.value)||"Grande Expediente").toLowerCase(),icon:"assignment_turned_in","header-class":"bg-orange","header-color":"orange","button-color":"orange","button-icon":"assignment_turned_in","is-registered":((T=(M=I(a))==null?void 0:M.isRegistered)==null?void 0:T.value)||!1,"is-present":((x=(p=I(n))==null?void 0:p.isPresent)==null?void 0:x.value)||!1,started:((w=(h=I(a))==null?void 0:h.started)==null?void 0:w.value)||!1,finalized:((N=(C=I(a))==null?void 0:C.finalized)==null?void 0:N.value)||!1,"finalized-at":((B=(ee=I(a))==null?void 0:ee.finalizedAt)==null?void 0:B.value)||null,"registration-order":((D=(z=I(a))==null?void 0:z.registrationOrder)==null?void 0:D.value)||null,"registered-at":((G=(V=I(a))==null?void 0:V.registeredAt)==null?void 0:G.value)||null,"selected-agenda-id":g.value,"can-send":((ue=(se=I(a))==null?void 0:se.canSend)==null?void 0:ue.value)||!1,"loading-data":((re=(W=I(a))==null?void 0:W.loadingData)==null?void 0:re.value)||!1,"loading-action":((E=(te=I(a))==null?void 0:te.loadingAction)==null?void 0:E.value)||!1,"current-speech":((ae=(L=I(c))==null?void 0:L.currentSpeech)==null?void 0:ae.value)||null,"remaining-time":((_=(S=I(c))==null?void 0:S.remainingTime)==null?void 0:_.value)||null,"finished-speech":((J=(m=I(c))==null?void 0:m.finishedSpeech)==null?void 0:J.value)||null,"finished-speech-total-minutes":((de=(H=I(c))==null?void 0:H.finishedSpeechTotalMinutes)==null?void 0:de.value)||0,"finished-speech-used-minutes":((he=(ce=I(c))==null?void 0:ce.finishedSpeechUsedMinutes)==null?void 0:he.value)||0,"finished-speech-used-seconds":((be=(we=I(c))==null?void 0:we.finishedSpeechUsedSeconds)==null?void 0:be.value)||0,"finished-speech-finished-at":((ie=(xe=I(c))==null?void 0:xe.finishedSpeechFinishedAt)==null?void 0:ie.value)||null,"session-interactions":((Ae=(ne=I(u))==null?void 0:ne.sessionInteractions)==null?void 0:Ae.value)||[],onToggleRegistration:(Pe=I(a))==null?void 0:Pe.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var Tn=ze(zn,[["__scopeId","data-v-d0cf9872"]]);const Cn={class:"expedient-tab"},Pn={class:"overview-card modern-card"},Ln={class:"card-content"},En={class:"summary-title"},Mn={__name:"MiscellaneousSubjectsTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=fe("sessionSettings"),n=fe("quorum"),a=fe("miscellaneousSubject"),c=fe("miscellaneousSubjectSpeech"),u=fe("sessionInteractions"),r=fe("sessionAgenda"),g=l(()=>{var q;return i.sessionId||((q=r==null?void 0:r.selectedAgendaId)==null?void 0:q.value)||null});return(q,P)=>{var R,b,f,o,d,y,M,T,p,x,h,w,C,N,ee,B,z,D,V,G,se,ue,W,re,te,E,L,ae,S,_,m,J,H,de,ce,he,we,be,xe,ie,ne,Ae,Pe;return v(),k("div",Cn,[t("div",Pn,[t("div",Ln,[t("div",En,[$(Q,{name:"topic",size:"20px",class:"tw-mr-2"}),pe(" "+A(((b=(R=I(s))==null?void 0:R.miscellaneousSubjectsName)==null?void 0:b.value)||"Assuntos Diversos"),1)]),$(Vt,{title:((o=(f=I(s))==null?void 0:f.miscellaneousSubjectsName)==null?void 0:o.value)||"Assuntos Diversos","expedient-label":(((y=(d=I(s))==null?void 0:d.miscellaneousSubjectsName)==null?void 0:y.value)||"Assuntos Diversos").toLowerCase(),icon:"topic","header-class":"bg-teal","header-color":"teal","button-color":"teal","button-icon":"topic","is-registered":((T=(M=I(a))==null?void 0:M.isRegistered)==null?void 0:T.value)||!1,"is-present":((x=(p=I(n))==null?void 0:p.isPresent)==null?void 0:x.value)||!1,started:((w=(h=I(a))==null?void 0:h.started)==null?void 0:w.value)||!1,finalized:((N=(C=I(a))==null?void 0:C.finalized)==null?void 0:N.value)||!1,"finalized-at":((B=(ee=I(a))==null?void 0:ee.finalizedAt)==null?void 0:B.value)||null,"registration-order":((D=(z=I(a))==null?void 0:z.registrationOrder)==null?void 0:D.value)||null,"registered-at":((G=(V=I(a))==null?void 0:V.registeredAt)==null?void 0:G.value)||null,"selected-agenda-id":g.value,"can-send":((ue=(se=I(a))==null?void 0:se.canSend)==null?void 0:ue.value)||!1,"loading-data":((re=(W=I(a))==null?void 0:W.loadingData)==null?void 0:re.value)||!1,"loading-action":((E=(te=I(a))==null?void 0:te.loadingAction)==null?void 0:E.value)||!1,"current-speech":((ae=(L=I(c))==null?void 0:L.currentSpeech)==null?void 0:ae.value)||null,"remaining-time":((_=(S=I(c))==null?void 0:S.remainingTime)==null?void 0:_.value)||null,"finished-speech":((J=(m=I(c))==null?void 0:m.finishedSpeech)==null?void 0:J.value)||null,"finished-speech-total-minutes":((de=(H=I(c))==null?void 0:H.finishedSpeechTotalMinutes)==null?void 0:de.value)||0,"finished-speech-used-minutes":((he=(ce=I(c))==null?void 0:ce.finishedSpeechUsedMinutes)==null?void 0:he.value)||0,"finished-speech-used-seconds":((be=(we=I(c))==null?void 0:we.finishedSpeechUsedSeconds)==null?void 0:be.value)||0,"finished-speech-finished-at":((ie=(xe=I(c))==null?void 0:xe.finishedSpeechFinishedAt)==null?void 0:ie.value)||null,"session-interactions":((Ae=(ne=I(u))==null?void 0:ne.sessionInteractions)==null?void 0:Ae.value)||[],onToggleRegistration:(Pe=I(a))==null?void 0:Pe.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","onToggleRegistration"])])])])}}};var Fn=ze(Mn,[["__scopeId","data-v-1f49aca2"]]);const Dn={class:"voting-tab"},jn={class:"overview-card modern-card"},On={class:"card-content"},Nn={class:"summary-title"},Bn={key:0,class:"section-container"},Un={class:"section-title"},Qn={class:"propositions-list"},Jn={class:"proposition-header"},Hn={class:"proposition-badges"},Wn={class:"proposition-number"},Gn={class:"proposition-title"},Kn={key:0,class:"proposition-species"},Yn={key:1,class:"section-container"},Xn={class:"section-title"},Zn={class:"propositions-list"},ei={class:"voting-results"},ti={class:"results-grid"},ai={class:"result-item result-favor"},si={class:"result-content"},ni={class:"result-value"},ii={class:"result-item result-against"},oi={class:"result-content"},li={class:"result-value"},ri={class:"result-item result-abstain"},ui={class:"result-content"},di={class:"result-value"},ci={class:"result-item result-total"},vi={class:"result-content"},mi={class:"result-value"},gi={key:0,class:"members-section"},fi={class:"members-grid"},hi={class:"member-card-content"},pi=["src","alt"],wi={key:1},bi={class:"member-info"},Si={class:"member-name"},yi={key:0,class:"member-party"},_i={key:1,class:"secret-voting-message"},xi={class:"secret-message-count"},qi={key:2,class:"no-votes-message"},$i={key:2,class:"empty-voting-state"},Ii={__name:"VotingTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const i=e,s=fe("voting",null);ot(()=>{s!=null&&s.loadVotingStatus&&s.loadVotingStatus()}),ge(()=>i.sessionId,o=>{o&&(s==null?void 0:s.loadVotingStatus)&&s.loadVotingStatus()},{immediate:!0});const n=l(()=>{var o,d;return(d=(o=s==null?void 0:s.activeVoting)==null?void 0:o.value)!=null&&d.readings?s.activeVoting.value.readings.filter(y=>y.type==="voting"||y.type==="secret_voting"):[]}),a=l(()=>{var o;return(o=s==null?void 0:s.finishedReadings)!=null&&o.value?s.finishedReadings.value.filter(d=>d.type==="voting"||d.type==="secret_voting"):[]});function c(o){if(!o.proposition)return"Proposi\xE7\xE3o sem dados";const d=o.proposition.number,y=o.proposition.year,M=o.proposition.description||o.proposition.title||"";return`${d}/${y}${M?" - "+M:""}`}function u(o){var T;if(o.type==="secret_voting")return`Vota\xE7\xE3o Secreta - ${((T=o.votes)==null?void 0:T.length)||0} voto(s)`;if(!o.votes||o.votes.length===0)return"Nenhum voto registrado";const d=r(o.votes,"favor"),y=r(o.votes,"against"),M=r(o.votes,"abstain");return`${d} a favor, ${y} contra, ${M} absten\xE7\xF5es`}function r(o,d){return!o||!Array.isArray(o)?0:o.filter(y=>y.vote===d).length}function g(o){switch(o){case"favor":return"thumb_up";case"against":return"thumb_down";case"abstain":return"remove_circle";default:return"help"}}function q(o){switch(o){case"favor":return"green";case"against":return"red";case"abstain":return"orange";default:return"grey"}}function P(o){switch(o){case"favor":return"tw-bg-green-50 tw-border-green-200";case"against":return"tw-bg-red-50 tw-border-red-200";case"abstain":return"tw-bg-orange-50 tw-border-orange-200";default:return""}}function R(o){if(!o)return"";const d=o.split(" ");return d.length>=2?(d[0][0]+d[d.length-1][0]).toUpperCase():o.substring(0,2).toUpperCase()}function b(o){if(!o)return null;if(o.startsWith("http://")||o.startsWith("https://"))return o;const d={}.VITE_API_BASE_URL||"http://127.0.0.1:8000";return o.startsWith("/")?`${d}${o}`:`${d}/${o}`}function f(o){return!o||o.type==="secret_voting"||!o.votes||!Array.isArray(o.votes)?!1:o.votes.length>0}return(o,d)=>(v(),k("div",Dn,[t("div",jn,[t("div",On,[t("div",Nn,[$(Q,{name:"how_to_vote",size:"20px",class:"tw-mr-2"}),d[0]||(d[0]=pe(" Vota\xE7\xF5es ",-1))]),n.value.length>0?(v(),k("div",Bn,[t("div",Un,[$(Q,{name:"schedule",size:"20px",class:"section-icon",color:"primary"}),d[1]||(d[1]=t("span",{class:"section-title-text"},"Vota\xE7\xF5es em Andamento",-1))]),t("div",Qn,[(v(!0),k(Ie,null,Re(n.value,y=>(v(),K(Ue,{key:y.id,flat:"",bordered:"",class:"proposition-card mobile-card"},{default:j(()=>[$(Me,{class:"proposition-card-section"},{default:j(()=>{var M,T,p,x,h;return[t("div",Jn,[t("div",Hn,[$(Ut,{color:y.type==="secret_voting"?"blue":"primary",label:y.type==="secret_voting"?"Secreta":"Vota\xE7\xE3o",class:"type-badge"},null,8,["color","label"]),t("span",Wn,A((M=y.proposition)==null?void 0:M.number)+"/"+A((T=y.proposition)==null?void 0:T.year),1)])]),t("div",Gn,A(((p=y.proposition)==null?void 0:p.description)||((x=y.proposition)==null?void 0:x.title)||"Sem descri\xE7\xE3o"),1),(h=y.proposition)!=null&&h.species?(v(),k("div",Kn,A(y.proposition.species.name),1)):O("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):O("",!0),a.value.length>0?(v(),k("div",Yn,[t("div",Xn,[$(Q,{name:"check_circle",size:"20px",class:"section-icon",color:"positive"}),d[2]||(d[2]=t("span",{class:"section-title-text"},"Vota\xE7\xF5es Finalizadas",-1))]),t("div",Zn,[(v(!0),k(Ie,null,Re(a.value,y=>(v(),K(Qt,{key:y.id,"header-class":"proposition-expansion-header mobile-expansion-header","expand-icon-class":"expansion-icon",class:"proposition-expansion mobile-expansion"},{header:j(()=>[$(Xe,{avatar:"",class:"expansion-avatar"},{default:j(()=>[$(Q,{name:y.type==="secret_voting"?"lock":"how_to_vote",color:y.type==="secret_voting"?"blue":"primary",size:"22px"},null,8,["name","color"])]),_:2},1024),$(Xe,{class:"expansion-content"},{default:j(()=>[$(at,{class:"expansion-title"},{default:j(()=>[pe(A(c(y)),1)]),_:2},1024),$(at,{caption:"",class:"expansion-caption"},{default:j(()=>[pe(A(u(y)),1)]),_:2},1024)]),_:2},1024)]),default:j(()=>[$(Ue,{flat:"",class:"expansion-content-card"},{default:j(()=>[$(Me,{class:"expansion-card-section"},{default:j(()=>{var M,T;return[t("div",ei,[d[7]||(d[7]=t("div",{class:"results-title"}," Resultado da Vota\xE7\xE3o ",-1)),t("div",ti,[t("div",ai,[$(Q,{name:"thumb_up",color:"green",size:"18px"}),t("div",si,[t("span",ni,A(r(y.votes,"favor")),1),d[3]||(d[3]=t("span",{class:"result-label"},"A Favor",-1))])]),t("div",ii,[$(Q,{name:"thumb_down",color:"red",size:"18px"}),t("div",oi,[t("span",li,A(r(y.votes,"against")),1),d[4]||(d[4]=t("span",{class:"result-label"},"Contra",-1))])]),t("div",ri,[$(Q,{name:"remove_circle",color:"orange",size:"18px"}),t("div",ui,[t("span",di,A(r(y.votes,"abstain")),1),d[5]||(d[5]=t("span",{class:"result-label"},"Absten\xE7\xF5es",-1))])]),t("div",ci,[$(Q,{name:"people",color:"grey",size:"18px"}),t("div",vi,[t("span",mi,A(((M=y.votes)==null?void 0:M.length)||0),1),d[6]||(d[6]=t("span",{class:"result-label"},"Total",-1))])])])]),y.type!=="secret_voting"&&f(y)?(v(),k("div",gi,[d[8]||(d[8]=t("div",{class:"members-title"}," Votos dos Vereadores ",-1)),t("div",fi,[(v(!0),k(Ie,null,Re(y.votes,p=>(v(),K(Ue,{key:p.id||`vote-${p.proponent_id}-${p.vote}`,flat:"",bordered:"",class:F(["member-vote-card","mobile-member-card",P(p.vote)])},{default:j(()=>[$(Me,{class:"member-card-section"},{default:j(()=>[t("div",hi,[$(It,{size:"28px",color:"primary","text-color":"white",class:"member-avatar"},{default:j(()=>[p.proponent_photo?(v(),k("img",{key:0,src:b(p.proponent_photo),alt:p.proponent_name},null,8,pi)):(v(),k("span",wi,A(R(p.proponent_name)),1))]),_:2},1024),t("div",bi,[t("div",Si,A(p.proponent_name),1),p.proponent_party?(v(),k("div",yi,A(p.proponent_party.abbreviation||p.proponent_party.name),1)):O("",!0)]),$(Q,{name:g(p.vote),color:q(p.vote),size:"18px",class:"member-vote-icon"},null,8,["name","color"])])]),_:2},1024)]),_:2},1032,["class"]))),128))])])):y.type==="secret_voting"?(v(),k("div",_i,[$(Q,{name:"lock",size:"28px",color:"blue"}),d[9]||(d[9]=t("div",{class:"secret-message-text"}," Vota\xE7\xE3o secreta - Os votos n\xE3o s\xE3o exibidos publicamente ",-1)),t("div",xi," Total de votos: "+A(((T=y.votes)==null?void 0:T.length)||0),1)])):y.type!=="secret_voting"?(v(),k("div",qi,[$(Q,{name:"info",size:"28px",color:"grey"}),d[10]||(d[10]=t("div",{class:"no-votes-text"}," Nenhum voto registrado ",-1))])):O("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])):O("",!0),n.value.length===0&&a.value.length===0?(v(),k("div",$i,[$(Q,{name:"how_to_vote",size:"64px",color:"grey-5",class:"tw-mb-4"}),d[11]||(d[11]=t("div",{class:"empty-title"},"Aguardando Vota\xE7\xF5es",-1)),d[12]||(d[12]=t("div",{class:"empty-subtitle"}," Nenhuma vota\xE7\xE3o est\xE1 em andamento ou foi finalizada ainda. ",-1))])):O("",!0)])])]))}};var Ai=ze(Ii,[["__scopeId","data-v-57743baf"]]);let ki=0;const Vi=["click","keydown"],Ri={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ki++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function zi(e,i,s,n){const a=fe(Ot,et);if(a===et)return console.error("QTab/QRouteTab component needs to be child of QTabs"),et;const{proxy:c}=Ke(),u=X(null),r=X(null),g=X(null),q=l(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),P=l(()=>a.currentModel.value===e.name),R=l(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(P.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),b=l(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=l(()=>e.disable===!0||a.hasFocus.value===!0||P.value===!1&&a.hasActiveTab.value===!0?-1:e.tabindex||0);function o(p,x){var h;if(x!==!0&&(p==null?void 0:p.qAvoidFocus)!==!0&&((h=u.value)==null||h.focus()),e.disable===!0){(n==null?void 0:n.hasRouterLink.value)===!0&&ut(p);return}if(n===void 0){a.updateModel({name:e.name}),s("click",p);return}if(n.hasRouterLink.value===!0){const w=(C={})=>{let N;const ee=C.to===void 0||fa(C.to,e.to)===!0?a.avoidRouteWatcher=Dt():null;return n.navigateToRouterLink(p,{...C,returnRouterError:!0}).catch(B=>{N=B}).then(B=>{var z;if(ee===a.avoidRouteWatcher&&(a.avoidRouteWatcher=!1,N===void 0&&(B===void 0||((z=B.message)==null?void 0:z.startsWith("Avoided redundant navigation"))===!0)&&a.updateModel({name:e.name})),C.returnRouterError===!0)return N!==void 0?Promise.reject(N):B})};s("click",p,w),p.defaultPrevented!==!0&&w();return}s("click",p)}function d(p){ma(p,[13,32])?o(p,!0):ga(p)!==!0&&p.keyCode>=35&&p.keyCode<=40&&p.altKey!==!0&&p.metaKey!==!0&&a.onKbdNavigate(p.keyCode,c.$el)===!0&&ut(p),s("keydown",p)}function y(){const p=a.tabProps.value.narrowIndicator,x=[],h=Z("div",{ref:g,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});e.icon!==void 0&&x.push(Z(Q,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&x.push(Z("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&x.push(e.alertIcon!==void 0?Z(Q,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):Z("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),p===!0&&x.push(h);const w=[Z("div",{class:"q-focus-helper",tabindex:-1,ref:u}),Z("div",{class:b.value},nt(i.default,x))];return p===!1&&w.push(h),w}const M={name:l(()=>e.name),rootRef:r,tabIndicatorRef:g,routeData:n};it(()=>{a.unregisterTab(M)}),ot(()=>{a.registerTab(M)});function T(p,x){const h={ref:r,class:R.value,tabindex:f.value,role:"tab","aria-selected":P.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:o,onKeydown:d,...x};return Be(Z(p,h,y()),[[Tt,q.value]])}return{renderTab:T,$tabs:a}}var Ti=je({name:"QTab",props:Ri,emits:Vi,setup(e,{slots:i,emit:s}){const{renderTab:n}=zi(e,i,s);return()=>n("div")}});let Xt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const i=document.createElement("div");Object.assign(i.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(i),e.scrollLeft=-1e3,Xt=e.scrollLeft>=0,e.remove()}function Ci(e,i,s){const n=s===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const Pi=["left","center","right","justify"];var Li=je({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Pi.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:i,emit:s}){const{proxy:n}=Ke(),{$q:a}=n,{registerTick:c}=ht(),{registerTick:u}=ht(),{registerTick:r}=ht(),{registerTimeout:g,removeTimeout:q}=zt(),{registerTimeout:P,removeTimeout:R}=zt(),b=X(null),f=X(null),o=X(e.modelValue),d=X(!1),y=X(!0),M=X(!1),T=X(!1),p=[],x=X(0),h=X(!1);let w=null,C=null,N;const ee=l(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ci(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),B=l(()=>{const U=x.value,Y=o.value;for(let le=0;le<U;le++)if(p[le].name.value===Y)return!0;return!1}),z=l(()=>`q-tabs__content--align-${d.value===!0?"left":T.value===!0?"justify":e.align}`),D=l(()=>`q-tabs row no-wrap items-center q-tabs--${d.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),V=l(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+z.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),G=l(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),se=l(()=>e.vertical!==!0&&a.lang.rtl===!0),ue=l(()=>Xt===!1&&se.value===!0);ge(se,ae),ge(()=>e.modelValue,U=>{W({name:U,setCurrent:!0,skipEmit:!0})}),ge(()=>e.outsideArrows,re);function W({name:U,setCurrent:Y,skipEmit:le}){o.value!==U&&(le!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",U),(Y===!0||e["onUpdate:modelValue"]===void 0)&&(E(o.value,U),o.value=U))}function re(){c(()=>{b.value&&te({width:b.value.offsetWidth,height:b.value.offsetHeight})})}function te(U){if(G.value===void 0||f.value===null)return;const Y=U[G.value.container],le=Math.min(f.value[G.value.scroll],Array.prototype.reduce.call(f.value.children,(ye,me)=>ye+(me[G.value.content]||0),0)),Se=Y>0&&le>Y;d.value=Se,Se===!0&&u(ae),T.value=Y<parseInt(e.breakpoint,10)}function E(U,Y){const le=U!=null&&U!==""?p.find(ye=>ye.name.value===U):null,Se=Y!=null&&Y!==""?p.find(ye=>ye.name.value===Y):null;if(Fe===!0)Fe=!1;else if(le&&Se){const ye=le.tabIndicatorRef.value,me=Se.tabIndicatorRef.value;w!==null&&(clearTimeout(w),w=null),ye.style.transition="none",ye.style.transform="none",me.style.transition="none",me.style.transform="none";const ve=ye.getBoundingClientRect(),$e=me.getBoundingClientRect();me.style.transform=e.vertical===!0?`translate3d(0,${ve.top-$e.top}px,0) scale3d(1,${$e.height?ve.height/$e.height:1},1)`:`translate3d(${ve.left-$e.left}px,0,0) scale3d(${$e.width?ve.width/$e.width:1},1,1)`,r(()=>{w=setTimeout(()=>{w=null,me.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",me.style.transform="none"},70)})}Se&&d.value===!0&&L(Se.rootRef.value)}function L(U){const{left:Y,width:le,top:Se,height:ye}=f.value.getBoundingClientRect(),me=U.getBoundingClientRect();let ve=e.vertical===!0?me.top-Se:me.left-Y;if(ve<0){f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ve),ae();return}ve+=e.vertical===!0?me.height-ye:me.width-le,ve>0&&(f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ve),ae())}function ae(){const U=f.value;if(U===null)return;const Y=U.getBoundingClientRect(),le=e.vertical===!0?U.scrollTop:Math.abs(U.scrollLeft);se.value===!0?(y.value=Math.ceil(le+Y.width)<U.scrollWidth-1,M.value=le>0):(y.value=le>0,M.value=e.vertical===!0?Math.ceil(le+Y.height)<U.scrollHeight:Math.ceil(le+Y.width)<U.scrollWidth)}function S(U){C!==null&&clearInterval(C),C=setInterval(()=>{ce(U)===!0&&J()},5)}function _(){S(ue.value===!0?Number.MAX_SAFE_INTEGER:0)}function m(){S(ue.value===!0?0:Number.MAX_SAFE_INTEGER)}function J(){C!==null&&(clearInterval(C),C=null)}function H(U,Y){const le=Array.prototype.filter.call(f.value.children,$e=>$e===Y||$e.matches&&$e.matches(".q-tab.q-focusable")===!0),Se=le.length;if(Se===0)return;if(U===36)return L(le[0]),le[0].focus(),!0;if(U===35)return L(le[Se-1]),le[Se-1].focus(),!0;const ye=U===(e.vertical===!0?38:37),me=U===(e.vertical===!0?40:39),ve=ye===!0?-1:me===!0?1:void 0;if(ve!==void 0){const $e=se.value===!0?-1:1,Ne=le.indexOf(Y)+ve*$e;return Ne>=0&&Ne<Se&&(L(le[Ne]),le[Ne].focus({preventScroll:!0})),!0}}const de=l(()=>ue.value===!0?{get:U=>Math.abs(U.scrollLeft),set:(U,Y)=>{U.scrollLeft=-Y}}:e.vertical===!0?{get:U=>U.scrollTop,set:(U,Y)=>{U.scrollTop=Y}}:{get:U=>U.scrollLeft,set:(U,Y)=>{U.scrollLeft=Y}});function ce(U){const Y=f.value,{get:le,set:Se}=de.value;let ye=!1,me=le(Y);const ve=U<me?-1:1;return me+=ve*5,me<0?(ye=!0,me=0):(ve===-1&&me<=U||ve===1&&me>=U)&&(ye=!0,me=U),Se(Y,me),ae(),ye}function he(U,Y){for(const le in U)if(U[le]!==Y[le])return!1;return!0}function we(){let U=null,Y={matchedLen:0,queryDiff:9999,hrefLen:0};const le=p.filter(ve=>{var $e;return(($e=ve.routeData)==null?void 0:$e.hasRouterLink.value)===!0}),{hash:Se,query:ye}=n.$route,me=Object.keys(ye).length;for(const ve of le){const $e=ve.routeData.exact.value===!0;if(ve.routeData[$e===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ne,query:gt,matched:aa,href:sa}=ve.routeData.resolvedLink.value,ft=Object.keys(gt).length;if($e===!0){if(Ne!==Se||ft!==me||he(ye,gt)===!1)continue;U=ve.name.value;break}if(Ne!==""&&Ne!==Se||ft!==0&&he(gt,ye)===!1)continue;const He={matchedLen:aa.length,queryDiff:me-ft,hrefLen:sa.length-Ne.length};if(He.matchedLen>Y.matchedLen){U=ve.name.value,Y=He;continue}else if(He.matchedLen!==Y.matchedLen)continue;if(He.queryDiff<Y.queryDiff)U=ve.name.value,Y=He;else if(He.queryDiff!==Y.queryDiff)continue;He.hrefLen>Y.hrefLen&&(U=ve.name.value,Y=He)}if(U===null&&p.some(ve=>ve.routeData===void 0&&ve.name.value===o.value)===!0){Fe=!1;return}W({name:U,setCurrent:!0})}function be(U){if(q(),h.value!==!0&&b.value!==null&&U.target&&typeof U.target.closest=="function"){const Y=U.target.closest(".q-tab");Y&&b.value.contains(Y)===!0&&(h.value=!0,d.value===!0&&L(Y))}}function xe(){g(()=>{h.value=!1},30)}function ie(){Qe.avoidRouteWatcher===!1?P(we):R()}function ne(){if(N===void 0){const U=ge(()=>n.$route.fullPath,ie);N=()=>{U(),N=void 0}}}function Ae(U){p.push(U),x.value++,re(),U.routeData===void 0||n.$route===void 0?P(()=>{if(d.value===!0){const Y=o.value,le=Y!=null&&Y!==""?p.find(Se=>Se.name.value===Y):null;le&&L(le.rootRef.value)}}):(ne(),U.routeData.hasRouterLink.value===!0&&ie())}function Pe(U){p.splice(p.indexOf(U),1),x.value--,re(),N!==void 0&&U.routeData!==void 0&&(p.every(Y=>Y.routeData===void 0)===!0&&N(),ie())}const Qe={currentModel:o,tabProps:ee,hasFocus:h,hasActiveTab:B,registerTab:Ae,unregisterTab:Pe,verifyRouteModel:ie,updateModel:W,onKbdNavigate:H,avoidRouteWatcher:!1};Ce(Ot,Qe);function Je(){w!==null&&clearTimeout(w),J(),N==null||N()}let Oe,Fe;return it(Je),ha(()=>{Oe=N!==void 0,Je()}),pa(()=>{Oe===!0&&(ne(),Fe=!0,ie()),re()}),()=>Z("div",{ref:b,class:D.value,role:"tablist",onFocusin:be,onFocusout:xe},[Z(Bt,{onResize:te}),Z("div",{ref:f,class:V.value,onScroll:ae},qt(i.default)),Z(Q,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(y.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||a.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:_,onTouchstartPassive:_,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J}),Z(Q,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(M.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||a.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:m,onTouchstartPassive:m,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J})])}}),Ei=je({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:s}){const{proxy:{$q:n}}=Ke(),a=fe(ba,et);if(a===et)return console.error("QFooter needs to be child of QLayout"),et;const c=X(parseInt(e.heightHint,10)),u=X(!0),r=X(wa.value===!0||a.isContainer.value===!0?0:window.innerHeight),g=l(()=>e.reveal===!0||a.view.value.indexOf("F")!==-1||n.platform.is.ios&&a.isContainer.value===!0),q=l(()=>a.isContainer.value===!0?a.containerHeight.value:r.value),P=l(()=>{if(e.modelValue!==!0)return 0;if(g.value===!0)return u.value===!0?c.value:0;const h=a.scroll.value.position+q.value+c.value-a.height.value;return h>0?h:0}),R=l(()=>e.modelValue!==!0||g.value===!0&&u.value!==!0),b=l(()=>e.modelValue===!0&&R.value===!0&&e.reveal===!0),f=l(()=>"q-footer q-layout__section--marginal "+(g.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(R.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(g.value!==!0?" hidden":""):"")),o=l(()=>{const h=a.rows.value.bottom,w={};return h[0]==="l"&&a.left.space===!0&&(w[n.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),h[2]==="r"&&a.right.space===!0&&(w[n.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),w});function d(h,w){a.update("footer",h,w)}function y(h,w){h.value!==w&&(h.value=w)}function M({height:h}){y(c,h),d("size",h)}function T(){if(e.reveal!==!0)return;const{direction:h,position:w,inflectionPoint:C}=a.scroll.value;y(u,h==="up"||w-C<100||a.height.value-q.value-w-c.value<300)}function p(h){b.value===!0&&y(u,!0),s("focusin",h)}ge(()=>e.modelValue,h=>{d("space",h),y(u,!0),a.animate()}),ge(P,h=>{d("offset",h)}),ge(()=>e.reveal,h=>{h===!1&&y(u,e.modelValue)}),ge(u,h=>{a.animate(),s("reveal",h)}),ge([c,a.scroll,a.height],T),ge(()=>n.screen.height,h=>{a.isContainer.value!==!0&&y(r,h)});const x={};return a.instances.footer=x,e.modelValue===!0&&d("size",c.value),d("space",e.modelValue),d("offset",P.value),it(()=>{a.instances.footer===x&&(a.instances.footer=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const h=nt(i.default,[Z(Bt,{debounce:0,onResize:M})]);return e.elevated===!0&&h.push(Z("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),Z("footer",{class:f.value,style:o.value,onFocusin:p},h)}}});const Mi={__name:"MobileBottomNavigation",props:{modelValue:{type:String,default:"home"},tabs:{type:Array,required:!0}},emits:["update:model-value","tab-change"],setup(e,{emit:i}){const s=e,n=i,a=l({get:()=>s.modelValue,set:u=>n("update:model-value",u)});function c(u){a.value=u,n("tab-change",u)}return(u,r)=>(v(),K(Ei,{class:"mobile-bottom-nav",elevated:""},{default:j(()=>[$(Li,{modelValue:a.value,"onUpdate:modelValue":[r[0]||(r[0]=g=>a.value=g),c],class:"bottom-nav-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:j(()=>[(v(!0),k(Ie,null,Re(e.tabs,g=>(v(),K(Ti,{key:g.name,name:g.name,icon:g.icon,label:g.label,class:F(["bottom-nav-tab",{"tab-active":a.value===g.name}])},null,8,["name","icon","label","class"]))),128))]),_:1},8,["modelValue"])]),_:1}))}};var Fi=ze(Mi,[["__scopeId","data-v-a84bfa88"]]);const Di={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},ji={class:"tw-mb-3 md:tw-mb-8"},Oi={class:"tw-mb-2 md:tw-mb-4"},Ni={class:"tw-mb-3 md:tw-mb-6"},Bi={key:0,class:"tw-mb-4 md:tw-mb-8"},Ui={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},Qi={class:"tw-mb-4 md:tw-mb-8"},Ji={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},Hi={key:0},Wi={key:1},Gi={key:2},Ki={key:1,class:"tw-mt-3 md:tw-mt-6"},Yi={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Xi={__name:"SpeechFullscreenModal",props:{modelValue:{type:Boolean,default:!1},speech:{type:Object,default:null},remainingTime:{type:Number,default:0},usedSeconds:{type:Number,default:null},expedientType:{type:String,default:"Expediente"}},emits:["update:modelValue"],setup(e,{emit:i}){const s=e,n=i,a=l({get:()=>s.modelValue,set:V=>n("update:modelValue",V)}),c=l(()=>{var V;return((V=s.speech)==null?void 0:V.status)==="speaking"}),u=l(()=>{var V;return((V=s.speech)==null?void 0:V.status)==="paused"}),r=l(()=>{var V;return((V=s.speech)==null?void 0:V.status)==="finished"}),g=l(()=>c.value?"mic":u.value?"pause_circle":r.value?"check_circle":"mic_off"),q=l(()=>(c.value||u.value,"white")),P=l(()=>c.value?"Voc\xEA est\xE1 falando":u.value?"Fala pausada":"Fala finalizada"),R=l(()=>c.value?"Sua fala est\xE1 em andamento":u.value?"Aguarde a retomada pelo controle":"Sua fala foi finalizada"),b=l(()=>c.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":u.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":r.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),f=l(()=>c.value?"tw-bg-green-300":u.value?"tw-bg-yellow-300":"tw-bg-gray-300"),o=l(()=>{var V,G;return s.speech?((V=s.speech.allocated_minutes)!=null?V:0)+((G=s.speech.additional_minutes)!=null?G:0):0}),d=l(()=>{var W;if(!s.speech)return 0;const V=o.value*60;if(V<=0)return 0;if(r.value){const re=(W=s.speech.used_seconds)!=null?W:0;return Math.max(0,Math.min(V,Math.floor(Number(re))))}const G=s.usedSeconds!=null?Number(s.usedSeconds):NaN;if(!Number.isNaN(G)&&G>=0)return Math.max(0,Math.min(V,Math.floor(G)));const se=Number(s.remainingTime);if(Number.isNaN(se)||se<0)return 0;const ue=V-se;return Math.max(0,Math.min(V,Math.floor(ue)))}),y=l(()=>Math.floor(d.value/60)),M=l(()=>{var V,G;return(G=(V=s.speech)==null?void 0:V.additional_minutes)!=null?G:0}),T=l(()=>{if(!s.speech||o.value===0)return 0;const V=o.value*60,G=d.value,se=V>0?G/V*100:0;return Math.max(0,Math.min(100,Math.round(se*10)/10))}),p=l(()=>{if(!s.speech)return 0;const V=s.speech.used_seconds||0;return Math.floor(V/60)}),x=l(()=>s.speech?(s.speech.used_seconds||0)%60:0),h=l(()=>s.remainingTime>0&&s.remainingTime<=15),w=l(()=>s.remainingTime<=0),C=l(()=>w.value?"tw-bg-red-600 tw-bg-opacity-90":h.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),N=l(()=>(w.value||h.value,"tw-text-white")),ee=l(()=>w.value||h.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),B=l(()=>w.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":h.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");function z(V){if(V==null||V<=0)return"0:00";const G=Math.floor(Number(V)),se=Math.floor(G/60),ue=G%60;return`${se}:${ue.toString().padStart(2,"0")}`}let D=null;return ge(()=>[r.value,a.value],([V,G])=>{D&&(clearTimeout(D),D=null),V&&G&&(D=setTimeout(()=>{a.value&&r.value&&(a.value=!1),D=null},3e3))},{immediate:!0}),ge(()=>a.value,V=>{!V&&D&&(clearTimeout(D),D=null)}),At(()=>{D&&clearTimeout(D)}),(V,G)=>(v(),K(lt,{modelValue:a.value,"onUpdate:modelValue":G[0]||(G[0]=se=>a.value=se),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:j(()=>[t("div",{class:F(["fullscreen tw-flex tw-items-center tw-justify-center",b.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[t("div",Di,[t("div",ji,[$(Q,{name:g.value,color:q.value,size:V.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),t("div",Oi,[$(mt,{label:s.expedientType,color:"white","text-color":"primary",size:V.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["label","size"])]),t("div",Ni,[t("h1",{class:F([V.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},A(P.value),3),t("p",{class:F([V.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},A(R.value),3)]),r.value?O("",!0):(v(),k("div",Bi,[t("div",{class:F([V.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",C.value])},[t("div",{class:F([V.$q.screen.lt.md?"text-body2":"text-h5",ee.value,"tw-mb-2"])},A(B.value),3),t("div",{class:F([V.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",N.value,w.value?"tw-animate-pulse":""])},A(z(s.remainingTime)),3)],2)])),t("div",Ui,[t("div",{class:F([V.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),t("div",{class:F([V.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},A(o.value)+" min ",3)],2),t("div",{class:F([V.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),t("div",{class:F([V.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},A(y.value)+" min ",3)],2),t("div",{class:F([V.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),t("div",{class:F([V.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+A(M.value)+" min ",3)],2)]),t("div",Qi,[t("div",Ji,[t("div",{class:F(["tw-h-full tw-transition-all tw-duration-1000",f.value]),style:$t({width:T.value+"%"})},null,6)]),t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},A(T.value.toFixed(0))+"% do tempo utilizado ",3)]),t("div",{class:F([V.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[$(Q,{name:"info",size:"20px",class:"tw-mr-2"}),c.value?(v(),k("span",Hi," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):u.value?(v(),k("span",Wi," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):r.value?(v(),k("span",Gi," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):O("",!0)],2),r.value?(v(),k("div",Ki,[t("div",{class:F([V.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[t("div",{class:F([V.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),t("div",Yi,[t("div",null,[t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),t("div",{class:F([V.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},A(o.value)+" min ",3)]),t("div",null,[t("div",{class:F([V.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),t("div",{class:F([V.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},A(p.value)+" min "+A(x.value)+" s ",3)])])],2)])):O("",!0)])],2)]),_:1},8,["modelValue"]))}};var wt=ze(Xi,[["__scopeId","data-v-7fbba8a4"]]);const Zi=["top","right","bottom","left"],yt={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Zi.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Zt(e,i){return{formClass:l(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:l(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:l(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?i.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ea={start:"self-end",center:"self-center",end:"self-start"},eo=Object.keys(ea);var tt=je({name:"QFabAction",props:{...yt,icon:{type:String,default:""},anchor:{type:String,validator:e=>eo.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:i,emit:s}){const n=fe(Nt,()=>({showing:{value:!0},onChildClick:Sa})),{formClass:a,labelProps:c}=Zt(e,n.showing),u=l(()=>{const R=ea[e.anchor];return a.value+(R!==void 0?` ${R}`:"")}),r=l(()=>e.disable===!0||n.showing.value!==!0);function g(R){n.onChildClick(R),s("click",R)}function q(){const R=[];return i.icon!==void 0?R.push(i.icon()):e.icon!==""&&R.push(Z(Q,{name:e.icon})),(e.label!==""||i.label!==void 0)&&R[c.value.action](Z("div",c.value.data,i.label!==void 0?i.label():[e.label])),nt(i.default,R)}const P=Ke();return Object.assign(P.proxy,{click:g}),()=>Z(qe,{class:u.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:r.value,onClick:g},q)}});const to=["up","right","down","left"],ao=["left","center","right"];var ta=je({name:"QFab",props:{...yt,...Lt,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...yt.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>to.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ao.includes(e)}},emits:Et,setup(e,{slots:i}){const s=X(null),n=X(e.modelValue===!0),a=Mt(),{proxy:{$q:c}}=Ke(),{formClass:u,labelProps:r}=Zt(e,n),g=l(()=>e.persistent!==!0),{hide:q,toggle:P}=Ft({showing:n,hideOnRouteChange:g}),R=l(()=>({opened:n.value})),b=l(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${u.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),f=l(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),o=l(()=>{const T={id:a.value,role:"menu"};return n.value!==!0&&(T["aria-hidden"]="true"),T}),d=l(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function y(T,p){const x=i[T],h=`q-fab__${T} absolute-full`;return x===void 0?Z(Q,{class:h,name:e[p]||c.iconSet.fab[p]}):Z("div",{class:h},x(R.value))}function M(){const T=[];return e.hideIcon!==!0&&T.push(Z("div",{class:d.value},[y("icon","icon"),y("active-icon","activeIcon")])),(e.label!==""||i.label!==void 0)&&T[r.value.action](Z("div",r.value.data,i.label!==void 0?i.label(R.value):[e.label])),nt(i.tooltip,T)}return Ce(Nt,{showing:n,onChildClick(T){var p;q(T),(T==null?void 0:T.qAvoidFocus)!==!0&&((p=s.value)==null||p.$el.focus())}}),()=>Z("div",{class:b.value},[Z(qe,{ref:s,class:u.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,onClick:P},M),Z("div",{class:f.value,...o.value},qt(i.default))])}});const so={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},no={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},io={class:"tw-text-center"},oo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},lo={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},ro={class:"text-body2 tw-text-white tw-mb-0"},uo={class:"tw-flex-1 tw-overflow-y-auto tw-p-4 tw-relative"},co={class:"tw-max-w-4xl tw-mx-auto"},vo={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},mo={class:"tw-text-center"},go={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},fo={class:"text-body2 tw-text-gray-700"},ho={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},po={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},wo={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},bo={class:"tw-flex tw-flex-wrap tw-gap-2"},So={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},yo={class:"tw-flex tw-flex-wrap tw-gap-2"},_o={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},xo={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},qo={class:"tw-flex tw-items-center tw-gap-3"},$o=["src","alt"],Io={key:1},Ao={class:"tw-flex-1 tw-min-w-0"},ko={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},Vo={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},Ro={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},zo={__name:"ReadingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},reading:{type:Object,default:null},agendaId:{type:Number,default:null},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null}},emits:["update:modelValue","request-registered"],setup(e,{emit:i}){const s=e,n=i,a=ke(),c=Ze(),u=X(!1),r=X(!1),g=fe("voiceRequest",null),q=l({get:()=>s.modelValue,set:p=>n("update:modelValue",p)}),P=l(()=>s.reading?s.reading.type==="reading"?"menu_book":s.reading.type==="secret_voting"?"lock":"how_to_vote":"menu_book"),R=l(()=>s.reading?s.reading.type==="reading"?"Leitura em Andamento":s.reading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":"Leitura em Andamento"),b=l(()=>s.reading?s.reading.type==="reading"?"A proposi\xE7\xE3o est\xE1 sendo lida":s.reading.type==="secret_voting"?"A vota\xE7\xE3o secreta est\xE1 em andamento":"A vota\xE7\xE3o est\xE1 em andamento":"Aguarde as informa\xE7\xF5es da proposi\xE7\xE3o");function f(p){if(!p)return"";const x=p.split(" ");return x.length>=2?(x[0][0]+x[x.length-1][0]).toUpperCase():p.substring(0,2).toUpperCase()}function o(p){p&&window.open(p,"_blank")}function d(){var x,h;if(!((h=(x=s.reading)==null?void 0:x.proposition)!=null&&h.protocol_document))return null;const p=s.reading.proposition.protocol_document;return p.signed_file_url||p.file_url||null}function y(){var x,h;return(h=(x=s.reading)==null?void 0:x.proposition)!=null&&h.protocol_document?s.reading.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function M(){var x,h,w,C,N,ee;if(!s.agendaId)return;const p=(x=a.user)==null?void 0:x.proponent_id;if(!p){Ee.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}r.value=!0;try{if((h=(await _e.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:p,requested:!0})).data)!=null&&h.success){Ee.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const z=Le.getItem("unit_id_num");z&&c.isConnected&&c.emit("voice-request-registered",{unitId:parseInt(z),agendaId:parseInt(s.agendaId),proponentId:parseInt(p),proponentName:((w=a.user)==null?void 0:w.name)||((C=a.user)==null?void 0:C.first_name)||"Vereador",source:"vereador"}),n("request-registered"),g!=null&&g.loadStatus&&await g.loadStatus(!0),await new Promise(D=>setTimeout(D,500))}}catch(B){Ee.create({type:"negative",color:"blue-6",message:((ee=(N=B.response)==null?void 0:N.data)==null?void 0:ee.message)||"Erro ao solicitar voz"})}finally{r.value=!1,u.value=!1}}function T(){(g==null?void 0:g.showSpeechModal)!==void 0&&(g.showSpeechModal.value=!0)}return(p,x)=>(v(),K(lt,{modelValue:q.value,"onUpdate:modelValue":x[3]||(x[3]=h=>q.value=h),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:j(()=>{var h,w,C,N,ee,B,z,D,V,G,se,ue,W,re;return[t("div",so,[t("div",no,[t("div",io,[t("div",oo,[$(Q,{name:P.value,color:"gray-700",size:"32px"},null,8,["name"]),t("h1",lo,A(R.value),1)]),t("p",ro,A(b.value),1)])]),t("div",uo,[t("div",co,[(h=e.reading)!=null&&h.proposition?(v(),k("div",vo,[t("div",mo,[t("div",go,A((w=e.reading.proposition.species)==null?void 0:w.name)+" "+A(e.reading.proposition.number)+"/"+A(e.reading.proposition.year),1),t("div",fo,A(e.reading.proposition.title||e.reading.proposition.ementa||"N/A"),1)])])):O("",!0),(N=(C=e.reading)==null?void 0:C.proposition)!=null&&N.description?(v(),k("div",ho,[x[4]||(x[4]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),t("div",po,A(e.reading.proposition.description),1)])):O("",!0),((B=(ee=e.reading)==null?void 0:ee.proposition)==null?void 0:B.documents)&&e.reading.proposition.documents.length>0?(v(),k("div",wo,[x[5]||(x[5]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",bo,[(v(!0),k(Ie,null,Re(e.reading.proposition.documents,te=>(v(),K(qe,{key:te.id,href:te.file_url||te.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:te.title||te.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((D=(z=e.reading)==null?void 0:z.proposition)==null?void 0:D.file_url)||((G=(V=e.reading)==null?void 0:V.proposition)==null?void 0:G.protocol_document)?(v(),k("div",So,[x[6]||(x[6]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",yo,[e.reading.proposition.file_url?(v(),K(qe,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:x[0]||(x[0]=te=>o(e.reading.proposition.file_url))})):O("",!0),d()?(v(),K(qe,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:y(),size:"sm",onClick:x[1]||(x[1]=te=>o(d()))},null,8,["label"])):O("",!0)])])):O("",!0),((ue=(se=e.reading)==null?void 0:se.proposition)==null?void 0:ue.proponents)&&e.reading.proposition.proponents.length>0?(v(),k("div",_o,[x[7]||(x[7]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),t("div",xo,[(v(!0),k(Ie,null,Re(e.reading.proposition.proponents,te=>(v(),k("div",{key:te.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[t("div",qo,[$(It,{size:"40px",color:"primary","text-color":"white"},{default:j(()=>[te.avatar?(v(),k("img",{key:0,src:te.avatar,alt:te.name},null,8,$o)):(v(),k("span",Io,A(f(te.name)),1))]),_:2},1024),t("div",Ao,[t("div",ko,A(te.name),1),te.party?(v(),k("div",Vo,A(te.party),1)):O("",!0)])])]))),128))])])):(W=e.reading)!=null&&W.proposition?O("",!0):(v(),k("div",Ro,[$(Q,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),x[8]||(x[8]=t("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da leitura ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&((re=e.reading)==null?void 0:re.type)==="reading"?(v(),K(ta,{key:0,modelValue:u.value,"onUpdate:modelValue":x[2]||(x[2]=te=>u.value=te),"vertical-actions-align":"right",color:e.hasRequest?"info":"positive",icon:e.hasRequest?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:j(()=>{var te;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(v(),K(tt,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((te=e.currentSpeech)==null?void 0:te.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:r.value,onClick:M},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(v(),K(tt,{key:1,color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""})):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(v(),K(tt,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:T})):O("",!0)]}),_:1},8,["modelValue","color","icon"])):O("",!0)])]}),_:1},8,["modelValue"]))}};var To=ze(zo,[["__scopeId","data-v-75716dae"]]);const Co={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},Po={class:"tw-mb-3 md:tw-mb-8"},Lo={class:"tw-mb-2 md:tw-mb-4"},Eo={class:"tw-mb-3 md:tw-mb-6"},Mo={key:0,class:"tw-mb-4 md:tw-mb-8"},Fo={key:1,class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},Do={key:2,class:"tw-mb-4 md:tw-mb-8"},jo={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},Oo={key:0},No={key:1},Bo={key:2},Uo={key:3},Qo={key:3,class:"tw-mt-3 md:tw-mt-6"},Jo={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Ho={__name:"VoiceRequestModal",props:{modelValue:{type:Boolean,default:!1},agendaId:{type:Number,required:!0},hasRequest:{type:Boolean,default:!1},requestOrder:{type:Number,default:null},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0}},emits:["update:modelValue","request-removed"],setup(e,{emit:i}){const s=e,n=i,a=l({get:()=>s.modelValue,set:z=>n("update:modelValue",z)}),c=l(()=>{var z;return((z=s.currentSpeech)==null?void 0:z.status)==="speaking"}),u=l(()=>{var z;return((z=s.currentSpeech)==null?void 0:z.status)==="paused"}),r=l(()=>{var z;return((z=s.currentSpeech)==null?void 0:z.status)==="finished"}),g=l(()=>c.value?"mic":u.value?"pause_circle":r.value?"check_circle":"record_voice_over"),q=l(()=>"white"),P=l(()=>c.value?"Voc\xEA est\xE1 falando":u.value?"Fala pausada":r.value?"Fala finalizada":s.hasRequest?"Pedido de Voz Registrado":"Pedido de Voz"),R=l(()=>c.value?"Sua fala est\xE1 em andamento":u.value?"Aguarde a retomada pelo controle":r.value?"Sua fala foi finalizada":s.hasRequest?"Aguarde o controle iniciar sua fala":"Clique no bot\xE3o para solicitar voz"),b=l(()=>c.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":u.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":r.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":s.hasRequest?"tw-bg-gradient-to-br tw-from-purple-600 tw-to-purple-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),f=l(()=>c.value?"tw-bg-green-300":u.value?"tw-bg-yellow-300":"tw-bg-gray-300"),o=l(()=>s.currentSpeech?(s.currentSpeech.allocated_minutes||0)+(s.currentSpeech.additional_minutes||0):0),d=l(()=>{if(!s.currentSpeech)return 0;let z=s.currentSpeech.used_seconds||0;return c.value&&s.currentSpeech.started_at&&(z+=Math.floor((new Date-new Date(s.currentSpeech.started_at))/1e3)),Math.floor(z/60)}),y=l(()=>{var z;return((z=s.currentSpeech)==null?void 0:z.additional_minutes)||0}),M=l(()=>{if(!s.currentSpeech||o.value===0)return 0;const z=o.value*60;let D=s.currentSpeech.used_seconds||0;return c.value&&s.currentSpeech.started_at&&(D+=Math.floor((new Date-new Date(s.currentSpeech.started_at))/1e3)),Math.min(100,D/z*100)}),T=l(()=>{if(!s.currentSpeech)return 0;const z=s.currentSpeech.used_seconds||0;return Math.floor(z/60)}),p=l(()=>s.currentSpeech?(s.currentSpeech.used_seconds||0)%60:0),x=l(()=>s.remainingTime>0&&s.remainingTime<=15),h=l(()=>s.remainingTime<=0),w=l(()=>h.value?"tw-bg-red-600 tw-bg-opacity-90":x.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),C=l(()=>(h.value||x.value,"tw-text-white")),N=l(()=>h.value||x.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),ee=l(()=>h.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":x.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");let B=null;return ge(()=>[r.value,a.value],([z,D])=>{B&&(clearTimeout(B),B=null),z&&D&&(B=setTimeout(()=>{a.value&&r.value&&(a.value=!1),B=null},3e3))},{immediate:!0}),ge(()=>a.value,z=>{!z&&B&&(clearTimeout(B),B=null)}),At(()=>{B&&clearTimeout(B)}),(z,D)=>(v(),K(lt,{modelValue:a.value,"onUpdate:modelValue":D[0]||(D[0]=V=>a.value=V),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:j(()=>[t("div",{class:F(["fullscreen tw-flex tw-items-center tw-justify-center",b.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[t("div",Co,[t("div",Po,[$(Q,{name:g.value,color:q.value,size:z.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),t("div",Lo,[$(mt,{label:"Pedido de Voz",color:"white","text-color":"purple",size:z.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["size"])]),t("div",Eo,[t("h1",{class:F([z.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},A(P.value),3),t("p",{class:F([z.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},A(R.value),3)]),!r.value&&e.currentSpeech?(v(),k("div",Mo,[t("div",{class:F([z.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",w.value])},[t("div",{class:F([z.$q.screen.lt.md?"text-body2":"text-h5",N.value,"tw-mb-2"])},A(ee.value),3),t("div",{class:F([z.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",C.value,h.value?"tw-animate-pulse":""])},A(I(St)(e.remainingTime)),3)],2)])):O("",!0),e.currentSpeech?(v(),k("div",Fo,[t("div",{class:F([z.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),t("div",{class:F([z.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},A(o.value)+" min ",3)],2),t("div",{class:F([z.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),t("div",{class:F([z.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},A(d.value)+" min ",3)],2),y.value>0?(v(),k("div",{key:0,class:F([z.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),t("div",{class:F([z.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+A(y.value)+" min ",3)],2)):O("",!0)])):O("",!0),e.currentSpeech?(v(),k("div",Do,[t("div",jo,[t("div",{class:F(["tw-h-full tw-transition-all tw-duration-1000",f.value]),style:$t({width:M.value+"%"})},null,6)]),t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},A(M.value.toFixed(0))+"% do tempo utilizado ",3)])):O("",!0),t("div",{class:F([z.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[$(Q,{name:"info",size:"20px",class:"tw-mr-2"}),c.value?(v(),k("span",Oo," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):u.value?(v(),k("span",No," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):r.value?(v(),k("span",Bo," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):e.hasRequest&&!e.currentSpeech?(v(),k("span",Uo," Aguarde o controle iniciar sua fala. ")):O("",!0)],2),r.value&&e.currentSpeech?(v(),k("div",Qo,[t("div",{class:F([z.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[t("div",{class:F([z.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),t("div",Jo,[t("div",null,[t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),t("div",{class:F([z.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},A(o.value)+" min ",3)]),t("div",null,[t("div",{class:F([z.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),t("div",{class:F([z.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},A(T.value)+" min "+A(p.value)+" s ",3)])])],2)])):O("",!0)])],2)]),_:1},8,["modelValue"]))}};var Wo=ze(Ho,[["__scopeId","data-v-3dadbee0"]]);const Go={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Ko={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},Yo={class:"tw-text-center"},Xo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},Zo={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},el={class:"text-body2 tw-text-white tw-mb-0"},tl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4"},al={class:"tw-max-w-4xl tw-mx-auto"},sl={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},nl={class:"tw-text-center tw-mb-3"},il={class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"},ol={key:0,class:"tw-flex tw-justify-center"},ll={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200 tw-min-w-[120px]"},rl={class:"tw-text-center tw-pr-2"},ul={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},dl={key:1,class:"tw-grid tw-grid-cols-4 tw-gap-2"},cl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-green-50 tw-rounded-lg tw-border tw-border-green-200"},vl={class:"tw-text-center"},ml={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},gl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-red-50 tw-rounded-lg tw-border tw-border-red-200"},fl={class:"tw-text-center"},hl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},pl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-orange-50 tw-rounded-lg tw-border tw-border-orange-200"},wl={class:"tw-text-center"},bl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Sl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200"},yl={class:"tw-text-center"},_l={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},xl={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},ql={class:"tw-text-center"},$l={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},Il={class:"text-body2 tw-text-gray-700"},Al={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},kl={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},Vl={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Rl={class:"tw-flex tw-flex-wrap tw-gap-2"},zl={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Tl={class:"tw-flex tw-flex-wrap tw-gap-2"},Cl={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},Pl={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},Ll={class:"tw-flex tw-items-center tw-gap-3"},El=["src","alt"],Ml={key:1},Fl={class:"tw-flex-1 tw-min-w-0"},Dl={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},jl={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},Ol={key:6,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},Nl={key:2,class:"tw-flex-shrink-0 tw-bg-white tw-p-4 tw-border-t tw-border-gray-200 tw-shadow-md"},Bl={class:"tw-max-w-2xl tw-mx-auto"},Ul={class:"text-h6 tw-font-bold tw-text-gray-800 tw-mb-2 tw-text-center"},Ql={key:0},Jl={key:1},Hl={key:2},Wl={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-3"},Gl={__name:"VotingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},voting:{type:Object,default:null},agendaId:{type:Number,required:!0},onVoteRegistered:{type:Function,default:null}},emits:["update:modelValue","vote-registered"],setup(e,{emit:i}){const s=e,n=i,a=ke(),c=Ze(),u=X(!1),r=X(!1),g=X(null),q=fe("voiceRequest",null),P=X(!1),R=X(!1),b=X(!1),f=X(!1);ot(()=>{f.value=!0});const o=l(()=>{var E,L;return(L=(E=q==null?void 0:q.hasRequest)==null?void 0:E.value)!=null?L:!1}),d=l(()=>{var E,L;return(L=(E=q==null?void 0:q.currentSpeech)==null?void 0:E.value)!=null?L:null}),y=l(()=>{var E,L;return(L=(E=q==null?void 0:q.requestOrder)==null?void 0:E.value)!=null?L:null}),M=l(()=>{var E,L;return(L=(E=q==null?void 0:q.remainingTime)==null?void 0:E.value)!=null?L:0});async function T(){var L,ae,S,_,m,J;if(!s.agendaId)return;const E=(L=a.user)==null?void 0:L.proponent_id;if(!E){Ee.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}R.value=!0;try{const H=await _e.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:E,requested:!0});if((ae=H==null?void 0:H.data)!=null&&ae.success){Ee.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const de=Le.getItem("unit_id_num");de&&c.isConnected&&c.emit("voice-request-registered",{unitId:parseInt(de),agendaId:parseInt(s.agendaId),proponentId:parseInt(E),proponentName:((S=a.user)==null?void 0:S.name)||((_=a.user)==null?void 0:_.first_name)||"Vereador",source:"vereador"}),q!=null&&q.loadStatus&&await q.loadStatus(!0),await new Promise(ce=>setTimeout(ce,500))}}catch(H){Ee.create({type:"negative",color:"blue-6",message:((J=(m=H.response)==null?void 0:m.data)==null?void 0:J.message)||"Erro ao solicitar voz"})}finally{R.value=!1,P.value=!1}}function p(){b.value=!0}function x(){q!=null&&q.loadStatus&&q.loadStatus(!0)}const h=l({get:()=>s.modelValue,set:E=>n("update:modelValue",E)});ge(()=>s.modelValue,E=>{E||(r.value=!1,g.value=null,u.value=!1)}),ge(()=>{var E;return(E=s.voting)==null?void 0:E.id},(E,L)=>{E!==L&&L!==void 0&&(r.value=!1,g.value=null,u.value=!1)}),ge(()=>s.voting,E=>{var L;console.log("[VotingFullscreenModal] Voting atualizado:",{voting:E,hasId:!!(E!=null&&E.id),hasVotes:!!(E!=null&&E.votes),votesCount:(L=E==null?void 0:E.votes)==null?void 0:L.length})},{immediate:!0,deep:!0});const w=l(()=>{var ae,S,_,m,J;const E=(ae=a.user)==null?void 0:ae.proponent_id;if(!((S=s.voting)!=null&&S.votes)||!E)return console.log("[VotingFullscreenModal] myVote computed:",{hasVoting:!!s.voting,hasVotes:!!((_=s.voting)!=null&&_.votes),votesLength:(J=(m=s.voting)==null?void 0:m.votes)==null?void 0:J.length,proponentId:E}),null;const L=s.voting.votes.find(H=>H.proponent_id===parseInt(E));return(L==null?void 0:L.vote)||null}),C=l(()=>w.value!==null),N=l(()=>{const E=w.value||(r.value?g.value:null);return E?E==="favor"?"A Favor":E==="against"?"Contra":"Absten\xE7\xE3o":""});l(()=>{const E=w.value||(r.value?g.value:null);return E?E==="favor"?"thumb_up":E==="against"?"thumb_down":"remove_circle":"how_to_vote"}),l(()=>{const E=w.value||(r.value?g.value:null);return E?E==="favor"?"green":E==="against"?"red":"orange":"primary"});const ee=l(()=>{const E=w.value||(r.value?g.value:null);return E?E==="favor"?"tw-text-green-600":E==="against"?"tw-text-red-600":"tw-text-orange-600":""}),B=l(()=>{var E;return((E=s.voting)==null?void 0:E.type)==="secret_voting"}),z=l(()=>B.value?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento"),D=l(()=>B.value?"Vota\xE7\xE3o secreta - Seu voto ser\xE1 mantido em sigilo":"Registre seu voto"),V=l(()=>B.value?"lock":"how_to_vote");l(()=>B.value?"purple":"deep-purple");const G=l(()=>{var L;if(!((L=s.voting)!=null&&L.votes))return{favor:0,against:0,abstain:0,total:0};const E=s.voting.votes;return{favor:E.filter(ae=>ae.vote==="favor").length,against:E.filter(ae=>ae.vote==="against").length,abstain:E.filter(ae=>ae.vote==="abstain").length,total:E.length}});function se(E){if(!E)return"";const L=E.split(" ");return L.length>=2?(L[0][0]+L[L.length-1][0]).toUpperCase():E.substring(0,2).toUpperCase()}function ue(E){E&&window.open(E,"_blank")}function W(){var L,ae;if(!((ae=(L=s.voting)==null?void 0:L.proposition)!=null&&ae.protocol_document))return null;const E=s.voting.proposition.protocol_document;return E.signed_file_url||E.file_url||null}function re(){var L,ae;return(ae=(L=s.voting)==null?void 0:L.proposition)!=null&&ae.protocol_document?s.voting.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function te(E){var S,_,m,J,H,de,ce,he,we,be,xe,ie,ne,Ae,Pe,Qe,Je;const L=(S=a.user)==null?void 0:S.proponent_id,ae=((de=(H=(J=(m=(_=s.voting)==null?void 0:_.proposition)==null?void 0:m.species)==null?void 0:J.name)==null?void 0:H.toLowerCase())==null?void 0:de.trim())==="ata"||((xe=(be=(we=(he=(ce=s.voting)==null?void 0:ce.proposition)==null?void 0:he.species)==null?void 0:we.title)==null?void 0:be.toLowerCase())==null?void 0:xe.trim())==="ata";if(!((ie=s.voting)!=null&&ie.id)){Ee.create({type:"negative",color:"blue-6",message:"Erro: Vota\xE7\xE3o n\xE3o identificada"});return}if(!ae&&!L){Ee.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}if(s.voting.type==="reading"){Ee.create({type:"negative",color:"blue-6",message:"N\xE3o \xE9 poss\xEDvel votar em uma leitura. Apenas vota\xE7\xF5es permitem votos."});return}if(s.voting.type!=="voting"&&s.voting.type!=="secret_voting"){Ee.create({type:"negative",color:"blue-6",message:"Tipo de vota\xE7\xE3o inv\xE1lido."});return}u.value=!0,g.value=E;try{const Oe={vote:E};!ae&&L&&(Oe.proponent_id=parseInt(L));const Fe=await _e.post(`/pauta/${s.agendaId}/voting/reading/${s.voting.id}/vote`,Oe);if((ne=Fe==null?void 0:Fe.data)!=null&&ne.success){r.value=!0;const U=Le.getItem("unit_id_num");if(U&&c.isConnected&&c.emit("voting-vote-registered",{unitId:parseInt(U),agendaId:s.agendaId,readingId:s.voting.id,proponentId:ae?null:parseInt(L),vote:E,timestamp:new Date().toISOString()}),n("vote-registered"),s.onVoteRegistered&&typeof s.onVoteRegistered=="function")try{await s.onVoteRegistered()}catch(Y){console.error("[VotingFullscreenModal] Erro ao atualizar status ap\xF3s voto:",Y)}else await new Promise(Y=>{setTimeout(Y,800)});u.value=!1}else r.value=!1,g.value=null,u.value=!1}catch(Oe){console.error("[VotingFullscreenModal] Erro ao votar:",Oe);const Fe=((Pe=(Ae=Oe.response)==null?void 0:Ae.data)==null?void 0:Pe.message)||((Je=(Qe=Oe.response)==null?void 0:Qe.data)==null?void 0:Je.error)||"Erro ao registrar voto. Tente novamente.";Ee.create({type:"negative",color:"blue-6",message:Fe,position:"top",timeout:5e3}),r.value=!1,g.value=null,u.value=!1}}return(E,L)=>(v(),K(lt,{modelValue:h.value,"onUpdate:modelValue":L[7]||(L[7]=ae=>h.value=ae),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:j(()=>{var ae,S,_,m,J,H,de,ce,he,we,be,xe,ie;return[t("div",Go,[t("div",Ko,[t("div",Yo,[t("div",Xo,[$(Q,{name:V.value,color:"white",size:"32px"},null,8,["name"]),t("h1",Zo,A(z.value),1)]),t("p",el,A(D.value),1)])]),t("div",tl,[t("div",al,[e.voting&&e.voting.votes&&e.voting.votes.length>0?(v(),k("div",sl,[t("div",nl,[t("div",il,[$(Q,{name:"people",color:"primary",size:"20px",class:"tw-pr-2"}),pe(" "+A((B.value,"Votos Registrados")),1)]),B.value?(v(),k("div",ol,[t("div",ll,[t("div",rl,[t("div",ul,A(G.value.total),1)]),L[8]||(L[8]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Votaram ",-1))])])):(v(),k("div",dl,[t("div",cl,[$(Q,{name:"thumb_up",color:"green",size:"20px"}),t("div",vl,[t("div",ml,A(G.value.favor),1),L[9]||(L[9]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," A Favor ",-1))])]),t("div",gl,[$(Q,{name:"thumb_down",color:"red",size:"20px"}),t("div",fl,[t("div",hl,A(G.value.against),1),L[10]||(L[10]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Contra ",-1))])]),t("div",pl,[$(Q,{name:"remove_circle",color:"orange",size:"20px"}),t("div",wl,[t("div",bl,A(G.value.abstain),1),L[11]||(L[11]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Absten\xE7\xF5es ",-1))])]),t("div",Sl,[$(Q,{name:"people",color:"primary",size:"20px"}),t("div",yl,[t("div",_l,A(G.value.total),1),L[12]||(L[12]=t("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Total ",-1))])])]))])])):O("",!0),(ae=e.voting)!=null&&ae.proposition?(v(),k("div",xl,[t("div",ql,[t("div",$l,A((S=e.voting.proposition.species)==null?void 0:S.name)+" "+A(e.voting.proposition.number)+"/"+A(e.voting.proposition.year),1),t("div",Il,A(e.voting.proposition.title||e.voting.proposition.ementa||"N/A"),1)])])):O("",!0),(m=(_=e.voting)==null?void 0:_.proposition)!=null&&m.description?(v(),k("div",Al,[L[13]||(L[13]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),t("div",kl,A(e.voting.proposition.description),1)])):O("",!0),((H=(J=e.voting)==null?void 0:J.proposition)==null?void 0:H.documents)&&e.voting.proposition.documents.length>0?(v(),k("div",Vl,[L[14]||(L[14]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",Rl,[(v(!0),k(Ie,null,Re(e.voting.proposition.documents,ne=>(v(),K(qe,{key:ne.id,href:ne.file_url||ne.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:ne.title||ne.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((ce=(de=e.voting)==null?void 0:de.proposition)==null?void 0:ce.file_url)||((we=(he=e.voting)==null?void 0:he.proposition)==null?void 0:we.protocol_document)?(v(),k("div",zl,[L[15]||(L[15]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),t("div",Tl,[e.voting.proposition.file_url?(v(),K(qe,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:L[0]||(L[0]=ne=>ue(e.voting.proposition.file_url))})):O("",!0),W()?(v(),K(qe,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:re(),size:"sm",onClick:L[1]||(L[1]=ne=>ue(W()))},null,8,["label"])):O("",!0)])])):O("",!0),((xe=(be=e.voting)==null?void 0:be.proposition)==null?void 0:xe.proponents)&&e.voting.proposition.proponents.length>0?(v(),k("div",Cl,[L[16]||(L[16]=t("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),t("div",Pl,[(v(!0),k(Ie,null,Re(e.voting.proposition.proponents,ne=>(v(),k("div",{key:ne.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[t("div",Ll,[$(It,{size:"40px",color:"primary","text-color":"white"},{default:j(()=>[ne.avatar?(v(),k("img",{key:0,src:ne.avatar,alt:ne.name},null,8,El)):(v(),k("span",Ml,A(se(ne.name)),1))]),_:2},1024),t("div",Fl,[t("div",Dl,A(ne.name),1),ne.party?(v(),k("div",jl,A(ne.party),1)):O("",!0)])])]))),128))])])):(ie=e.voting)!=null&&ie.proposition?O("",!0):(v(),k("div",Ol,[$(Q,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),L[17]||(L[17]=t("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da vota\xE7\xE3o ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&e.voting&&(e.voting.type==="voting"||e.voting.type==="secret_voting")?(v(),K(ta,{key:0,modelValue:P.value,"onUpdate:modelValue":L[2]||(L[2]=ne=>P.value=ne),"vertical-actions-align":"right",color:o.value?"info":"positive",icon:o.value?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:j(()=>{var ne;return[!o.value||d.value&&d.value.status==="finished"?(v(),K(tt,{key:0,color:"positive",icon:"record_voice_over",label:o.value&&((ne=d.value)==null?void 0:ne.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:R.value,onClick:T},null,8,["label","loading"])):o.value&&!d.value?(v(),K(tt,{key:1,color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""})):d.value&&["speaking","paused"].includes(d.value.status)?(v(),K(tt,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:p})):O("",!0)]}),_:1},8,["modelValue","color","icon"])):O("",!0),e.agendaId&&f.value?(v(),K(Wo,{key:1,modelValue:b.value,"onUpdate:modelValue":L[3]||(L[3]=ne=>b.value=ne),"agenda-id":e.agendaId,"has-request":o.value,"request-order":y.value,"current-speech":d.value,"remaining-time":M.value,onRequestRemoved:x},null,8,["modelValue","agenda-id","has-request","request-order","current-speech","remaining-time"])):O("",!0),e.voting&&e.voting.id&&e.voting.type!=="reading"?(v(),k("div",Nl,[t("div",Bl,[t("div",Ul,[C.value&&!B.value?(v(),k("span",Ql,[L[18]||(L[18]=pe("Seu voto atual: ",-1)),t("strong",{class:F(ee.value)},A(N.value),3)])):C.value&&B.value?(v(),k("span",Jl,"Voc\xEA j\xE1 votou nesta vota\xE7\xE3o secreta")):(v(),k("span",Hl,"Como deseja votar?"))]),u.value?(v(),k("div",Wl,[$(jt,{color:"primary",size:"24px"}),L[19]||(L[19]=t("span",{class:"text-body2 tw-text-gray-600"},"Aguarde, processando voto...",-1))])):O("",!0),t("div",{class:F(["tw-grid tw-grid-cols-3 tw-gap-2",{"tw-opacity-50":u.value}])},[$(qe,{color:"green",outline:B.value?!0:w.value!=="favor",size:"md",icon:"thumb_up",label:"A Favor",class:F(["tw-rounded-md",!B.value&&w.value==="favor"?"vote-selected":""]),disable:u.value||B.value&&C.value&&w.value==="favor",loading:u.value&&g.value==="favor",onClick:L[4]||(L[4]=ne=>te("favor"))},null,8,["outline","class","disable","loading"]),$(qe,{color:"red",outline:B.value?!0:w.value!=="against",size:"md",icon:"thumb_down",label:"Contra",class:F(["tw-rounded-md",!B.value&&w.value==="against"?"vote-selected":""]),disable:u.value||B.value&&C.value&&w.value==="against",loading:u.value&&g.value==="against",onClick:L[5]||(L[5]=ne=>te("against"))},null,8,["outline","class","disable","loading"]),$(qe,{color:"orange",outline:B.value?!0:w.value!=="abstain",size:"md",icon:"remove_circle",label:"Absten\xE7\xE3o",class:F(["tw-py-2 tw-rounded-md",!B.value&&w.value==="abstain"?"vote-selected":""]),disable:u.value||B.value&&C.value&&w.value==="abstain",loading:u.value&&g.value==="abstain",onClick:L[6]||(L[6]=ne=>te("abstain"))},null,8,["outline","class","disable","loading"])],2)])])):O("",!0)])]}),_:1},8,["modelValue"]))}};var Kl=ze(Gl,[["__scopeId","data-v-1f914568"]]);function Yl(e){const i=X(!1),s=X((e==null?void 0:e.value)||null),n=X(0),a=X(null),c=l(()=>{const g=Le.getItem("unit_id_num");return g?parseInt(g):null});async function u(){var g;i.value=!0;try{const q=await _e.get("/pauta",{params:{session_status:"started",per_page:1}}),P=((g=q==null?void 0:q.data)==null?void 0:g.data)||[];P.length>0?s.value=P[0].id:s.value=null}catch(q){console.error(q),s.value=null}finally{i.value=!1}}function r(g,q){if(!c.value)return;const P=Date.now(),R=s.value;if(a.value===R&&P-n.value<500){console.log("[useSessionAgenda] ensureSubscribed ignorado - subscri\xE7\xE3o muito recente");return}const b=`unit.${c.value}.sessions`;if(g.subscribeToChannel(b),R){const f=`unit.${c.value}.agenda.${R}`;g.subscribeToChannel(f),a.value!==R||P-n.value>=1e3?(a.value=R,n.value=P,q&&(console.log("[useSessionAgenda] Executando fun\xE7\xF5es de carregamento para agenda:",R),Object.values(q).forEach(o=>{typeof o=="function"&&o()}))):console.log("[useSessionAgenda] Fun\xE7\xF5es de carregamento ignoradas - subscri\xE7\xE3o muito recente")}}return{loadingAgendas:i,selectedAgendaId:s,unitId:c,loadStartedAgenda:u,ensureSubscribed:r}}function bt(e,i,s="small"){const n=X(null),a=X(0),c=X(0),u=X(null),r=X(!1),g=X(!1),q=X(0),P=X(null),R=X(null),b=s==="small"?"small-expedient":s==="miscellaneous"?"miscellaneous-subject":"large-expedient",f=l(()=>{var w;return((w=n.value)==null?void 0:w.status)==="finished"?n.value:null}),o=l(()=>f.value?(f.value.allocated_minutes||0)+(f.value.additional_minutes||0):0),d=l(()=>{if(!f.value)return 0;const w=f.value.used_seconds||0;return Math.floor(w/60)}),y=l(()=>f.value?(f.value.used_seconds||0)%60:0),M=l(()=>{var w;return((w=f.value)==null?void 0:w.finished_at)||null});function T(){P.value=null,R.value=null}function p(){var z,D,V,G;if(!n.value){a.value=0,c.value=0,T();return}const w=n.value,C=(((z=w.allocated_minutes)!=null?z:0)+((D=w.additional_minutes)!=null?D:0))*60;if(C<=0){a.value=0,c.value=0;return}if(w.status==="paused"&&typeof w.calculated_remaining_seconds=="number"){const se=Math.max(0,Math.min(C,Math.floor(w.calculated_remaining_seconds))),ue=Math.max(0,C-se);a.value=se,c.value=Math.floor(ue);return}let N;if(w.status==="speaking"&&R.value!=null&&P.value!=null){const se=Math.max(0,(Date.now()-R.value)/1e3);N=P.value+se}else{const se=(G=(V=w.calculated_used_seconds)!=null?V:w.used_seconds)!=null?G:0;if(N=se,w.status==="speaking"&&w.started_at){const ue=(new Date-new Date(w.started_at))/1e3;N=se+Math.max(0,ue)}}N=Math.max(0,N);const ee=Math.min(C,Math.floor(N)),B=Math.max(0,C-ee);c.value=ee,a.value=B}async function x(){var C,N,ee,B;if(g.value){console.log(`[useSpeech ${s}] loadSpeechStatus j\xE1 em andamento, ignorando.`);return}const w=Date.now();if(w-q.value<100){console.log(`[useSpeech ${s}] loadSpeechStatus chamado muito recentemente, ignorando.`);return}if(!e.value||!i.value){n.value=null,a.value=0,c.value=0,T(),u.value&&(clearInterval(u.value),u.value=null);return}g.value=!0,q.value=w;try{const z=await _e.get(`/pauta/${e.value}/${b}/speeches/status`);if(((C=z==null?void 0:z.data)==null?void 0:C.success)&&((N=z==null?void 0:z.data)==null?void 0:N.data)){const D=z.data.data.speeches||[];let V=D.find(G=>G.proponent_id===parseInt(i.value)&&(G.status==="speaking"||G.status==="paused"));if(V||(V=D.find(G=>G.proponent_id===parseInt(i.value))),V){if(n.value=V,V.status==="speaking"||V.status==="paused"){const G=(B=(ee=V.calculated_used_seconds)!=null?ee:V.used_seconds)!=null?B:0;P.value=Math.max(0,Number(G)),R.value=Date.now()}else T();p(),V.status==="speaking"||V.status==="paused"?(r.value||(r.value=!0),u.value||(u.value=setInterval(()=>{p()},1e3))):V.status==="finished"?(T(),u.value&&(clearInterval(u.value),u.value=null)):(T(),r.value=!1,u.value&&(clearInterval(u.value),u.value=null))}else n.value=null,a.value=0,c.value=0,T(),r.value=!1,u.value&&(clearInterval(u.value),u.value=null)}}catch(z){console.error(`Erro ao carregar status da fala (${s}):`,z),n.value=null,a.value=0,c.value=0,T()}finally{g.value=!1}}function h(){T(),u.value&&(clearInterval(u.value),u.value=null)}return{currentSpeech:n,remainingTime:a,usedSeconds:c,showSpeechModal:r,loadingSpeech:g,finishedSpeech:f,finishedSpeechTotalMinutes:o,finishedSpeechUsedMinutes:d,finishedSpeechUsedSeconds:y,finishedSpeechFinishedAt:M,loadSpeechStatus:x,cleanup:h}}function Xl(e,i){const s=X([]),n=X(!1);async function a(){var c,u,r,g,q,P;if(!e.value||!i.value){s.value=[];return}try{const R=await _e.get(`/pauta/${e.value}/session-logs`);if(((c=R==null?void 0:R.data)==null?void 0:c.success)&&((u=R==null?void 0:R.data)==null?void 0:u.data)){const b=R.data.data.logs||[],f=ke(),o=b.filter(h=>{var w,C;return((w=h.event_data)==null?void 0:w.proponent_id)===parseInt(i.value)||h.user_id===((C=f.user)==null?void 0:C.id)}),d=[],y=o.find(h=>h.event_type==="session_attendance"&&h.event_subtype==="attendance_registered");y&&d.push({icon:"how_to_reg",color:"green",label:"Presen\xE7a registrada no qu\xF3rum",time:De(y.occurred_at)});const M=o.find(h=>h.event_type==="small_expedient"&&(h.event_subtype==="register_speaker"||h.event_subtype==="small_expedient_registered"));if(M){const{useSessionSettings:h}=await Ge(()=>Promise.resolve().then(function(){return rt}),void 0),w=h();await w.loadSettings(),d.push({icon:"assignment",color:"secondary",label:`Inscrito no ${w.smallExpedientName.value||"Pequeno Expediente"}`,time:De(M.occurred_at)})}const T=o.find(h=>h.event_type==="large_expedient"&&(h.event_subtype==="register_speaker"||h.event_subtype==="large_expedient_registered"));if(T){const{useSessionSettings:h}=await Ge(()=>Promise.resolve().then(function(){return rt}),void 0),w=h();await w.loadSettings(),d.push({icon:"assignment_turned_in",color:"orange",label:`Inscrito no ${w.largeExpedientName.value||"Grande Expediente"}`,time:De(T.occurred_at)})}const p=o.filter(h=>h.event_type==="small_expedient_speech");if(p.length>0){const h=p.find(C=>C.event_subtype==="speech_started"),w=p.find(C=>C.event_subtype==="speech_finished");if(h&&d.push({icon:"mic",color:"primary",label:"Fala iniciada",time:De(h.occurred_at)}),w){const C=((r=w.event_data)==null?void 0:r.total_minutes_allocated)||0,N=((g=w.event_data)==null?void 0:g.total_seconds_used)||0,ee=Math.floor(N/60);d.push({icon:"mic_off",color:"grey",label:`Fala finalizada (${ee}min de ${C}min dispon\xEDveis)`,time:De(w.occurred_at)})}}const x=o.filter(h=>h.event_type==="large_expedient_speech");if(x.length>0){const h=x.find(C=>C.event_subtype==="speech_started"),w=x.find(C=>C.event_subtype==="speech_finished");if(h){const{useSessionSettings:C}=await Ge(()=>Promise.resolve().then(function(){return rt}),void 0),N=C();await N.loadSettings(),d.push({icon:"mic",color:"orange",label:`Fala iniciada (${N.largeExpedientName.value||"Grande Expediente"})`,time:De(h.occurred_at)})}if(w){const{useSessionSettings:C}=await Ge(()=>Promise.resolve().then(function(){return rt}),void 0),N=C();await N.loadSettings();const ee=((q=w.event_data)==null?void 0:q.total_minutes_allocated)||0,B=((P=w.event_data)==null?void 0:P.total_seconds_used)||0,z=Math.floor(B/60);d.push({icon:"mic_off",color:"grey",label:`Fala finalizada - ${N.largeExpedientName.value||"Grande Expediente"} (${z}min de ${ee}min dispon\xEDveis)`,time:De(w.occurred_at)})}}s.value=d}}catch(R){console.error("Erro ao carregar intera\xE7\xF5es da sess\xE3o:",R),s.value=[]}}return{sessionInteractions:s,loadingSessionInteractions:n,loadSessionInteractions:a}}function Zl(e,i,s,n={}){const a=Ze();ke();const{onQuorumStarted:c,onQuorumFinalized:u,onSmallExpedientStarted:r,onSmallExpedientFinalized:g,onSmallExpedientRegistration:q,onSmallExpedientOrderUpdated:P,onLargeExpedientStarted:R,onLargeExpedientFinalized:b,onLargeExpedientRegistration:f,onLargeExpedientOrderUpdated:o,onMiscellaneousSubjectStarted:d,onMiscellaneousSubjectFinalized:y,onMiscellaneousSubjectRegistration:M,onMiscellaneousSubjectOrderUpdated:T,onVotingStarted:p,onVotingReadingStarted:x,onVotingReadingFinished:h,onVotingVoteRegistered:w,onSpeechStarted:C,onSpeechPaused:N,onSpeechResumed:ee,onSpeechTimeAdded:B,onSpeechFinished:z,onSessionAttendance:D,onSessionAbsences:V,onVoiceRequestRegistered:G,onVoiceRequestRemoved:se,onVoiceRequestSpeechStarted:ue,onVoiceRequestSpeechPaused:W,onVoiceRequestSpeechResumed:re,onVoiceRequestSpeechTimeAdded:te,onVoiceRequestSpeechFinished:E,onSpeechAsideStarted:L,onSpeechAsideFinished:ae}=n;function S(){c&&a.on("quorum-started",m=>{_(m,"agendaId")&&(c(m),oe.success("Qu\xF3rum iniciado! Voc\xEA j\xE1 pode marcar sua presen\xE7a."))}),u&&a.on("quorum-finalized",m=>{_(m,"agendaId")&&(u(m),oe.warning("O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado."))}),r&&a.on("small-expedient-started",async m=>{if(_(m,"agendaId")){const{useExpedientStore:J}=await Ge(()=>Promise.resolve().then(function(){return ct}),void 0);J().invalidateStatusCache("small"),await r(m)}}),g&&a.on("small-expedient-finalized",async m=>{_(m,"agendaId")&&await g(m)}),q&&a.on("small-expedient-registration",async m=>{_(m,"agendaId","proponentId")&&await q(m)}),P&&a.on("small-expedient-order-updated",async m=>{_(m,"agendaId")&&await P(m)}),R&&a.on("large-expedient-started",m=>{_(m,"agendaId")&&R(m)}),b&&a.on("large-expedient-finalized",async m=>{_(m,"agendaId")&&await b(m)}),f&&a.on("large-expedient-registration",async m=>{_(m,"agendaId","proponentId")&&await f(m)}),o&&a.on("large-expedient-order-updated",async m=>{_(m,"agendaId")&&await o(m)}),d&&a.on("miscellaneous-subject-started",async m=>{if(_(m,"agendaId")){const{useExpedientStore:J}=await Ge(()=>Promise.resolve().then(function(){return ct}),void 0);J().invalidateStatusCache("miscellaneous"),await d(m)}}),y&&a.on("miscellaneous-subject-finalized",async m=>{_(m,"agendaId")&&await y(m)}),M&&a.on("miscellaneous-subject-registration",async m=>{_(m,"agendaId","proponentId")&&await M(m)}),T&&a.on("miscellaneous-subject-order-updated",async m=>{_(m,"agendaId")&&await T(m)}),p&&a.on("voting-started",async m=>{_(m,"agendaId")&&(await p(m),oe.info("Vota\xE7\xE3o iniciada na sess\xE3o."))}),x&&a.on("voting-reading-started",async m=>{if(_(m,"agendaId")){await x(m);const J=m.type==="reading",H=m.type==="reading"?"Leitura":m.type==="secret_voting"?"Vota\xE7\xE3o Secreta":"Vota\xE7\xE3o";J||oe.info(`${H} iniciada.`)}}),h&&a.on("voting-reading-finished",async m=>{if(_(m,"agendaId")){await h(m);const J=(m==null?void 0:m.type)||"reading",H=J==="secret_voting"?"Vota\xE7\xE3o secreta encerrada.":J==="voting"?"Vota\xE7\xE3o encerrada.":J==="reading"?"Leitura encerrada.":"Vota\xE7\xE3o encerrada.";oe.info(H)}}),w&&a.on("voting-vote-registered",async m=>{_(m,"agendaId")&&await w(m)}),C&&a.on("speech-started",async m=>{_(m,"agendaId","proponentId")&&(await C(m),oe.success("Sua fala foi iniciada!"))}),N&&a.on("speech-paused",async m=>{_(m,"agendaId","proponentId")&&(await N(m),oe.info("Sua fala foi pausada."))}),ee&&a.on("speech-resumed",async m=>{_(m,"agendaId","proponentId")&&(await ee(m),oe.success("Sua fala foi retomada!"))}),B&&a.on("speech-time-added",async m=>{_(m,"agendaId","proponentId")&&(await B(m),oe.success(`Tempo adicional de ${m.minutes} minuto(s) adicionado!`))}),z&&a.on("speech-finished",async m=>{_(m,"agendaId","proponentId")&&(await z(m),oe.warning("Sua fala foi finalizada."))}),D&&a.on("session-attendance",m=>{_(m,"agendaId","proponentId")&&D(m)}),V&&a.on("session-absences",m=>{_(m,"agendaId","proponentId")&&V(m)}),G&&a.on("voice-request-registered",async m=>{_(m,"agendaId")&&await G(m)}),se&&a.on("voice-request-removed",async m=>{_(m,"agendaId")&&await se(m)}),ue&&a.on("voice-request-speech-started",async m=>{_(m,"agendaId","proponentId")&&await ue(m)}),W&&a.on("voice-request-speech-paused",async m=>{_(m,"agendaId","proponentId")&&await W(m)}),re&&a.on("voice-request-speech-resumed",async m=>{_(m,"agendaId","proponentId")&&await re(m)}),te&&a.on("voice-request-speech-time-added",async m=>{_(m,"agendaId","proponentId")&&await te(m)}),E&&a.on("voice-request-speech-finished",async m=>{_(m,"agendaId","proponentId")&&await E(m)}),L&&a.on("speech-aside-started",async m=>{_(m,"agendaId")&&await L(m)}),ae&&a.on("speech-aside-finished",async m=>{_(m,"agendaId")&&await ae(m)})}function _(m,...J){if(!m)return!1;if(J.includes("agendaId")){const H=parseInt(m.agendaId),de=e.value?parseInt(e.value):null;if(H!==de&&!(!de&&(s==null?void 0:s.value)===H))return!1}if(J.includes("proponentId")){const H=parseInt(m.proponentId),de=i.value?parseInt(i.value):null;if(H!==de)return!1}return!0}return{setupSocketListeners:S}}const er={key:0,class:"dashboard-tabs-container"},tr={class:"tab-panels-container"},ar={class:"tab-panel"},sr={class:"tab-panel"},nr={class:"tab-panel"},ir={class:"tab-panel"},or={class:"tab-panel"},lr={class:"tab-panel"},rr={class:"tab-panel"},ur={class:"empty-state-card"},dr={class:"empty-state-content"},cr={key:1,class:"modals-container"},vr={key:2,class:"dashboard-content"},mr={class:"dashboard-greeting"},gr={class:"greeting-content"},fr={class:"greeting-text"},hr={class:"greeting-title"},pr={class:"greeting-subtitle"},wr={key:0,class:"future-sessions-list"},br={key:1,class:"dashboard-content"},Sr={class:"empty-state-card"},yr={class:"empty-state-content"},_r={__name:"Dashboard",setup(e){const i=ke(),s=Ze(),n=kt(),a=X(null),c=X(null),u=X([]),r=X(!1),g=X("home"),q=l(()=>{const S=[{name:"home",label:"In\xEDcio",icon:"home"},{name:"quorum",label:"Qu\xF3rum",icon:"groups"},...n.enableSmallExpedient.value?[{name:"small-expedient",label:n.smallExpedientName.value||"Pequeno Expediente",icon:"timer"}]:[],...n.enableLargeExpedient.value?[{name:"large-expedient",label:n.largeExpedientName.value||"Grande Expediente",icon:"assignment_turned_in"}]:[],...n.enableMiscellaneousSubjects.value?[{name:"miscellaneous-subject",label:n.miscellaneousSubjectsName.value||"Assuntos Diversos",icon:"topic"}]:[],{name:"voting",label:"Vota\xE7\xE3o",icon:"how_to_vote"}];return a.value&&c.value&&!o.isPresent.value?S.filter(_=>_.name!=="voting"):S});function P(S){g.value=S,console.log("[Dashboard] Tab mudou para:",S)}const R=l(()=>{var S;return((S=a.value)==null?void 0:S.id)||null}),b=Yl(R),f=l(()=>{var S;return((S=i.user)==null?void 0:S.proponent_id)||null}),o=Ht(b.selectedAgendaId),d=Jt(),y=st(b.selectedAgendaId,"small"),M=st(b.selectedAgendaId,"large"),T=st(b.selectedAgendaId,"miscellaneous"),p=Gt(b.selectedAgendaId),x=bt(b.selectedAgendaId,f,"small"),h=bt(b.selectedAgendaId,f,"large"),w=bt(b.selectedAgendaId,f,"miscellaneous"),C=Kt(b.selectedAgendaId),N=Xl(b.selectedAgendaId,f),ee=l({get:()=>x.showSpeechModal.value,set:S=>{x.showSpeechModal.value=S}}),B=l({get:()=>h.showSpeechModal.value,set:S=>{h.showSpeechModal.value=S}}),z=l({get:()=>w.showSpeechModal.value,set:S=>{w.showSpeechModal.value=S}}),D=l({get:()=>p.showReadingModal.value,set:S=>{p.showReadingModal.value=S}}),V=l({get:()=>p.showVotingModal.value&&a.value&&c.value&&!o.isPresent.value?!1:p.showVotingModal.value,set:S=>{if(S&&a.value&&c.value&&!o.isPresent.value){oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.");return}p.showVotingModal.value=S}});ge(()=>p.showVotingModal.value,S=>{S&&a.value&&c.value&&(o.isPresent.value||(console.log("[Dashboard] Tentativa de abrir modal de vota\xE7\xE3o sem presen\xE7a no quorum - bloqueando"),p.showVotingModal.value=!1,oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")))},{immediate:!1});function G(){const S=new Date().getHours();return S<12?"Bom dia!":S<18?"Boa tarde!":"Boa noite!"}function se(){const S=new Date;return`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`}function ue(S){if(!(S!=null&&S.session_date))return!1;const _=se();return S.session_date>_}async function W(){var S;r.value=!0;try{const _=await _e.get("/pauta",{params:{session_status:"started",per_page:1}}),m=((S=_==null?void 0:_.data)==null?void 0:S.data)||[];if(m.length>0){const J=m[0];a.value=J,c.value=J,u.value=[],J.id&&(b.selectedAgendaId.value=J.id);return}a.value=null,c.value=null,await re()}catch(_){console.error("Erro ao carregar sess\xE3o:",_),a.value=null,c.value=null,u.value=[]}finally{r.value=!1}}async function re(){var S;try{const _=se(),m=await _e.get("/pauta",{params:{date_from:_,per_page:50}}),H=[...((S=m==null?void 0:m.data)==null?void 0:S.data)||[]].sort((ce,he)=>{const we=ce.session_date||"",be=he.session_date||"";return we!==be?we.localeCompare(be):(ce.session_time||"").localeCompare(he.session_time||"")}),de=await Promise.all(H.map(async ce=>{const he=await te(ce.id);return{session:ce,propositions:he}}));u.value=de}catch(_){console.error("Erro ao carregar sess\xF5es futuras:",_),u.value=[]}}async function te(S){var _;try{const m=await _e.get(`/pauta/${S}/agenda-itens`,{params:{type:"proposition",item_status:"active"}});return(((_=m==null?void 0:m.data)==null?void 0:_.data)||[]).filter(H=>H.proposition).map(H=>{var de,ce;return{id:H.proposition.id,number:H.proposition.number,year:H.proposition.year,title:H.proposition.title,species:((de=H.proposition.species)==null?void 0:de.name)||((ce=H.proposition.species)==null?void 0:ce.title),proponents:H.proposition.proponents||[]}})}catch(m){return console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o:",m),[]}}const{setupSocketListeners:E}=Zl(b.selectedAgendaId,f,l(()=>{var S;return((S=a.value)==null?void 0:S.id)||null}),{onQuorumStarted:async()=>{await o.loadQuorumStatus(),await o.loadCurrentAttendanceStatus()},onQuorumFinalized:async()=>{await o.loadQuorumStatus(),await o.loadCurrentAttendanceStatus()},onSmallExpedientStarted:async()=>{const{useExpedientStore:S}=await Ge(()=>Promise.resolve().then(function(){return ct}),void 0);S().invalidateStatusCache("small"),await y.loadStatus(!0)},onSmallExpedientFinalized:async S=>{await y.loadStatus(),y.isRegistered.value?oe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${y.registrationOrder.value||"N/A"}\xBA.`):oe.warning(`As inscri\xE7\xF5es de ${n.smallExpedientName.value.toLowerCase()} foram finalizadas.`)},onSmallExpedientRegistration:async S=>{S.source==="controle"&&(y.isRegistered.value=S.registered||!1,await y.loadStatus())},onSmallExpedientOrderUpdated:async()=>{await y.loadStatus(!0)},onLargeExpedientStarted:M.loadStatus,onLargeExpedientFinalized:async S=>{await M.loadStatus(),M.isRegistered.value?oe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${M.registrationOrder.value||"N/A"}\xBA.`):oe.warning(`As inscri\xE7\xF5es de ${n.largeExpedientName.value.toLowerCase()} foram finalizadas.`)},onLargeExpedientRegistration:async S=>{S.source==="controle"&&(M.isRegistered.value=S.registered||!1,await M.loadStatus())},onLargeExpedientOrderUpdated:async()=>{await M.loadStatus(!0)},onMiscellaneousSubjectStarted:async()=>{console.log("[Dashboard] Evento miscellaneous-subject-started recebido - invalidando cache e recarregando status");const{useExpedientStore:S}=await Ge(()=>Promise.resolve().then(function(){return ct}),void 0);S().invalidateStatusCache("miscellaneous"),await T.loadStatus(!0),console.log("[Dashboard] Status recarregado ap\xF3s miscellaneous-subject-started:",{started:T.started.value,finalized:T.finalized.value,isRegistered:T.isRegistered.value})},onMiscellaneousSubjectFinalized:async S=>{await T.loadStatus(),T.isRegistered.value?oe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${T.registrationOrder.value||"N/A"}\xBA.`):oe.warning(`As inscri\xE7\xF5es de ${n.miscellaneousSubjectsName.value.toLowerCase()} foram finalizadas.`)},onMiscellaneousSubjectRegistration:async S=>{S.source==="controle"&&(T.isRegistered.value=S.registered||!1,await T.loadStatus())},onMiscellaneousSubjectOrderUpdated:async()=>{await T.loadStatus(!0)},onVotingStarted:async()=>{o.isPresent.value?await p.loadVotingStatus():(await p.loadVotingStatus(),p.showVotingModal.value&&(p.showVotingModal.value=!1))},onVotingReadingStarted:async S=>{if((S==null?void 0:S.type)&&S.type!=="reading"&&!o.isPresent.value){await p.loadVotingStatus(),p.showVotingModal.value&&(p.showVotingModal.value=!1),oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para participar da vota\xE7\xE3o.");return}await p.loadVotingStatus()},onVotingReadingFinished:p.loadVotingStatus,onVotingVoteRegistered:p.loadVotingStatus,onSpeechStarted:async S=>{var m,J,H;const _=S.speech_type||"small";_==="small"?(x.currentSpeech.value=null,await x.loadSpeechStatus(),((m=x.currentSpeech.value)==null?void 0:m.status)==="speaking"&&(x.showSpeechModal.value=!0)):_==="large"?(h.currentSpeech.value=null,await h.loadSpeechStatus(),((J=h.currentSpeech.value)==null?void 0:J.status)==="speaking"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(w.currentSpeech.value=null,await w.loadSpeechStatus(),((H=w.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(w.showSpeechModal.value=!0))},onSpeechPaused:async S=>{var m,J,H;const _=S.speech_type||"small";_==="small"?(await x.loadSpeechStatus(),((m=x.currentSpeech.value)==null?void 0:m.status)==="paused"&&(x.showSpeechModal.value=!0)):_==="large"?(await h.loadSpeechStatus(),((J=h.currentSpeech.value)==null?void 0:J.status)==="paused"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(await w.loadSpeechStatus(),((H=w.currentSpeech.value)==null?void 0:H.status)==="paused"&&(w.showSpeechModal.value=!0))},onSpeechResumed:async S=>{var m,J,H;const _=S.speech_type||"small";_==="small"?(await x.loadSpeechStatus(),((m=x.currentSpeech.value)==null?void 0:m.status)==="speaking"&&(x.showSpeechModal.value=!0)):_==="large"?(await h.loadSpeechStatus(),((J=h.currentSpeech.value)==null?void 0:J.status)==="speaking"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(await w.loadSpeechStatus(),((H=w.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(w.showSpeechModal.value=!0))},onSpeechTimeAdded:async S=>{const _=S.speech_type||"small";_==="small"?await x.loadSpeechStatus():_==="large"?await h.loadSpeechStatus():_==="miscellaneous"&&await w.loadSpeechStatus()},onSpeechFinished:async S=>{var m,J,H;const _=S.speech_type||"small";_==="small"?(await x.loadSpeechStatus(),await N.loadSessionInteractions(),((m=x.currentSpeech.value)==null?void 0:m.status)==="finished"&&(x.showSpeechModal.value=!0)):_==="large"?(await h.loadSpeechStatus(),await N.loadSessionInteractions(),((J=h.currentSpeech.value)==null?void 0:J.status)==="finished"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(await w.loadSpeechStatus(),await N.loadSessionInteractions(),((H=w.currentSpeech.value)==null?void 0:H.status)==="finished"&&(w.showSpeechModal.value=!0))},onSessionAttendance:async S=>{d.isPresent=S.present||!1,await o.loadCurrentAttendanceStatus(),!S.present&&g.value==="voting"&&(oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."),g.value="home"),!S.present&&p.showVotingModal.value&&(p.showVotingModal.value=!1,oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")),S.source==="controle"&&oe.success(S.present?"Presen\xE7a confirmada pelo controle":"Presen\xE7a removida pelo controle")},onSessionAbsences:async S=>{await o.loadCurrentAttendanceStatus(),S.absenceReason&&(o.absenceReason.value=S.absenceReason),S.justified&&S.absenceReason&&oe.info("Aus\xEAncia justificada pelo controle")},onVoiceRequestRegistered:async S=>{await C.loadStatus(!0)},onVoiceRequestRemoved:async S=>{await C.loadStatus(!0)},onVoiceRequestSpeechStarted:async S=>{await C.loadStatus(!0)},onVoiceRequestSpeechPaused:async S=>{await C.loadStatus(!0)},onVoiceRequestSpeechResumed:async S=>{await C.loadStatus(!0)},onVoiceRequestSpeechTimeAdded:async S=>{await C.loadStatus(!0)},onVoiceRequestSpeechFinished:async S=>{await C.loadStatus(!0)},onSpeechAsideStarted:async S=>{var m,J,H;const _=(S==null?void 0:S.speech_type)||"small";_==="small"?(await x.loadSpeechStatus(),((m=x.currentSpeech.value)==null?void 0:m.status)==="paused"&&(x.showSpeechModal.value=!0)):_==="large"?(await h.loadSpeechStatus(),((J=h.currentSpeech.value)==null?void 0:J.status)==="paused"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(await w.loadSpeechStatus(),((H=w.currentSpeech.value)==null?void 0:H.status)==="paused"&&(w.showSpeechModal.value=!0))},onSpeechAsideFinished:async S=>{var m,J,H;const _=(S==null?void 0:S.speech_type)||"small";_==="small"?(await x.loadSpeechStatus(),((m=x.currentSpeech.value)==null?void 0:m.status)==="speaking"&&(x.showSpeechModal.value=!0)):_==="large"?(await h.loadSpeechStatus(),((J=h.currentSpeech.value)==null?void 0:J.status)==="speaking"&&(h.showSpeechModal.value=!0)):_==="miscellaneous"&&(await w.loadSpeechStatus(),((H=w.currentSpeech.value)==null?void 0:H.status)==="speaking"&&(w.showSpeechModal.value=!0))}});function L(){const S=Le.getItem("unit_id_num");if(S&&s.isConnected){const _=`unit.${S}.sessions`;s.subscribeToChannel(_)}s.on("session-status-changed",_=>{if(console.log("[Vereador] Status da sess\xE3o alterado:",_),_.status==="started"&&_.agendaId){const m=Le.getItem("unit_id_num");if(m&&s.isConnected){const J=`unit.${m}.agenda.${_.agendaId}`;s.subscribeToChannel(J)}W()}else _.status==="closed"&&(a.value=null,c.value=null,u.value=[],re())})}Ce("quorum",o),Ce("smallExpedient",y),Ce("largeExpedient",M),Ce("miscellaneousSubject",T),Ce("voting",p),Ce("voiceRequest",C),Ce("smallSpeech",x),Ce("largeSpeech",h),Ce("miscellaneousSubjectSpeech",w),Ce("sessionAgenda",b),Ce("sessionSettings",n),Ce("sessionInteractions",N),ge(()=>{var S;return(S=a.value)==null?void 0:S.id},async(S,_)=>{S&&S!==_&&(b.selectedAgendaId.value=S,s.isConnected&&b.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:y.loadStatus,loadLargeExpedientStatus:M.loadStatus,loadMiscellaneousSubjectStatus:T.loadStatus,loadVotingStatus:p.loadVotingStatus,loadVoiceRequestStatus:C.loadStatus}),await Promise.all([o.loadQuorumStatus(),o.loadCurrentAttendanceStatus(),y.loadStatus(),M.loadStatus(),T.loadStatus(),p.loadVotingStatus(),x.loadSpeechStatus(),h.loadSpeechStatus(),w.loadSpeechStatus(),C.loadStatus(),N.loadSessionInteractions()]),E())},{immediate:!0}),ge(()=>o.isPresent.value,S=>{a.value&&c.value&&!S&&p.showVotingModal.value&&(p.showVotingModal.value=!1,oe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."))});let ae=null;return ot(async()=>{if(await n.loadSettings(),L(),await W(),s.isConnected)(()=>{var _;(_=a.value)!=null&&_.id&&b.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:y.loadStatus,loadLargeExpedientStatus:M.loadStatus,loadMiscellaneousSubjectStatus:T.loadStatus,loadVotingStatus:p.loadVotingStatus,loadVoiceRequestStatus:C.loadStatus})})();else{const S=setInterval(()=>{var _;s.isConnected&&((_=a.value)!=null&&_.id&&b.ensureSubscribed(s,{loadQuorumStatus:o.loadQuorumStatus,loadCurrentAttendanceStatus:o.loadCurrentAttendanceStatus,loadSmallExpedientStatus:y.loadStatus,loadLargeExpedientStatus:M.loadStatus,loadMiscellaneousSubjectStatus:T.loadStatus,loadVotingStatus:p.loadVotingStatus,loadVoiceRequestStatus:C.loadStatus}),clearInterval(S))},500);setTimeout(()=>clearInterval(S),1e4)}ae=setInterval(()=>{W()},3e4)}),At(()=>{ae&&clearInterval(ae),x.cleanup(),h.cleanup()}),(S,_)=>(v(),K(ya,{class:"mobile-dashboard-page"},{default:j(()=>{var m,J,H,de,ce,he,we,be,xe;return[a.value&&c.value?(v(),k("div",er,[t("div",tr,[Be(t("div",ar,[$(Ms,{"session-data":c.value,"selected-agenda-id":(m=a.value)==null?void 0:m.id},null,8,["session-data","selected-agenda-id"])],512),[[We,g.value==="home"]]),Be(t("div",sr,[$(on,{"session-id":(J=a.value)==null?void 0:J.id,"session-data":c.value},null,8,["session-id","session-data"])],512),[[We,g.value==="quorum"]]),Be(t("div",nr,[$(In,{"session-id":(H=a.value)==null?void 0:H.id,"session-data":c.value},null,8,["session-id","session-data"])],512),[[We,g.value==="small-expedient"&&I(n).enableSmallExpedient.value]]),Be(t("div",ir,[$(Tn,{"session-id":(de=a.value)==null?void 0:de.id,"session-data":c.value},null,8,["session-id","session-data"])],512),[[We,g.value==="large-expedient"&&I(n).enableLargeExpedient.value]]),Be(t("div",or,[$(Fn,{"session-id":(ce=a.value)==null?void 0:ce.id,"session-data":c.value},null,8,["session-id","session-data"])],512),[[We,g.value==="miscellaneous-subject"&&I(n).enableMiscellaneousSubjects.value]]),Be(t("div",lr,[$(Ai,{"session-id":(he=a.value)==null?void 0:he.id,"session-data":c.value},null,8,["session-id","session-data"])],512),[[We,g.value==="voting"&&I(o).isPresent.value]]),Be(t("div",rr,[t("div",ur,[t("div",dr,[$(Q,{name:"how_to_vote",size:"80px",color:"grey-5",class:"empty-state-icon"}),_[7]||(_[7]=t("div",{class:"empty-state-title"},"Acesso \xE0 Vota\xE7\xE3o Restrito",-1)),_[8]||(_[8]=t("div",{class:"empty-state-subtitle"}," Voc\xEA precisa estar presente no qu\xF3rum para acessar a tela de vota\xE7\xE3o. ",-1))])])],512),[[We,g.value==="voting"&&!I(o).isPresent.value]])]),$(Fi,{modelValue:g.value,"onUpdate:modelValue":_[0]||(_[0]=ie=>g.value=ie),tabs:q.value,onTabChange:P},null,8,["modelValue","tabs"])])):O("",!0),a.value&&c.value?(v(),k("div",cr,[$(wt,{modelValue:ee.value,"onUpdate:modelValue":_[1]||(_[1]=ie=>ee.value=ie),speech:I(x).currentSpeech.value,"remaining-time":I(x).remainingTime.value,"used-seconds":I(x).usedSeconds.value,"expedient-type":I(n).smallExpedientName.value||"Pequeno Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),$(wt,{modelValue:B.value,"onUpdate:modelValue":_[2]||(_[2]=ie=>B.value=ie),speech:I(h).currentSpeech.value,"remaining-time":I(h).remainingTime.value,"used-seconds":I(h).usedSeconds.value,"expedient-type":I(n).largeExpedientName.value||"Grande Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),I(n).enableMiscellaneousSubjects.value?(v(),K(wt,{key:0,modelValue:z.value,"onUpdate:modelValue":_[3]||(_[3]=ie=>z.value=ie),speech:I(w).currentSpeech.value,"remaining-time":I(w).remainingTime.value,"used-seconds":I(w).usedSeconds.value,"expedient-type":I(n).miscellaneousSubjectsName.value||"Assuntos Diversos"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"])):O("",!0),$(To,{modelValue:D.value,"onUpdate:modelValue":_[4]||(_[4]=ie=>D.value=ie),reading:I(p).activeReading.value,"agenda-id":(we=a.value)==null?void 0:we.id,"has-request":I(C).hasRequest.value,"current-speech":I(C).currentSpeech.value,"request-order":I(C).requestOrder.value,onRequestRegistered:_[5]||(_[5]=ie=>I(C).loadStatus(!0))},null,8,["modelValue","reading","agenda-id","has-request","current-speech","request-order"]),((be=a.value)==null?void 0:be.id)&&I(o).isPresent.value?(v(),K(Kl,{key:1,modelValue:V.value,"onUpdate:modelValue":_[6]||(_[6]=ie=>V.value=ie),voting:I(p).activeVoting.value,"agenda-id":a.value.id,"on-vote-registered":I(p).handleVoteRegistered,onVoteRegistered:I(p).handleVoteRegistered},null,8,["modelValue","voting","agenda-id","on-vote-registered","onVoteRegistered"])):O("",!0)])):(v(),k("div",vr,[t("div",mr,[t("div",gr,[$(Q,{name:"waving_hand",size:"32px",class:"greeting-icon"}),t("div",fr,[t("div",hr," Ol\xE1, Ver. "+A(((xe=I(i).user)==null?void 0:xe.first_name)||"Vereador")+"! ",1),t("div",pr,A(G()),1)])])]),u.value.length>0?(v(),k("div",wr,[(v(!0),k(Ie,null,Re(u.value,(ie,ne)=>{var Ae;return v(),K(is,{key:((Ae=ie.session)==null?void 0:Ae.id)||ne,"scheduled-session":ie.session,propositions:ie.propositions,"is-future":ue(ie.session)},null,8,["scheduled-session","propositions","is-future"])}),128))])):(v(),k("div",br,[t("div",Sr,[t("div",yr,[$(Q,{name:"event_busy",size:"80px",color:"grey-5",class:"empty-state-icon"}),_[9]||(_[9]=t("div",{class:"empty-state-title"},"N\xE3o h\xE1 sess\xE3o ativa",-1)),_[10]||(_[10]=t("div",{class:"empty-state-subtitle"}," N\xE3o existe sess\xE3o em andamento no momento. Quando houver sess\xE3o agendada com data futura, ela aparecer\xE1 aqui com a data e as proposi\xE7\xF5es que ser\xE3o votadas. ",-1))])])]))]))]}),_:1}))}};var Vr=ze(_r,[["__scopeId","data-v-0d1c1364"]]);export{Vr as default};
