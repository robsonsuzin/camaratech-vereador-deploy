import{c as Ne,f as u,h as oe,Q as lt,a as kt,O as oa,e as Vt,P as la,aF as ra,i as Je,a1 as te,aG as ua,aH as Et,F as gt,_ as je,R as f,S as le,U as Y,Y as a,ab as J,V,Z as T,X as Oe,a3 as C,a5 as G,a4 as Re,aI as Ce,aJ as Ee,a0 as Te,W as Ge,a7 as at,aK as da,aL as ca,B as rt,T as Rt,aM as va,az as Dt,j as Ft,l as jt,r as Z,aN as Ut,p as Nt,w as _e,aO as Ot,ac as Mt,$ as Ye,aP as Ze,g as mt,d as ht,u as Pe,ae as Fe,ad as Ae,a8 as fe,aj as ut,ag as I,aQ as Tt,k as ga,o as fa,aR as st,a2 as ma,a6 as ha,G as $e,n as ft,ao as Bt,aD as yt,ar as pt,H as et,aS as Qt,N as pa,aT as wa,aU as ba,m as xt,ah as De,aB as Sa,aC as _a,J as ya,aV as Jt,ak as xa,aW as Ht,aX as ze,aY as Qe}from"./index.417217c2.js";import{Q as qa}from"./QPage.6b446947.js";import{u as Xe}from"./socket.ae4aad7c.js";import{Q as tt,e as $a,g as Lt,f as ct}from"./QItem.5145f29e.js";import{Q as Le}from"./QBanner.45f094b3.js";import{Q as Wt}from"./QResizeObserver.9f1b47a3.js";const Ia=["top","middle","bottom"];var ot=Ne({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Ia.includes(e)}},setup(e,{slots:l}){const s=u(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=u(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>oe("div",{class:n.value,style:s.value,role:"status","aria-label":e.label},lt(l.default,e.label!==void 0?[e.label]:[]))}});const Aa={xs:8,sm:10,md:14,lg:20,xl:24};var wt=Ne({name:"QChip",props:{...kt,...oa,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:s}){const{proxy:{$q:n}}=Je(),t=Vt(e,n),d=la(e,Aa),v=u(()=>e.selected===!0||e.icon!==void 0),p=u(()=>e.selected===!0?e.iconSelected||n.iconSet.chip.selected:e.icon),m=u(()=>e.iconRemove||n.iconSet.chip.remove),y=u(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),E=u(()=>{const S=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(S?` text-${S} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(y.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),k=u(()=>{const S=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},H={...S,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove};return{chip:S,remove:H}});function A(S){S.keyCode===13&&$(S)}function $(S){e.disable||(s("update:selected",!e.selected),s("click",S))}function c(S){(S.keyCode===void 0||S.keyCode===13)&&(gt(S),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function w(){const S=[];y.value===!0&&S.push(oe("div",{class:"q-focus-helper"})),v.value===!0&&S.push(oe(te,{class:"q-chip__icon q-chip__icon--left",name:p.value}));const H=e.label!==void 0?[oe("div",{class:"ellipsis"},[e.label])]:void 0;return S.push(oe("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ua(l.default,H))),e.iconRight&&S.push(oe(te,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&S.push(oe(te,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:m.value,...k.value.remove,onClick:c,onKeyup:c})),S}return()=>{if(e.modelValue===!1)return;const S={class:E.value,style:d.value};return y.value===!0&&Object.assign(S,k.value.chip,{onClick:$,onKeyup:A}),ra("div",S,w(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Et,e.ripple]])}}});const ka={class:"tw-flex tw-items-center tw-gap-3"},Va={class:"card-icon-wrapper"},Ra={class:"card-title"},Ta={class:"session-info-compact tw-mb-3"},Ca={class:"session-info-row"},za={class:"session-info-col"},Pa={class:"session-info-value-compact"},Ma={class:"session-info-row"},La={class:"session-info-col"},Ea={class:"session-info-value-compact"},Da={key:0,class:"session-info-col"},Fa={class:"session-info-value-compact"},ja={key:1,class:"session-info-col"},Ua={class:"session-info-value-compact"},Na={class:"tw-flex tw-items-start tw-gap-3"},Oa={class:"tw-flex-1"},Ba={class:"status-message-text"},Qa={key:0},Ja={key:0},Ha={key:1},Wa={key:2},Ga={key:1},Ka={key:2},Ya={key:0,class:"tw-mt-3"},Xa={class:"propositions-title tw-mb-3"},Za={class:"proposition-count"},es={class:"group-header tw-flex tw-items-center tw-gap-2 tw-mb-2"},ts={class:"group-label tw-font-medium tw-text-gray-800"},as={class:"propositions-list tw-pl-6"},ss={class:"proposition-header"},ns={class:"proposition-number"},is={key:0,class:"proposition-title"},os={key:1,class:"proposition-proponents"},ls={key:0,class:"proponent-more"},rs={key:1,class:"empty-propositions tw-mt-4"},us={__name:"ScheduledSessionCard",props:{scheduledSession:{type:Object,default:null},propositionGroups:{type:Object,default:()=>({})},isFuture:{type:Boolean,default:!1}},emits:["open-pdf"],setup(e){const l=[{key:"ata",label:"Ata",icon:"description"},{key:"apresentacao",label:"Apresenta\xE7\xF5es em Plen\xE1rio",icon:"campaign"},{key:"votacao_turno_unico",label:"Vota\xE7\xE3o em Turno \xDAnico",icon:"how_to_vote"},{key:"votacao_1_turno",label:"Vota\xE7\xE3o em 1\xBA Turno",icon:"how_to_vote"},{key:"votacao_2_turno",label:"Vota\xE7\xE3o em 2\xBA Turno",icon:"how_to_vote"},{key:"votacao_ata",label:"Vota\xE7\xE3o da Ata",icon:"how_to_vote"},{key:"outros",label:"Outros",icon:"description"}],s=e;function n($){var c,w;return(w=(c=$==null?void 0:$.protocol_document)!=null?c:$==null?void 0:$.protocolDocument)!=null?w:null}function t($){var S,H,L;const c=n($);return c&&((L=(H=(S=c.signed_file_url)!=null?S:c.signedFileUrl)!=null?H:c.file_url)!=null?L:c.fileUrl)||null}function d($){const c=n($);return c&&c.title||"Abrir PDF"}const v=u(()=>l.map($=>({...$,items:s.propositionGroups[$.key]||[]}))),p=u(()=>v.value.filter($=>$.items&&$.items.length>0)),m=u(()=>p.value.reduce(($,c)=>$+c.items.length,0)),y=u(()=>m.value>0);function E(){var $;return(($=s.scheduledSession)==null?void 0:$.session_status)==="closed"?"header-closed":s.isFuture?"header-future":"header-today"}function k(){var $;return(($=s.scheduledSession)==null?void 0:$.session_status)==="closed"?"banner-closed":s.isFuture?"banner-future":"banner-today"}function A(){var $;return(($=s.scheduledSession)==null?void 0:$.session_status)==="closed"?"status-avatar-closed":s.isFuture?"status-avatar-future":"status-avatar-today"}return($,c)=>(f(),le(Ge,{class:"modern-card session-card slide-up"},{default:Y(()=>[a("div",{class:J(["card-header session-header",E()])},[a("div",ka,[a("div",Va,[V(te,{name:e.scheduledSession.session_status==="closed"?"event_busy":e.isFuture?"event_available":"event",size:"24px",class:"tw-text-white"},null,8,["name"])]),a("div",Ra,T(e.scheduledSession.session_status==="closed"?"Sess\xE3o Encerrada":e.isFuture?"Pr\xF3xima Sess\xE3o Futura":"Sess\xE3o \xE9 hoje"),1)])],2),V(Oe,{class:"tw-p-4 md:tw-p-6 session-card-section"},{default:Y(()=>[a("div",Ta,[a("div",Ca,[a("div",za,[V(te,{name:"title",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Pa,T(e.scheduledSession.name||"N\xE3o informado"),1)])]),a("div",Ma,[a("div",La,[V(te,{name:"calendar_today",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Ea,T(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"N\xE3o informado"),1)]),e.scheduledSession.session_time?(f(),C("div",Da,[V(te,{name:"schedule",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Fa,T(e.scheduledSession.session_time),1)])):G("",!0),e.scheduledSession.session_type?(f(),C("div",ja,[V(te,{name:"category",size:"16px",class:"tw-mr-1 tw-text-gray-600"}),a("span",Ua,T(e.scheduledSession.session_type),1)])):G("",!0)])]),a("div",{class:J(["session-status-banner tw-mb-4",k()])},[a("div",Na,[a("div",{class:J(["status-avatar",A()])},[V(te,{name:e.scheduledSession.session_status==="closed"?"check_circle":e.isFuture?"calendar_today":"schedule",size:"20px"},null,8,["name"])],2),a("div",Oa,[a("div",Ba,[e.scheduledSession.session_status==="closed"?(f(),C("span",Qa,[c[0]||(c[0]=Re(" Esta sess\xE3o j\xE1 foi encerrada ",-1)),e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date?(f(),C("span",Ja," em "+T(e.scheduledSession.closing_date_formatted||e.scheduledSession.closing_date),1)):G("",!0),e.scheduledSession.closing_time?(f(),C("span",Ha," \xE0s "+T(e.scheduledSession.closing_time),1)):G("",!0),!e.scheduledSession.closing_date_formatted&&!e.scheduledSession.closing_time?(f(),C("span",Wa," anteriormente ")):G("",!0),c[1]||(c[1]=Re(" . ",-1))])):e.isFuture?(f(),C("span",Ga," Esta sess\xE3o est\xE1 agendada para "+T(e.scheduledSession.session_date_formatted||e.scheduledSession.session_date||"data futura")+". Ainda n\xE3o \xE9 poss\xEDvel realizar a\xE7\xF5es. ",1)):(f(),C("span",Ka," A sess\xE3o ainda n\xE3o foi iniciada. Aguarde o in\xEDcio da sess\xE3o para realizar a\xE7\xF5es. "))])])])],2),y.value?(f(),C("div",Ya,[a("div",Xa,[V(te,{name:"description",size:"18px",class:"tw-mr-2"}),Re(" "+T(e.scheduledSession.session_status==="closed"?"Proposi\xE7\xF5es que foram votadas":"Proposi\xE7\xF5es que ser\xE3o votadas")+" ",1),a("span",Za,"("+T(m.value)+")",1)]),(f(!0),C(Ce,null,Ee(p.value,w=>(f(),C("div",{key:w.key,class:"proposition-group tw-mb-4"},[a("div",es,[V(te,{name:w.icon,size:"18px",class:"tw-text-gray-600"},null,8,["name"]),a("span",ts,T(w.label),1),V(ot,{color:"grey-6",label:w.items.length,class:"tw-ml-1"},null,8,["label"])]),a("div",as,[(f(!0),C(Ce,null,Ee(w.items,(S,H)=>(f(),C("div",{key:S.id||H,class:"proposition-item tw-flex tw-items-center tw-justify-between"},[a("div",null,[a("div",ss,[a("span",ns,T(S.species||"Proposi\xE7\xE3o")+" n\xBA "+T(S.number||"S/N")+"/"+T(S.year||new Date().getFullYear()),1)]),S.title?(f(),C("div",is,T(S.title),1)):G("",!0),S.proponents&&S.proponents.length>0?(f(),C("div",os,[(f(!0),C(Ce,null,Ee(S.proponents.slice(0,3),L=>(f(),le(wt,{key:L.id,size:"sm",class:"proponent-chip"},{default:Y(()=>[Re(T(L.name),1)]),_:2},1024))),128)),S.proponents.length>3?(f(),C("span",ls," +"+T(S.proponents.length-3)+" mais ",1)):G("",!0)])):G("",!0)]),a("div",null,[t(S)?(f(),le(Te,{key:0,flat:"",dense:"",size:"md",color:"primary",icon:"picture_as_pdf",class:"tw-mt-2",onClick:L=>$.$emit("open-pdf",t(S),d(S))},null,8,["onClick"])):G("",!0)])]))),128))])]))),128))])):(f(),C("div",rs,[V(te,{name:"inbox",size:"32px",class:"tw-mb-2",color:"grey-5"}),c[2]||(c[2]=a("div",{class:"empty-text"}," Nenhuma proposi\xE7\xE3o cadastrada nesta sess\xE3o ainda. ",-1))]))]),_:1})]),_:1}))}};var ds=je(us,[["__scopeId","data-v-c10633e4"]]);const cs={class:"tw-flex tw-items-center tw-gap-2"},vs={class:"text-h6 tw-font-semibold tw-text-gray-800"},gs=["src"],fs={key:1,class:"tw-flex tw-items-center tw-justify-center tw-h-full tw-text-gray-500"},ms={class:"tw-text-center"},hs={__name:"PdfViewerModal",props:{modelValue:{type:Boolean,default:!1},pdfUrl:{type:String,default:null},title:{type:String,default:"Documento PDF"}},emits:["update:modelValue"],setup(e){return(l,s)=>(f(),le(at,{"model-value":e.modelValue,maximized:"",persistent:"","transition-show":"slide-up","transition-hide":"slide-down","onUpdate:modelValue":s[1]||(s[1]=n=>l.$emit("update:modelValue",n))},{default:Y(()=>[V(Ge,{class:"pdf-viewer-modal-card tw-flex tw-flex-col tw-h-full"},{default:Y(()=>[V(Oe,{class:"tw-flex tw-items-center tw-justify-between tw-shrink-0 tw-border-b tw-border-gray-200 tw-bg-gray-50"},{default:Y(()=>[a("div",cs,[V(te,{name:"picture_as_pdf",size:"24px",color:"primary"}),a("span",vs,T(e.title||"Documento PDF"),1)]),V(Te,{flat:"",round:"",dense:"",icon:"close",color:"grey-7",onClick:s[0]||(s[0]=n=>l.$emit("update:modelValue",!1))},{default:Y(()=>[V(tt,null,{default:Y(()=>[...s[2]||(s[2]=[Re("Fechar",-1)])]),_:1})]),_:1})]),_:1}),V(Oe,{class:"tw-flex-1 tw-min-h-0 tw-p-0 tw-overflow-hidden"},{default:Y(()=>[e.pdfUrl?(f(),C("iframe",{key:0,src:e.pdfUrl,class:"pdf-iframe",title:"Visualiza\xE7\xE3o do PDF"},null,8,gs)):(f(),C("div",fs,[a("div",ms,[V(te,{name:"description",size:"48px",class:"tw-mb-2"}),s[3]||(s[3]=a("p",null,"Nenhum documento dispon\xEDvel.",-1))])]))]),_:1})]),_:1})]),_:1},8,["model-value"]))}};var bt=je(hs,[["__scopeId","data-v-07151cc6"]]);const ps='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';var ws=Ne({name:"QSpinnerDots",props:da,setup(e){const{cSize:l,classes:s}=ca(e);return()=>oe("svg",{class:s.value,fill:"currentColor",width:l.value,height:l.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:ps})}}),bs=Ne({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:l,emit:s}){let n=!1,t,d,v=null,p=null,m,y;function E(){t==null||t(),t=null,n=!1,v!==null&&(clearTimeout(v),v=null),p!==null&&(clearTimeout(p),p=null),d==null||d.removeEventListener("transitionend",m),m=null}function k(w,S,H){S!==void 0&&(w.style.height=`${S}px`),w.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,t=H}function A(w,S){w.style.overflowY=null,w.style.height=null,w.style.transition=null,E(),S!==y&&s(S)}function $(w,S){let H=0;d=w,n===!0?(E(),H=w.offsetHeight===w.scrollHeight?0:void 0):(y="hide",w.style.overflowY="hidden"),k(w,H,S),v=setTimeout(()=>{v=null,w.style.height=`${w.scrollHeight}px`,m=L=>{p=null,(Object(L)!==L||L.target===w)&&A(w,"show")},w.addEventListener("transitionend",m),p=setTimeout(m,e.duration*1.1)},100)}function c(w,S){let H;d=w,n===!0?E():(y="show",w.style.overflowY="hidden",H=w.scrollHeight),k(w,H,S),v=setTimeout(()=>{v=null,w.style.height=0,m=L=>{p=null,(Object(L)!==L||L.target===w)&&A(w,"hide")},w.addEventListener("transitionend",m),p=setTimeout(m,e.duration*1.1)},100)}return rt(()=>{n===!0&&E()}),()=>oe(Rt,{css:!1,appear:e.appear,onEnter:$,onLeave:c},l.default)}});const Ke=va({}),Ss=Object.keys(Dt);var _s=Ne({name:"QExpansionItem",props:{...Dt,...Ft,...kt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...jt,"click","afterShow","afterHide"],setup(e,{slots:l,emit:s}){const{proxy:{$q:n}}=Je(),t=Vt(e,n),d=Z(e.modelValue!==null?e.modelValue:e.defaultOpened),v=Z(null),p=Ut(),{show:m,hide:y,toggle:E}=Nt({showing:d});let k,A;const $=u(()=>`q-expansion-item q-item-type q-expansion-item--${d.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),c=u(()=>{if(e.contentInsetLevel===void 0)return null;const W=n.lang.rtl===!0?"Right":"Left";return{["padding"+W]:e.contentInsetLevel*56+"px"}}),w=u(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),S=u(()=>{const W={};return Ss.forEach(r=>{W[r]=e[r]}),W}),H=u(()=>w.value===!0||e.expandIconToggle!==!0),L=u(()=>e.expandedIcon!==void 0&&d.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),F=u(()=>e.disable!==!0&&(w.value===!0||e.expandIconToggle===!0)),Q=u(()=>({expanded:d.value===!0,detailsId:p.value,toggle:E,show:m,hide:y})),q=u(()=>{const W=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[d.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":d.value===!0?"true":"false","aria-controls":p.value,"aria-label":W}});_e(()=>e.group,W=>{A==null||A(),W!==void 0&&P()});function D(W){w.value!==!0&&E(W),s("click",W)}function b(W){W.keyCode===13&&U(W,!0)}function U(W,r){var z;r!==!0&&W.qAvoidFocus!==!0&&((z=v.value)==null||z.focus()),E(W),gt(W)}function O(){s("afterShow")}function B(){s("afterHide")}function P(){k===void 0&&(k=Ot()),d.value===!0&&(Ke[e.group]=k);const W=_e(d,z=>{z===!0?Ke[e.group]=k:Ke[e.group]===k&&delete Ke[e.group]}),r=_e(()=>Ke[e.group],(z,j)=>{j===k&&z!==void 0&&z!==k&&y()});A=()=>{W(),r(),Ke[e.group]===k&&delete Ke[e.group],A=void 0}}function N(){const W={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},r=[oe(te,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&d.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:L.value})];return F.value===!0&&(Object.assign(W,{tabindex:0,...q.value,onClick:U,onKeyup:b}),r.unshift(oe("div",{ref:v,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),oe(ct,W,()=>r)}function _(){let W;return l.header!==void 0?W=[].concat(l.header(Q.value)):(W=[oe(ct,()=>[oe(Lt,{lines:e.labelLines},()=>e.label||""),e.caption?oe(Lt,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&W[e.switchToggleSide===!0?"push":"unshift"](oe(ct,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>oe(te,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&W[e.switchToggleSide===!0?"unshift":"push"](N()),W}function M(){const W={ref:"item",style:e.headerStyle,class:e.headerClass,dark:t.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return H.value===!0&&(W.clickable=!0,W.onClick=D,Object.assign(W,w.value===!0?S.value:q.value)),oe($a,W,_)}function ae(){return Ye(oe("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:c.value,id:p.value},mt(l.default)),[[Ze,d.value]])}function re(){const W=[M(),oe(bs,{duration:e.duration,onShow:O,onHide:B},ae)];return e.expandSeparator===!0&&W.push(oe(Mt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:t.value}),oe(Mt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:t.value})),W}return e.group!==void 0&&P(),rt(()=>{A==null||A()}),()=>oe("div",{class:$.value},[oe("div",{class:"q-expansion-item__container relative-position"},re())])}});const Gt=ht("quorum",{state:()=>({isPresent:!1,isAbsentJustified:!1,absenceReason:null,quorumFinalized:!1,quorumStarted:!1,quorumFinalizedAt:null,loadingQuorum:!1,loadingAttendance:!1,loadingJustify:!1,quorumStatusCache:null,quorumStatusLastUpdate:null,QUORUM_STATUS_TTL:2e3,attendanceStatusCache:null,attendanceStatusLastUpdate:null,ATTENDANCE_STATUS_TTL:2e3,_quorumStatusLoadingPromise:null,_attendanceStatusLoadingPromise:null}),getters:{proponentId(){var l;return((l=Pe().user)==null?void 0:l.proponent_id)||null},unitId(){const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId;return l?parseInt(l):null},canSend(){var t;const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId,s=l?parseInt(l):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadQuorumStatus(e,l=!1){if(!e){this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null;return}if(!l&&this.quorumStatusCache&&this.quorumStatusLastUpdate){const n=Date.now()-this.quorumStatusLastUpdate;if(n<this.QUORUM_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de quorum status (${n}ms atr\xE1s)`),this.quorumStatusCache}if(this._quorumStatusLoadingPromise)return this._quorumStatusLoadingPromise;if(this.loadingQuorum){console.log("[QuorumStore] loadQuorumStatus j\xE1 em andamento, ignorando.");return}return this.loadingQuorum=!0,this._quorumStatusLoadingPromise=(async()=>{var s,n;try{const t=await Ae.get(`/pauta/${e}/quorum/status`),d=((s=t==null?void 0:t.data)==null?void 0:s.success)&&((n=t==null?void 0:t.data)==null?void 0:n.data)?t.data.data:null;return d?(this.quorumStarted=d.is_started||!1,this.quorumFinalized=d.is_finalized||!1,this.quorumFinalizedAt=d.finalized_at||null):(this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null),this.quorumStatusCache=d,this.quorumStatusLastUpdate=Date.now(),d}catch(t){throw console.error("Erro ao carregar status do qu\xF3rum:",t),this.quorumStarted=!1,this.quorumFinalized=!1,this.quorumFinalizedAt=null,this.quorumStatusCache=null,t}finally{this.loadingQuorum=!1,this._quorumStatusLoadingPromise=null}})(),this._quorumStatusLoadingPromise},async loadCurrentAttendanceStatus(e,l=!1){if(!e||!this.proponentId){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null;return}if(!l&&this.attendanceStatusCache&&this.attendanceStatusLastUpdate){const n=Date.now()-this.attendanceStatusLastUpdate;if(n<this.ATTENDANCE_STATUS_TTL)return console.log(`[QuorumStore] Usando cache de attendance status (${n}ms atr\xE1s)`),this.attendanceStatusCache}return this._attendanceStatusLoadingPromise?this._attendanceStatusLoadingPromise:(this._attendanceStatusLoadingPromise=(async()=>{var s,n;try{const t=await Ae.get(`/pauta/${e}/session-members`),v=(((n=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:n.members)||[]).find(p=>p.proponent_id===this.proponentId);return this.isPresent=(v==null?void 0:v.is_present)||!1,this.isAbsentJustified=(v==null?void 0:v.is_absent_justified)||!1,this.absenceReason=(v==null?void 0:v.absence_reason)||null,this.attendanceStatusCache=v,this.attendanceStatusLastUpdate=Date.now(),v}catch(t){throw console.error("Erro ao carregar estado da presen\xE7a:",t),this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.attendanceStatusCache=null,t}finally{this._attendanceStatusLoadingPromise=null}})(),this._attendanceStatusLoadingPromise)},invalidateQuorumStatusCache(){this.quorumStatusCache=null,this.quorumStatusLastUpdate=null},invalidateAttendanceStatusCache(){this.attendanceStatusCache=null,this.attendanceStatusLastUpdate=null},resetState(){this.isPresent=!1,this.isAbsentJustified=!1,this.absenceReason=null,this.quorumFinalized=!1,this.quorumStarted=!1,this.quorumFinalizedAt=null,this.invalidateQuorumStatusCache(),this.invalidateAttendanceStatusCache()}}});function Kt(e){const l=Xe(),s=Pe(),n=Gt(),t=u(()=>n.isPresent),d=u(()=>n.isAbsentJustified),v=u(()=>n.absenceReason),p=u(()=>n.quorumFinalized),m=u(()=>n.quorumStarted),y=u(()=>n.quorumFinalizedAt),E=u(()=>n.loadingQuorum),k=u(()=>n.loadingAttendance),A=u(()=>n.loadingJustify||!1),$=u(()=>n.canSend);async function c(){return await n.loadQuorumStatus(e.value)}async function w(){return await n.loadCurrentAttendanceStatus(e.value)}async function S(){var L,F,Q,q,D;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){fe.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isAbsentJustified){fe.warning("N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 uma justificativa de aus\xEAncia registrada.");return}if(n.isPresent){fe.warning("N\xE3o \xE9 poss\xEDvel desmarcar a presen\xE7a ap\xF3s ela ser registrada.");return}if(!n.loadingAttendance){n.loadingAttendance=!0;try{(L=(await Ae.post(`/pauta/${e.value}/session-attendance/register`,{proponent_id:parseInt(n.proponentId),present:!0})).data)!=null&&L.success&&(n.isPresent=!0,n.invalidateAttendanceStatusCache(),await n.loadCurrentAttendanceStatus(e.value,!0),l.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!0,userId:(F=s.user)==null?void 0:F.id,userName:(Q=s.user)==null?void 0:Q.first_name,source:"vereador"}),fe.success("Presen\xE7a registrada com sucesso!"))}catch(b){console.error("[Vereador] Erro ao registrar presen\xE7a:",b),fe.negative("Erro ao registrar presen\xE7a: "+(((D=(q=b.response)==null?void 0:q.data)==null?void 0:D.message)||b.message))}finally{n.loadingAttendance=!1}}}}async function H(L){var F,Q,q,D,b;if(!(!n.canSend||!e.value)){if(!n.quorumStarted||n.quorumFinalized){fe.warning(n.quorumFinalized?"O qu\xF3rum foi finalizado. N\xE3o \xE9 mais poss\xEDvel justificar aus\xEAncia.":"O qu\xF3rum ainda n\xE3o foi iniciado. Aguarde o in\xEDcio do qu\xF3rum.");return}if(n.isPresent){fe.warning("N\xE3o \xE9 poss\xEDvel justificar aus\xEAncia quando voc\xEA est\xE1 presente.");return}if(!n.loadingJustify){n.loadingJustify=!0;try{(F=(await Ae.post(`/pauta/${e.value}/session-absences/justify`,{proponent_id:parseInt(n.proponentId),absence_reason:L})).data)!=null&&F.success&&(n.isAbsentJustified=!0,n.absenceReason=L,n.invalidateAttendanceStatusCache(),l.emit("session-attendance",{unitId:parseInt(n.unitId),agendaId:parseInt(e.value),proponentId:parseInt(n.proponentId),present:!1,justified:!0,reason:L,userId:(Q=s.user)==null?void 0:Q.id,userName:(q=s.user)==null?void 0:q.first_name,source:"vereador"}),fe.success("Aus\xEAncia justificada com sucesso!"))}catch(U){console.error("[Vereador] Erro ao justificar aus\xEAncia:",U),fe.negative("Erro ao justificar aus\xEAncia: "+(((b=(D=U.response)==null?void 0:D.data)==null?void 0:b.message)||U.message))}finally{n.loadingJustify=!1}}}}return{isPresent:t,isAbsentJustified:d,absenceReason:v,quorumFinalized:p,quorumStarted:m,quorumFinalizedAt:y,loadingQuorum:E,loadingAttendance:k,loadingJustify:A,canSend:$,loadQuorumStatus:c,loadCurrentAttendanceStatus:w,toggleAttendance:S,justifyAbsence:H}}const Ct=ht("expedient",{state:()=>({smallExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1,members:[]},largeExpedient:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1,members:[]},miscellaneousSubject:{isRegistered:!1,started:!1,finalized:!1,finalizedAt:null,registrationOrder:null,registeredAt:null,loadingData:!1,loadingAction:!1,members:[]},statusCache:{small:null,large:null,miscellaneous:null},statusLastUpdate:{small:null,large:null,miscellaneous:null},STATUS_TTL:2e3,_statusLoadingPromises:{small:null,large:null,miscellaneous:null}}),getters:{proponentId(){var l;return((l=Pe().user)==null?void 0:l.proponent_id)||null},unitId(){const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId;return l?parseInt(l):null},canSend(){var t;const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId,s=l?parseInt(l):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n}},actions:{async loadStatus(e,l,s=!1){if(!e||!this.proponentId){this.resetState(l);return}const n=l==="small"?"small":l==="miscellaneous"?"miscellaneous":"large",t=n==="small"?this.smallExpedient:n==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient,d=n==="small"?"small-expedient":n==="miscellaneous"?"miscellaneous-subject":"large-expedient";if(!s&&t.loadingData){console.log(`[ExpedientStore ${n}] loadStatus j\xE1 em andamento, ignorando.`);return}if(!s&&this.statusCache[n]&&this.statusLastUpdate[n]){const p=Date.now()-this.statusLastUpdate[n];if(p<this.STATUS_TTL){console.log(`[ExpedientStore ${n}] Usando cache de status (${p}ms atr\xE1s)`);const m=this.statusCache[n];return t.started=m.started||!1,t.finalized=m.finalized||!1,t.finalizedAt=m.finalizedAt||null,t.isRegistered=m.isRegistered||!1,t.registrationOrder=m.registrationOrder||null,t.registeredAt=m.registeredAt||null,this.statusCache[n]}}return this._statusLoadingPromises[n]?this._statusLoadingPromises[n]:(t.loadingData=!0,this._statusLoadingPromises[n]=(async()=>{var v,p,m,y;try{console.log(`[ExpedientStore ${n}] Carregando status do ${d} para agenda ${e} (force: ${s})`);const E=await Ae.get(`/pauta/${e}/${d}/status`),k=((v=E==null?void 0:E.data)==null?void 0:v.success)&&((p=E==null?void 0:E.data)==null?void 0:p.data)?E.data.data:null;console.log(`[ExpedientStore ${n}] Resposta do status:`,k),k&&(t.started=k.is_started||!1,t.finalized=k.is_finalized||!1,t.finalizedAt=k.finalized_at||null,console.log(`[ExpedientStore ${n}] Status atualizado:`,{started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt}));const A=await Ae.get(`/pauta/${e}/${d}/members`),$=((y=(m=A==null?void 0:A.data)==null?void 0:m.data)==null?void 0:y.members)||[],c=$.find(S=>S.proponent_id===this.proponentId);t.isRegistered=(c==null?void 0:c.is_registered)||!1,t.registrationOrder=(c==null?void 0:c.registration_order)||null,t.registeredAt=(c==null?void 0:c.registered_at)||null;const w=$.filter(S=>S.is_registered&&S.registration_order!=null).sort((S,H)=>{var L,F;return((L=S.registration_order)!=null?L:0)-((F=H.registration_order)!=null?F:0)});return t.members=w,this.statusCache[n]={started:t.started,finalized:t.finalized,finalizedAt:t.finalizedAt,isRegistered:t.isRegistered,registrationOrder:t.registrationOrder,registeredAt:t.registeredAt},this.statusLastUpdate[n]=Date.now(),this.statusCache[n]}catch(E){throw console.error(`Erro ao carregar status do ${d}:`,E),this.resetState(l),E}finally{t.loadingData=!1,this._statusLoadingPromises[n]=null}})(),this._statusLoadingPromises[n])},invalidateStatusCache(e){const l=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large";this.statusCache[l]=null,this.statusLastUpdate[l]=null},resetState(e){const l=e==="small"?"small":e==="miscellaneous"?"miscellaneous":"large",s=l==="small"?this.smallExpedient:l==="miscellaneous"?this.miscellaneousSubject:this.largeExpedient;s.isRegistered=!1,s.started=!1,s.finalized=!1,s.finalizedAt=null,s.registrationOrder=null,s.registeredAt=null,s.members=[],this.invalidateStatusCache(e)}}});var nt=Object.freeze(Object.defineProperty({__proto__:null,useExpedientStore:Ct},Symbol.toStringTag,{value:"Module"}));function it(e,l="small"){const s=Xe(),n=Pe(),t=Ct(),d=l==="small"?"small":l==="miscellaneous"?"miscellaneous":"large",v=d==="small"?t.smallExpedient:d==="miscellaneous"?t.miscellaneousSubject:t.largeExpedient,p=l==="small"?"small-expedient":l==="miscellaneous"?"miscellaneous-subject":"large-expedient",m=l==="small"?"pequeno expediente":l==="miscellaneous"?"assuntos diversos":"grande expediente",y=u(()=>v.isRegistered),E=u(()=>v.started),k=u(()=>v.finalized),A=u(()=>v.finalizedAt),$=u(()=>v.registrationOrder),c=u(()=>v.registeredAt),w=u(()=>v.members||[]),S=u(()=>v.loadingData),H=u(()=>v.loadingAction),L=u(()=>t.canSend);async function F(q=!1){return await t.loadStatus(e.value,l,q)}async function Q(){var D,b,U,O,B,P;if(!t.canSend||!e.value)return;if(!v.started||v.finalized){fe.warning(v.finalized?`As inscri\xE7\xF5es de ${m} foram finalizadas.`:`As inscri\xE7\xF5es de ${m} ainda n\xE3o foram iniciadas.`);return}if(v.loadingAction)return;v.loadingAction=!0;const q=!v.isRegistered;try{const N=await Ae.post(`/pauta/${e.value}/${p}/register`,{proponent_id:parseInt(t.proponentId),registered:q});(D=N.data)!=null&&D.success?(t.invalidateStatusCache(l),await F(),s.emit(`${p}-registration`,{unitId:parseInt(t.unitId),agendaId:parseInt(e.value),proponentId:parseInt(t.proponentId),registered:q,userId:(b=n.user)==null?void 0:b.id,userName:(U=n.user)==null?void 0:U.first_name,source:"vereador"}),q&&v.registrationOrder?fe.success(`Inscri\xE7\xE3o realizada com sucesso! Sua posi\xE7\xE3o na fila: ${v.registrationOrder}\xBA`):fe.success(q?"Inscri\xE7\xE3o realizada com sucesso!":"Inscri\xE7\xE3o cancelada com sucesso!")):fe.error(((O=N.data)==null?void 0:O.message)||"Erro ao registrar inscri\xE7\xE3o.")}catch(N){console.error(`[Vereador] Erro ao registrar ${m} via API:`,N),fe.error("Erro ao registrar inscri\xE7\xE3o: "+(((P=(B=N.response)==null?void 0:B.data)==null?void 0:P.message)||N.message))}finally{v.loadingAction=!1}}return{isRegistered:y,started:E,finalized:k,finalizedAt:A,registrationOrder:$,registeredAt:c,members:w,loadingData:S,loadingAction:H,canSend:L,loadStatus:F,toggleRegistration:Q}}const ys=ht("voting",{state:()=>({votingStatus:null,activeReading:null,activeVoting:null,finishedReadings:[],quorumMembers:[],showReadingModal:!1,showVotingModal:!1,loadingVoting:!1,votingStatusCache:null,votingStatusLastUpdate:null,VOTING_STATUS_TTL:2e3,_votingStatusLoadingPromise:null}),getters:{activeReadingIcon:e=>e.activeReading?e.activeReading.type==="reading"?"menu_book":e.activeReading.type==="secret_voting"?"lock":"how_to_vote":"menu_book",activeReadingLabel:e=>e.activeReading?e.activeReading.type==="reading"?e.activeReading.proposition_display_type==="apresentacao"?"Apresenta\xE7\xE3o em Plen\xE1rio":"Leitura no Plen\xE1rio":e.activeReading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":""},actions:{async loadVotingStatus(e,l=!1){if(!e){const s=!!this.activeReading,n=!!this.activeVoting;this.votingStatus=null,this.activeReading=null,this.activeVoting=null,s&&(this.showReadingModal=!1),n&&(this.showVotingModal=!1);return}if(!l&&this.votingStatusCache&&this.votingStatusLastUpdate){const n=Date.now()-this.votingStatusLastUpdate;if(n<this.VOTING_STATUS_TTL)return console.log(`[VotingStore] Usando cache de voting status (${n}ms atr\xE1s)`),this.votingStatusCache}if(this._votingStatusLoadingPromise||this.loadingVoting){if(!l)return this._votingStatusLoadingPromise||Promise.resolve();await this._votingStatusLoadingPromise,this._votingStatusLoadingPromise=null}return this.loadingVoting=!0,this._votingStatusLoadingPromise=(async()=>{var s,n,t,d;try{const v=await Ae.get(`/pauta/${e}/voting/status`);if((s=v.data)!=null&&s.success){this.votingStatus=v.data.data,this.finishedReadings=((n=v.data.data)==null?void 0:n.finished_readings)||[];const p=v.data.data,m=p==null?void 0:p.active_voting_ata,y=p==null?void 0:p.active_voting_propositions,E=p==null?void 0:p.active_voting;this.quorumMembers=(m==null?void 0:m.quorum_members)||(y==null?void 0:y.quorum_members)||(E==null?void 0:E.quorum_members)||[];const k=(t=this.activeReading)==null?void 0:t.id,A=(d=this.activeVoting)==null?void 0:d.id,$=!!this.activeReading,c=!!this.activeVoting,w=[...(m==null?void 0:m.readings)||[],...(y==null?void 0:y.readings)||[],...(E==null?void 0:E.readings)||[]].filter(Q=>!Q.finished_at);if(w.length){const Q=w.find(b=>b.type==="secret_voting"),q=w.find(b=>b.type==="voting"),D=w.find(b=>b.type==="reading");Q?(this.activeVoting=Q,this.activeReading=null):q?(this.activeVoting=q,this.activeReading=null):D?(this.activeReading=D,this.activeVoting=null):(this.activeReading=null,this.activeVoting=null)}else this.activeReading=null,this.activeVoting=null;const S=!k&&!A,H=$&&!this.activeReading&&!!this.activeVoting,L=this.activeVoting&&(S||this.activeVoting.id!==A||H),F=this.activeReading&&(S||this.activeReading.id!==k);L?(this.showVotingModal=!0,this.showReadingModal=!1):F&&!this.activeVoting&&(this.showReadingModal=!0,this.showVotingModal=!1),!this.activeVoting&&A&&(this.showVotingModal=!1),!this.activeReading&&k&&(this.showReadingModal=!1),this.votingStatusCache=v.data.data,this.votingStatusLastUpdate=Date.now()}}catch(v){throw console.error("[Vereador] Erro ao carregar status da vota\xE7\xE3o:",v),this.votingStatus=null,this.activeReading=null,this.activeVoting=null,this.showReadingModal=!1,this.showVotingModal=!1,this.votingStatusCache=null,v}finally{this.loadingVoting=!1,this._votingStatusLoadingPromise=null}})(),this._votingStatusLoadingPromise},invalidateVotingStatusCache(){this.votingStatusCache=null,this.votingStatusLastUpdate=null}}});function Yt(e){const l=ys(),s=u(()=>l.votingStatus),n=u(()=>l.activeReading),t=u(()=>l.activeVoting),d=u(()=>l.finishedReadings),v=u(()=>l.quorumMembers),p=u({get:()=>l.showReadingModal,set:c=>{l.showReadingModal=c}}),m=u({get:()=>l.showVotingModal,set:c=>{l.showVotingModal=c}}),y=u(()=>l.loadingVoting),E=u(()=>l.activeReadingIcon),k=u(()=>l.activeReadingLabel);async function A(c=!1){return await l.loadVotingStatus(e.value,c)}async function $(){return l.invalidateVotingStatusCache(),await A()}return{votingStatus:s,activeReading:n,activeVoting:t,finishedReadings:d,quorumMembers:v,showReadingModal:p,showVotingModal:m,loadingVoting:y,activeReadingIcon:E,activeReadingLabel:k,loadVotingStatus:A,handleVoteRegistered:$}}const xs=ht("voiceRequest",{state:()=>({hasRequest:!1,requestOrder:null,requestedAt:null,currentSpeech:null,allSpeeches:[],remainingTime:0,loadingData:!1,speechInterval:null,voiceRequestStatusCache:null,voiceRequestStatusLastUpdate:null,VOICE_REQUEST_STATUS_TTL:2e3,_voiceRequestStatusLoadingPromise:null}),getters:{proponentId(){var l;return((l=Pe().user)==null?void 0:l.proponent_id)||null},unitId(){const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId;return l?parseInt(l):null},canSend(){var t;const e=Pe(),l=Fe.getItem("unit_id_num")||e.currentUnitId,s=l?parseInt(l):null,n=((t=e.user)==null?void 0:t.proponent_id)||null;return!!s&&!!n},allFinishedSpeeches(){return this.allSpeeches.filter(e=>e.status==="finished").sort((e,l)=>new Date(l.finished_at||0)-new Date(e.finished_at||0))}},actions:{updateRemainingTime(){if(!this.currentSpeech){this.remainingTime=0;return}const e=this.currentSpeech;let l=e.used_seconds||0;e.status==="speaking"&&e.started_at&&(l+=Math.floor((new Date-new Date(e.started_at))/1e3));const s=(e.allocated_minutes+e.additional_minutes)*60;this.remainingTime=Math.max(0,s-l)},ensureSpeechInterval(){var e;!this.speechInterval&&((e=this.currentSpeech)==null?void 0:e.status)==="speaking"&&(this.speechInterval=setInterval(()=>{this.updateRemainingTime()},1e3))},clearSpeechInterval(){this.speechInterval&&(clearInterval(this.speechInterval),this.speechInterval=null)},async loadStatus(e,l=!1){if(!(!l&&this.loadingData)){if(!e||!this.proponentId){this.resetState();return}if(!l&&this.voiceRequestStatusCache&&this.voiceRequestStatusLastUpdate){const n=Date.now()-this.voiceRequestStatusLastUpdate;if(n<this.VOICE_REQUEST_STATUS_TTL)return console.log(`[VoiceRequestStore] Usando cache de voice request status (${n}ms atr\xE1s)`),this.voiceRequestStatusCache}return this._voiceRequestStatusLoadingPromise?this._voiceRequestStatusLoadingPromise:(this.loadingData=!0,this._voiceRequestStatusLoadingPromise=(async()=>{var s,n;try{const t=await Ae.get(`/api/pauta/${e}/voice-request/members`);let d=!1;if((s=t==null?void 0:t.data)!=null&&s.success){const m=(t.data.data.members||[]).find(y=>y.proponent_id===this.proponentId);d=(m==null?void 0:m.has_voice_request)&&!["finished","cancelled"].includes(m.request_status),this.hasRequest=d,this.requestOrder=(m==null?void 0:m.request_order)||null,this.requestedAt=(m==null?void 0:m.requested_at)||null}const v=await Ae.get(`/api/pauta/${e}/voice-request/speeches/status`);if((n=v==null?void 0:v.data)!=null&&n.success){const m=(v.data.data.speeches||[]).filter(y=>y.proponent_id===this.proponentId);if(this.allSpeeches=m,m.length>0)if(m.sort((y,E)=>{var c,w;const k={speaking:0,paused:1,finished:2},A=(c=k[y.status])!=null?c:99,$=(w=k[E.status])!=null?w:99;return A!==$?A-$:new Date(E.started_at||0)-new Date(y.started_at||0)}),d){const y=m.find(E=>E.status==="speaking"||E.status==="paused");this.currentSpeech=y||null}else this.currentSpeech=m[0];else this.currentSpeech=null;this.currentSpeech?(this.updateRemainingTime(),this.currentSpeech.status==="speaking"?this.ensureSpeechInterval():this.clearSpeechInterval()):this.clearSpeechInterval()}this.voiceRequestStatusCache={hasRequest:this.hasRequest,requestOrder:this.requestOrder,requestedAt:this.requestedAt,currentSpeech:this.currentSpeech,allSpeeches:this.allSpeeches},this.voiceRequestStatusLastUpdate=Date.now()}catch(t){throw console.error("Erro ao carregar status de pedido de voz:",t),this.resetState(),t}finally{this.loadingData=!1,this._voiceRequestStatusLoadingPromise=null}})(),this._voiceRequestStatusLoadingPromise)}},invalidateVoiceRequestStatusCache(){this.voiceRequestStatusCache=null,this.voiceRequestStatusLastUpdate=null},resetState(){this.hasRequest=!1,this.requestOrder=null,this.requestedAt=null,this.currentSpeech=null,this.allSpeeches=[],this.remainingTime=0,this.clearSpeechInterval(),this.invalidateVoiceRequestStatusCache()}}});function Xt(e){const l=xs(),s=u(()=>l.hasRequest),n=u(()=>l.requestOrder),t=u(()=>l.requestedAt),d=u(()=>l.currentSpeech),v=u(()=>l.allFinishedSpeeches),p=u(()=>l.remainingTime),m=u(()=>l.loadingData),y=u(()=>l.canSend);async function E($=!1){return await l.loadStatus(e.value,$)}function k(){l.resetState()}function A(){l.updateRemainingTime()}return _e(()=>l.currentSpeech,$=>{$?(l.updateRemainingTime(),$.status==="speaking"?l.ensureSpeechInterval():l.clearSpeechInterval()):(l.remainingTime=0,l.clearSpeechInterval())},{deep:!0,immediate:!0}),_e(()=>{var $;return($=l.currentSpeech)==null?void 0:$.additional_minutes},()=>{l.currentSpeech&&l.updateRemainingTime()}),{hasRequest:s,requestOrder:n,requestedAt:t,currentSpeech:d,allFinishedSpeeches:v,remainingTime:p,loadingData:m,canSend:y,loadStatus:E,resetState:k,updateRemainingTime:A}}const Me=Z(null),qt=Z(!1);function zt(){const e=u(()=>{var c;return((c=Me.value)==null?void 0:c.small_expedient_name)||"Pequeno Expediente"}),l=u(()=>{var c;return((c=Me.value)==null?void 0:c.large_expedient_name)||"Grande Expediente"}),s=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_small_expedient_speech)!=null?w:!0}),n=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_small_expedient)!=null?w:!0}),t=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_large_expedient)!=null?w:!0}),d=u(()=>{var c;return((c=Me.value)==null?void 0:c.voting_button_label)||"Ativar Vota\xE7\xE3o"}),v=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_voice_request_voting)!=null?w:!1}),p=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_voice_request_reading)!=null?w:!1}),m=u(()=>{var c,w;return(w=(c=Me.value)==null?void 0:c.enable_miscellaneous_subjects)!=null?w:!1}),y=u(()=>{var w;const c=(w=Me.value)==null?void 0:w.deduct_aside_time;return c===!0||c===1||c==="1"}),E=u(()=>{var c;return((c=Me.value)==null?void 0:c.miscellaneous_subjects_name)||"Assuntos Diversos"});async function k(){var c;if(!qt.value){if(Me.value)return Me.value;qt.value=!0;try{const{data:w}=await Ae.get("/api/config/sessao/settings");if((w==null?void 0:w.success)&&(w==null?void 0:w.data)){Me.value=w.data;const S=(c=w.data)==null?void 0:c.deduct_aside_time;console.log("[aporte] useSessionSettings:loadSettings",{deduct_aside_time:S,type:typeof S,parsed:S===!0||S===1||S==="1"})}}catch(w){console.error("[useSessionSettings] Erro ao carregar configura\xE7\xF5es:",w)}finally{qt.value=!1}}}function A(c){return c==="small"?e.value:c==="large"?l.value:c==="miscellaneous"?E.value:""}function $(){Me.value=null}return{smallExpedientName:e,largeExpedientName:l,enableSmallExpedientSpeech:s,enableSmallExpedient:n,enableLargeExpedient:t,votingButtonLabel:d,enableVoiceRequestVoting:v,enableVoiceRequestReading:p,enableMiscellaneousSubjects:m,deductAsideTime:y,miscellaneousSubjectsName:E,loadSettings:k,getExpedientName:A,clearCache:$}}var dt=Object.freeze(Object.defineProperty({__proto__:null,useSessionSettings:zt},Symbol.toStringTag,{value:"Module"}));const qs={class:"session-overview"},$s={class:"overview-card modern-card"},Is={class:"card-content"},As={class:"summary-title"},ks={class:"summary-grid"},Vs={class:"summary-item-col summary-item-col-left"},Rs={class:"tw-relative"},Ts={class:"summary-status tw-pt-2"},Cs={key:0,class:"summary-item-col summary-item-col-right session-info-compact"},zs={class:"session-info-line"},Ps={key:0,class:"session-info-line"},Ms={key:1,class:"session-info-line"},Ls={key:0,class:"info-banner"},Es={key:0,class:"propositions-section tw-mt-3"},Ds={class:"propositions-title-row tw-flex tw-items-center tw-justify-between tw-mb-3"},Fs={class:"propositions-title tw-mb-0"},js={class:"proposition-count"},Us={key:0,class:"propositions-loading tw-flex tw-flex-col tw-items-center tw-justify-center tw-py-10 tw-gap-3"},Ns={class:"group-header tw-flex tw-items-center tw-gap-2 tw-mb-2"},Os={class:"group-label tw-font-medium tw-text-gray-800"},Bs={class:"propositions-list tw-pl-6"},Qs={class:"proposition-item-main tw-flex tw-items-start tw-justify-between"},Js={class:"tw-flex-1 tw-min-w-0"},Hs={class:"proposition-header"},Ws={class:"proposition-number"},Gs={key:0,class:"proposition-title"},Ks={key:1,class:"proposition-proponents"},Ys={key:0,class:"proponent-more"},Xs={class:"tw-flex tw-items-center tw-gap-2 tw-min-w-0"},Zs={class:"tw-truncate tw-font-bold"},en={class:"voting-results-inner"},tn={class:"results-grid"},an={class:"result-item result-favor"},sn={class:"result-content"},nn={class:"result-value"},on={class:"result-item result-against"},ln={class:"result-content"},rn={class:"result-value"},un={class:"result-item result-abstain"},dn={class:"result-content"},cn={class:"result-value"},vn={class:"result-item result-total"},gn={class:"result-content"},fn={class:"result-value"},mn={key:0,class:"members-section"},hn={class:"members-grid"},pn={class:"member-card-content"},wn=["src","alt"],bn={key:1},Sn={class:"member-info"},_n={class:"member-name"},yn={key:0,class:"member-party"},xn={key:1,class:"secret-voting-message"},qn={class:"secret-message-count"},$n={key:2,class:"no-votes-message"},In={class:"tw-shrink-0 tw-ml-2"},An={__name:"SessionOverview",props:{sessionData:{type:Object,default:null},selectedAgendaId:{type:[Number,String],default:null},loading:{type:Boolean,default:!1}},setup(e){const l=e,s=Xe();zt();const n=Kt(u(()=>l.selectedAgendaId));it(u(()=>l.selectedAgendaId),"small"),it(u(()=>l.selectedAgendaId),"large");const t=Yt(u(()=>l.selectedAgendaId));Xt(u(()=>l.selectedAgendaId));const d=Z({ata:[],apresentacao:[],votacao_turno_unico:[],votacao_1_turno:[],votacao_2_turno:[],votacao_ata:[],outros:[]}),v=Z(!1),p=[{key:"ata",label:"Ata",icon:"description"},{key:"apresentacao",label:"Apresenta\xE7\xF5es em Plen\xE1rio",icon:"campaign"},{key:"votacao_turno_unico",label:"Vota\xE7\xE3o em Turno \xDAnico",icon:"how_to_vote"},{key:"votacao_1_turno",label:"Vota\xE7\xE3o em 1\xBA Turno",icon:"how_to_vote"},{key:"votacao_2_turno",label:"Vota\xE7\xE3o em 2\xBA Turno",icon:"how_to_vote"},{key:"votacao_ata",label:"Vota\xE7\xE3o da Ata",icon:"how_to_vote"},{key:"outros",label:"Outros",icon:"description"}];function m(g){var h,i;const o=g==null?void 0:g.proposition;return o?{id:o.id,number:o.number,year:o.year,title:o.title,ementa:o.ementa,description:o.description,species:((h=o.species)==null?void 0:h.name)||((i=o.species)==null?void 0:i.title)||null,proponents:o.proponents||[],documents:o.documents||[],file_url:o.file_url||null,protocol_document:o.protocol_document||o.protocolDocument||null}:null}const y=u(()=>p.map(g=>({...g,items:(d.value[g.key]||[]).map(m).filter(Boolean)})));u(()=>y.value.some(g=>g.items.length>0));const E=u(()=>y.value.filter(g=>g.items.length>0)),k=u(()=>E.value.reduce((g,o)=>g+o.items.length,0)),A=u(()=>{var g;return(g=t==null?void 0:t.finishedReadings)!=null&&g.value?t.finishedReadings.value.filter(o=>o.type==="voting"||o.type==="secret_voting"):[]}),$=u(()=>{const g={};return A.value.forEach(o=>{var h;(h=o.proposition)!=null&&h.id&&(g[o.proposition.id]=o)}),g});function c(g){var o;return g&&(o=$.value[g])!=null?o:null}function w(g){if(!g)return"";if(g.type==="secret_voting")return"Vota\xE7\xE3o secreta";const o=b(g.votes,"favor"),h=b(g.votes,"against");return o>h?"APROVADO":"REJEITADO"}function S(g){if(!g)return"help";if(g.type==="secret_voting")return"lock";const o=b(g.votes,"favor"),h=b(g.votes,"against");return o>h?"check_circle":"cancel"}function H(g){if(!g)return"";if(g.type==="secret_voting")return"bg-grey-3 text-grey-9";const o=b(g.votes,"favor"),h=b(g.votes,"against");return o>h?"bg-green-2 text-green-9":"bg-red-2 text-red-9"}function L(g){if(!g)return"";if(g.type==="secret_voting")return"text-grey-9";const o=b(g.votes,"favor"),h=b(g.votes,"against");return o>h?"text-green-9":"text-red-9"}function F(g){if(!g)return"bg-grey-2";if(g.type==="secret_voting")return"bg-grey-3";const o=b(g.votes,"favor"),h=b(g.votes,"against");return o>h?"bg-green-2":"bg-red-2"}const Q=u(()=>{var h,i,x,X;const g=l.sessionData;return g&&((X=(x=g.agenda_pdf_url)!=null?x:(i=(h=g.documents)==null?void 0:h[0])==null?void 0:i.file_url)!=null?X:null)||null});function q(){return"https://api.camaratech.com.br".replace(/\/api\/?$/,"")}function D(){let g=Q.value;if(!g){fe.warning("PDF da pauta n\xE3o est\xE1 dispon\xEDvel.");return}!g.startsWith("http://")&&!g.startsWith("https://")&&(g=q()+(g.startsWith("/")?g:"/"+g)),z.value=g,j.value="Pauta do Dia",r.value=!0}function b(g,o){return!g||!Array.isArray(g)?0:g.filter(h=>h.vote===o).length}function U(g){switch(g){case"favor":return"thumb_up";case"against":return"thumb_down";case"abstain":return"remove_circle";default:return"help"}}function O(g){switch(g){case"favor":return"green";case"against":return"red";case"abstain":return"orange";default:return"grey"}}function B(g){switch(g){case"favor":return"tw-bg-green-50 tw-border-green-200";case"against":return"tw-bg-red-50 tw-border-red-200";case"abstain":return"tw-bg-orange-50 tw-border-orange-200";default:return""}}function P(g){if(!g)return"";const o=g.split(" ");return o.length>=2?(o[0][0]+o[o.length-1][0]).toUpperCase():g.substring(0,2).toUpperCase()}function N(g){if(!g)return null;if(g.startsWith("http://")||g.startsWith("https://"))return g;const o={}.VITE_API_BASE_URL||"https://api.camaratech.com.br",h=(typeof o=="string"?o:"").replace(/\/api\/?$/,"");return g.startsWith("/")?`${h}${g}`:`${h}/${g}`}function _(g){return!g||g.type==="secret_voting"||!g.votes||!Array.isArray(g.votes)?!1:g.votes.length>0}async function M(){var g;if(!l.selectedAgendaId){d.value={ata:[],apresentacao:[],votacao_turno_unico:[],votacao_1_turno:[],votacao_2_turno:[],votacao_ata:[],outros:[]};return}v.value=!0;try{const o=await Ae.get(`/api/pauta/${l.selectedAgendaId}/agenda-itens-controle`),h=((g=o==null?void 0:o.data)==null?void 0:g.data)||{};d.value={ata:h.ata||[],apresentacao:h.apresentacao||[],votacao_turno_unico:h.votacao_turno_unico||[],votacao_1_turno:h.votacao_1_turno||[],votacao_2_turno:h.votacao_2_turno||[],votacao_ata:h.votacao_ata||[],outros:h.outros||[]}}catch(o){console.error("[SessionOverview] Erro ao carregar proposi\xE7\xF5es:",o),d.value={ata:[],apresentacao:[],votacao_turno_unico:[],votacao_1_turno:[],votacao_2_turno:[],votacao_ata:[],outros:[]}}finally{v.value=!1}}_e(()=>l.selectedAgendaId,g=>{g?(M(),t!=null&&t.loadVotingStatus&&t.loadVotingStatus()):d.value={ata:[],apresentacao:[],votacao_turno_unico:[],votacao_1_turno:[],votacao_2_turno:[],votacao_ata:[],outros:[]}},{immediate:!0});function ae(g){var o,h;return(h=(o=g==null?void 0:g.protocol_document)!=null?o:g==null?void 0:g.protocolDocument)!=null?h:null}function re(g){const o=ae(g);return o&&(o.signed_file_url||o.signedFileUrl||o.file_url||o.fileUrl)||null}function W(g){const o=ae(g);return o?o.title||"Abrir PDF do Protocolo":"Abrir PDF"}const r=Z(!1),z=Z(null),j=Z("Documento PDF");function ue(g,o="Documento PDF"){z.value=g,j.value=o,r.value=!0}ut(()=>{l.selectedAgendaId&&(M(),t!=null&&t.loadVotingStatus&&t.loadVotingStatus())}),u(()=>{const g=l.sessionData;if(!(g!=null&&g.session_date)||g.session_status!=="started")return!1;const o=new Date,h=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`;return(g.session_date||"").slice(0,10)===h});function he(){if(l.loading)return"Carregando...";if(l.sessionData){const g=l.sessionData.name||"Em Andamento";return g.length>20?g.substring(0,20)+"...":g}return"Aguardando"}function xe(){var g,o,h,i,x,X,se,ie;return n?(g=n.quorumFinalized)!=null&&g.value?(o=n.isPresent)!=null&&o.value?"Presente":(h=n.isAbsentJustified)!=null&&h.value?"Ausente Justificado":"Ausente":(i=n.quorumStarted)!=null&&i.value?(x=n.isPresent)!=null&&x.value?"Presente":"Aguardando":(X=n.quorumFinalizedAt)!=null&&X.value?(se=n.isPresent)!=null&&se.value?"Presente":(ie=n.isAbsentJustified)!=null&&ie.value?"Ausente Justificado":"Ausente":"Aguardando":"Aguardando"}function we(){var g,o,h,i;return n?(g=n.quorumFinalized)!=null&&g.value?(o=n.isPresent)!=null&&o.value?"status-success":"status-error":(h=n.quorumStarted)!=null&&h.value?(i=n.isPresent)!=null&&i.value?"status-success":"status-warning":"status-info":"status-info"}return(g,o)=>{var h,i,x,X,se,ie,ne,ce,de,be,ye,ge,ke,Ie;return f(),C("div",qs,[a("div",$s,[a("div",Is,[a("div",As,[V(te,{name:"dashboard",size:"20px",class:"tw-mr-2"}),o[1]||(o[1]=Re(" Resumo R\xE1pido ",-1))]),a("div",ks,[a("div",{class:J(["summary-item summary-item-cols",{active:l.sessionData}])},[a("div",Vs,[a("div",Rs,[V(te,{name:"event",color:l.sessionData?"primary":"grey",size:"30px"},null,8,["color"]),I(s).isConnected?(f(),le(ot,{key:0,color:"positive",size:"xs",class:"session-badge"})):G("",!0)]),a("div",Ts,T(he()),1)]),l.sessionData?(f(),C("div",Cs,[a("div",zs,T(l.sessionData.session_date_formatted||l.sessionData.session_date||"N/A"),1),l.sessionData.session_time?(f(),C("div",Ps,T(l.sessionData.session_time),1)):G("",!0),l.sessionData.session_type?(f(),C("div",Ms,T(l.sessionData.session_type),1)):G("",!0)])):G("",!0)],2),a("div",{class:J(["summary-item",{active:((i=(h=I(n))==null?void 0:h.quorumStarted)==null?void 0:i.value)||((X=(x=I(n))==null?void 0:x.quorumFinalized)==null?void 0:X.value)||((ie=(se=I(n))==null?void 0:se.quorumFinalizedAt)==null?void 0:ie.value)}])},[V(te,{name:(ce=(ne=I(n))==null?void 0:ne.isPresent)!=null&&ce.value?"check_circle":"groups",color:(be=(de=I(n))==null?void 0:de.isPresent)!=null&&be.value?"positive":((ge=(ye=I(n))==null?void 0:ye.quorumFinalized)==null?void 0:ge.value)||((Ie=(ke=I(n))==null?void 0:ke.quorumFinalizedAt)==null?void 0:Ie.value)?"primary":"grey",size:"24px"},null,8,["name","color"]),o[2]||(o[2]=a("div",{class:"summary-label"},"Qu\xF3rum",-1)),a("div",{class:J(["summary-status",we()])},T(xe()),3)],2)]),l.selectedAgendaId?G("",!0):(f(),C("div",Ls,[V(te,{name:"info",color:"primary",size:"18px",class:"tw-mr-2"}),o[3]||(o[3]=a("span",{class:"banner-text"},"Aguardando sess\xE3o ser iniciada...",-1))]))])]),l.selectedAgendaId?(f(),C("div",Es,[a("div",Ds,[a("div",Fs,[V(te,{name:"description",size:"18px",class:"tw-mr-2"}),o[4]||(o[4]=Re(" Proposi\xE7\xF5es do Dia ",-1)),a("span",js,"("+T(v.value?"...":k.value)+")",1)]),V(Te,{size:"md",color:"primary",outline:"",icon:"picture_as_pdf",label:"Pauta PDF",disable:!Q.value,onClick:D},{default:Y(()=>[V(tt,null,{default:Y(()=>[Re(T(Q.value?"Abrir pauta do dia em PDF":"PDF da pauta n\xE3o dispon\xEDvel"),1)]),_:1})]),_:1},8,["disable"])]),v.value?(f(),C("div",Us,[V(ws,{color:"primary",size:"40px"}),o[5]||(o[5]=a("span",{class:"text-grey-7"},"Carregando pauta...",-1))])):(f(!0),C(Ce,{key:1},Ee(E.value,qe=>(f(),C("div",{key:qe.key,class:"proposition-group tw-mb-4"},[a("div",Ns,[V(te,{name:qe.icon,size:"18px",class:"tw-text-gray-600"},null,8,["name"]),a("span",Os,T(qe.label),1),V(ot,{color:"grey-6",label:qe.items.length,class:"tw-ml-1"},null,8,["label"])]),a("div",Bs,[(f(!0),C(Ce,null,Ee(qe.items,R=>(f(),C("div",{key:R.id,class:"proposition-item proposition-item-with-expansion"},[a("div",Qs,[a("div",Js,[a("div",Hs,[a("span",Ws,T(R.species||"Proposi\xE7\xE3o")+" n\xBA "+T(R.number||"S/N")+"/"+T(R.year||new Date().getFullYear()),1)]),R.title||R.ementa?(f(),C("div",Gs,T(R.title||R.ementa||"Sem t\xEDtulo"),1)):G("",!0),R.proponents&&R.proponents.length>0?(f(),C("div",Ks,[(f(!0),C(Ce,null,Ee(R.proponents.slice(0,3),ee=>(f(),le(wt,{key:ee.id,size:"sm",class:"proponent-chip"},{default:Y(()=>[Re(T(ee.name),1)]),_:2},1024))),128)),R.proponents.length>3?(f(),C("span",Ys," +"+T(R.proponents.length-3)+" mais ",1)):G("",!0)])):G("",!0),c(R.id)?(f(),le(_s,{key:2,class:"proposition-voting-expansion tw-mt-2","header-class":H(c(R.id)),"expand-icon-class":L(c(R.id)),dense:""},{header:Y(()=>[V(ct,null,{default:Y(()=>[a("div",Xs,[o[6]||(o[6]=a("span",null,"Resultado da Vota\xE7\xE3o:",-1)),V(te,{name:S(c(R.id)),size:"20px"},null,8,["name"]),a("span",Zs,T(w(c(R.id))),1)])]),_:2},1024)]),default:Y(()=>[V(Ge,{flat:"",class:J([F(c(R.id)),"voting-expansion-content-card"])},{default:Y(()=>[V(Oe,{class:"voting-expansion-content"},{default:Y(()=>{var ee,K;return[c(R.id)?(f(),C(Ce,{key:0},[a("div",en,[a("div",tn,[a("div",an,[V(te,{name:"thumb_up",color:"green",size:"18px"}),a("div",sn,[a("span",nn,T(b(c(R.id).votes,"favor")),1),o[7]||(o[7]=a("span",{class:"result-label"},"A Favor",-1))])]),a("div",on,[V(te,{name:"thumb_down",color:"red",size:"18px"}),a("div",ln,[a("span",rn,T(b(c(R.id).votes,"against")),1),o[8]||(o[8]=a("span",{class:"result-label"},"Contra",-1))])]),a("div",un,[V(te,{name:"remove_circle",color:"orange",size:"18px"}),a("div",dn,[a("span",cn,T(b(c(R.id).votes,"abstain")),1),o[9]||(o[9]=a("span",{class:"result-label"},"Absten\xE7\xF5es",-1))])]),a("div",vn,[V(te,{name:"people",color:"grey",size:"18px"}),a("div",gn,[a("span",fn,T(((ee=c(R.id).votes)==null?void 0:ee.length)||0),1),o[10]||(o[10]=a("span",{class:"result-label"},"Total",-1))])])])]),c(R.id).type!=="secret_voting"&&_(c(R.id))?(f(),C("div",mn,[o[11]||(o[11]=a("div",{class:"members-title"}," Votos dos Vereadores ",-1)),a("div",hn,[(f(!0),C(Ce,null,Ee(c(R.id).votes,ve=>(f(),le(Ge,{key:ve.id||`vote-${ve.proponent_id}-${ve.vote}`,flat:"",bordered:"",class:J(["member-vote-card",B(ve.vote)])},{default:Y(()=>[V(Oe,{class:"member-card-section"},{default:Y(()=>{var Se,me;return[a("div",pn,[V(Tt,{size:"28px",color:"primary","text-color":"white",class:"member-avatar"},{default:Y(()=>[ve.proponent_photo?(f(),C("img",{key:0,src:N(ve.proponent_photo),alt:ve.proponent_name},null,8,wn)):(f(),C("span",bn,T(P(ve.proponent_name)),1))]),_:2},1024),a("div",Sn,[a("div",_n,T(ve.proponent_name),1),ve.proponent_party?(f(),C("div",yn,T(((Se=ve.proponent_party)==null?void 0:Se.abbreviation)||((me=ve.proponent_party)==null?void 0:me.name)),1)):G("",!0)]),V(te,{name:U(ve.vote),color:O(ve.vote),size:"18px",class:"member-vote-icon"},null,8,["name","color"])])]}),_:2},1024)]),_:2},1032,["class"]))),128))])])):c(R.id).type==="secret_voting"?(f(),C("div",xn,[V(te,{name:"lock",size:"28px",color:"blue"}),o[12]||(o[12]=a("div",{class:"secret-message-text"}," Vota\xE7\xE3o secreta - Os votos n\xE3o s\xE3o exibidos publicamente ",-1)),a("div",qn," Total de votos: "+T(((K=c(R.id).votes)==null?void 0:K.length)||0),1)])):c(R.id).type!=="secret_voting"?(f(),C("div",$n,[V(te,{name:"info",size:"28px",color:"grey"}),o[13]||(o[13]=a("div",{class:"no-votes-text"}," Nenhum voto registrado ",-1))])):G("",!0)],64)):G("",!0)]}),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["header-class","expand-icon-class"])):G("",!0)]),a("div",In,[re(R)?(f(),le(Te,{key:0,flat:"",dense:"",size:"md",color:"primary",icon:"picture_as_pdf",class:"tw-mt-2",onClick:ee=>ue(re(R),W(R))},{default:Y(()=>[V(tt,null,{default:Y(()=>[Re(T(W(R)),1)]),_:2},1024)]),_:2},1032,["onClick"])):G("",!0)])])]))),128))])]))),128))])):G("",!0),V(bt,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=qe=>r.value=qe),"pdf-url":z.value,title:j.value},null,8,["modelValue","pdf-url","title"])])}}};var kn=je(An,[["__scopeId","data-v-64c682c9"]]),Vn=Ne({name:"QInnerLoading",props:{...kt,...ga,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:l}){const s=Je(),n=Vt(e,s.proxy.$q),{transitionProps:t,transitionStyle:d}=fa(e),v=u(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),p=u(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function m(){const E=[oe(st,{size:e.size,color:e.color})];return e.label!==void 0&&E.push(oe("div",{class:p.value,style:e.labelStyle},[e.label])),E}function y(){return e.showing===!0?oe("div",{class:v.value,style:d.value},l.default!==void 0?l.default():m()):null}return()=>oe(Rt,t.value,y)}});function Be(e){if(!e)return"";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function vt(e){if(e==null||e<=0)return"0:00";const l=Math.floor(Number(e)),s=Math.floor(l/60),n=l%60;return`${s}:${n.toString().padStart(2,"0")}`}const Rn={class:"card-header quorum-header"},Tn={class:"tw-flex tw-items-center tw-gap-3"},Cn={class:"card-icon-wrapper"},zn={class:"tw-flex tw-flex-col tw-gap-2"},Pn={key:0,class:"status-message text-grey-8"},Mn={key:1,class:"status-hint text-grey-6"},Ln={class:"status-avatar status-present"},En={class:"status-avatar status-waiting"},Dn={class:"tw-flex tw-flex-col tw-gap-2"},Fn={key:0,class:"status-message text-grey-8"},jn={key:1,class:"status-hint text-grey-6"},Un={class:"status-avatar status-absent"},Nn={class:"status-avatar status-waiting"},On={key:5,class:"tw-w-full"};const Bn={__name:"QuorumCard",props:{isPresent:{type:Boolean,default:!1},isAbsentJustified:{type:Boolean,default:!1},absenceReason:{type:String,default:null},quorumFinalized:{type:Boolean,default:!1},quorumStarted:{type:Boolean,default:!1},quorumFinalizedAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingQuorum:{type:Boolean,default:!1},loadingAttendance:{type:Boolean,default:!1},loadingJustify:{type:Boolean,default:!1}},emits:["toggle-attendance","justify-absence"],setup(e,{emit:l}){const s=e,n=l,t=Z(!1),d=Z(""),v=u(()=>!s.canSend||!s.selectedAgendaId||!s.quorumStarted||s.quorumFinalized||s.isAbsentJustified||s.loadingAttendance||s.loadingQuorum),p=u(()=>s.canSend?s.selectedAgendaId?s.quorumStarted?s.quorumFinalized?"Qu\xF3rum foi finalizado":s.isAbsentJustified?"N\xE3o \xE9 poss\xEDvel marcar presen\xE7a quando h\xE1 justificativa de aus\xEAncia":s.loadingAttendance?"Processando presen\xE7a...":s.loadingQuorum?"Carregando qu\xF3rum...":"":"Qu\xF3rum ainda n\xE3o foi iniciado":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function m(){if(console.log("[QuorumCard] handleToggleAttendance chamado",{canSend:s.canSend,selectedAgendaId:s.selectedAgendaId,quorumStarted:s.quorumStarted,quorumFinalized:s.quorumFinalized,loadingAttendance:s.loadingAttendance,loadingQuorum:s.loadingQuorum,isButtonDisabled:v.value}),v.value){console.warn("[QuorumCard] Bot\xE3o est\xE1 desabilitado:",p.value);return}console.log("[QuorumCard] Emitindo toggle-attendance"),n("toggle-attendance")}function y(){t.value=!1,d.value=""}function E(){!d.value||!d.value.trim()||(n("justify-absence",d.value.trim()),t.value=!1,d.value="")}return(k,A)=>(f(),le(Ge,{flat:"",class:"modern-card quorum-card tw-h-full tw-relative tw-overflow-hidden"},{default:Y(()=>[a("div",Rn,[a("div",Tn,[a("div",Cn,[V(te,{name:"groups",size:"24px",class:"tw-text-white"})]),A[3]||(A[3]=a("div",{class:"card-title"},"Qu\xF3rum",-1))])]),V(Oe,{class:"tw-relative tw-p-4",style:{"min-height":"120px"}},{default:Y(()=>[V(Vn,{showing:e.loadingQuorum,color:"primary",size:"50px"},null,8,["showing"]),e.loadingQuorum?G("",!0):(f(),C(Ce,{key:0},[e.quorumFinalized?(f(),le(Le,{key:0,class:"modern-banner banner-finalized q-mb-3",dense:""},{avatar:Y(()=>[a("div",{class:J(["status-avatar",e.isPresent?"status-present":e.isAbsentJustified?"status-waiting":"status-absent"])},[V(te,{name:e.isPresent?"check_circle":e.isAbsentJustified?"event_busy":"cancel",size:"24px"},null,8,["name"])],2)]),default:Y(()=>[a("div",zn,[A[5]||(A[5]=a("div",{class:"status-title"},"Qu\xF3rum Finalizado",-1)),a("div",{class:J(["status-message",e.isPresent?"text-positive":e.isAbsentJustified?"text-info":"text-negative"])},T(e.isPresent?"Voc\xEA estava presente no qu\xF3rum":e.isAbsentJustified?"Falta Justificada":"Voc\xEA n\xE3o estava presente no qu\xF3rum"),3),e.isAbsentJustified&&e.absenceReason?(f(),C("div",Pn,[A[4]||(A[4]=a("strong",null,"Justificativa:",-1)),Re(" "+T(e.absenceReason),1)])):G("",!0),e.quorumFinalizedAt?(f(),C("div",Mn," Finalizado em: "+T(I(Be)(e.quorumFinalizedAt)),1)):G("",!0),A[6]||(A[6]=a("div",{class:"status-hint text-grey-6"}," Aguarde um novo qu\xF3rum ser iniciado. ",-1))])]),_:1})):e.quorumStarted&&e.isPresent?(f(),le(Le,{key:1,class:"modern-banner banner-success q-mb-3",dense:""},{avatar:Y(()=>[a("div",Ln,[V(te,{name:"check_circle",size:"24px"})])]),default:Y(()=>[A[7]||(A[7]=a("div",{class:"status-title"},"Voc\xEA est\xE1 presente no qu\xF3rum",-1))]),_:1})):e.quorumStarted&&!e.isPresent&&e.isAbsentJustified?(f(),le(Le,{key:2,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:Y(()=>[a("div",En,[V(te,{name:"event_busy",size:"24px"})])]),default:Y(()=>[a("div",Dn,[A[9]||(A[9]=a("div",{class:"status-title"},"Falta Justificada",-1)),e.absenceReason?(f(),C("div",Fn,[A[8]||(A[8]=a("strong",null,"Justificativa:",-1)),Re(" "+T(e.absenceReason),1)])):(f(),C("div",jn," Sua aus\xEAncia foi justificada. "))])]),_:1})):e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(f(),le(Le,{key:3,class:"modern-banner banner-warning q-mb-3",dense:""},{avatar:Y(()=>[a("div",Un,[V(te,{name:"person_off",size:"24px"})])]),default:Y(()=>[A[10]||(A[10]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"status-title"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum"),a("div",{class:"status-hint text-grey-6"}," Marque sua presen\xE7a para participar. ")],-1))]),_:1})):e.quorumStarted?G("",!0):(f(),le(Le,{key:4,class:"modern-banner banner-info q-mb-3",dense:""},{avatar:Y(()=>[a("div",Nn,[V(te,{name:"schedule",size:"24px"})])]),default:Y(()=>[A[11]||(A[11]=a("div",{class:"status-title"},"Aguardando o in\xEDcio do qu\xF3rum.",-1))]),_:1})),!e.quorumFinalized&&e.quorumStarted&&!e.isPresent&&!e.isAbsentJustified?(f(),C("div",On,[V(Te,{class:"tw-w-full modern-action-btn btn-add",icon:"how_to_reg",label:"Marcar Presen\xE7a",disable:v.value,loading:e.loadingAttendance||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:m},{default:Y(()=>[v.value?(f(),le(tt,{key:0,class:"bg-red"},{default:Y(()=>[Re(T(p.value),1)]),_:1})):G("",!0)]),_:1},8,["disable","loading"]),V(Te,{class:"tw-w-full modern-action-btn btn-justify",icon:"event_busy",label:"Justificar",disable:v.value,loading:e.loadingJustify||e.loadingQuorum,size:"md",unelevated:"",rounded:"",onClick:A[0]||(A[0]=$=>t.value=!0)},{default:Y(()=>[v.value?(f(),le(tt,{key:0,class:"bg-red"},{default:Y(()=>[Re(T(p.value),1)]),_:1})):G("",!0)]),_:1},8,["disable","loading"])])):G("",!0),G("",!0)],64))]),_:1}),V(at,{modelValue:t.value,"onUpdate:modelValue":A[2]||(A[2]=$=>t.value=$),persistent:""},{default:Y(()=>[V(Ge,{style:{"min-width":"350px","max-width":"500px"}},{default:Y(()=>[V(Oe,null,{default:Y(()=>[...A[12]||(A[12]=[a("div",{class:"text-h6"},"Justificar Aus\xEAncia",-1)])]),_:1}),V(Oe,{class:"q-pt-none"},{default:Y(()=>[V(ma,{modelValue:d.value,"onUpdate:modelValue":A[1]||(A[1]=$=>d.value=$),type:"textarea",label:"Motivo da aus\xEAncia",placeholder:"Digite o motivo da sua aus\xEAncia...",autofocus:"",rules:[$=>$&&$.trim()||"Por favor, informe o motivo da aus\xEAncia"],rows:"4",outlined:"",counter:"",maxlength:"500"},null,8,["modelValue","rules"])]),_:1}),V(ha,{align:"right",class:"text-primary"},{default:Y(()=>[V(Te,{flat:"",label:"Cancelar",onClick:y}),V(Te,{flat:"",label:"Justificar",color:"primary",loading:e.loadingJustify,disable:!d.value||!d.value.trim(),onClick:E},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Qn=je(Bn,[["__scopeId","data-v-601c49e9"]]);const Jn={class:"quorum-tab"},Hn={class:"overview-card modern-card"},Wn={class:"card-content"},Gn={class:"summary-title"},Kn={__name:"QuorumTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const l=e,s=$e("quorum"),n=$e("sessionAgenda"),t=u(()=>{var p;return l.sessionId||((p=n==null?void 0:n.selectedAgendaId)==null?void 0:p.value)||null});function d(){s!=null&&s.toggleAttendance?s.toggleAttendance():console.error("[QuorumTab] quorum.toggleAttendance n\xE3o est\xE1 dispon\xEDvel")}function v(p){s!=null&&s.justifyAbsence?s.justifyAbsence(p):console.error("[QuorumTab] quorum.justifyAbsence n\xE3o est\xE1 dispon\xEDvel")}return(p,m)=>{var y,E,k,A,$,c,w,S,H,L,F,Q,q,D,b,U,O,B,P,N;return f(),C("div",Jn,[a("div",Hn,[a("div",Wn,[a("div",Gn,[V(te,{name:"groups",size:"20px",class:"tw-mr-2"}),m[0]||(m[0]=Re(" Qu\xF3rum ",-1))]),V(Qn,{"is-present":((E=(y=I(s))==null?void 0:y.isPresent)==null?void 0:E.value)||!1,"is-absent-justified":((A=(k=I(s))==null?void 0:k.isAbsentJustified)==null?void 0:A.value)||!1,"absence-reason":((c=($=I(s))==null?void 0:$.absenceReason)==null?void 0:c.value)||null,"quorum-finalized":((S=(w=I(s))==null?void 0:w.quorumFinalized)==null?void 0:S.value)||!1,"quorum-started":((L=(H=I(s))==null?void 0:H.quorumStarted)==null?void 0:L.value)||!1,"quorum-finalized-at":((Q=(F=I(s))==null?void 0:F.quorumFinalizedAt)==null?void 0:Q.value)||null,"selected-agenda-id":t.value,"can-send":((D=(q=I(s))==null?void 0:q.canSend)==null?void 0:D.value)||!1,"loading-quorum":((U=(b=I(s))==null?void 0:b.loadingQuorum)==null?void 0:U.value)||!1,"loading-attendance":((B=(O=I(s))==null?void 0:O.loadingAttendance)==null?void 0:B.value)||!1,"loading-justify":((N=(P=I(s))==null?void 0:P.loadingJustify)==null?void 0:N.value)||!1,onToggleAttendance:d,onJustifyAbsence:v},null,8,["is-present","is-absent-justified","absence-reason","quorum-finalized","quorum-started","quorum-finalized-at","selected-agenda-id","can-send","loading-quorum","loading-attendance","loading-justify"])])])])}}};var Yn=je(Kn,[["__scopeId","data-v-013d4040"]]);const Xn={ratio:[String,Number]};function Zn(e,l){return u(()=>{const s=Number(e.ratio||(l!==void 0?l.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const ei=1.7778;var ti=Ne({name:"QImg",props:{...Xn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ei},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:l,emit:s}){const n=Z(e.initialRatio),t=Zn(e,n),d=Je(),{registerTimeout:v,removeTimeout:p}=ft(),{registerTimeout:m,removeTimeout:y}=ft(),E=u(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),k=u(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),A=[Z(null),Z(E.value)],$=Z(0),c=Z(!1),w=Z(!1),S=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),H=u(()=>({width:e.width,height:e.height})),L=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),F=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function Q(){if(y(),e.loadingShowDelay===0){c.value=!0;return}m(()=>{c.value=!0},e.loadingShowDelay)}function q(){y(),c.value=!1}function D({target:N}){yt(d)===!1&&(p(),n.value=N.naturalHeight===0?.5:N.naturalWidth/N.naturalHeight,b(N,1))}function b(N,_){_===1e3||yt(d)===!0||(N.complete===!0?U(N):v(()=>{b(N,_+1)},50))}function U(N){yt(d)!==!0&&($.value=$.value^1,A[$.value].value=null,q(),N.getAttribute("__qerror")!=="true"&&(w.value=!1),s("load",N.currentSrc||N.src))}function O(N){p(),q(),w.value=!0,A[$.value].value=k.value,A[$.value^1].value=E.value,s("error",N)}function B(N){const _=A[N].value,M={key:"img_"+N,class:L.value,style:F.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,..._};return $.value===N?Object.assign(M,{class:M.class+"current",onLoad:D,onError:O}):M.class+="loaded",oe("div",{class:"q-img__container absolute-full",key:"img"+N},oe("img",M))}function P(){return c.value===!1?oe("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},mt(l[w.value===!0?"error":"default"])):oe("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},l.loading!==void 0?l.loading():e.noSpinner===!0?void 0:[oe(st,{color:e.spinnerColor,size:e.spinnerSize})])}{let N=function(){_e(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,_=>{p(),w.value=!1,_===null?(q(),A[$.value^1].value=E.value):Q(),A[$.value].value=_},{immediate:!0})};Bt.value===!0?ut(N):N()}return()=>{const N=[];return t.value!==null&&N.push(oe("div",{key:"filler",style:t.value})),A[0].value!==null&&N.push(B(0)),A[1].value!==null&&N.push(B(1)),N.push(oe(Rt,{name:"q-transition--fade"},P)),oe("div",{key:"main",class:S.value,style:H.value,role:"img","aria-label":e.alt},N)}}});const ai={key:0,class:"tw-mb-3"},si={class:"tw-flex tw-flex-col tw-gap-0.5"},ni={class:"text-caption tw-text-amber-800"},ii={class:"tw-space-y-3 tw-overflow-y-auto"},oi={class:"tw-flex tw-items-center tw-gap-2"},li={class:"tw-flex-shrink-0 tw-flex tw-items-center tw-justify-center tw-h-8 tw-rounded-lg tw-text-gray-800 tw-font-bold text-caption"},ri={class:"tw-flex-shrink-0 tw-w-12 tw-h-12 tw-rounded-lg tw-overflow-hidden tw-bg-gray-200 tw-flex tw-items-center tw-justify-center"},ui={key:1,class:"text-caption tw-font-bold tw-text-gray-600"},di={class:"tw-flex-1 tw-min-w-0"},ci={class:"tw-font-semibold tw-text-gray-900 tw-truncate"},vi={class:"text-caption tw-text-gray-600"},gi={key:0,class:"tw-flex-shrink-0"},fi=["src","alt"],mi={key:0,class:"tw-mt-3 tw-pt-3 tw-border-t tw-border-gray-200"},hi={key:0,class:"tw-flex tw-flex-wrap tw-items-center tw-gap-2"},pi={class:"text-caption tw-text-gray-700"},wi={key:1,class:"tw-flex tw-flex-wrap tw-items-center tw-gap-2"},bi={class:"text-caption tw-text-gray-700"},Si={class:"tw-flex tw-flex-col tw-gap-1"},_i={class:J("text-caption tw-font-bold tw-text-red-700")},yi={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},xi={class:"tw-space-y-2"},qi={key:0,class:"tw-text-gray-500 tw-ml-2"},$i={class:"tw-flex tw-flex-col tw-gap-1"},Ii={class:"text-caption"},Pt={__name:"ExpedientCard",props:{title:{type:String,required:!0},expedientLabel:{type:String,required:!0},icon:{type:String,required:!0},headerClass:{type:String,required:!0},headerColor:{type:String,required:!0},buttonColor:{type:String,required:!0},buttonIcon:{type:String,required:!0},isRegistered:{type:Boolean,default:!1},isPresent:{type:Boolean,default:!1},started:{type:Boolean,default:!1},finalized:{type:Boolean,default:!1},finalizedAt:{type:String,default:null},registrationOrder:{type:Number,default:null},registeredAt:{type:String,default:null},selectedAgendaId:{type:Number,default:null},canSend:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},loadingAction:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0},finishedSpeech:{type:Object,default:null},finishedSpeechTotalMinutes:{type:Number,default:0},finishedSpeechUsedMinutes:{type:Number,default:0},finishedSpeechUsedSeconds:{type:Number,default:0},finishedSpeechFinishedAt:{type:String,default:null},sessionInteractions:{type:Array,default:()=>[]},members:{type:Array,default:()=>[]},speeches:{type:Array,default:()=>[]}},emits:["toggle-registration"],setup(e,{emit:l}){const s=Ct();u(()=>s.proponentId);const n=e,t=l,d=u(()=>n.members||[]);function v(r){var j;const z=(j=r.parent_speech_id)!=null?j:r.parentSpeechId;return z!=null&&z!==""}const p=u(()=>(n.speeches||[]).find(z=>(z.status==="speaking"||z.status==="paused")&&v(z))||null),m=u(()=>{const r=p.value;if(!r)return"";if(r.proponent){const j=r.proponent;return j.name_political||j.name_full||j.name||"Parlamentar"}if(r.guest_name)return r.guest_name;const z=r.proponent_id;if(z!=null&&d.value.length){const j=d.value.find(ue=>Number(ue.proponent_id)===Number(z));if(j)return S(j)}return"Parlamentar"}),y=u(()=>n.speeches||[]),E=Z(0);let k=null;function A(){return(n.speeches||[]).some(z=>z.status==="speaking"||z.status==="paused")}function $(){k||(k=setInterval(()=>{E.value=Date.now()},1e3))}function c(){k&&(clearInterval(k),k=null)}_e(()=>n.speeches,()=>{A()?$():c()},{immediate:!0,deep:!0}),pt(c);function w(r){return(r==null?void 0:r.proponent_id)!=null?Number(r.proponent_id):(r==null?void 0:r.guest_id)!=null?Number(r.guest_id):null}function S(r){return(r==null?void 0:r.guest_id)||(r==null?void 0:r.is_guest)?r.guest_name||r.name||"Convidado":(r==null?void 0:r.name_political)||(r==null?void 0:r.name_full)||(r==null?void 0:r.name)||"Parlamentar"}function H(r){return(r==null?void 0:r.guest_id)||(r==null?void 0:r.is_guest)?r.guest_position||r.position||"Convidado":(r==null?void 0:r.position)||"Vereador"}function L(r){if((r==null?void 0:r.guest_id)||(r==null?void 0:r.is_guest))return r.guest_photo_url||r.photo_url||r.photo||r.image_url||null;const z=(r==null?void 0:r.photo_url)||(r==null?void 0:r.photo)||(r==null?void 0:r.image_url)||(r==null?void 0:r.avatar_url)||null;if(z)return z;const j=r==null?void 0:r.proponent;return j&&typeof j=="object"&&(j.photo_url||j.photo||j.image_url||j.avatar_url)||null}function F(r){const z=L(r);return z?b(z):null}function Q(r){if((r==null?void 0:r.guest_id)||(r==null?void 0:r.is_guest))return null;let z=(r==null?void 0:r.party_logo_url)||(r==null?void 0:r.party_logo)||null;if(!z&&(r==null?void 0:r.political_party_data)){const j=r.political_party_data;z=(j==null?void 0:j.logo_url)||(j==null?void 0:j.logo)||(j==null?void 0:j.image_url)||(j==null?void 0:j.image)||null}return z}function q(r){return(r==null?void 0:r.guest_id)||(r==null?void 0:r.is_guest)?null:(r==null?void 0:r.party_name)||(r==null?void 0:r.party)||null}const D=()=>{const r={}.VITE_API_BASE_URL||"https://api.camaratech.com.br";return(typeof r=="string"?r:"").replace(/\/api\/?$/,"")};function b(r){if(!r)return null;if(r.startsWith("http://")||r.startsWith("https://"))return r;const z=D();return r.startsWith("/")?`${z}${r}`:`${z}/${r}`}function U(r){if(!r)return null;if(r.startsWith("http://")||r.startsWith("https://"))return r;const z=D();return r.startsWith("/")?`${z}${r}`:`${z}/${r}`}function O(r){if(!r)return"";const z=r.replace(/^Ver\.?\s*/i,"").replace(/^Ver\s*/i,"").trim(),j=z.split(" ");return j.length>=2?(j[0][0]+j[j.length-1][0]).toUpperCase():z.substring(0,2).toUpperCase()}function B(r){const z=w(r);return z==null?null:y.value.find(j=>r.proponent_id!=null&&j.proponent_id!=null?Number(j.proponent_id)===z:r.guest_id!=null&&j.guest_id!=null?Number(j.guest_id)===z:!1)||null}function P(r){const z=B(r);return z?z.status==="speaking"||z.status==="paused"?"speaking":z.status==="finished"?"finished":null:null}function N(r){var we,g,o;const z=B(r);if(!z||z.status!=="speaking"&&z.status!=="paused")return 0;const j=(((we=z.allocated_minutes)!=null?we:0)+((g=z.additional_minutes)!=null?g:0))*60;if(j<=0)return 0;if(z.status==="paused"&&typeof z.calculated_remaining_seconds=="number")return Math.max(0,Math.min(j,Math.floor(z.calculated_remaining_seconds)));E.value;const ue=(o=z.used_seconds)!=null?o:0,he=z.started_at?(Date.now()-new Date(z.started_at).getTime())/1e3:0,xe=ue+(z.status==="speaking"?he:0);return Math.max(0,j-Math.floor(xe))}function _(r){var j;const z=B(r);return z&&(j=z.used_seconds)!=null?j:0}function M(r){if(r==null||r<0)return"0:00";const z=Math.floor(Number(r)),j=Math.floor(z/60),ue=z%60;return`${j}:${ue.toString().padStart(2,"0")}`}const ae=u(()=>!n.canSend||!n.selectedAgendaId||!n.started||n.finalized||!n.isPresent||n.loadingAction),re=u(()=>n.canSend?n.selectedAgendaId?n.started?n.finalized?"Inscri\xE7\xF5es foram finalizadas":n.isPresent?n.loadingAction?"Processando inscri\xE7\xE3o...":"":"Voc\xEA precisa estar presente no qu\xF3rum para se inscrever":"Inscri\xE7\xF5es ainda n\xE3o foram iniciadas":"Agenda n\xE3o selecionada":"N\xE3o \xE9 poss\xEDvel enviar (verifique unit_id e proponent_id)");function W(){if(console.log(`[ExpedientCard ${n.title}] handleToggleRegistration chamado`,{canSend:n.canSend,selectedAgendaId:n.selectedAgendaId,started:n.started,finalized:n.finalized,loadingAction:n.loadingAction,isButtonDisabled:ae.value}),ae.value){console.warn(`[ExpedientCard ${n.title}] Bot\xE3o est\xE1 desabilitado:`,re.value);return}console.log(`[ExpedientCard ${n.title}] Emitindo toggle-registration`),t("toggle-registration")}return(r,z)=>(f(),le(Ge,{flat:"",bordered:"",class:"tw-h-full tw-relative tw-w-full"},{default:Y(()=>[e.started&&!e.finalized&&e.isPresent?(f(),le(Te,{key:0,class:"full-width q-mb-sm",color:e.isRegistered?"negative":e.buttonColor,icon:e.isRegistered?"cancel":e.buttonIcon,label:e.isRegistered?"Remover Inscri\xE7\xE3o":"Inscrever",disable:ae.value,loading:e.loadingAction,size:"md",dense:"",onClick:W},{default:Y(()=>[ae.value?(f(),le(tt,{key:0,class:"bg-red"},{default:Y(()=>[Re(T(re.value),1)]),_:1})):G("",!0)]),_:1},8,["color","icon","label","disable","loading"])):G("",!0),e.finalized?(f(),le(Le,{key:1,rounded:"",class:"tw-bg-blue-50 tw-border tw-border-blue-200 text-blue-900 q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"lock",color:"blue",size:r.$q.screen.lt.md?"18px":"22px"},null,8,["size"])]),default:Y(()=>[a("span",{class:J([r.$q.screen.lt.md?"text-caption":"text-body2","tw-font-medium"])},T(e.title)+" Encerrado ",3)]),_:1})):G("",!0),e.finishedSpeech?(f(),le(Le,{key:2,rounded:"",class:J(`tw-bg-gray-100 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:Y(()=>[V(te,{name:"check_circle",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[a("div",{class:J(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala foi finalizada ",2),a("div",{class:J(`tw-grid tw-grid-cols-2 ${r.$q.screen.lt.md?"tw-gap-1 tw-mt-0":"tw-gap-2 tw-mt-2"}`)},[a("div",null,[a("div",{class:J(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Total Alocado ",2),a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},T(e.finishedSpeechTotalMinutes)+" min ",3)]),a("div",null,[a("div",{class:J(r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption tw-text-gray-600")}," Tempo Utilizado ",2),a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body1"} tw-font-semibold`)},T(e.finishedSpeechUsedMinutes)+" min "+T(e.finishedSpeechUsedSeconds)+" s ",3)])],2),e.finishedSpeechFinishedAt?(f(),C("div",{key:0,class:J(`${r.$q.screen.lt.md?"text-caption tw-text-xs":"text-caption"} tw-text-gray-600 ${r.$q.screen.lt.md?"tw-mt-0":"tw-mt-1"}`)}," Finalizada em: "+T(I(Be)(e.finishedSpeechFinishedAt)),3)):G("",!0)],2)]),_:1},8,["class"])):G("",!0),V(Oe,{class:J(`tw-relative tw-w-full tw-px-0 ${r.$q.screen.lt.md?"tw-py-1":"tw-py-3"}`)},{default:Y(()=>[d.value.length>0?(f(),C("div",ai,[p.value?(f(),le(Le,{key:0,rounded:"",class:"tw-bg-amber-50 tw-border tw-border-amber-200 tw-mb-3",dense:""},{avatar:Y(()=>[V(te,{name:"record_voice_over",color:"amber-8",size:r.$q.screen.lt.md?"20px":"24px"},null,8,["size"])]),default:Y(()=>[a("div",si,[z[1]||(z[1]=a("div",{class:"text-body2 tw-font-semibold tw-text-amber-900"}," Aparte em andamento ",-1)),a("div",ni,T(m.value),1)])]),_:1})):G("",!0),a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold tw-text-gray-700 tw-mb-2`)}," Inscritos ("+T(d.value.length)+") ",3),a("div",ii,[(f(!0),C(Ce,null,Ee(d.value,j=>{var ue,he;return f(),C("div",{key:(he=(ue=j.proponent_id)!=null?ue:j.guest_id)!=null?he:j.name,class:"expedient-member-card tw-rounded-xl tw-p-2 tw-bg-white tw-border tw-border-gray-200 tw-shadow-sm tw-flex tw-flex-col tw-gap-0"},[a("div",oi,[a("div",li,T(j.registration_order)+"\xBA ",1),a("div",ri,[F(j)?(f(),le(ti,{key:0,src:F(j),alt:S(j),class:"tw-w-full tw-h-full tw-object-cover tw-rounded-lg",fit:"cover",ratio:1},null,8,["src","alt"])):(f(),C("span",ui,T(O(S(j))),1))]),a("div",di,[a("div",ci,T(S(j)),1),a("div",vi,T(H(j)),1)]),Q(j)?(f(),C("div",gi,[a("img",{src:U(Q(j)),alt:q(j)||"Partido",class:"tw-max-w-10 tw-w-auto tw-object-contain",onError:z[0]||(z[0]=xe=>xe.target.style.display="none")},null,40,fi)])):G("",!0)]),P(j)==="speaking"||P(j)==="finished"?(f(),C("div",mi,[z[2]||(z[2]=a("div",{class:"tw-text-xs tw-font-semibold tw-text-gray-600 tw-mb-2"}," Informa\xE7\xF5es da Fala ",-1)),P(j)==="speaking"?(f(),C("div",hi,[V(ot,{color:"green","text-color":"white",label:"Falando",class:"tw-font-semibold"}),a("span",pi," Tempo restante: "+T(I(vt)(N(j))),1)])):(f(),C("div",wi,[V(ot,{color:"blue","text-color":"white",label:"Fala Finalizada",class:"tw-font-semibold"}),a("span",bi," Tempo Utilizado: "+T(M(_(j))),1)]))])):G("",!0)])}),128))])])):e.finalized&&!e.isRegistered&&!e.isPresent&&!e.finishedSpeech?(f(),le(Le,{key:1,class:"text-black q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[z[3]||(z[3]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es Finalizadas"),a("div",{class:"text-caption"},"Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum.")],-1))]),_:1})):e.finalized&&!e.isRegistered&&e.isPresent&&!e.finishedSpeech?(f(),le(Le,{key:2,class:"text-black q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"cancel",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[a("div",Si,[z[4]||(z[4]=a("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es Finalizadas",-1)),a("div",_i," Voc\xEA n\xE3o est\xE1 inscrito no "+T(e.expedientLabel)+". ",1)])]),_:1})):G("",!0),e.currentSpeech&&e.currentSpeech.status==="speaking"?(f(),le(Le,{key:3,class:J(`bg-green-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:Y(()=>[V(te,{name:"mic",color:"green",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[a("div",{class:J(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Voc\xEA est\xE1 falando ",2),a("div",{class:J(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-green-700`)}," Tempo restante: "+T(I(vt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):G("",!0),e.currentSpeech&&e.currentSpeech.status==="paused"?(f(),le(Le,{key:4,class:J(`bg-yellow-3 text-black ${r.$q.screen.lt.md?"q-mb-1":"q-mb-2"}`),dense:""},{avatar:Y(()=>[V(te,{name:"pause",color:"orange",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[a("div",{class:J(`tw-flex tw-flex-col ${r.$q.screen.lt.md?"tw-gap-0":"tw-gap-1"}`)},[a("div",{class:J(`${r.$q.screen.lt.md?"text-caption":"text-body2"} tw-font-semibold`)}," Sua fala est\xE1 pausada ",2),a("div",{class:J(`${r.$q.screen.lt.md?"text-body2":"text-h6"} tw-font-bold tw-text-yellow-700`)}," Tempo restante: "+T(I(vt)(e.remainingTime)),3)],2)]),_:1},8,["class"])):G("",!0),e.sessionInteractions.length>0?(f(),le(Ge,{key:5,flat:"",bordered:"",class:"q-mb-2 tw-bg-blue-50"},{default:Y(()=>[V(Oe,{class:"tw-py-3"},{default:Y(()=>[a("div",yi,[V(te,{name:"history",color:"primary",size:"20px"}),z[5]||(z[5]=a("div",{class:"text-body2 tw-font-semibold"}," Suas Intera\xE7\xF5es na Sess\xE3o ",-1))]),a("div",xi,[(f(!0),C(Ce,null,Ee(e.sessionInteractions,(j,ue)=>(f(),C("div",{key:ue,class:"tw-text-sm tw-text-gray-700"},[V(te,{name:j.icon,color:j.color,size:"16px",class:"tw-mr-2"},null,8,["name","color"]),a("span",null,T(j.label),1),j.time?(f(),C("span",qi," ("+T(j.time)+") ",1)):G("",!0)]))),128))])]),_:1})]),_:1})):e.started&&!e.isPresent?(f(),le(Le,{key:6,class:"text-black q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"person_off",color:"red",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[a("div",$i,[z[6]||(z[6]=a("div",{class:"text-body2 tw-font-semibold"}," Voc\xEA n\xE3o est\xE1 presente no qu\xF3rum ",-1)),a("div",Ii," Marque sua presen\xE7a no qu\xF3rum para poder se inscrever no "+T(e.expedientLabel)+". ",1)])]),_:1})):e.started&&!e.isRegistered&&e.isPresent?(f(),le(Le,{key:7,class:"text-black q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"assignment",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[z[7]||(z[7]=a("div",{class:"tw-flex tw-flex-col tw-gap-1"},[a("div",{class:"text-body2 tw-font-semibold"},"Inscri\xE7\xF5es abertas"),a("div",{class:"text-caption"},"Clique no bot\xE3o para se inscrever.")],-1))]),_:1})):!e.started&&!e.finalized?(f(),le(Le,{key:8,class:"text-black q-mb-2",dense:""},{avatar:Y(()=>[V(te,{name:"schedule",color:"blue",size:r.$q.screen.lt.md?"16px":"20px"},null,8,["size"])]),default:Y(()=>[z[8]||(z[8]=a("div",{class:"text-body2"},"Aguardando o in\xEDcio das inscri\xE7\xF5es.",-1))]),_:1})):G("",!0)]),_:1},8,["class"])]),_:1}))}};const Ai={class:"expedient-tab"},ki={class:"overview-card modern-card"},Vi={class:"card-content"},Ri={class:"summary-title"},Ti={class:"tw-flex tw-items-center"},Ci={key:1,class:"tw-text-center tw-text-gray-500 tw-py-8"},zi={__name:"SmallExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const l=e,s=$e("sessionSettings"),n=$e("quorum"),t=$e("smallExpedient"),d=$e("smallSpeech"),v=$e("sessionInteractions"),p=$e("sessionAgenda"),m=u(()=>{var y;return l.sessionId||((y=p==null?void 0:p.selectedAgendaId)==null?void 0:y.value)||null});return(y,E)=>{var k,A,$,c,w,S,H,L,F,Q,q,D,b,U,O,B,P,N,_,M,ae,re,W,r,z,j,ue,he,xe,we,g,o,h,i,x,X,se,ie,ne,ce,de,be,ye,ge,ke,Ie,qe,R,ee,K,ve,Se;return f(),C("div",Ai,[a("div",ki,[a("div",Vi,[a("div",Ri,[a("span",Ti,[V(te,{name:"timer",size:"20px",class:"tw-mr-2"}),Re(" "+T(((A=(k=I(s))==null?void 0:k.smallExpedientName)==null?void 0:A.value)||"Pequeno Expediente"),1)]),(c=($=I(t))==null?void 0:$.loadingData)!=null&&c.value?(f(),le(st,{key:0,color:"secondary",size:"24px",class:"tw-ml-auto"})):G("",!0)]),(S=(w=I(s))==null?void 0:w.enableSmallExpedientSpeech)!=null&&S.value?(f(),le(Pt,{key:0,title:((L=(H=I(s))==null?void 0:H.smallExpedientName)==null?void 0:L.value)||"Pequeno Expediente","expedient-label":(((Q=(F=I(s))==null?void 0:F.smallExpedientName)==null?void 0:Q.value)||"Pequeno Expediente").toLowerCase(),icon:"timer","header-class":"bg-secondary","header-color":"secondary","button-color":"secondary","button-icon":"assignment","is-registered":((D=(q=I(t))==null?void 0:q.isRegistered)==null?void 0:D.value)||!1,"is-present":((U=(b=I(n))==null?void 0:b.isPresent)==null?void 0:U.value)||!1,started:((B=(O=I(t))==null?void 0:O.started)==null?void 0:B.value)||!1,finalized:((N=(P=I(t))==null?void 0:P.finalized)==null?void 0:N.value)||!1,"finalized-at":((M=(_=I(t))==null?void 0:_.finalizedAt)==null?void 0:M.value)||null,"registration-order":((re=(ae=I(t))==null?void 0:ae.registrationOrder)==null?void 0:re.value)||null,"registered-at":((r=(W=I(t))==null?void 0:W.registeredAt)==null?void 0:r.value)||null,"selected-agenda-id":m.value,"can-send":((j=(z=I(t))==null?void 0:z.canSend)==null?void 0:j.value)||!1,"loading-data":((he=(ue=I(t))==null?void 0:ue.loadingData)==null?void 0:he.value)||!1,"loading-action":((we=(xe=I(t))==null?void 0:xe.loadingAction)==null?void 0:we.value)||!1,"current-speech":((o=(g=I(d))==null?void 0:g.currentSpeech)==null?void 0:o.value)||null,"remaining-time":((i=(h=I(d))==null?void 0:h.remainingTime)==null?void 0:i.value)||null,"finished-speech":((X=(x=I(d))==null?void 0:x.finishedSpeech)==null?void 0:X.value)||null,"finished-speech-total-minutes":((ie=(se=I(d))==null?void 0:se.finishedSpeechTotalMinutes)==null?void 0:ie.value)||0,"finished-speech-used-minutes":((ce=(ne=I(d))==null?void 0:ne.finishedSpeechUsedMinutes)==null?void 0:ce.value)||0,"finished-speech-used-seconds":((be=(de=I(d))==null?void 0:de.finishedSpeechUsedSeconds)==null?void 0:be.value)||0,"finished-speech-finished-at":((ge=(ye=I(d))==null?void 0:ye.finishedSpeechFinishedAt)==null?void 0:ge.value)||null,"session-interactions":((Ie=(ke=I(v))==null?void 0:ke.sessionInteractions)==null?void 0:Ie.value)||[],members:((R=(qe=I(t))==null?void 0:qe.members)==null?void 0:R.value)||[],speeches:(ve=(K=(ee=I(d))==null?void 0:ee.allSpeeches)==null?void 0:K.value)!=null?ve:[],onToggleRegistration:(Se=I(t))==null?void 0:Se.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","members","speeches","onToggleRegistration"])):(f(),C("div",Ci," As falas n\xE3o est\xE3o habilitadas para o pequeno expediente. "))])])])}}};var Pi=je(zi,[["__scopeId","data-v-2540b22a"]]);const Mi={class:"expedient-tab"},Li={class:"overview-card modern-card"},Ei={class:"card-content"},Di={class:"summary-title"},Fi={class:"tw-flex tw-items-center"},ji={__name:"LargeExpedientTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const l=e,s=$e("sessionSettings"),n=$e("quorum"),t=$e("largeExpedient"),d=$e("largeSpeech"),v=$e("sessionInteractions"),p=$e("sessionAgenda"),m=u(()=>{var y;return l.sessionId||((y=p==null?void 0:p.selectedAgendaId)==null?void 0:y.value)||null});return(y,E)=>{var k,A,$,c,w,S,H,L,F,Q,q,D,b,U,O,B,P,N,_,M,ae,re,W,r,z,j,ue,he,xe,we,g,o,h,i,x,X,se,ie,ne,ce,de,be,ye,ge,ke,Ie,qe,R,ee,K;return f(),C("div",Mi,[a("div",Li,[a("div",Ei,[a("div",Di,[a("span",Fi,[V(te,{name:"assignment_turned_in",size:"20px",class:"tw-mr-2"}),Re(" "+T(((A=(k=I(s))==null?void 0:k.largeExpedientName)==null?void 0:A.value)||"Grande Expediente"),1)]),(c=($=I(t))==null?void 0:$.loadingData)!=null&&c.value?(f(),le(st,{key:0,color:"orange",size:"24px",class:"tw-ml-auto"})):G("",!0)]),V(Pt,{title:((S=(w=I(s))==null?void 0:w.largeExpedientName)==null?void 0:S.value)||"Grande Expediente","expedient-label":(((L=(H=I(s))==null?void 0:H.largeExpedientName)==null?void 0:L.value)||"Grande Expediente").toLowerCase(),icon:"assignment_turned_in","header-class":"bg-orange","header-color":"orange","button-color":"orange","button-icon":"assignment_turned_in","is-registered":((Q=(F=I(t))==null?void 0:F.isRegistered)==null?void 0:Q.value)||!1,"is-present":((D=(q=I(n))==null?void 0:q.isPresent)==null?void 0:D.value)||!1,started:((U=(b=I(t))==null?void 0:b.started)==null?void 0:U.value)||!1,finalized:((B=(O=I(t))==null?void 0:O.finalized)==null?void 0:B.value)||!1,"finalized-at":((N=(P=I(t))==null?void 0:P.finalizedAt)==null?void 0:N.value)||null,"registration-order":((M=(_=I(t))==null?void 0:_.registrationOrder)==null?void 0:M.value)||null,"registered-at":((re=(ae=I(t))==null?void 0:ae.registeredAt)==null?void 0:re.value)||null,"selected-agenda-id":m.value,"can-send":((r=(W=I(t))==null?void 0:W.canSend)==null?void 0:r.value)||!1,"loading-data":((j=(z=I(t))==null?void 0:z.loadingData)==null?void 0:j.value)||!1,"loading-action":((he=(ue=I(t))==null?void 0:ue.loadingAction)==null?void 0:he.value)||!1,"current-speech":((we=(xe=I(d))==null?void 0:xe.currentSpeech)==null?void 0:we.value)||null,"remaining-time":((o=(g=I(d))==null?void 0:g.remainingTime)==null?void 0:o.value)||null,"finished-speech":((i=(h=I(d))==null?void 0:h.finishedSpeech)==null?void 0:i.value)||null,"finished-speech-total-minutes":((X=(x=I(d))==null?void 0:x.finishedSpeechTotalMinutes)==null?void 0:X.value)||0,"finished-speech-used-minutes":((ie=(se=I(d))==null?void 0:se.finishedSpeechUsedMinutes)==null?void 0:ie.value)||0,"finished-speech-used-seconds":((ce=(ne=I(d))==null?void 0:ne.finishedSpeechUsedSeconds)==null?void 0:ce.value)||0,"finished-speech-finished-at":((be=(de=I(d))==null?void 0:de.finishedSpeechFinishedAt)==null?void 0:be.value)||null,"session-interactions":((ge=(ye=I(v))==null?void 0:ye.sessionInteractions)==null?void 0:ge.value)||[],members:((Ie=(ke=I(t))==null?void 0:ke.members)==null?void 0:Ie.value)||[],speeches:(ee=(R=(qe=I(d))==null?void 0:qe.allSpeeches)==null?void 0:R.value)!=null?ee:[],onToggleRegistration:(K=I(t))==null?void 0:K.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","members","speeches","onToggleRegistration"])])])])}}};var Ui=je(ji,[["__scopeId","data-v-78c56856"]]);const Ni={class:"expedient-tab"},Oi={class:"overview-card modern-card"},Bi={class:"card-content"},Qi={class:"summary-title"},Ji={class:"tw-flex tw-items-center"},Hi={__name:"MiscellaneousSubjectsTab",props:{sessionId:{type:Number,default:null},sessionData:{type:Object,default:null}},setup(e){const l=e,s=$e("sessionSettings"),n=$e("quorum"),t=$e("miscellaneousSubject"),d=$e("miscellaneousSubjectSpeech"),v=$e("sessionInteractions"),p=$e("sessionAgenda"),m=u(()=>{var y;return l.sessionId||((y=p==null?void 0:p.selectedAgendaId)==null?void 0:y.value)||null});return(y,E)=>{var k,A,$,c,w,S,H,L,F,Q,q,D,b,U,O,B,P,N,_,M,ae,re,W,r,z,j,ue,he,xe,we,g,o,h,i,x,X,se,ie,ne,ce,de,be,ye,ge,ke,Ie,qe,R,ee,K;return f(),C("div",Ni,[a("div",Oi,[a("div",Bi,[a("div",Qi,[a("span",Ji,[V(te,{name:"topic",size:"20px",class:"tw-mr-2"}),Re(" "+T(((A=(k=I(s))==null?void 0:k.miscellaneousSubjectsName)==null?void 0:A.value)||"Assuntos Diversos"),1)]),(c=($=I(t))==null?void 0:$.loadingData)!=null&&c.value?(f(),le(st,{key:0,color:"teal",size:"24px",class:"tw-ml-auto"})):G("",!0)]),V(Pt,{title:((S=(w=I(s))==null?void 0:w.miscellaneousSubjectsName)==null?void 0:S.value)||"Assuntos Diversos","expedient-label":(((L=(H=I(s))==null?void 0:H.miscellaneousSubjectsName)==null?void 0:L.value)||"Assuntos Diversos").toLowerCase(),icon:"topic","header-class":"bg-teal","header-color":"teal","button-color":"teal","button-icon":"topic","is-registered":((Q=(F=I(t))==null?void 0:F.isRegistered)==null?void 0:Q.value)||!1,"is-present":((D=(q=I(n))==null?void 0:q.isPresent)==null?void 0:D.value)||!1,started:((U=(b=I(t))==null?void 0:b.started)==null?void 0:U.value)||!1,finalized:((B=(O=I(t))==null?void 0:O.finalized)==null?void 0:B.value)||!1,"finalized-at":((N=(P=I(t))==null?void 0:P.finalizedAt)==null?void 0:N.value)||null,"registration-order":((M=(_=I(t))==null?void 0:_.registrationOrder)==null?void 0:M.value)||null,"registered-at":((re=(ae=I(t))==null?void 0:ae.registeredAt)==null?void 0:re.value)||null,"selected-agenda-id":m.value,"can-send":((r=(W=I(t))==null?void 0:W.canSend)==null?void 0:r.value)||!1,"loading-data":((j=(z=I(t))==null?void 0:z.loadingData)==null?void 0:j.value)||!1,"loading-action":((he=(ue=I(t))==null?void 0:ue.loadingAction)==null?void 0:he.value)||!1,"current-speech":((we=(xe=I(d))==null?void 0:xe.currentSpeech)==null?void 0:we.value)||null,"remaining-time":((o=(g=I(d))==null?void 0:g.remainingTime)==null?void 0:o.value)||null,"finished-speech":((i=(h=I(d))==null?void 0:h.finishedSpeech)==null?void 0:i.value)||null,"finished-speech-total-minutes":((X=(x=I(d))==null?void 0:x.finishedSpeechTotalMinutes)==null?void 0:X.value)||0,"finished-speech-used-minutes":((ie=(se=I(d))==null?void 0:se.finishedSpeechUsedMinutes)==null?void 0:ie.value)||0,"finished-speech-used-seconds":((ce=(ne=I(d))==null?void 0:ne.finishedSpeechUsedSeconds)==null?void 0:ce.value)||0,"finished-speech-finished-at":((be=(de=I(d))==null?void 0:de.finishedSpeechFinishedAt)==null?void 0:be.value)||null,"session-interactions":((ge=(ye=I(v))==null?void 0:ye.sessionInteractions)==null?void 0:ge.value)||[],members:((Ie=(ke=I(t))==null?void 0:ke.members)==null?void 0:Ie.value)||[],speeches:(ee=(R=(qe=I(d))==null?void 0:qe.allSpeeches)==null?void 0:R.value)!=null?ee:[],onToggleRegistration:(K=I(t))==null?void 0:K.toggleRegistration},null,8,["title","expedient-label","is-registered","is-present","started","finalized","finalized-at","registration-order","registered-at","selected-agenda-id","can-send","loading-data","loading-action","current-speech","remaining-time","finished-speech","finished-speech-total-minutes","finished-speech-used-minutes","finished-speech-used-seconds","finished-speech-finished-at","session-interactions","members","speeches","onToggleRegistration"])])])])}}};var Wi=je(Hi,[["__scopeId","data-v-0fa8ef88"]]);let Gi=0;const Ki=["click","keydown"],Yi={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Gi++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Xi(e,l,s,n){const t=$e(Qt,et);if(t===et)return console.error("QTab/QRouteTab component needs to be child of QTabs"),et;const{proxy:d}=Je(),v=Z(null),p=Z(null),m=Z(null),y=u(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),E=u(()=>t.currentModel.value===e.name),k=u(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(E.value===!0?" q-tab--active"+(t.tabProps.value.activeClass?" "+t.tabProps.value.activeClass:"")+(t.tabProps.value.activeColor?` text-${t.tabProps.value.activeColor}`:"")+(t.tabProps.value.activeBgColor?` bg-${t.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&t.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||t.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),A=u(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(t.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),$=u(()=>e.disable===!0||t.hasFocus.value===!0||E.value===!1&&t.hasActiveTab.value===!0?-1:e.tabindex||0);function c(F,Q){var q;if(Q!==!0&&(F==null?void 0:F.qAvoidFocus)!==!0&&((q=v.value)==null||q.focus()),e.disable===!0){(n==null?void 0:n.hasRouterLink.value)===!0&&gt(F);return}if(n===void 0){t.updateModel({name:e.name}),s("click",F);return}if(n.hasRouterLink.value===!0){const D=(b={})=>{let U;const O=b.to===void 0||ba(b.to,e.to)===!0?t.avoidRouteWatcher=Ot():null;return n.navigateToRouterLink(F,{...b,returnRouterError:!0}).catch(B=>{U=B}).then(B=>{var P;if(O===t.avoidRouteWatcher&&(t.avoidRouteWatcher=!1,U===void 0&&(B===void 0||((P=B.message)==null?void 0:P.startsWith("Avoided redundant navigation"))===!0)&&t.updateModel({name:e.name})),b.returnRouterError===!0)return U!==void 0?Promise.reject(U):B})};s("click",F,D),F.defaultPrevented!==!0&&D();return}s("click",F)}function w(F){pa(F,[13,32])?c(F,!0):wa(F)!==!0&&F.keyCode>=35&&F.keyCode<=40&&F.altKey!==!0&&F.metaKey!==!0&&t.onKbdNavigate(F.keyCode,d.$el)===!0&&gt(F),s("keydown",F)}function S(){const F=t.tabProps.value.narrowIndicator,Q=[],q=oe("div",{ref:m,class:["q-tab__indicator",t.tabProps.value.indicatorClass]});e.icon!==void 0&&Q.push(oe(te,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&Q.push(oe("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&Q.push(e.alertIcon!==void 0?oe(te,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):oe("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),F===!0&&Q.push(q);const D=[oe("div",{class:"q-focus-helper",tabindex:-1,ref:v}),oe("div",{class:A.value},lt(l.default,Q))];return F===!1&&D.push(q),D}const H={name:u(()=>e.name),rootRef:p,tabIndicatorRef:m,routeData:n};rt(()=>{t.unregisterTab(H)}),ut(()=>{t.registerTab(H)});function L(F,Q){const q={ref:p,class:k.value,tabindex:$.value,role:"tab","aria-selected":E.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:c,onKeydown:w,...Q};return Ye(oe(F,q,S()),[[Et,y.value]])}return{renderTab:L,$tabs:t}}var Zi=Ne({name:"QTab",props:Yi,emits:Ki,setup(e,{slots:l,emit:s}){const{renderTab:n}=Xi(e,l,s);return()=>n("div")}});let Zt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Zt=e.scrollLeft>=0,e.remove()}function eo(e,l,s){const n=s===!0?["left","right"]:["top","bottom"];return`absolute-${l===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const to=["left","center","right","justify"];var ao=Ne({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>to.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:l,emit:s}){const{proxy:n}=Je(),{$q:t}=n,{registerTick:d}=xt(),{registerTick:v}=xt(),{registerTick:p}=xt(),{registerTimeout:m,removeTimeout:y}=ft(),{registerTimeout:E,removeTimeout:k}=ft(),A=Z(null),$=Z(null),c=Z(e.modelValue),w=Z(!1),S=Z(!0),H=Z(!1),L=Z(!1),F=[],Q=Z(0),q=Z(!1);let D=null,b=null,U;const O=u(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:eo(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),B=u(()=>{const R=Q.value,ee=c.value;for(let K=0;K<R;K++)if(F[K].name.value===ee)return!0;return!1}),P=u(()=>`q-tabs__content--align-${w.value===!0?"left":L.value===!0?"justify":e.align}`),N=u(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),_=u(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+P.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),M=u(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ae=u(()=>e.vertical!==!0&&t.lang.rtl===!0),re=u(()=>Zt===!1&&ae.value===!0);_e(ae,he),_e(()=>e.modelValue,R=>{W({name:R,setCurrent:!0,skipEmit:!0})}),_e(()=>e.outsideArrows,r);function W({name:R,setCurrent:ee,skipEmit:K}){c.value!==R&&(K!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",R),(ee===!0||e["onUpdate:modelValue"]===void 0)&&(j(c.value,R),c.value=R))}function r(){d(()=>{A.value&&z({width:A.value.offsetWidth,height:A.value.offsetHeight})})}function z(R){if(M.value===void 0||$.value===null)return;const ee=R[M.value.container],K=Math.min($.value[M.value.scroll],Array.prototype.reduce.call($.value.children,(Se,me)=>Se+(me[M.value.content]||0),0)),ve=ee>0&&K>ee;w.value=ve,ve===!0&&v(he),L.value=ee<parseInt(e.breakpoint,10)}function j(R,ee){const K=R!=null&&R!==""?F.find(Se=>Se.name.value===R):null,ve=ee!=null&&ee!==""?F.find(Se=>Se.name.value===ee):null;if(qe===!0)qe=!1;else if(K&&ve){const Se=K.tabIndicatorRef.value,me=ve.tabIndicatorRef.value;D!==null&&(clearTimeout(D),D=null),Se.style.transition="none",Se.style.transform="none",me.style.transition="none",me.style.transform="none";const pe=Se.getBoundingClientRect(),Ve=me.getBoundingClientRect();me.style.transform=e.vertical===!0?`translate3d(0,${pe.top-Ve.top}px,0) scale3d(1,${Ve.height?pe.height/Ve.height:1},1)`:`translate3d(${pe.left-Ve.left}px,0,0) scale3d(${Ve.width?pe.width/Ve.width:1},1,1)`,p(()=>{D=setTimeout(()=>{D=null,me.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",me.style.transform="none"},70)})}ve&&w.value===!0&&ue(ve.rootRef.value)}function ue(R){const{left:ee,width:K,top:ve,height:Se}=$.value.getBoundingClientRect(),me=R.getBoundingClientRect();let pe=e.vertical===!0?me.top-ve:me.left-ee;if(pe<0){$.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(pe),he();return}pe+=e.vertical===!0?me.height-Se:me.width-K,pe>0&&($.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(pe),he())}function he(){const R=$.value;if(R===null)return;const ee=R.getBoundingClientRect(),K=e.vertical===!0?R.scrollTop:Math.abs(R.scrollLeft);ae.value===!0?(S.value=Math.ceil(K+ee.width)<R.scrollWidth-1,H.value=K>0):(S.value=K>0,H.value=e.vertical===!0?Math.ceil(K+ee.height)<R.scrollHeight:Math.ceil(K+ee.width)<R.scrollWidth)}function xe(R){b!==null&&clearInterval(b),b=setInterval(()=>{x(R)===!0&&o()},5)}function we(){xe(re.value===!0?Number.MAX_SAFE_INTEGER:0)}function g(){xe(re.value===!0?0:Number.MAX_SAFE_INTEGER)}function o(){b!==null&&(clearInterval(b),b=null)}function h(R,ee){const K=Array.prototype.filter.call($.value.children,Ve=>Ve===ee||Ve.matches&&Ve.matches(".q-tab.q-focusable")===!0),ve=K.length;if(ve===0)return;if(R===36)return ue(K[0]),K[0].focus(),!0;if(R===35)return ue(K[ve-1]),K[ve-1].focus(),!0;const Se=R===(e.vertical===!0?38:37),me=R===(e.vertical===!0?40:39),pe=Se===!0?-1:me===!0?1:void 0;if(pe!==void 0){const Ve=ae.value===!0?-1:1,Ue=K.indexOf(ee)+pe*Ve;return Ue>=0&&Ue<ve&&(ue(K[Ue]),K[Ue].focus({preventScroll:!0})),!0}}const i=u(()=>re.value===!0?{get:R=>Math.abs(R.scrollLeft),set:(R,ee)=>{R.scrollLeft=-ee}}:e.vertical===!0?{get:R=>R.scrollTop,set:(R,ee)=>{R.scrollTop=ee}}:{get:R=>R.scrollLeft,set:(R,ee)=>{R.scrollLeft=ee}});function x(R){const ee=$.value,{get:K,set:ve}=i.value;let Se=!1,me=K(ee);const pe=R<me?-1:1;return me+=pe*5,me<0?(Se=!0,me=0):(pe===-1&&me<=R||pe===1&&me>=R)&&(Se=!0,me=R),ve(ee,me),he(),Se}function X(R,ee){for(const K in R)if(R[K]!==ee[K])return!1;return!0}function se(){let R=null,ee={matchedLen:0,queryDiff:9999,hrefLen:0};const K=F.filter(pe=>{var Ve;return((Ve=pe.routeData)==null?void 0:Ve.hasRouterLink.value)===!0}),{hash:ve,query:Se}=n.$route,me=Object.keys(Se).length;for(const pe of K){const Ve=pe.routeData.exact.value===!0;if(pe.routeData[Ve===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ue,query:St,matched:na,href:ia}=pe.routeData.resolvedLink.value,_t=Object.keys(St).length;if(Ve===!0){if(Ue!==ve||_t!==me||X(Se,St)===!1)continue;R=pe.name.value;break}if(Ue!==""&&Ue!==ve||_t!==0&&X(St,Se)===!1)continue;const He={matchedLen:na.length,queryDiff:me-_t,hrefLen:ia.length-Ue.length};if(He.matchedLen>ee.matchedLen){R=pe.name.value,ee=He;continue}else if(He.matchedLen!==ee.matchedLen)continue;if(He.queryDiff<ee.queryDiff)R=pe.name.value,ee=He;else if(He.queryDiff!==ee.queryDiff)continue;He.hrefLen>ee.hrefLen&&(R=pe.name.value,ee=He)}if(R===null&&F.some(pe=>pe.routeData===void 0&&pe.name.value===c.value)===!0){qe=!1;return}W({name:R,setCurrent:!0})}function ie(R){if(y(),q.value!==!0&&A.value!==null&&R.target&&typeof R.target.closest=="function"){const ee=R.target.closest(".q-tab");ee&&A.value.contains(ee)===!0&&(q.value=!0,w.value===!0&&ue(ee))}}function ne(){m(()=>{q.value=!1},30)}function ce(){ge.avoidRouteWatcher===!1?E(se):k()}function de(){if(U===void 0){const R=_e(()=>n.$route.fullPath,ce);U=()=>{R(),U=void 0}}}function be(R){F.push(R),Q.value++,r(),R.routeData===void 0||n.$route===void 0?E(()=>{if(w.value===!0){const ee=c.value,K=ee!=null&&ee!==""?F.find(ve=>ve.name.value===ee):null;K&&ue(K.rootRef.value)}}):(de(),R.routeData.hasRouterLink.value===!0&&ce())}function ye(R){F.splice(F.indexOf(R),1),Q.value--,r(),U!==void 0&&R.routeData!==void 0&&(F.every(ee=>ee.routeData===void 0)===!0&&U(),ce())}const ge={currentModel:c,tabProps:O,hasFocus:q,hasActiveTab:B,registerTab:be,unregisterTab:ye,verifyRouteModel:ce,updateModel:W,onKbdNavigate:h,avoidRouteWatcher:!1};De(Qt,ge);function ke(){D!==null&&clearTimeout(D),o(),U==null||U()}let Ie,qe;return rt(ke),Sa(()=>{Ie=U!==void 0,ke()}),_a(()=>{Ie===!0&&(de(),qe=!0,ce()),r()}),()=>oe("div",{ref:A,class:N.value,role:"tablist",onFocusin:ie,onFocusout:ne},[oe(Wt,{onResize:z}),oe("div",{ref:$,class:_.value,onScroll:he},mt(l.default)),oe(te,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(S.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||t.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:we,onTouchstartPassive:we,onMouseupPassive:o,onMouseleavePassive:o,onTouchendPassive:o}),oe(te,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(H.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||t.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:g,onTouchstartPassive:g,onMouseupPassive:o,onMouseleavePassive:o,onTouchendPassive:o})])}}),so=Ne({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:s}){const{proxy:{$q:n}}=Je(),t=$e(ya,et);if(t===et)return console.error("QFooter needs to be child of QLayout"),et;const d=Z(parseInt(e.heightHint,10)),v=Z(!0),p=Z(Bt.value===!0||t.isContainer.value===!0?0:window.innerHeight),m=u(()=>e.reveal===!0||t.view.value.indexOf("F")!==-1||n.platform.is.ios&&t.isContainer.value===!0),y=u(()=>t.isContainer.value===!0?t.containerHeight.value:p.value),E=u(()=>{if(e.modelValue!==!0)return 0;if(m.value===!0)return v.value===!0?d.value:0;const q=t.scroll.value.position+y.value+d.value-t.height.value;return q>0?q:0}),k=u(()=>e.modelValue!==!0||m.value===!0&&v.value!==!0),A=u(()=>e.modelValue===!0&&k.value===!0&&e.reveal===!0),$=u(()=>"q-footer q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(k.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(m.value!==!0?" hidden":""):"")),c=u(()=>{const q=t.rows.value.bottom,D={};return q[0]==="l"&&t.left.space===!0&&(D[n.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),q[2]==="r"&&t.right.space===!0&&(D[n.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),D});function w(q,D){t.update("footer",q,D)}function S(q,D){q.value!==D&&(q.value=D)}function H({height:q}){S(d,q),w("size",q)}function L(){if(e.reveal!==!0)return;const{direction:q,position:D,inflectionPoint:b}=t.scroll.value;S(v,q==="up"||D-b<100||t.height.value-y.value-D-d.value<300)}function F(q){A.value===!0&&S(v,!0),s("focusin",q)}_e(()=>e.modelValue,q=>{w("space",q),S(v,!0),t.animate()}),_e(E,q=>{w("offset",q)}),_e(()=>e.reveal,q=>{q===!1&&S(v,e.modelValue)}),_e(v,q=>{t.animate(),s("reveal",q)}),_e([d,t.scroll,t.height],L),_e(()=>n.screen.height,q=>{t.isContainer.value!==!0&&S(p,q)});const Q={};return t.instances.footer=Q,e.modelValue===!0&&w("size",d.value),w("space",e.modelValue),w("offset",E.value),rt(()=>{t.instances.footer===Q&&(t.instances.footer=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const q=lt(l.default,[oe(Wt,{debounce:0,onResize:H})]);return e.elevated===!0&&q.push(oe("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),oe("footer",{class:$.value,style:c.value,onFocusin:F},q)}}});const no={__name:"MobileBottomNavigation",props:{modelValue:{type:String,default:"home"},tabs:{type:Array,required:!0}},emits:["update:model-value","tab-change"],setup(e,{emit:l}){const s=e,n=l,t=u({get:()=>s.modelValue,set:v=>n("update:model-value",v)});function d(v){t.value=v,n("tab-change",v)}return(v,p)=>(f(),le(so,{class:"mobile-bottom-nav",elevated:""},{default:Y(()=>[V(ao,{modelValue:t.value,"onUpdate:modelValue":[p[0]||(p[0]=m=>t.value=m),d],class:"bottom-nav-tabs","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:Y(()=>[(f(!0),C(Ce,null,Ee(e.tabs,m=>(f(),le(Zi,{key:m.name,name:m.name,icon:m.icon,label:m.label,class:J(["bottom-nav-tab",{"tab-active":t.value===m.name}])},null,8,["name","icon","label","class"]))),128))]),_:1},8,["modelValue"])]),_:1}))}};var io=je(no,[["__scopeId","data-v-a84bfa88"]]);const oo={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},lo={class:"tw-mb-3 md:tw-mb-6"},ro={class:"tw-mb-2 md:tw-mb-4"},uo={class:"tw-mb-3 md:tw-mb-6"},co={key:0,class:"tw-mb-4 md:tw-mb-6"},vo={class:"tw-grid tw-grid-cols-3 tw-gap-4 tw-mb-6"},go={class:"tw-mb-4 md:tw-mb-6"},fo={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},mo={key:0},ho={key:1},po={key:2},wo={key:1,class:"tw-mt-3 md:tw-mt-6"},bo={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},So={__name:"SpeechFullscreenModal",props:{modelValue:{type:Boolean,default:!1},speech:{type:Object,default:null},remainingTime:{type:Number,default:0},usedSeconds:{type:Number,default:null},expedientType:{type:String,default:"Expediente"}},emits:["update:modelValue"],setup(e,{emit:l}){const s=e,n=l,t=u({get:()=>s.modelValue,set:_=>n("update:modelValue",_)}),d=u(()=>{var _;return((_=s.speech)==null?void 0:_.status)==="speaking"}),v=u(()=>{var _;return((_=s.speech)==null?void 0:_.status)==="paused"}),p=u(()=>{var _;return((_=s.speech)==null?void 0:_.status)==="finished"}),m=u(()=>d.value?"mic":v.value?"pause_circle":p.value?"check_circle":"mic_off"),y=u(()=>(d.value||v.value,"white")),E=u(()=>d.value?"Voc\xEA est\xE1 falando":v.value?"Fala pausada":"Fala finalizada"),k=u(()=>d.value?"Sua fala est\xE1 em andamento":v.value?"Aguarde a retomada pelo controle":"Sua fala foi finalizada"),A=u(()=>d.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":v.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":p.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),$=u(()=>d.value?"tw-bg-green-300":v.value?"tw-bg-yellow-300":"tw-bg-gray-300"),c=u(()=>{var _,M;return s.speech?((_=s.speech.allocated_minutes)!=null?_:0)+((M=s.speech.additional_minutes)!=null?M:0):0}),w=u(()=>{var W;if(!s.speech)return 0;const _=c.value*60;if(_<=0)return 0;if(p.value){const r=(W=s.speech.used_seconds)!=null?W:0;return Math.max(0,Math.min(_,Math.floor(Number(r))))}const M=s.usedSeconds!=null?Number(s.usedSeconds):NaN;if(!Number.isNaN(M)&&M>=0)return Math.max(0,Math.min(_,Math.floor(M)));const ae=Number(s.remainingTime);if(Number.isNaN(ae)||ae<0)return 0;const re=_-ae;return Math.max(0,Math.min(_,Math.floor(re)))}),S=u(()=>Math.floor(w.value/60)),H=u(()=>{var _,M;return(M=(_=s.speech)==null?void 0:_.additional_minutes)!=null?M:0}),L=u(()=>{if(!s.speech||c.value===0)return 0;const _=c.value*60,M=w.value,ae=_>0?M/_*100:0;return Math.max(0,Math.min(100,Math.round(ae*10)/10))}),F=u(()=>{if(!s.speech)return 0;const _=s.speech.used_seconds||0;return Math.floor(_/60)}),Q=u(()=>s.speech?(s.speech.used_seconds||0)%60:0),q=u(()=>s.remainingTime>0&&s.remainingTime<=15),D=u(()=>s.remainingTime<=0),b=u(()=>D.value?"tw-bg-red-600 tw-bg-opacity-90":q.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),U=u(()=>(D.value||q.value,"tw-text-white")),O=u(()=>D.value||q.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),B=u(()=>D.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":q.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");function P(_){if(_==null||_<=0)return"0:00";const M=Math.floor(Number(_)),ae=Math.floor(M/60),re=M%60;return`${ae}:${re.toString().padStart(2,"0")}`}let N=null;return _e(()=>[p.value,t.value],([_,M])=>{N&&(clearTimeout(N),N=null),_&&M&&(N=setTimeout(()=>{t.value&&p.value&&(t.value=!1),N=null},3e3))},{immediate:!0}),_e(()=>t.value,_=>{!_&&N&&(clearTimeout(N),N=null)}),pt(()=>{N&&clearTimeout(N)}),(_,M)=>(f(),le(at,{modelValue:t.value,"onUpdate:modelValue":M[0]||(M[0]=ae=>t.value=ae),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:Y(()=>[a("div",{class:J(["fullscreen tw-flex tw-items-center tw-justify-center",A.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[a("div",oo,[a("div",lo,[V(te,{name:m.value,color:y.value,size:_.$q.screen.lt.md?"54px":"100px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),a("div",ro,[V(wt,{label:s.expedientType,color:"white","text-color":"primary",size:_.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["label","size"])]),a("div",uo,[a("h1",{class:J([_.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},T(E.value),3),a("p",{class:J([_.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},T(k.value),3)]),p.value?G("",!0):(f(),C("div",co,[a("div",{class:J([_.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-rounded-2xl","tw-backdrop-blur-sm",b.value])},[a("div",{class:J([_.$q.screen.lt.md?"text-body2":"text-h5",O.value,"tw-mb-2"])},T(B.value),3),a("div",{class:J([_.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",U.value,D.value?"tw-animate-pulse":""])},T(P(s.remainingTime)),3)],2)])),a("div",vo,[a("div",{class:J([_.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Total ",2),a("div",{class:J([_.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(c.value)+" min ",3)],2),a("div",{class:J([_.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Usado ",2),a("div",{class:J([_.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(S.value)+" min ",3)],2),a("div",{class:J([_.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Adicional ",2),a("div",{class:J([_.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+T(H.value)+" min ",3)],2)]),a("div",go,[a("div",fo,[a("div",{class:J(["tw-h-full tw-transition-all tw-duration-1000",$.value]),style:Jt({width:L.value+"%"})},null,6)]),a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},T(L.value.toFixed(0))+"% do tempo utilizado ",3)]),a("div",{class:J([_.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[V(te,{name:"info",size:"20px",class:"tw-mr-2"}),d.value?(f(),C("span",mo," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):v.value?(f(),C("span",ho," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):p.value?(f(),C("span",po," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):G("",!0)],2),p.value?(f(),C("div",wo,[a("div",{class:J([_.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[a("div",{class:J([_.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),a("div",bo,[a("div",null,[a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),a("div",{class:J([_.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(c.value)+" min ",3)]),a("div",null,[a("div",{class:J([_.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),a("div",{class:J([_.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(F.value)+" min "+T(Q.value)+" s ",3)])])],2)])):G("",!0)])],2)]),_:1},8,["modelValue"]))}};var $t=je(So,[["__scopeId","data-v-786d95d7"]]);const _o=["top","right","bottom","left"],At={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>_o.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function ea(e,l){return{formClass:u(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?l.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ta={start:"self-end",center:"self-center",end:"self-start"},yo=Object.keys(ta);var We=Ne({name:"QFabAction",props:{...At,icon:{type:String,default:""},anchor:{type:String,validator:e=>yo.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:l,emit:s}){const n=$e(Ht,()=>({showing:{value:!0},onChildClick:xa})),{formClass:t,labelProps:d}=ea(e,n.showing),v=u(()=>{const k=ta[e.anchor];return t.value+(k!==void 0?` ${k}`:"")}),p=u(()=>e.disable===!0||n.showing.value!==!0);function m(k){n.onChildClick(k),s("click",k)}function y(){const k=[];return l.icon!==void 0?k.push(l.icon()):e.icon!==""&&k.push(oe(te,{name:e.icon})),(e.label!==""||l.label!==void 0)&&k[d.value.action](oe("div",d.value.data,l.label!==void 0?l.label():[e.label])),lt(l.default,k)}const E=Je();return Object.assign(E.proxy,{click:m}),()=>oe(Te,{class:v.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:p.value,onClick:m},y)}});const xo=["up","right","down","left"],qo=["left","center","right"];var aa=Ne({name:"QFab",props:{...At,...Ft,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...At.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>xo.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>qo.includes(e)}},emits:jt,setup(e,{slots:l}){const s=Z(null),n=Z(e.modelValue===!0),t=Ut(),{proxy:{$q:d}}=Je(),{formClass:v,labelProps:p}=ea(e,n),m=u(()=>e.persistent!==!0),{hide:y,toggle:E}=Nt({showing:n,hideOnRouteChange:m}),k=u(()=>({opened:n.value})),A=u(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${v.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),$=u(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),c=u(()=>{const L={id:t.value,role:"menu"};return n.value!==!0&&(L["aria-hidden"]="true"),L}),w=u(()=>`q-fab__icon-holder  q-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function S(L,F){const Q=l[L],q=`q-fab__${L} absolute-full`;return Q===void 0?oe(te,{class:q,name:e[F]||d.iconSet.fab[F]}):oe("div",{class:q},Q(k.value))}function H(){const L=[];return e.hideIcon!==!0&&L.push(oe("div",{class:w.value},[S("icon","icon"),S("active-icon","activeIcon")])),(e.label!==""||l.label!==void 0)&&L[p.value.action](oe("div",p.value.data,l.label!==void 0?l.label(k.value):[e.label])),lt(l.tooltip,L)}return De(Ht,{showing:n,onChildClick(L){var F;y(L),(L==null?void 0:L.qAvoidFocus)!==!0&&((F=s.value)==null||F.$el.focus())}}),()=>oe("div",{class:A.value},[oe(Te,{ref:s,class:v.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t.value,onClick:E},H),oe("div",{class:$.value,...c.value},mt(l.default))])}});const $o={class:"tw-text-center tw-px-4 md:tw-px-6 tw-w-full tw-max-w-4xl tw-py-4",style:{"max-height":"100vh","overflow-y":"auto"}},Io={class:"tw-mb-3 md:tw-mb-8"},Ao={class:"tw-mb-2 md:tw-mb-4"},ko={class:"tw-mb-3 md:tw-mb-6"},Vo={key:0,class:"tw-mb-4 md:tw-mb-8"},Ro={key:1,class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-3 md:tw-gap-4 tw-mb-4 md:tw-mb-8"},To={key:2,class:"tw-mb-4 md:tw-mb-8"},Co={class:"tw-bg-white tw-bg-opacity-20 tw-rounded-full tw-h-3 md:tw-h-4 tw-overflow-hidden"},zo={key:0},Po={key:1},Mo={key:2},Lo={key:3},Eo={key:3,class:"tw-mt-3 md:tw-mt-6"},Do={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-3 md:tw-gap-4"},Fo={__name:"VoiceRequestModal",props:{modelValue:{type:Boolean,default:!1},agendaId:{type:Number,required:!0},hasRequest:{type:Boolean,default:!1},requestOrder:{type:Number,default:null},currentSpeech:{type:Object,default:null},remainingTime:{type:Number,default:0}},emits:["update:modelValue","request-removed"],setup(e,{emit:l}){const s=e,n=l,t=u({get:()=>s.modelValue,set:P=>n("update:modelValue",P)}),d=u(()=>{var P;return((P=s.currentSpeech)==null?void 0:P.status)==="speaking"}),v=u(()=>{var P;return((P=s.currentSpeech)==null?void 0:P.status)==="paused"}),p=u(()=>{var P;return((P=s.currentSpeech)==null?void 0:P.status)==="finished"}),m=u(()=>d.value?"mic":v.value?"pause_circle":p.value?"check_circle":"record_voice_over"),y=u(()=>"white"),E=u(()=>d.value?"Voc\xEA est\xE1 falando":v.value?"Fala pausada":p.value?"Fala finalizada":s.hasRequest?"Pedido de Voz Registrado":"Pedido de Voz"),k=u(()=>d.value?"Sua fala est\xE1 em andamento":v.value?"Aguarde a retomada pelo controle":p.value?"Sua fala foi finalizada":s.hasRequest?"Aguarde o controle iniciar sua fala":"Clique no bot\xE3o para solicitar voz"),A=u(()=>d.value?"tw-bg-gradient-to-br tw-from-green-600 tw-to-green-800":v.value?"tw-bg-gradient-to-br tw-from-yellow-600 tw-to-orange-600":p.value?"tw-bg-gradient-to-br tw-from-blue-600 tw-to-blue-800":s.hasRequest?"tw-bg-gradient-to-br tw-from-purple-600 tw-to-purple-800":"tw-bg-gradient-to-br tw-from-gray-600 tw-to-gray-800"),$=u(()=>d.value?"tw-bg-green-300":v.value?"tw-bg-yellow-300":"tw-bg-gray-300"),c=u(()=>s.currentSpeech?(s.currentSpeech.allocated_minutes||0)+(s.currentSpeech.additional_minutes||0):0),w=u(()=>{if(!s.currentSpeech)return 0;let P=s.currentSpeech.used_seconds||0;return d.value&&s.currentSpeech.started_at&&(P+=Math.floor((new Date-new Date(s.currentSpeech.started_at))/1e3)),Math.floor(P/60)}),S=u(()=>{var P;return((P=s.currentSpeech)==null?void 0:P.additional_minutes)||0}),H=u(()=>{if(!s.currentSpeech||c.value===0)return 0;const P=c.value*60;let N=s.currentSpeech.used_seconds||0;return d.value&&s.currentSpeech.started_at&&(N+=Math.floor((new Date-new Date(s.currentSpeech.started_at))/1e3)),Math.min(100,N/P*100)}),L=u(()=>{if(!s.currentSpeech)return 0;const P=s.currentSpeech.used_seconds||0;return Math.floor(P/60)}),F=u(()=>s.currentSpeech?(s.currentSpeech.used_seconds||0)%60:0),Q=u(()=>s.remainingTime>0&&s.remainingTime<=15),q=u(()=>s.remainingTime<=0),D=u(()=>q.value?"tw-bg-red-600 tw-bg-opacity-90":Q.value?"tw-bg-orange-600 tw-bg-opacity-80":"tw-bg-white tw-bg-opacity-20"),b=u(()=>(q.value||Q.value,"tw-text-white")),U=u(()=>q.value||Q.value?"tw-text-white tw-font-bold":"tw-text-white tw-opacity-80"),O=u(()=>q.value?"\u26A0\uFE0F TEMPO ESGOTADO \u26A0\uFE0F":Q.value?"\u23F0 Tempo Restante (\xDAltimos 15 segundos)":"Tempo Restante");let B=null;return _e(()=>[p.value,t.value],([P,N])=>{B&&(clearTimeout(B),B=null),P&&N&&(B=setTimeout(()=>{t.value&&p.value&&(t.value=!1),B=null},3e3))},{immediate:!0}),_e(()=>t.value,P=>{!P&&B&&(clearTimeout(B),B=null)}),pt(()=>{B&&clearTimeout(B)}),(P,N)=>(f(),le(at,{modelValue:t.value,"onUpdate:modelValue":N[0]||(N[0]=_=>t.value=_),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:Y(()=>[a("div",{class:J(["fullscreen tw-flex tw-items-center tw-justify-center",A.value]),style:{"overflow-y":"auto","max-height":"100vh"}},[a("div",$o,[a("div",Io,[V(te,{name:m.value,color:y.value,size:P.$q.screen.lt.md?"64px":"120px",class:"tw-animate-pulse"},null,8,["name","color","size"])]),a("div",Ao,[V(wt,{label:"Pedido de Voz",color:"white","text-color":"purple",size:P.$q.screen.lt.md?"sm":"md",class:"tw-font-semibold"},null,8,["size"])]),a("div",ko,[a("h1",{class:J([P.$q.screen.lt.md?"text-h5":"text-h3","tw-font-bold","tw-text-white","tw-mb-1","md:tw-mb-2"])},T(E.value),3),a("p",{class:J([P.$q.screen.lt.md?"text-body2":"text-h6","tw-text-white","tw-opacity-90"])},T(k.value),3)]),!p.value&&e.currentSpeech?(f(),C("div",Vo,[a("div",{class:J([P.$q.screen.lt.md?"tw-p-4":"tw-p-8","tw-rounded-2xl","tw-backdrop-blur-sm",D.value])},[a("div",{class:J([P.$q.screen.lt.md?"text-body2":"text-h5",U.value,"tw-mb-2"])},T(O.value),3),a("div",{class:J([P.$q.screen.lt.md?"text-h3":"text-h1","tw-font-bold","tw-tracking-wider",b.value,q.value?"tw-animate-pulse":""])},T(I(vt)(e.remainingTime)),3)],2)])):G("",!0),e.currentSpeech?(f(),C("div",Ro,[a("div",{class:J([P.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total ",2),a("div",{class:J([P.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(c.value)+" min ",3)],2),a("div",{class:J([P.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Usado ",2),a("div",{class:J([P.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])},T(w.value)+" min ",3)],2),S.value>0?(f(),C("div",{key:0,class:J([P.$q.screen.lt.md?"tw-p-3":"tw-p-4","tw-bg-white","tw-bg-opacity-10","tw-rounded-xl","tw-backdrop-blur-sm"])},[a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Adicional ",2),a("div",{class:J([P.$q.screen.lt.md?"text-h6":"text-h5","tw-font-semibold","tw-text-white"])}," +"+T(S.value)+" min ",3)],2)):G("",!0)])):G("",!0),e.currentSpeech?(f(),C("div",To,[a("div",Co,[a("div",{class:J(["tw-h-full tw-transition-all tw-duration-1000",$.value]),style:Jt({width:H.value+"%"})},null,6)]),a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mt-2"])},T(H.value.toFixed(0))+"% do tempo utilizado ",3)])):G("",!0),a("div",{class:J([P.$q.screen.lt.md?"text-body2":"text-body1","tw-text-white","tw-opacity-80"])},[V(te,{name:"info",size:"20px",class:"tw-mr-2"}),d.value?(f(),C("span",zo," Continue falando. O tempo ser\xE1 controlado automaticamente. ")):v.value?(f(),C("span",Po," Sua fala est\xE1 pausada. Aguarde a retomada pelo controle. ")):p.value?(f(),C("span",Mo," Sua fala foi finalizada com sucesso! Esta tela ser\xE1 fechada em breve. ")):e.hasRequest&&!e.currentSpeech?(f(),C("span",Lo," Aguarde o controle iniciar sua fala. ")):G("",!0)],2),p.value&&e.currentSpeech?(f(),C("div",Eo,[a("div",{class:J([P.$q.screen.lt.md?"tw-p-4":"tw-p-6","tw-bg-white","tw-bg-opacity-20","tw-rounded-2xl","tw-backdrop-blur-sm"])},[a("div",{class:J([P.$q.screen.lt.md?"text-body1":"text-h6","tw-text-white","tw-font-semibold","tw-mb-3","md:tw-mb-4"])}," Resumo da Fala ",2),a("div",Do,[a("div",null,[a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Total Alocado ",2),a("div",{class:J([P.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(c.value)+" min ",3)]),a("div",null,[a("div",{class:J([P.$q.screen.lt.md?"text-caption":"text-body2","tw-text-white","tw-opacity-70","tw-mb-1"])}," Tempo Utilizado ",2),a("div",{class:J([P.$q.screen.lt.md?"text-h6":"text-h5","tw-font-bold","tw-text-white"])},T(L.value)+" min "+T(F.value)+" s ",3)])])],2)])):G("",!0)])],2)]),_:1},8,["modelValue"]))}};var sa=je(Fo,[["__scopeId","data-v-3dadbee0"]]);const jo={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},Uo={class:"tw-flex-shrink-0 tw-bg-blue-600 tw-text-white tw-shadow-md tw-p-4 tw-z-10"},No={class:"tw-text-center"},Oo={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},Bo={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},Qo={class:"text-body2 tw-text-white tw-mb-0"},Jo={class:"tw-flex-1 tw-overflow-y-auto tw-p-4 tw-relative"},Ho={class:"tw-max-w-4xl tw-mx-auto"},Wo={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Go={class:"tw-text-center"},Ko={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},Yo={class:"text-body2 tw-text-gray-700"},Xo={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Zo={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},el={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},tl={class:"tw-flex tw-flex-wrap tw-gap-2"},al={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},sl={class:"tw-flex tw-flex-wrap tw-gap-2"},nl={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},il={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},ol={class:"tw-flex tw-items-center tw-gap-3"},ll=["src","alt"],rl={key:1},ul={class:"tw-flex-1 tw-min-w-0"},dl={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},cl={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},vl={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},gl={__name:"ReadingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},reading:{type:Object,default:null},agendaId:{type:Number,default:null},hasRequest:{type:Boolean,default:!1},currentSpeech:{type:Object,default:null},requestOrder:{type:Number,default:null}},emits:["update:modelValue","request-registered"],setup(e,{emit:l}){const s=e,n=l,t=Pe(),d=Xe(),v=Z(!1),p=Z(!1),m=Z(!1),y=$e("voiceRequest",null),E=$e("sessionSettings",null),k=Z(!1),A=u(()=>{var _,M;return(M=(_=y==null?void 0:y.remainingTime)==null?void 0:_.value)!=null?M:0});_e(()=>s.currentSpeech,_=>{_&&["speaking","paused"].includes(_.status)&&(k.value=!0)},{deep:!0,immediate:!0});async function $(){y!=null&&y.loadStatus&&await y.loadStatus(!0)}const c=u({get:()=>s.modelValue,set:_=>n("update:modelValue",_)}),w=u(()=>s.reading?s.reading.type==="reading"?"menu_book":s.reading.type==="secret_voting"?"lock":"how_to_vote":"menu_book"),S=u(()=>s.reading?s.reading.type==="reading"?s.reading.proposition_display_type==="apresentacao"?"Apresenta\xE7\xE3o em Plen\xE1rio":"Leitura no Plen\xE1rio":s.reading.type==="secret_voting"?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento":"Leitura no Plen\xE1rio"),H=u(()=>s.reading?s.reading.type==="reading"?s.reading.proposition_display_type==="apresentacao"?"Proposi\xE7\xE3o em apresenta\xE7\xE3o":"Proposi\xE7\xE3o sendo lida":s.reading.type==="secret_voting"?"A vota\xE7\xE3o secreta est\xE1 em andamento":"A vota\xE7\xE3o est\xE1 em andamento":"Aguarde as informa\xE7\xF5es da proposi\xE7\xE3o");function L(_){if(!_)return"";const M=_.split(" ");return M.length>=2?(M[0][0]+M[M.length-1][0]).toUpperCase():_.substring(0,2).toUpperCase()}function F(_){_&&window.open(_,"_blank")}const Q=Z(!1),q=Z(null),D=Z("Documento PDF");function b(_,M="Documento PDF"){q.value=_,D.value=M,Q.value=!0}function U(){var M,ae;if(!((ae=(M=s.reading)==null?void 0:M.proposition)!=null&&ae.protocol_document))return null;const _=s.reading.proposition.protocol_document;return _.signed_file_url||_.file_url||null}function O(){var M,ae;return(ae=(M=s.reading)==null?void 0:M.proposition)!=null&&ae.protocol_document?s.reading.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function B(){var M,ae,re,W,r,z;if(!s.agendaId)return;const _=(M=t.user)==null?void 0:M.proponent_id;if(!_){ze.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}p.value=!0;try{if((ae=(await Ae.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:_,requested:!0})).data)!=null&&ae.success){ze.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const ue=Fe.getItem("unit_id_num");ue&&d.isConnected&&d.emit("voice-request-registered",{unitId:parseInt(ue),agendaId:parseInt(s.agendaId),proponentId:parseInt(_),proponentName:((re=t.user)==null?void 0:re.name)||((W=t.user)==null?void 0:W.first_name)||"Vereador",source:"vereador"}),n("request-registered"),y!=null&&y.loadStatus&&await y.loadStatus(!0),await new Promise(he=>setTimeout(he,500))}}catch(j){ze.create({type:"negative",color:"blue-6",message:((z=(r=j.response)==null?void 0:r.data)==null?void 0:z.message)||"Erro ao solicitar voz"})}finally{p.value=!1,v.value=!1}}function P(){k.value=!0}async function N(){var M,ae,re,W;if(!s.agendaId)return;const _=(M=t.user)==null?void 0:M.proponent_id;if(!_){ze.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}m.value=!0;try{const r=await Ae.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:_,requested:!1});if((ae=r==null?void 0:r.data)!=null&&ae.success){ze.create({type:"positive",color:"blue-6",message:"Pedido de voz cancelado."});const z=Fe.getItem("unit_id_num");z&&d.isConnected&&d.emit("voice-request-removed",{unitId:parseInt(z),agendaId:parseInt(s.agendaId),proponentId:parseInt(_),source:"vereador"}),y!=null&&y.loadStatus&&await y.loadStatus(!0),v.value=!1}}catch(r){ze.create({type:"negative",color:"blue-6",message:((W=(re=r.response)==null?void 0:re.data)==null?void 0:W.message)||"Erro ao cancelar pedido de voz"})}finally{m.value=!1}}return(_,M)=>(f(),le(at,{modelValue:c.value,"onUpdate:modelValue":M[5]||(M[5]=ae=>c.value=ae),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:Y(()=>{var ae,re,W,r,z,j,ue,he,xe,we,g,o,h,i,x,X,se,ie;return[a("div",jo,[a("div",Uo,[a("div",No,[a("div",Oo,[V(te,{name:w.value,color:"gray-700",size:"32px"},null,8,["name"]),a("h1",Bo,T(S.value),1)]),a("p",Qo,T(H.value),1)])]),a("div",Jo,[a("div",Ho,[(ae=e.reading)!=null&&ae.proposition?(f(),C("div",Wo,[a("div",Go,[a("div",Ko,T((re=e.reading.proposition.species)==null?void 0:re.name)+" "+T(e.reading.proposition.number)+"/"+T(e.reading.proposition.year),1),a("div",Yo,T(e.reading.proposition.title||e.reading.proposition.ementa||"N/A"),1)])])):G("",!0),(r=(W=e.reading)==null?void 0:W.proposition)!=null&&r.description?(f(),C("div",Xo,[M[6]||(M[6]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",Zo,T(e.reading.proposition.description),1)])):G("",!0),((j=(z=e.reading)==null?void 0:z.proposition)==null?void 0:j.documents)&&e.reading.proposition.documents.length>0?(f(),C("div",el,[M[7]||(M[7]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",tl,[(f(!0),C(Ce,null,Ee(e.reading.proposition.documents,ne=>(f(),le(Te,{key:ne.id,href:ne.file_url||ne.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:ne.title||ne.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((he=(ue=e.reading)==null?void 0:ue.proposition)==null?void 0:he.file_url)||((we=(xe=e.reading)==null?void 0:xe.proposition)==null?void 0:we.protocol_document)?(f(),C("div",al,[M[8]||(M[8]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",sl,[e.reading.proposition.file_url?(f(),le(Te,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:M[0]||(M[0]=ne=>F(e.reading.proposition.file_url))})):G("",!0),U()?(f(),le(Te,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:O(),size:"sm",onClick:M[1]||(M[1]=ne=>b(U(),O()))},null,8,["label"])):G("",!0)])])):G("",!0),((o=(g=e.reading)==null?void 0:g.proposition)==null?void 0:o.proponents)&&e.reading.proposition.proponents.length>0?(f(),C("div",nl,[M[9]||(M[9]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",il,[(f(!0),C(Ce,null,Ee(e.reading.proposition.proponents,ne=>(f(),C("div",{key:ne.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",ol,[V(Tt,{size:"40px",color:"primary","text-color":"white"},{default:Y(()=>[ne.avatar?(f(),C("img",{key:0,src:ne.avatar,alt:ne.name},null,8,ll)):(f(),C("span",rl,T(L(ne.name)),1))]),_:2},1024),a("div",ul,[a("div",dl,T(ne.name),1),ne.party?(f(),C("div",cl,T(ne.party),1)):G("",!0)])])]))),128))])])):(h=e.reading)!=null&&h.proposition?G("",!0):(f(),C("div",vl,[V(te,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),M[10]||(M[10]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da leitura ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&((i=e.reading)==null?void 0:i.type)==="reading"&&((X=(x=I(E))==null?void 0:x.enableVoiceRequestReading)==null?void 0:X.value)?(f(),le(aa,{key:0,modelValue:v.value,"onUpdate:modelValue":M[2]||(M[2]=ne=>v.value=ne),"vertical-actions-align":"right",color:e.hasRequest?"info":"positive",icon:e.hasRequest?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:Y(()=>{var ne;return[!e.hasRequest||e.currentSpeech&&e.currentSpeech.status==="finished"?(f(),le(We,{key:0,color:"positive",icon:"record_voice_over",label:e.hasRequest&&((ne=e.currentSpeech)==null?void 0:ne.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:p.value,onClick:B},null,8,["label","loading"])):e.hasRequest&&!e.currentSpeech?(f(),C(Ce,{key:1},[V(We,{color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""}),V(We,{color:"negative",icon:"cancel",label:"Cancelar Pedido de voz",loading:m.value,onClick:N},null,8,["loading"])],64)):e.currentSpeech&&["speaking","paused"].includes(e.currentSpeech.status)?(f(),le(We,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:P})):G("",!0)]}),_:1},8,["modelValue","color","icon"])):G("",!0),e.agendaId&&((ie=(se=I(E))==null?void 0:se.enableVoiceRequestReading)==null?void 0:ie.value)?(f(),le(sa,{key:1,modelValue:k.value,"onUpdate:modelValue":M[3]||(M[3]=ne=>k.value=ne),"agenda-id":e.agendaId,"has-request":e.hasRequest,"request-order":e.requestOrder,"current-speech":e.currentSpeech,"remaining-time":A.value,onRequestRemoved:$},null,8,["modelValue","agenda-id","has-request","request-order","current-speech","remaining-time"])):G("",!0),V(bt,{modelValue:Q.value,"onUpdate:modelValue":M[4]||(M[4]=ne=>Q.value=ne),"pdf-url":q.value,title:D.value},null,8,["modelValue","pdf-url","title"])])]}),_:1},8,["modelValue"]))}};var fl=je(gl,[["__scopeId","data-v-f204a24e"]]);const ml={class:"tw-flex tw-flex-col tw-h-full tw-bg-gray-100"},hl={class:"tw-text-center"},pl={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-2"},wl={class:"text-h6 tw-font-bold tw-text-white tw-mb-0"},bl={class:"text-body2 tw-text-white tw-mb-0"},Sl={class:"tw-flex-1 tw-overflow-y-auto tw-p-4"},_l={class:"tw-max-w-4xl tw-mx-auto"},yl={key:0,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},xl={class:"tw-text-center tw-mb-3"},ql={class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"},$l={key:0,class:"tw-flex tw-justify-center"},Il={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200 tw-min-w-[120px]"},Al={class:"tw-text-center tw-pr-2"},kl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Vl={key:1,class:"tw-grid tw-grid-cols-4 tw-gap-2"},Rl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-green-50 tw-rounded-lg tw-border tw-border-green-200"},Tl={class:"tw-text-center"},Cl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},zl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-red-50 tw-rounded-lg tw-border tw-border-red-200"},Pl={class:"tw-text-center"},Ml={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Ll={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-orange-50 tw-rounded-lg tw-border tw-border-orange-200"},El={class:"tw-text-center"},Dl={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Fl={class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-1 tw-p-3 tw-bg-blue-50 tw-rounded-lg tw-border-2 tw-border-blue-200"},jl={class:"tw-text-center"},Ul={class:"text-h6 tw-font-bold tw-text-gray-900 tw-leading-tight"},Nl={key:1,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Ol={class:"tw-text-center"},Bl={class:"text-body1 tw-font-bold tw-text-gray-900 tw-mb-1"},Ql={class:"text-body2 tw-text-gray-700"},Jl={key:2,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Hl={class:"text-body2 tw-text-gray-800 tw-leading-relaxed tw-whitespace-pre-wrap tw-text-justify"},Wl={key:3,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Gl={class:"tw-flex tw-flex-wrap tw-gap-2"},Kl={key:4,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4 tw-mb-4"},Yl={class:"tw-flex tw-flex-wrap tw-gap-2"},Xl={key:5,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-4"},Zl={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-3"},er={class:"tw-flex tw-items-center tw-gap-3"},tr=["src","alt"],ar={key:1},sr={class:"tw-flex-1 tw-min-w-0"},nr={class:"text-body2 tw-font-semibold tw-text-gray-900 tw-truncate"},ir={key:0,class:"text-caption tw-text-gray-600 tw-truncate"},or={key:6,class:"tw-bg-white tw-rounded-lg tw-shadow-sm tw-p-6 tw-text-center"},lr={key:2,class:"tw-flex-shrink-0 tw-bg-white tw-p-4 tw-border-t tw-border-gray-200 tw-shadow-md"},rr={class:"tw-max-w-2xl tw-mx-auto"},ur={class:"text-h6 tw-font-bold tw-text-gray-800 tw-mb-2 tw-text-center"},dr={key:0},cr={key:1},vr={key:2},gr={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-mb-3"},fr={__name:"VotingFullscreenModal",props:{modelValue:{type:Boolean,default:!1},voting:{type:Object,default:null},agendaId:{type:Number,required:!0},onVoteRegistered:{type:Function,default:null}},emits:["update:modelValue","vote-registered"],setup(e,{emit:l}){const s=e,n=l,t=Pe(),d=Xe(),v=Z(!1),p=Z(!1),m=Z(null),y=$e("voiceRequest",null),E=$e("sessionSettings",null),k=Z(!1),A=Z(!1),$=Z(!1),c=Z(!1),w=Z(!1);ut(()=>{w.value=!0});const S=u(()=>{var h,i;return(i=(h=y==null?void 0:y.hasRequest)==null?void 0:h.value)!=null?i:!1}),H=u(()=>{var h,i;return(i=(h=y==null?void 0:y.currentSpeech)==null?void 0:h.value)!=null?i:null}),L=u(()=>{var h,i;return(i=(h=y==null?void 0:y.requestOrder)==null?void 0:h.value)!=null?i:null}),F=u(()=>{var h,i;return(i=(h=y==null?void 0:y.remainingTime)==null?void 0:h.value)!=null?i:0});async function Q(){var i,x,X,se,ie,ne;if(!s.agendaId)return;const h=(i=t.user)==null?void 0:i.proponent_id;if(!h){ze.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}A.value=!0;try{const ce=await Ae.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:h,requested:!0});if((x=ce==null?void 0:ce.data)!=null&&x.success){ze.create({type:"positive",color:"blue-6",message:"Pedido de voz registrado com sucesso!"});const de=Fe.getItem("unit_id_num");de&&d.isConnected&&d.emit("voice-request-registered",{unitId:parseInt(de),agendaId:parseInt(s.agendaId),proponentId:parseInt(h),proponentName:((X=t.user)==null?void 0:X.name)||((se=t.user)==null?void 0:se.first_name)||"Vereador",source:"vereador"}),y!=null&&y.loadStatus&&await y.loadStatus(!0),await new Promise(be=>setTimeout(be,500))}}catch(ce){ze.create({type:"negative",color:"blue-6",message:((ne=(ie=ce.response)==null?void 0:ie.data)==null?void 0:ne.message)||"Erro ao solicitar voz"})}finally{A.value=!1,k.value=!1}}function q(){c.value=!0}async function D(){var i,x,X,se;if(!s.agendaId)return;const h=(i=t.user)==null?void 0:i.proponent_id;if(!h){ze.create({type:"negative",color:"blue-8",message:"Erro: Proponente n\xE3o identificado"});return}$.value=!0;try{const ie=await Ae.post(`/api/pauta/${s.agendaId}/voice-request/register`,{proponent_id:h,requested:!1});if((x=ie==null?void 0:ie.data)!=null&&x.success){ze.create({type:"positive",color:"blue-6",message:"Pedido de voz cancelado."});const ne=Fe.getItem("unit_id_num");ne&&d.isConnected&&d.emit("voice-request-removed",{unitId:parseInt(ne),agendaId:parseInt(s.agendaId),proponentId:parseInt(h),source:"vereador"}),y!=null&&y.loadStatus&&await y.loadStatus(!0),k.value=!1}}catch(ie){ze.create({type:"negative",color:"blue-6",message:((se=(X=ie.response)==null?void 0:X.data)==null?void 0:se.message)||"Erro ao cancelar pedido de voz"})}finally{$.value=!1}}function b(){y!=null&&y.loadStatus&&y.loadStatus(!0)}const U=u({get:()=>s.modelValue,set:h=>n("update:modelValue",h)});_e(()=>s.modelValue,h=>{h||(p.value=!1,m.value=null,v.value=!1)}),_e(H,h=>{h&&["speaking","paused"].includes(h.status)&&w.value&&(c.value=!0)},{deep:!0,immediate:!0}),_e(()=>{var h;return(h=s.voting)==null?void 0:h.id},(h,i)=>{h!==i&&i!==void 0&&(p.value=!1,m.value=null,v.value=!1)}),_e(()=>s.voting,h=>{var i;console.log("[VotingFullscreenModal] Voting atualizado:",{voting:h,hasId:!!(h!=null&&h.id),hasVotes:!!(h!=null&&h.votes),votesCount:(i=h==null?void 0:h.votes)==null?void 0:i.length})},{immediate:!0,deep:!0});const O=u(()=>{var x,X,se,ie,ne;const h=(x=t.user)==null?void 0:x.proponent_id;if(!((X=s.voting)!=null&&X.votes)||!h)return console.log("[VotingFullscreenModal] myVote computed:",{hasVoting:!!s.voting,hasVotes:!!((se=s.voting)!=null&&se.votes),votesLength:(ne=(ie=s.voting)==null?void 0:ie.votes)==null?void 0:ne.length,proponentId:h}),null;const i=s.voting.votes.find(ce=>ce.proponent_id===parseInt(h));return(i==null?void 0:i.vote)||null}),B=u(()=>O.value!==null),P=u(()=>{const h=O.value||(p.value?m.value:null);return h?h==="favor"?"A Favor":h==="against"?"Contra":"Absten\xE7\xE3o":""});u(()=>{const h=O.value||(p.value?m.value:null);return h?h==="favor"?"thumb_up":h==="against"?"thumb_down":"remove_circle":"how_to_vote"}),u(()=>{const h=O.value||(p.value?m.value:null);return h?h==="favor"?"green":h==="against"?"red":"orange":"primary"});const N=u(()=>{const h=O.value||(p.value?m.value:null);return h?h==="favor"?"tw-text-green-600":h==="against"?"tw-text-red-600":"tw-text-orange-600":""}),_=u(()=>{var h;return((h=s.voting)==null?void 0:h.type)==="secret_voting"}),M=u(()=>_.value?"Vota\xE7\xE3o Secreta em Andamento":"Vota\xE7\xE3o em Andamento"),ae=u(()=>_.value?"Vota\xE7\xE3o secreta - Seu voto ser\xE1 mantido em sigilo":"Registre seu voto"),re=u(()=>_.value?"lock":"how_to_vote");u(()=>_.value?"purple":"deep-purple");const W=u(()=>{var i;if(!((i=s.voting)!=null&&i.votes))return{favor:0,against:0,abstain:0,total:0};const h=s.voting.votes;return{favor:h.filter(x=>x.vote==="favor").length,against:h.filter(x=>x.vote==="against").length,abstain:h.filter(x=>x.vote==="abstain").length,total:h.length}});function r(h){if(!h)return"";const i=h.split(" ");return i.length>=2?(i[0][0]+i[i.length-1][0]).toUpperCase():h.substring(0,2).toUpperCase()}function z(h){h&&window.open(h,"_blank")}const j=Z(!1),ue=Z(null),he=Z("Documento PDF");function xe(h,i="Documento PDF"){ue.value=h,he.value=i,j.value=!0}function we(){var i,x;if(!((x=(i=s.voting)==null?void 0:i.proposition)!=null&&x.protocol_document))return null;const h=s.voting.proposition.protocol_document;return h.signed_file_url||h.file_url||null}function g(){var i,x;return(x=(i=s.voting)==null?void 0:i.proposition)!=null&&x.protocol_document?s.voting.proposition.protocol_document.title||"Abrir PDF do Protocolo":"Abrir PDF"}async function o(h){var X,se,ie,ne,ce,de,be,ye,ge,ke,Ie,qe,R,ee,K,ve,Se;const i=(X=t.user)==null?void 0:X.proponent_id,x=((de=(ce=(ne=(ie=(se=s.voting)==null?void 0:se.proposition)==null?void 0:ie.species)==null?void 0:ne.name)==null?void 0:ce.toLowerCase())==null?void 0:de.trim())==="ata"||((Ie=(ke=(ge=(ye=(be=s.voting)==null?void 0:be.proposition)==null?void 0:ye.species)==null?void 0:ge.title)==null?void 0:ke.toLowerCase())==null?void 0:Ie.trim())==="ata";if(!((qe=s.voting)!=null&&qe.id)){ze.create({type:"negative",color:"blue-6",message:"Erro: Vota\xE7\xE3o n\xE3o identificada"});return}if(!x&&!i){ze.create({type:"negative",color:"blue-6",message:"Erro: Proponente n\xE3o identificado"});return}if(s.voting.type==="reading"){ze.create({type:"negative",color:"blue-6",message:"N\xE3o \xE9 poss\xEDvel votar em uma leitura. Apenas vota\xE7\xF5es permitem votos."});return}if(s.voting.type!=="voting"&&s.voting.type!=="secret_voting"){ze.create({type:"negative",color:"blue-6",message:"Tipo de vota\xE7\xE3o inv\xE1lido."});return}v.value=!0,m.value=h;try{const me={vote:h};!x&&i&&(me.proponent_id=parseInt(i));const pe=await Ae.post(`/pauta/${s.agendaId}/voting/reading/${s.voting.id}/vote`,me);if((R=pe==null?void 0:pe.data)!=null&&R.success){p.value=!0;const Ve=Fe.getItem("unit_id_num");if(Ve&&d.isConnected&&d.emit("voting-vote-registered",{unitId:parseInt(Ve),agendaId:s.agendaId,readingId:s.voting.id,proponentId:x?null:parseInt(i),vote:h,timestamp:new Date().toISOString()}),n("vote-registered"),s.onVoteRegistered&&typeof s.onVoteRegistered=="function")try{await s.onVoteRegistered()}catch(Ue){console.error("[VotingFullscreenModal] Erro ao atualizar status ap\xF3s voto:",Ue)}else await new Promise(Ue=>{setTimeout(Ue,800)});v.value=!1}else p.value=!1,m.value=null,v.value=!1}catch(me){console.error("[VotingFullscreenModal] Erro ao votar:",me);const pe=((K=(ee=me.response)==null?void 0:ee.data)==null?void 0:K.message)||((Se=(ve=me.response)==null?void 0:ve.data)==null?void 0:Se.error)||"Erro ao registrar voto. Tente novamente.";ze.create({type:"negative",color:"blue-6",message:pe,position:"top",timeout:5e3}),p.value=!1,m.value=null,v.value=!1}}return(h,i)=>(f(),le(at,{modelValue:U.value,"onUpdate:modelValue":i[8]||(i[8]=x=>U.value=x),maximized:"","transition-show":"fade","transition-hide":"fade","no-esc-dismiss":!0,"no-backdrop-dismiss":!0},{default:Y(()=>{var x,X,se,ie,ne,ce,de,be,ye,ge,ke,Ie,qe,R,ee;return[a("div",ml,[a("div",{class:J(["tw-flex-shrink-0 tw-text-white tw-shadow-md tw-p-4 tw-z-10",_.value?"tw-bg-black":"bg-deep-purple-6"])},[a("div",hl,[a("div",pl,[V(te,{name:re.value,color:"white",size:"32px"},null,8,["name"]),a("h1",wl,T(M.value),1)]),a("p",bl,T(ae.value),1)])],2),a("div",Sl,[a("div",_l,[e.voting&&e.voting.votes&&e.voting.votes.length>0?(f(),C("div",yl,[a("div",xl,[a("div",ql,[V(te,{name:"people",color:"primary",size:"20px",class:"tw-pr-2"}),Re(" "+T((_.value,"Votos Registrados")),1)]),_.value?(f(),C("div",$l,[a("div",Il,[a("div",Al,[a("div",kl,T(W.value.total),1)]),i[9]||(i[9]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Votaram ",-1))])])):(f(),C("div",Vl,[a("div",Rl,[V(te,{name:"thumb_up",color:"green",size:"20px"}),a("div",Tl,[a("div",Cl,T(W.value.favor),1),i[10]||(i[10]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," A Favor ",-1))])]),a("div",zl,[V(te,{name:"thumb_down",color:"red",size:"20px"}),a("div",Pl,[a("div",Ml,T(W.value.against),1),i[11]||(i[11]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Contra ",-1))])]),a("div",Ll,[V(te,{name:"remove_circle",color:"orange",size:"20px"}),a("div",El,[a("div",Dl,T(W.value.abstain),1),i[12]||(i[12]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Absten\xE7\xF5es ",-1))])]),a("div",Fl,[V(te,{name:"people",color:"primary",size:"20px"}),a("div",jl,[a("div",Ul,T(W.value.total),1),i[13]||(i[13]=a("div",{class:"text-body2 tw-text-gray-700 tw-mt-0"}," Total ",-1))])])]))])])):G("",!0),(x=e.voting)!=null&&x.proposition?(f(),C("div",Nl,[a("div",Ol,[a("div",Bl,T((X=e.voting.proposition.species)==null?void 0:X.name)+" "+T(e.voting.proposition.number)+"/"+T(e.voting.proposition.year),1),a("div",Ql,T(e.voting.proposition.title||e.voting.proposition.ementa||"N/A"),1)])])):G("",!0),(ie=(se=e.voting)==null?void 0:se.proposition)!=null&&ie.description?(f(),C("div",Jl,[i[14]||(i[14]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Descri\xE7\xE3o ",-1)),a("div",Hl,T(e.voting.proposition.description),1)])):G("",!0),((ce=(ne=e.voting)==null?void 0:ne.proposition)==null?void 0:ce.documents)&&e.voting.proposition.documents.length>0?(f(),C("div",Wl,[i[15]||(i[15]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",Gl,[(f(!0),C(Ce,null,Ee(e.voting.proposition.documents,K=>(f(),le(Te,{key:K.id,href:K.file_url||K.signed_file_url,target:"_blank",color:"primary",outline:"",icon:"picture_as_pdf",label:K.title||K.original_filename||"Abrir PDF",size:"sm"},null,8,["href","label"]))),128))])])):((be=(de=e.voting)==null?void 0:de.proposition)==null?void 0:be.file_url)||((ge=(ye=e.voting)==null?void 0:ye.proposition)==null?void 0:ge.protocol_document)?(f(),C("div",Kl,[i[16]||(i[16]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Documentos ",-1)),a("div",Yl,[e.voting.proposition.file_url?(f(),le(Te,{key:0,color:"primary",outline:"",icon:"description",label:"Abrir Arquivo",size:"sm",onClick:i[0]||(i[0]=K=>z(e.voting.proposition.file_url))})):G("",!0),we()?(f(),le(Te,{key:1,color:"primary",outline:"",icon:"picture_as_pdf",label:g(),size:"sm",onClick:i[1]||(i[1]=K=>xe(we(),g()))},null,8,["label"])):G("",!0)])])):G("",!0),((Ie=(ke=e.voting)==null?void 0:ke.proposition)==null?void 0:Ie.proponents)&&e.voting.proposition.proponents.length>0?(f(),C("div",Xl,[i[17]||(i[17]=a("div",{class:"text-body1 tw-font-semibold tw-text-gray-900 tw-mb-3"}," Proponentes ",-1)),a("div",Zl,[(f(!0),C(Ce,null,Ee(e.voting.proposition.proponents,K=>(f(),C("div",{key:K.id,class:"tw-bg-gray-50 tw-rounded-lg tw-p-3"},[a("div",er,[V(Tt,{size:"40px",color:"primary","text-color":"white"},{default:Y(()=>[K.avatar?(f(),C("img",{key:0,src:K.avatar,alt:K.name},null,8,tr)):(f(),C("span",ar,T(r(K.name)),1))]),_:2},1024),a("div",sr,[a("div",nr,T(K.name),1),K.party?(f(),C("div",ir,T(K.party),1)):G("",!0)])])]))),128))])])):(qe=e.voting)!=null&&qe.proposition?G("",!0):(f(),C("div",or,[V(te,{name:"info",size:"48px",color:"gray-400",class:"tw-mb-3"}),i[18]||(i[18]=a("div",{class:"text-body1 tw-text-gray-600"}," Informa\xE7\xF5es da vota\xE7\xE3o ser\xE3o exibidas aqui ",-1))]))])]),e.agendaId&&e.voting&&(e.voting.type==="voting"||e.voting.type==="secret_voting")&&((ee=(R=I(E))==null?void 0:R.enableVoiceRequestVoting)==null?void 0:ee.value)?(f(),le(aa,{key:0,modelValue:k.value,"onUpdate:modelValue":i[2]||(i[2]=K=>k.value=K),"vertical-actions-align":"right",color:S.value?"info":"positive",icon:S.value?"hourglass_empty":"record_voice_over",direction:"up",style:{position:"fixed",bottom:"16px",right:"16px","z-index":"10000"}},{default:Y(()=>{var K;return[!S.value||H.value&&H.value.status==="finished"?(f(),le(We,{key:0,color:"positive",icon:"record_voice_over",label:S.value&&((K=H.value)==null?void 0:K.status)==="finished"?"Solicitar Novamente":"Solicitar Voz",loading:A.value,onClick:Q},null,8,["label","loading"])):S.value&&!H.value?(f(),C(Ce,{key:1},[V(We,{color:"info",icon:"hourglass_empty",label:"Aguardando Libera\xE7\xE3o",disable:""}),V(We,{color:"negative",icon:"cancel",label:"Cancelar Pedido de voz",loading:$.value,onClick:D},null,8,["loading"])],64)):H.value&&["speaking","paused"].includes(H.value.status)?(f(),le(We,{key:2,color:"primary",icon:"mic",label:"Ver Fala",onClick:q})):G("",!0)]}),_:1},8,["modelValue","color","icon"])):G("",!0),e.agendaId&&w.value?(f(),le(sa,{key:1,modelValue:c.value,"onUpdate:modelValue":i[3]||(i[3]=K=>c.value=K),"agenda-id":e.agendaId,"has-request":S.value,"request-order":L.value,"current-speech":H.value,"remaining-time":F.value,onRequestRemoved:b},null,8,["modelValue","agenda-id","has-request","request-order","current-speech","remaining-time"])):G("",!0),e.voting&&e.voting.id&&e.voting.type!=="reading"?(f(),C("div",lr,[a("div",rr,[a("div",ur,[B.value&&!_.value?(f(),C("span",dr,[i[19]||(i[19]=Re("Seu voto atual: ",-1)),a("strong",{class:J(N.value)},T(P.value),3)])):B.value&&_.value?(f(),C("span",cr,"Voc\xEA j\xE1 votou nesta vota\xE7\xE3o secreta")):(f(),C("span",vr,"Como deseja votar?"))]),v.value?(f(),C("div",gr,[V(st,{color:"primary",size:"24px"}),i[20]||(i[20]=a("span",{class:"text-body2 tw-text-gray-600"},"Aguarde, processando voto...",-1))])):G("",!0),a("div",{class:J(["tw-grid tw-grid-cols-3 tw-gap-2",{"tw-opacity-50":v.value}])},[V(Te,{color:"green",outline:_.value?!0:O.value!=="favor",size:"md",icon:"thumb_up",label:"A Favor",class:J(["tw-rounded-md",!_.value&&O.value==="favor"?"vote-selected":""]),disable:v.value||_.value&&B.value&&O.value==="favor",loading:v.value&&m.value==="favor",onClick:i[4]||(i[4]=K=>o("favor"))},null,8,["outline","class","disable","loading"]),V(Te,{color:"red",outline:_.value?!0:O.value!=="against",size:"md",icon:"thumb_down",label:"Contra",class:J(["tw-rounded-md",!_.value&&O.value==="against"?"vote-selected":""]),disable:v.value||_.value&&B.value&&O.value==="against",loading:v.value&&m.value==="against",onClick:i[5]||(i[5]=K=>o("against"))},null,8,["outline","class","disable","loading"]),V(Te,{color:"orange",outline:_.value?!0:O.value!=="abstain",size:"md",icon:"remove_circle",label:"Absten\xE7\xE3o",class:J(["tw-py-2 tw-rounded-md",!_.value&&O.value==="abstain"?"vote-selected":""]),disable:v.value||_.value&&B.value&&O.value==="abstain",loading:v.value&&m.value==="abstain",onClick:i[6]||(i[6]=K=>o("abstain"))},null,8,["outline","class","disable","loading"])],2)])])):G("",!0),V(bt,{modelValue:j.value,"onUpdate:modelValue":i[7]||(i[7]=K=>j.value=K),"pdf-url":ue.value,title:he.value},null,8,["modelValue","pdf-url","title"])])]}),_:1},8,["modelValue"]))}};var mr=je(fr,[["__scopeId","data-v-45a0a2b7"]]);function hr(e){const l=Z(!1),s=Z((e==null?void 0:e.value)||null),n=Z(0),t=Z(null),d=u(()=>{const m=Fe.getItem("unit_id_num");return m?parseInt(m):null});async function v(){var m;l.value=!0;try{const y=await Ae.get("/pauta",{params:{session_status:"started",per_page:1}}),E=((m=y==null?void 0:y.data)==null?void 0:m.data)||[];E.length>0?s.value=E[0].id:s.value=null}catch(y){console.error(y),s.value=null}finally{l.value=!1}}function p(m,y){if(!d.value)return;const E=Date.now(),k=s.value;if(t.value===k&&E-n.value<500){console.log("[useSessionAgenda] ensureSubscribed ignorado - subscri\xE7\xE3o muito recente");return}const A=`unit.${d.value}.sessions`;if(m.subscribeToChannel(A),k){const $=`unit.${d.value}.agenda.${k}`;m.subscribeToChannel($),t.value!==k||E-n.value>=1e3?(t.value=k,n.value=E,y&&(console.log("[useSessionAgenda] Executando fun\xE7\xF5es de carregamento para agenda:",k),Object.values(y).forEach(c=>{typeof c=="function"&&c()}))):console.log("[useSessionAgenda] Fun\xE7\xF5es de carregamento ignoradas - subscri\xE7\xE3o muito recente")}}return{loadingAgendas:l,selectedAgendaId:s,unitId:d,loadStartedAgenda:v,ensureSubscribed:p}}function It(e,l,s="small"){const n=Z(null),t=Z([]),d=Z(0),v=Z(0),p=Z(null),m=Z(!1),y=Z(!1),E=Z(0),k=Z(null),A=Z(null),$=s==="small"?"small-expedient":s==="miscellaneous"?"miscellaneous-subject":"large-expedient",c=u(()=>{var b;return((b=n.value)==null?void 0:b.status)==="finished"?n.value:null}),w=u(()=>c.value?(c.value.allocated_minutes||0)+(c.value.additional_minutes||0):0),S=u(()=>{if(!c.value)return 0;const b=c.value.used_seconds||0;return Math.floor(b/60)}),H=u(()=>c.value?(c.value.used_seconds||0)%60:0),L=u(()=>{var b;return((b=c.value)==null?void 0:b.finished_at)||null});function F(){k.value=null,A.value=null}function Q(){var N,_,M,ae;if(!n.value){d.value=0,v.value=0,F();return}const b=n.value,U=(((N=b.allocated_minutes)!=null?N:0)+((_=b.additional_minutes)!=null?_:0))*60;if(U<=0){d.value=0,v.value=0;return}if(b.status==="paused"&&typeof b.calculated_remaining_seconds=="number"){const re=Math.max(0,Math.min(U,Math.floor(b.calculated_remaining_seconds))),W=Math.max(0,U-re);d.value=re,v.value=Math.floor(W);return}let O;if(b.status==="speaking"&&A.value!=null&&k.value!=null){const re=Math.max(0,(Date.now()-A.value)/1e3);O=k.value+re}else{const re=(ae=(M=b.calculated_used_seconds)!=null?M:b.used_seconds)!=null?ae:0;if(O=re,b.status==="speaking"&&b.started_at){const W=(new Date-new Date(b.started_at))/1e3;O=re+Math.max(0,W)}}O=Math.max(0,O);const B=Math.min(U,Math.floor(O)),P=Math.max(0,U-B);v.value=B,d.value=P}async function q(){var U,O,B,P;if(y.value){console.log(`[useSpeech ${s}] loadSpeechStatus j\xE1 em andamento, ignorando.`);return}const b=Date.now();if(b-E.value<100){console.log(`[useSpeech ${s}] loadSpeechStatus chamado muito recentemente, ignorando.`);return}if(!e.value||!l.value){n.value=null,t.value=[],d.value=0,v.value=0,F(),p.value&&(clearInterval(p.value),p.value=null);return}y.value=!0,E.value=b;try{const N=await Ae.get(`/pauta/${e.value}/${$}/speeches/status`);if(((U=N==null?void 0:N.data)==null?void 0:U.success)&&((O=N==null?void 0:N.data)==null?void 0:O.data)){const _=N.data.data.speeches||[];t.value=_;let M=_.find(ae=>ae.proponent_id===parseInt(l.value)&&(ae.status==="speaking"||ae.status==="paused"));if(M||(M=_.find(ae=>ae.proponent_id===parseInt(l.value))),M){if(n.value=M,M.status==="speaking"||M.status==="paused"){const ae=(P=(B=M.calculated_used_seconds)!=null?B:M.used_seconds)!=null?P:0;k.value=Math.max(0,Number(ae)),A.value=Date.now()}else F();Q(),M.status==="speaking"||M.status==="paused"?(m.value||(m.value=!0),p.value||(p.value=setInterval(()=>{Q()},1e3))):M.status==="finished"?(F(),p.value&&(clearInterval(p.value),p.value=null)):(F(),m.value=!1,p.value&&(clearInterval(p.value),p.value=null))}else n.value=null,d.value=0,v.value=0,F(),m.value=!1,p.value&&(clearInterval(p.value),p.value=null)}else t.value=[]}catch(N){console.error(`Erro ao carregar status da fala (${s}):`,N),n.value=null,d.value=0,v.value=0,F()}finally{y.value=!1}}function D(){F(),p.value&&(clearInterval(p.value),p.value=null)}return{currentSpeech:n,allSpeeches:t,remainingTime:d,usedSeconds:v,showSpeechModal:m,loadingSpeech:y,finishedSpeech:c,finishedSpeechTotalMinutes:w,finishedSpeechUsedMinutes:S,finishedSpeechUsedSeconds:H,finishedSpeechFinishedAt:L,loadSpeechStatus:q,cleanup:D}}function pr(e,l){const s=Z([]),n=Z(!1);async function t(){var d,v,p,m,y,E;if(!e.value||!l.value){s.value=[];return}try{const k=await Ae.get(`/pauta/${e.value}/session-logs`);if(((d=k==null?void 0:k.data)==null?void 0:d.success)&&((v=k==null?void 0:k.data)==null?void 0:v.data)){const A=k.data.data.logs||[],$=Pe(),c=A.filter(q=>{var D,b;return((D=q.event_data)==null?void 0:D.proponent_id)===parseInt(l.value)||q.user_id===((b=$.user)==null?void 0:b.id)}),w=[],S=c.find(q=>q.event_type==="session_attendance"&&q.event_subtype==="attendance_registered");S&&w.push({icon:"how_to_reg",color:"green",label:"Presen\xE7a registrada no qu\xF3rum",time:Be(S.occurred_at)});const H=c.find(q=>q.event_type==="small_expedient"&&(q.event_subtype==="register_speaker"||q.event_subtype==="small_expedient_registered"));if(H){const{useSessionSettings:q}=await Qe(()=>Promise.resolve().then(function(){return dt}),void 0),D=q();await D.loadSettings(),w.push({icon:"assignment",color:"secondary",label:`Inscrito no ${D.smallExpedientName.value||"Pequeno Expediente"}`,time:Be(H.occurred_at)})}const L=c.find(q=>q.event_type==="large_expedient"&&(q.event_subtype==="register_speaker"||q.event_subtype==="large_expedient_registered"));if(L){const{useSessionSettings:q}=await Qe(()=>Promise.resolve().then(function(){return dt}),void 0),D=q();await D.loadSettings(),w.push({icon:"assignment_turned_in",color:"orange",label:`Inscrito no ${D.largeExpedientName.value||"Grande Expediente"}`,time:Be(L.occurred_at)})}const F=c.filter(q=>q.event_type==="small_expedient_speech");if(F.length>0){const q=F.find(b=>b.event_subtype==="speech_started"),D=F.find(b=>b.event_subtype==="speech_finished");if(q&&w.push({icon:"mic",color:"primary",label:"Fala iniciada",time:Be(q.occurred_at)}),D){const b=((p=D.event_data)==null?void 0:p.total_minutes_allocated)||0,U=((m=D.event_data)==null?void 0:m.total_seconds_used)||0,O=Math.floor(U/60);w.push({icon:"mic_off",color:"grey",label:`Fala finalizada (${O}min de ${b}min dispon\xEDveis)`,time:Be(D.occurred_at)})}}const Q=c.filter(q=>q.event_type==="large_expedient_speech");if(Q.length>0){const q=Q.find(b=>b.event_subtype==="speech_started"),D=Q.find(b=>b.event_subtype==="speech_finished");if(q){const{useSessionSettings:b}=await Qe(()=>Promise.resolve().then(function(){return dt}),void 0),U=b();await U.loadSettings(),w.push({icon:"mic",color:"orange",label:`Fala iniciada (${U.largeExpedientName.value||"Grande Expediente"})`,time:Be(q.occurred_at)})}if(D){const{useSessionSettings:b}=await Qe(()=>Promise.resolve().then(function(){return dt}),void 0),U=b();await U.loadSettings();const O=((y=D.event_data)==null?void 0:y.total_minutes_allocated)||0,B=((E=D.event_data)==null?void 0:E.total_seconds_used)||0,P=Math.floor(B/60);w.push({icon:"mic_off",color:"grey",label:`Fala finalizada - ${U.largeExpedientName.value||"Grande Expediente"} (${P}min de ${O}min dispon\xEDveis)`,time:Be(D.occurred_at)})}}s.value=w}}catch(k){console.error("Erro ao carregar intera\xE7\xF5es da sess\xE3o:",k),s.value=[]}}return{sessionInteractions:s,loadingSessionInteractions:n,loadSessionInteractions:t}}function wr(e,l,s,n={}){const t=Xe();Pe();const{onQuorumStarted:d,onQuorumFinalized:v,onSmallExpedientStarted:p,onSmallExpedientFinalized:m,onSmallExpedientRegistration:y,onSmallExpedientOrderUpdated:E,onLargeExpedientStarted:k,onLargeExpedientFinalized:A,onLargeExpedientRegistration:$,onLargeExpedientOrderUpdated:c,onMiscellaneousSubjectStarted:w,onMiscellaneousSubjectFinalized:S,onMiscellaneousSubjectRegistration:H,onMiscellaneousSubjectOrderUpdated:L,onVotingStarted:F,onVotingReadingStarted:Q,onVotingReadingFinished:q,onVotingVoteRegistered:D,onSpeechStarted:b,onSpeechPaused:U,onSpeechResumed:O,onSpeechTimeAdded:B,onSpeechFinished:P,onSessionAttendance:N,onSessionAbsences:_,onVoiceRequestRegistered:M,onVoiceRequestRemoved:ae,onVoiceRequestSpeechStarted:re,onVoiceRequestSpeechPaused:W,onVoiceRequestSpeechResumed:r,onVoiceRequestSpeechTimeAdded:z,onVoiceRequestSpeechFinished:j,onSpeechAsideStarted:ue,onSpeechAsideFinished:he}=n;function xe(){d&&t.on("quorum-started",o=>{g(o,"agendaId")&&(d(o),fe.success("Qu\xF3rum iniciado! Voc\xEA j\xE1 pode marcar sua presen\xE7a."))}),v&&t.on("quorum-finalized",o=>{g(o,"agendaId")&&(v(o),fe.warning("O qu\xF3rum foi finalizado. Aguarde um novo qu\xF3rum ser iniciado."))}),p&&t.on("small-expedient-started",async o=>{if(g(o,"agendaId")){const{useExpedientStore:h}=await Qe(()=>Promise.resolve().then(function(){return nt}),void 0);h().invalidateStatusCache("small"),await p(o)}}),m&&t.on("small-expedient-finalized",async o=>{g(o,"agendaId")&&await m(o)}),y&&t.on("small-expedient-registration",async o=>{g(o,"agendaId")&&await y(o)}),E&&t.on("small-expedient-order-updated",async o=>{g(o,"agendaId")&&await E(o)}),k&&t.on("large-expedient-started",o=>{g(o,"agendaId")&&k(o)}),A&&t.on("large-expedient-finalized",async o=>{g(o,"agendaId")&&await A(o)}),$&&t.on("large-expedient-registration",async o=>{g(o,"agendaId")&&await $(o)}),c&&t.on("large-expedient-order-updated",async o=>{g(o,"agendaId")&&await c(o)}),w&&t.on("miscellaneous-subject-started",async o=>{if(g(o,"agendaId")){const{useExpedientStore:h}=await Qe(()=>Promise.resolve().then(function(){return nt}),void 0);h().invalidateStatusCache("miscellaneous"),await w(o)}}),S&&t.on("miscellaneous-subject-finalized",async o=>{g(o,"agendaId")&&await S(o)}),H&&t.on("miscellaneous-subject-registration",async o=>{g(o,"agendaId")&&await H(o)}),L&&t.on("miscellaneous-subject-order-updated",async o=>{g(o,"agendaId")&&await L(o)}),F&&t.on("voting-started",async o=>{g(o,"agendaId")&&(await F(o),fe.info("Vota\xE7\xE3o iniciada na sess\xE3o."))}),Q&&t.on("voting-reading-started",async o=>{if(g(o,"agendaId")){await Q(o);const h=o.type==="reading",i=o.type==="reading"?o.proposition_display_type==="apresentacao"?"Apresenta\xE7\xE3o em Plen\xE1rio":"Leitura no Plen\xE1rio":o.type==="secret_voting"?"Vota\xE7\xE3o Secreta":"Vota\xE7\xE3o";h||fe.info(`${i} iniciada.`)}}),q&&t.on("voting-reading-finished",async o=>{if(g(o,"agendaId")){await q(o);const h=(o==null?void 0:o.type)||"reading",i=h==="secret_voting"?"Vota\xE7\xE3o secreta encerrada.":h==="voting"?"Vota\xE7\xE3o encerrada.":h==="reading"?o.proposition_display_type==="apresentacao"?"Apresenta\xE7\xE3o encerrada.":"Leitura encerrada.":"Vota\xE7\xE3o encerrada.";fe.info(i)}}),D&&t.on("voting-vote-registered",async o=>{g(o,"agendaId")&&await D(o)}),b&&t.on("speech-started",async o=>{g(o,"agendaId")&&(await b(o),we(o,"proponentId")&&fe.success("Sua fala foi iniciada!"))}),U&&t.on("speech-paused",async o=>{g(o,"agendaId")&&(await U(o),we(o,"proponentId")&&fe.info("Sua fala foi pausada."))}),O&&t.on("speech-resumed",async o=>{g(o,"agendaId")&&(await O(o),we(o,"proponentId")&&fe.success("Sua fala foi retomada!"))}),B&&t.on("speech-time-added",async o=>{g(o,"agendaId")&&(await B(o),we(o,"proponentId")&&fe.success(`Tempo adicional de ${o.minutes} minuto(s) adicionado!`))}),P&&t.on("speech-finished",async o=>{g(o,"agendaId")&&(await P(o),we(o,"proponentId")&&fe.warning("Sua fala foi finalizada."))}),N&&t.on("session-attendance",o=>{g(o,"agendaId","proponentId")&&N(o)}),_&&t.on("session-absences",o=>{g(o,"agendaId","proponentId")&&_(o)}),M&&t.on("voice-request-registered",async o=>{g(o,"agendaId")&&await M(o)}),ae&&t.on("voice-request-removed",async o=>{g(o,"agendaId")&&await ae(o)}),re&&t.on("voice-request-speech-started",async o=>{g(o,"agendaId","proponentId")&&await re(o)}),W&&t.on("voice-request-speech-paused",async o=>{g(o,"agendaId","proponentId")&&await W(o)}),r&&t.on("voice-request-speech-resumed",async o=>{g(o,"agendaId","proponentId")&&await r(o)}),z&&t.on("voice-request-speech-time-added",async o=>{g(o,"agendaId","proponentId")&&await z(o)}),j&&t.on("voice-request-speech-finished",async o=>{g(o,"agendaId","proponentId")&&await j(o)}),ue&&t.on("speech-aside-started",async o=>{g(o,"agendaId")&&await ue(o)}),he&&t.on("speech-aside-finished",async o=>{g(o,"agendaId")&&await he(o)})}function we(o,h){if(!o||!h)return!1;const i=l.value?parseInt(l.value):null,x=o[h]!=null?parseInt(o[h]):null;return i!=null&&x!=null&&i===x}function g(o,...h){if(!o)return!1;if(h.includes("agendaId")){const i=parseInt(o.agendaId),x=e.value?parseInt(e.value):null;if(i!==x&&!(!x&&(s==null?void 0:s.value)===i))return!1}if(h.includes("proponentId")){const i=parseInt(o.proponentId),x=l.value?parseInt(l.value):null;if(i!==x)return!1}return!0}return{setupSocketListeners:xe}}const br={key:0,class:"dashboard-tabs-container"},Sr={class:"tab-panels-container"},_r={class:"tab-panel"},yr={class:"tab-panel"},xr={class:"tab-panel"},qr={class:"tab-panel"},$r={class:"tab-panel"},Ir={key:1,class:"modals-container"},Ar={key:2,class:"dashboard-content"},kr={class:"dashboard-scroll-area"},Vr={class:"dashboard-greeting"},Rr={class:"greeting-content"},Tr={class:"greeting-text"},Cr={class:"greeting-title"},zr={class:"greeting-subtitle"},Pr={key:0,class:"future-sessions-list"},Mr={key:1,class:"dashboard-empty-wrapper"},Lr={class:"empty-state-card"},Er={class:"empty-state-content"},Dr={__name:"Dashboard",setup(e){const l=Pe(),s=Xe(),n=zt(),t=Z(null),d=Z(null),v=Z([]),p=Z(!1),m=Z("home"),y=Z(!1),E=Z(null),k=Z("Documento PDF");function A(i,x="Documento PDF"){E.value=i,k.value=x,y.value=!0}const $=u(()=>[{name:"home",label:"In\xEDcio",icon:"home"},{name:"quorum",label:"Qu\xF3rum",icon:"groups"},...n.enableSmallExpedient.value?[{name:"small-expedient",label:n.smallExpedientName.value||"Pequeno Expediente",icon:"timer"}]:[],...n.enableLargeExpedient.value?[{name:"large-expedient",label:n.largeExpedientName.value||"Grande Expediente",icon:"assignment_turned_in"}]:[],...n.enableMiscellaneousSubjects.value?[{name:"miscellaneous-subject",label:n.miscellaneousSubjectsName.value||"Assuntos Diversos",icon:"topic"}]:[]]);function c(i){m.value=i,console.log("[Dashboard] Tab mudou para:",i)}const w=u(()=>{var i;return((i=t.value)==null?void 0:i.id)||null}),S=hr(w),H=u(()=>{var i;return((i=l.user)==null?void 0:i.proponent_id)||null}),L=Kt(S.selectedAgendaId),F=Gt(),Q=it(S.selectedAgendaId,"small"),q=it(S.selectedAgendaId,"large"),D=it(S.selectedAgendaId,"miscellaneous"),b=Yt(S.selectedAgendaId),U=It(S.selectedAgendaId,H,"small"),O=It(S.selectedAgendaId,H,"large"),B=It(S.selectedAgendaId,H,"miscellaneous"),P=Xt(S.selectedAgendaId),N=pr(S.selectedAgendaId,H),_=u({get:()=>U.showSpeechModal.value,set:i=>{U.showSpeechModal.value=i}}),M=u({get:()=>O.showSpeechModal.value,set:i=>{O.showSpeechModal.value=i}}),ae=u({get:()=>B.showSpeechModal.value,set:i=>{B.showSpeechModal.value=i}}),re=u({get:()=>b.showReadingModal.value,set:i=>{b.showReadingModal.value=i}}),W=u({get:()=>b.showVotingModal.value&&t.value&&d.value&&!L.isPresent.value?!1:b.showVotingModal.value,set:i=>{if(i&&t.value&&d.value&&!L.isPresent.value){fe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.");return}b.showVotingModal.value=i}});_e(()=>b.showVotingModal.value,i=>{i&&t.value&&d.value&&(L.isPresent.value||(console.log("[Dashboard] Tentativa de abrir modal de vota\xE7\xE3o sem presen\xE7a no quorum - bloqueando"),b.showVotingModal.value=!1,fe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")))},{immediate:!1});function r(){const i=new Date().getHours();return i<12?"Bom dia!":i<18?"Boa tarde!":"Boa noite!"}function z(){const i=new Date;return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}function j(i){if(!(i!=null&&i.session_date))return!1;const x=z();return i.session_date>x}async function ue(){var i;p.value=!0;try{const x=await Ae.get("/pauta",{params:{session_status:"started",per_page:1}}),X=((i=x==null?void 0:x.data)==null?void 0:i.data)||[];if(X.length>0){const se=X[0];t.value=se,d.value=se,v.value=[],se.id&&(S.selectedAgendaId.value=se.id);return}t.value=null,d.value=null,await he()}catch(x){console.error("Erro ao carregar sess\xE3o:",x),t.value=null,d.value=null,v.value=[]}finally{p.value=!1}}async function he(){var i;try{const x=z(),X=await Ae.get("/pauta",{params:{date_from:x,status:"published",per_page:50}}),ie=[...((i=X==null?void 0:X.data)==null?void 0:i.data)||[]].sort((ce,de)=>{const be=ce.session_date||"",ye=de.session_date||"";return be!==ye?be.localeCompare(ye):(ce.session_time||"").localeCompare(de.session_time||"")}),ne=await Promise.all(ie.map(async ce=>{const de=await we(ce.id);return{session:ce,propositionGroups:de}}));v.value=ne}catch(x){console.error("Erro ao carregar sess\xF5es futuras:",x),v.value=[]}}const xe=["ata","apresentacao","votacao_turno_unico","votacao_1_turno","votacao_2_turno","votacao_ata","outros"];async function we(i){var x;try{const X=await Ae.get(`/pauta/${i}/agenda-itens-controle`),se=((x=X==null?void 0:X.data)==null?void 0:x.data)||{},ie={};for(const ne of xe){const ce=se[ne]||[];ie[ne]=ce.filter(de=>de.proposition).map(de=>{var be,ye;return{id:de.proposition.id,number:de.proposition.number,year:de.proposition.year,title:de.proposition.title,species:((be=de.proposition.species)==null?void 0:be.name)||((ye=de.proposition.species)==null?void 0:ye.title),proponents:de.proposition.proponents||[],protocol_document:de.proposition.protocol_document||de.proposition.protocolDocument||null}})}return ie}catch(X){return console.error("Erro ao carregar proposi\xE7\xF5es da sess\xE3o:",X),Object.fromEntries(xe.map(se=>[se,[]]))}}const{setupSocketListeners:g}=wr(S.selectedAgendaId,H,u(()=>{var i;return((i=t.value)==null?void 0:i.id)||null}),{onQuorumStarted:async()=>{m.value="quorum",await L.loadQuorumStatus(),await L.loadCurrentAttendanceStatus()},onQuorumFinalized:async()=>{await L.loadQuorumStatus(),await L.loadCurrentAttendanceStatus()},onSmallExpedientStarted:async()=>{n.enableSmallExpedient.value&&(m.value="small-expedient");const{useExpedientStore:i}=await Qe(()=>Promise.resolve().then(function(){return nt}),void 0);i().invalidateStatusCache("small"),await Q.loadStatus(!0)},onSmallExpedientFinalized:async i=>{await Q.loadStatus(),Q.isRegistered.value?fe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${Q.registrationOrder.value||"N/A"}\xBA.`):fe.warning(`As inscri\xE7\xF5es de ${n.smallExpedientName.value.toLowerCase()} foram finalizadas.`)},onSmallExpedientRegistration:async i=>{i.source==="controle"&&(Q.isRegistered.value=i.registered||!1),await Q.loadStatus(!0)},onSmallExpedientOrderUpdated:async()=>{await Q.loadStatus(!0)},onLargeExpedientStarted:async()=>{n.enableLargeExpedient.value&&(m.value="large-expedient");const{useExpedientStore:i}=await Qe(()=>Promise.resolve().then(function(){return nt}),void 0);i().invalidateStatusCache("large"),await q.loadStatus(!0)},onLargeExpedientFinalized:async i=>{await q.loadStatus(),q.isRegistered.value?fe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${q.registrationOrder.value||"N/A"}\xBA.`):fe.warning(`As inscri\xE7\xF5es de ${n.largeExpedientName.value.toLowerCase()} foram finalizadas.`)},onLargeExpedientRegistration:async i=>{i.source==="controle"&&(q.isRegistered.value=i.registered||!1),await q.loadStatus(!0)},onLargeExpedientOrderUpdated:async()=>{await q.loadStatus(!0)},onMiscellaneousSubjectStarted:async()=>{n.enableMiscellaneousSubjects.value&&(m.value="miscellaneous-subject");const{useExpedientStore:i}=await Qe(()=>Promise.resolve().then(function(){return nt}),void 0);i().invalidateStatusCache("miscellaneous"),await D.loadStatus(!0)},onMiscellaneousSubjectFinalized:async i=>{await D.loadStatus(),D.isRegistered.value?fe.warning(`As inscri\xE7\xF5es foram finalizadas. Voc\xEA est\xE1 inscrito na posi\xE7\xE3o ${D.registrationOrder.value||"N/A"}\xBA.`):fe.warning(`As inscri\xE7\xF5es de ${n.miscellaneousSubjectsName.value.toLowerCase()} foram finalizadas.`)},onMiscellaneousSubjectRegistration:async i=>{i.source==="controle"&&(D.isRegistered.value=i.registered||!1),await D.loadStatus(!0)},onMiscellaneousSubjectOrderUpdated:async()=>{await D.loadStatus(!0)},onVotingStarted:async()=>{L.isPresent.value?await b.loadVotingStatus():(await b.loadVotingStatus(),b.showVotingModal.value&&(b.showVotingModal.value=!1))},onVotingReadingStarted:async i=>{var x;if((i==null?void 0:i.type)&&i.type!=="reading"&&!L.isPresent.value){await b.loadVotingStatus(!0),b.showVotingModal.value&&(b.showVotingModal.value=!1),fe.warning("Voc\xEA precisa estar presente no qu\xF3rum para participar da vota\xE7\xE3o.");return}(i==null?void 0:i.type)==="reading"&&await new Promise(X=>setTimeout(X,550)),await b.loadVotingStatus(!0),(i==null?void 0:i.type)==="reading"&&b.activeReading.value&&(b.showReadingModal.value=!0,b.showVotingModal.value=!1),(i==null?void 0:i.type)==="reading"&&!b.activeReading.value&&((x=i.readingId)!=null?x:i.reading_id)&&(await new Promise(X=>setTimeout(X,450)),await b.loadVotingStatus(!0),b.activeReading.value&&(b.showReadingModal.value=!0,b.showVotingModal.value=!1))},onVotingReadingFinished:b.loadVotingStatus,onVotingVoteRegistered:b.loadVotingStatus,onSpeechStarted:async i=>{var X,se,ie;const x=i.speech_type||"small";x==="small"?(U.currentSpeech.value=null,await U.loadSpeechStatus(),((X=U.currentSpeech.value)==null?void 0:X.status)==="speaking"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(O.currentSpeech.value=null,await O.loadSpeechStatus(),((se=O.currentSpeech.value)==null?void 0:se.status)==="speaking"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(B.currentSpeech.value=null,await B.loadSpeechStatus(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="speaking"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))},onSpeechPaused:async i=>{var X,se,ie;const x=i.speech_type||"small";x==="small"?(await U.loadSpeechStatus(),((X=U.currentSpeech.value)==null?void 0:X.status)==="paused"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(await O.loadSpeechStatus(),((se=O.currentSpeech.value)==null?void 0:se.status)==="paused"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(await B.loadSpeechStatus(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="paused"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))},onSpeechResumed:async i=>{var X,se,ie;const x=i.speech_type||"small";x==="small"?(await U.loadSpeechStatus(),((X=U.currentSpeech.value)==null?void 0:X.status)==="speaking"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(await O.loadSpeechStatus(),((se=O.currentSpeech.value)==null?void 0:se.status)==="speaking"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(await B.loadSpeechStatus(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="speaking"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))},onSpeechTimeAdded:async i=>{const x=i.speech_type||"small";x==="small"?await U.loadSpeechStatus():x==="large"?await O.loadSpeechStatus():x==="miscellaneous"&&await B.loadSpeechStatus()},onSpeechFinished:async i=>{var X,se,ie;const x=i.speech_type||"small";x==="small"?(await U.loadSpeechStatus(),await N.loadSessionInteractions(),((X=U.currentSpeech.value)==null?void 0:X.status)==="finished"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(await O.loadSpeechStatus(),await N.loadSessionInteractions(),((se=O.currentSpeech.value)==null?void 0:se.status)==="finished"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(await B.loadSpeechStatus(),await N.loadSessionInteractions(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="finished"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))},onSessionAttendance:async i=>{F.isPresent=i.present||!1,await L.loadCurrentAttendanceStatus(),!i.present&&b.showVotingModal.value&&(b.showVotingModal.value=!1,fe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o.")),i.source==="controle"&&fe.success(i.present?"Presen\xE7a confirmada pelo controle":"Presen\xE7a removida pelo controle")},onSessionAbsences:async i=>{await L.loadCurrentAttendanceStatus(),i.absenceReason&&(L.absenceReason.value=i.absenceReason),i.justified&&i.absenceReason&&fe.info("Aus\xEAncia justificada pelo controle")},onVoiceRequestRegistered:async i=>{await P.loadStatus(!0)},onVoiceRequestRemoved:async i=>{await P.loadStatus(!0)},onVoiceRequestSpeechStarted:async i=>{await P.loadStatus(!0)},onVoiceRequestSpeechPaused:async i=>{await P.loadStatus(!0)},onVoiceRequestSpeechResumed:async i=>{await P.loadStatus(!0)},onVoiceRequestSpeechTimeAdded:async i=>{await P.loadStatus(!0)},onVoiceRequestSpeechFinished:async i=>{await P.loadStatus(!0)},onSpeechAsideStarted:async i=>{var X,se,ie;const x=(i==null?void 0:i.speech_type)||"small";await new Promise(ne=>setTimeout(ne,150)),x==="small"?(await U.loadSpeechStatus(),((X=U.currentSpeech.value)==null?void 0:X.status)==="paused"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(await O.loadSpeechStatus(),((se=O.currentSpeech.value)==null?void 0:se.status)==="paused"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(await B.loadSpeechStatus(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="paused"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))},onSpeechAsideFinished:async i=>{var X,se,ie;const x=(i==null?void 0:i.speech_type)||"small";x==="small"?(await U.loadSpeechStatus(),((X=U.currentSpeech.value)==null?void 0:X.status)==="speaking"&&(m.value="small-expedient",U.showSpeechModal.value=!0)):x==="large"?(await O.loadSpeechStatus(),((se=O.currentSpeech.value)==null?void 0:se.status)==="speaking"&&(m.value="large-expedient",O.showSpeechModal.value=!0)):x==="miscellaneous"&&(await B.loadSpeechStatus(),((ie=B.currentSpeech.value)==null?void 0:ie.status)==="speaking"&&(m.value="miscellaneous-subject",B.showSpeechModal.value=!0))}});function o(){const i=Fe.getItem("unit_id_num");if(i&&s.isConnected){const x=`unit.${i}.sessions`;s.subscribeToChannel(x)}s.on("session-status-changed",x=>{if(console.log("[Vereador] Status da sess\xE3o alterado:",x),x.status==="started"&&x.agendaId){const X=Fe.getItem("unit_id_num");if(X&&s.isConnected){const se=`unit.${X}.agenda.${x.agendaId}`;s.subscribeToChannel(se)}ue()}else x.status==="closed"&&(t.value=null,d.value=null,v.value=[],he())})}De("quorum",L),De("smallExpedient",Q),De("largeExpedient",q),De("miscellaneousSubject",D),De("voting",b),De("voiceRequest",P),De("smallSpeech",U),De("largeSpeech",O),De("miscellaneousSubjectSpeech",B),De("sessionAgenda",S),De("sessionSettings",n),De("sessionInteractions",N),_e(()=>{var i;return(i=t.value)==null?void 0:i.id},async(i,x)=>{i&&i!==x&&(S.selectedAgendaId.value=i,s.isConnected&&S.ensureSubscribed(s,{loadQuorumStatus:L.loadQuorumStatus,loadCurrentAttendanceStatus:L.loadCurrentAttendanceStatus,loadSmallExpedientStatus:Q.loadStatus,loadLargeExpedientStatus:q.loadStatus,loadMiscellaneousSubjectStatus:D.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:P.loadStatus}),await Promise.all([L.loadQuorumStatus(),L.loadCurrentAttendanceStatus(),Q.loadStatus(),q.loadStatus(),D.loadStatus(),b.loadVotingStatus(),U.loadSpeechStatus(),O.loadSpeechStatus(),B.loadSpeechStatus(),P.loadStatus(),N.loadSessionInteractions()]),g())},{immediate:!0}),_e(()=>L.isPresent.value,i=>{t.value&&d.value&&!i&&b.showVotingModal.value&&(b.showVotingModal.value=!1,fe.warning("Voc\xEA precisa estar presente no qu\xF3rum para acessar a vota\xE7\xE3o."))});let h=null;return ut(async()=>{if(await n.loadSettings(),o(),await ue(),s.isConnected)(()=>{var x;(x=t.value)!=null&&x.id&&S.ensureSubscribed(s,{loadQuorumStatus:L.loadQuorumStatus,loadCurrentAttendanceStatus:L.loadCurrentAttendanceStatus,loadSmallExpedientStatus:Q.loadStatus,loadLargeExpedientStatus:q.loadStatus,loadMiscellaneousSubjectStatus:D.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:P.loadStatus})})();else{const i=setInterval(()=>{var x;s.isConnected&&((x=t.value)!=null&&x.id&&S.ensureSubscribed(s,{loadQuorumStatus:L.loadQuorumStatus,loadCurrentAttendanceStatus:L.loadCurrentAttendanceStatus,loadSmallExpedientStatus:Q.loadStatus,loadLargeExpedientStatus:q.loadStatus,loadMiscellaneousSubjectStatus:D.loadStatus,loadVotingStatus:b.loadVotingStatus,loadVoiceRequestStatus:P.loadStatus}),clearInterval(i))},500);setTimeout(()=>clearInterval(i),1e4)}h=setInterval(()=>{ue()},3e4)}),pt(()=>{h&&clearInterval(h),U.cleanup(),O.cleanup()}),(i,x)=>(f(),le(qa,{class:"mobile-dashboard-page"},{default:Y(()=>{var X,se,ie,ne,ce,de,be,ye;return[t.value&&d.value?(f(),C("div",br,[a("div",Sr,[Ye(a("div",_r,[V(kn,{"session-data":d.value,"selected-agenda-id":(X=t.value)==null?void 0:X.id},null,8,["session-data","selected-agenda-id"])],512),[[Ze,m.value==="home"]]),Ye(a("div",yr,[V(Yn,{"session-id":(se=t.value)==null?void 0:se.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Ze,m.value==="quorum"]]),Ye(a("div",xr,[V(Pi,{"session-id":(ie=t.value)==null?void 0:ie.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Ze,m.value==="small-expedient"&&I(n).enableSmallExpedient.value]]),Ye(a("div",qr,[V(Ui,{"session-id":(ne=t.value)==null?void 0:ne.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Ze,m.value==="large-expedient"&&I(n).enableLargeExpedient.value]]),Ye(a("div",$r,[V(Wi,{"session-id":(ce=t.value)==null?void 0:ce.id,"session-data":d.value},null,8,["session-id","session-data"])],512),[[Ze,m.value==="miscellaneous-subject"&&I(n).enableMiscellaneousSubjects.value]])]),V(io,{modelValue:m.value,"onUpdate:modelValue":x[0]||(x[0]=ge=>m.value=ge),tabs:$.value,onTabChange:c},null,8,["modelValue","tabs"])])):G("",!0),t.value&&d.value?(f(),C("div",Ir,[V($t,{modelValue:_.value,"onUpdate:modelValue":x[1]||(x[1]=ge=>_.value=ge),speech:I(U).currentSpeech.value,"remaining-time":I(U).remainingTime.value,"used-seconds":I(U).usedSeconds.value,"expedient-type":I(n).smallExpedientName.value||"Pequeno Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),V($t,{modelValue:M.value,"onUpdate:modelValue":x[2]||(x[2]=ge=>M.value=ge),speech:I(O).currentSpeech.value,"remaining-time":I(O).remainingTime.value,"used-seconds":I(O).usedSeconds.value,"expedient-type":I(n).largeExpedientName.value||"Grande Expediente"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"]),I(n).enableMiscellaneousSubjects.value?(f(),le($t,{key:0,modelValue:ae.value,"onUpdate:modelValue":x[3]||(x[3]=ge=>ae.value=ge),speech:I(B).currentSpeech.value,"remaining-time":I(B).remainingTime.value,"used-seconds":I(B).usedSeconds.value,"expedient-type":I(n).miscellaneousSubjectsName.value||"Assuntos Diversos"},null,8,["modelValue","speech","remaining-time","used-seconds","expedient-type"])):G("",!0),V(fl,{modelValue:re.value,"onUpdate:modelValue":x[4]||(x[4]=ge=>re.value=ge),reading:I(b).activeReading.value,"agenda-id":(de=t.value)==null?void 0:de.id,"has-request":I(P).hasRequest.value,"current-speech":I(P).currentSpeech.value,"request-order":I(P).requestOrder.value,onRequestRegistered:x[5]||(x[5]=ge=>I(P).loadStatus(!0))},null,8,["modelValue","reading","agenda-id","has-request","current-speech","request-order"]),((be=t.value)==null?void 0:be.id)&&I(L).isPresent.value?(f(),le(mr,{key:1,modelValue:W.value,"onUpdate:modelValue":x[6]||(x[6]=ge=>W.value=ge),voting:I(b).activeVoting.value,"agenda-id":t.value.id,"on-vote-registered":I(b).handleVoteRegistered,onVoteRegistered:I(b).handleVoteRegistered},null,8,["modelValue","voting","agenda-id","on-vote-registered","onVoteRegistered"])):G("",!0)])):(f(),C("div",Ar,[a("div",kr,[a("div",Vr,[a("div",Rr,[V(te,{name:"waving_hand",size:"32px",class:"greeting-icon"}),a("div",Tr,[a("div",Cr," Ol\xE1, Ver. "+T(((ye=I(l).user)==null?void 0:ye.first_name)||"Vereador")+"! ",1),a("div",zr,T(r()),1)])])]),v.value.length>0?(f(),C("div",Pr,[(f(!0),C(Ce,null,Ee(v.value,(ge,ke)=>{var Ie;return f(),le(ds,{key:((Ie=ge.session)==null?void 0:Ie.id)||ke,"scheduled-session":ge.session,"proposition-groups":ge.propositionGroups||{},"is-future":j(ge.session),onOpenPdf:A},null,8,["scheduled-session","proposition-groups","is-future"])}),128))])):(f(),C("div",Mr,[a("div",Lr,[a("div",Er,[V(te,{name:"event_busy",size:"80px",color:"grey-5",class:"empty-state-icon"}),x[8]||(x[8]=a("div",{class:"empty-state-title"},"N\xE3o h\xE1 sess\xE3o ativa",-1)),x[9]||(x[9]=a("div",{class:"empty-state-subtitle"}," N\xE3o existe sess\xE3o em andamento no momento. Quando houver sess\xE3o agendada com data futura, ela aparecer\xE1 aqui com a data e as proposi\xE7\xF5es que ser\xE3o votadas. ",-1))])])]))]),V(bt,{modelValue:y.value,"onUpdate:modelValue":x[7]||(x[7]=ge=>y.value=ge),"pdf-url":E.value,title:k.value},null,8,["modelValue","pdf-url","title"])]))]}),_:1}))}};var Qr=je(Dr,[["__scopeId","data-v-478b6c27"]]);export{Qr as default};
